!function(){function getCurrentScript(){var e,t,i=document.querySelectorAll("[data-mindbreeze-lib]");return i&&i[0]?(e=i,t=e[e.length-1]):document.currentScript?document.currentScript:(e=document.getElementsByTagName("script"),t=e[e.length-1])}var Mindbreeze={};Mindbreeze.getCurrentScript=getCurrentScript;var currentScript=getCurrentScript();Mindbreeze.globalExport=!0,currentScript&&currentScript.src&&(Mindbreeze.globalExport=!/^false$/i.test(currentScript.getAttribute("data-global-export")));var ProxyWithFallback;if("undefined"==typeof Proxy){var proxyPolyfill={};Object.getOwnPropertyNames&&(function(e){function t(e){return e?"object"==typeof e||"function"==typeof e:!1}if(!e.Proxy){var i=null;e.a=function(e,n){function s(){}if(!t(e)||!t(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");i=function(){s=function(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}};var r=n;n={get:null,set:null,apply:null,construct:null};for(var a in r){if(!(a in n))throw new TypeError("Proxy polyfill does not support trap '"+a+"'");n[a]=r[a]}"function"==typeof r&&(n.apply=r.apply.bind(r));var o=this,l=!1,u="function"==typeof e;(n.apply||n.construct||u)&&(o=function(){var t=this&&this.constructor===o;if(s(t?"construct":"apply"),t&&n.construct)return n.construct.call(this,e,arguments);if(!t&&n.apply)return n.apply(e,this,arguments);if(u)return t?(t=Array.prototype.slice.call(arguments),t.unshift(e),new(e.bind.apply(e,t))):e.apply(this,arguments);throw new TypeError(t?"not a constructor":"not a function")},l=!0);var c=n.get?function(e){return s("get"),n.get(this,e,o)}:function(e){return s("get"),this[e]},h=n.set?function(e,t){s("set"),n.set(this,e,t,o)}:function(e,t){s("set"),this[e]=t},d={};if(Object.getOwnPropertyNames(e).forEach(function(t){l&&t in o||(Object.defineProperty(o,t,{enumerable:!!Object.getOwnPropertyDescriptor(e,t).enumerable,get:c.bind(e,t),set:h.bind(e,t)}),d[t]=!0)}),r=!0,Object.setPrototypeOf?Object.setPrototypeOf(o,Object.getPrototypeOf(e)):o.__proto__?o.__proto__=e.__proto__:r=!1,n.get||!r)for(var p in e)d[p]||Object.defineProperty(o,p,{get:c.bind(e,p)});return Object.seal(e),Object.seal(o),o},e.a.b=function(t,n){return{proxy:new e.a(t,n),revoke:i}},e.a.revocable=e.a.b,e.Proxy=e.a}}(proxyPolyfill),ProxyWithFallback=proxyPolyfill.Proxy)}else ProxyWithFallback=Proxy;Mindbreeze.warningProxy=function(e,t,i){return ProxyWithFallback?new ProxyWithFallback(e,{get:function(e,n){try{throw new Error('You are using the global variable "'+t+'" from Mindbreeze. This usage is deprecated and will be removed! Please require "'+i+'" to use it.')}catch(s){console.warn(s)}return e[n]}}):e};var Mindbreeze;!function(){if(!Mindbreeze||!Mindbreeze.requirejs){Mindbreeze?require=Mindbreeze:Mindbreeze={};/*
 * ========================================================================
 * @license Copyright Â© Mindbreeze Software GmbH, Linz, Austria, 2005-2015
 *
 * Der Nutzer des Computerprogramms anerkennt, dass der oben stehende
 * Copyright-Vermerk im Sinn des Welturheberrechtsabkommens an der vom
 * Urheber festgelegten Stelle in der Funktion des Computerprogramms
 * angebracht bleibt, um den Vorbehalt des Urheberrechtes genuegend zum
 * Ausdruck zu bringen. Dieser Urheberrechtsvermerk darf weder vom Kunden,
 * Nutzer und/oder von Dritten entfernt, veraendert oder disloziert werden.
 * =========================================================================*/
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.8 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,n){return t&&eachProp(t,function(t,s){(i||!hasProp(e,s))&&(n&&"string"!=typeof t?(e[s]||(e[s]={}),mixin(e[s],t,i,n)):e[s]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,n){var s=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return s.requireType=e,s.requireModules=n,i&&(s.originalError=i),s}function newContext(e){function t(e){var t,i;for(t=0;e[t];t+=1)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,n){var s,r,a,o,l,u,c,h,d,p,m,f=i&&i.split("/"),g=f,v=M.map,_=v&&v["*"];if(e&&"."===e.charAt(0)&&(i?(g=getOwn(M.pkgs,i)?f=[i]:f.slice(0,f.length-1),e=g.concat(e.split("/")),t(e),r=getOwn(M.pkgs,s=e[0]),e=e.join("/"),r&&e===s+"/"+r.main&&(e=s)):0===e.indexOf("./")&&(e=e.substring(2))),n&&v&&(f||_)){for(o=e.split("/"),l=o.length;l>0;l-=1){if(c=o.slice(0,l).join("/"),f)for(u=f.length;u>0;u-=1)if(a=getOwn(v,f.slice(0,u).join("/")),a&&(a=getOwn(a,c))){h=a,d=l;break}if(h)break;!p&&_&&getOwn(_,c)&&(p=getOwn(_,c),m=l)}!h&&p&&(h=p,d=m),h&&(o.splice(0,d,h),e=o.join("/"))}return e}function n(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName?(t.parentNode.removeChild(t),!0):void 0})}function s(e){var t=getOwn(M.paths,e);return t&&isArray(t)&&t.length>1?(n(e),t.shift(),b.require.undef(e),b.require([e]),!0):void 0}function r(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function a(e,t,n,s){var a,o,l,u,c=null,h=t?t.name:null,d=e,p=!0,m="";return e||(p=!1,e="_@r"+(S+=1)),u=r(e),c=u[0],e=u[1],c&&(c=i(c,h,s),o=getOwn(D,c)),e&&(c?m=o&&o.normalize?o.normalize(e,function(e){return i(e,h,s)}):i(e,h,s):(m=i(e,h,s),u=r(m),c=u[0],m=u[1],n=!0,a=b.nameToUrl(m))),l=!c||o||n?"":"_unnormalized"+(A+=1),{prefix:c,name:m,parentMap:t,unnormalized:!!l,url:a,originalName:d,isDefine:p,id:(c?c+"!"+m:m)+l}}function o(e){var t=e.id,i=getOwn(T,t);return i||(i=T[t]=new b.Module(e)),i}function l(e,t,i){var n=e.id,s=getOwn(T,n);!hasProp(D,n)||s&&!s.defineEmitComplete?(s=o(e),s.error&&"error"===t?i(s.error):s.on(t,i)):"defined"===t&&i(D[n])}function u(e,t){var i=e.requireModules,n=!1;t?t(e):(each(i,function(t){var i=getOwn(T,t);i&&(i.error=e,i.events.error&&(n=!0,i.emit("error",e)))}),n||req.onError(e))}function c(){globalDefQueue.length&&(apsp.apply(L,[L.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function h(e){delete T[e],delete k[e]}function d(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,each(e.depMaps,function(n,s){var r=n.id,a=getOwn(T,r);!a||e.depMatched[s]||i[r]||(getOwn(t,r)?(e.defineDep(s,D[r]),e.check()):d(a,t,i))}),i[n]=!0)}function p(){var e,t,i,r,a=1e3*M.waitSeconds,o=a&&b.startTime+a<(new Date).getTime(),l=[],c=[],h=!1,m=!0;if(!_){if(_=!0,eachProp(k,function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||c.push(i),!i.error))if(!i.inited&&o)s(t)?(r=!0,h=!0):(l.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(h=!0,!e.prefix))return m=!1}),o&&l.length)return i=makeError("timeout","Load timeout for modules: "+l,null,l),i.contextName=b.contextName,u(i);m&&each(c,function(e){d(e,{},{})}),o&&!r||!h||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,p()},50)),_=!1}}function m(e){hasProp(D,e[0])||o(a(e[0],null,!0)).init(e[1],e[2])}function f(e,t,i,n){e.detachEvent&&!isOpera?n&&e.detachEvent(n,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return f(t,b.onScriptLoad,"load","onreadystatechange"),f(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(c();L.length;){if(e=L.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var _,y,b,w,x,M={waitSeconds:0,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},T={},k={},C={},L=[],D={},E={},S=1,A=1;return w={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=D[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,i=getOwn(M.pkgs,e.map.id);return t=i?getOwn(M.config,e.map.id+"/"+i.main):getOwn(M.config,e.map.id),t||{}},exports:D[e.map.id]}}},y=function(e){this.events=getOwn(C,e.id)||{},this.map=e,this.shim=getOwn(M.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;return this.shim?(b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})),void 0):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;E[e]||(E[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,n=this.depExports,s=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(r)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=b.execCb(i,r,n,s)}catch(a){e=a}else s=b.execCb(i,r,n,s);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?s=t.exports:void 0===s&&this.usingExports&&(s=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else s=r;this.exports=s,this.map.isDefine&&!this.ignore&&(D[i]=s,req.onResourceLoad&&req.onResourceLoad(b,this.map,this.depMaps)),h(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=a(e.prefix);this.depMaps.push(n),l(n,"defined",bind(this,function(n){var s,r,c,d=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,m=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(d=n.normalize(d,function(e){return i(e,p,!0)})||""),r=a(e.prefix+"!"+d,this.map.parentMap),l(r,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=getOwn(T,r.id),c&&(this.depMaps.push(r),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()),void 0):(s=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(T,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&h(e.map.id)}),u(e)}),s.fromText=bind(this,function(i,n){var r=e.name,l=a(r),c=useInteractive;n&&(i=n),c&&(useInteractive=!1),o(l),hasProp(M.config,t)&&(M.config[r]=M.config[t]);try{req.exec(i)}catch(h){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+h,h,[t]))}c&&(useInteractive=!0),this.depMaps.push(l),b.completeLoad(r),m([r],s)}),n.load(e.name,m,s,M),void 0)})),b.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,n,s;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,s=getOwn(w,e.id))return this.depExports[t]=s(this),void 0;this.depCount+=1,l(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&l(e,"error",bind(this,this.errback))}i=e.id,n=T[i],hasProp(w,i)||!n||n.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(T,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:M,contextName:e,registry:T,defined:D,urlFetched:E,defQueue:L,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=M.pkgs,i=M.shim,n={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?"map"===t?(M.map||(M.map={}),mixin(M[t],e,!0,!0)):mixin(M[t],e,!0):M[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),i[t]=e}),M.shim=i),e.packages&&(each(e.packages,function(e){var i;e="string"==typeof e?{name:e}:e,i=e.location,t[e.name]={name:e.name,location:i||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),M.pkgs=t),eachProp(T,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(i,r,l){var c,h,d;return n.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof i?isFunction(r)?u(makeError("requireargs","Invalid require call"),l):t&&hasProp(w,i)?w[i](T[t.id]):req.get?req.get(b,i,t,s):(h=a(i,t,!1,!0),c=h.id,hasProp(D,c)?D[c]:u(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),b.nextTick(function(){v(),d=o(a(null,t)),d.skipMap=n.skipMap,d.init(i,r,l,{enabled:!0}),p()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,s=e.lastIndexOf("."),r=e.split("/")[0],a="."===r||".."===r;return-1!==s&&(!a||s>1)&&(n=e.substring(s,e.length),e=e.substring(0,s)),b.nameToUrl(i(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(D,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(D,e)||hasProp(T,e)}}),t||(s.undef=function(e){c();var i=a(e,t,!0),n=getOwn(T,e);delete D[e],delete E[i.url],delete C[e],n&&(n.events.defined&&(C[e]=n.events),h(e))}),s},enable:function(e){var t=getOwn(T,e.id);t&&o(e).enable()},completeLoad:function(e){var t,i,n,r=getOwn(M.shim,e)||{},a=r.exports;for(c();L.length;){if(i=L.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);m(i)}if(n=getOwn(T,e),!t&&!hasProp(D,e)&&n&&!n.inited){if(!(!M.enforceDefine||a&&getGlobal(a)))return s(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));m([e,r.deps||[],r.exportsFn])}p()},nameToUrl:function(e,t,i){var n,s,r,a,o,l,u,c,h;if(req.jsExtRegExp.test(e))c=e+(t||"");else{for(n=M.paths,s=M.pkgs,o=e.split("/"),l=o.length;l>0;l-=1){if(u=o.slice(0,l).join("/"),r=getOwn(s,u),h=getOwn(n,u)){isArray(h)&&(h=h[0]),o.splice(0,l,h);break}if(r){a=e===r.name?r.location+"/"+r.main:r.location,o.splice(0,l,a);break}}c=o.join("/"),c+=t||(/\?/.test(c)||i?"":".js"),c=("/"===c.charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":M.baseUrl)+c}return M.urlArgs?c+((-1===c.indexOf("?")?"?":"&")+M.urlArgs):c},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return s(t.id)?void 0:u(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.8",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,n){var s,r,a=defContextName;return isArray(e)||"string"==typeof e||(r=e,isArray(t)?(e=t,t=i,i=n):e=[]),r&&r.context&&(a=r.context),s=getOwn(contexts,a),s||(s=contexts[a]=req.s.newContext(a)),r&&s.configure(r),s.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,i){var n,s=e&&e.config||{};if(isBrowser)return n=req.createNode(s,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&n.attachEvent.toString().indexOf("[native code")<0||isOpera?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null,n;if(isWebWorker)try{importScripts(i),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,r,[t]))}},isBrowser&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,i){var n,s;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(n=currentlyAddingScript||getInteractiveScript(),n&&(e||(e=n.getAttribute("data-requiremodule")),s=contexts[n.getAttribute("data-requirecontext")])),(s?s.defQueue:globalDefQueue).push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),Mindbreeze.requirejs=requirejs,Mindbreeze.require=require,Mindbreeze.define=define}}(),Mindbreeze.define("requireLib",function(){}),function(){function e(e){return/\{\s+\[native code\]/.test(Function.prototype.toString.call(e))}function t(t){return t&&e(t)?t:null}var i=this,n=i._,s={},r=Array.prototype,a=Object.prototype,o=Function.prototype,l=r.push,u=r.slice,c=r.concat,h=a.toString,d=a.hasOwnProperty,p=t(r.forEach),m=t(r.map),f=t(r.reduce),g=t(r.reduceRight),v=t(r.filter),_=t(r.every),y=t(r.some),b=t(r.indexOf),w=t(r.lastIndexOf),x=t(Array.isArray),M=t(Object.keys),T=t(o.bind),k=function(e){return e instanceof k?e:this instanceof k?(this._wrapped=e,void 0):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):i._=k,k.VERSION="1.4.3";var C=k.each=k.forEach=function(e,t,i){if(null!=e)if(p&&e.forEach===p)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,r=e.length;r>n;n++)if(t.call(i,e[n],n,e)===s)return}else for(var a in e)if(k.has(e,a)&&t.call(i,e[a],a,e)===s)return};k.map=k.collect=function(e,t,i){var n=[];return null==e?n:m&&e.map===m?e.map(t,i):(C(e,function(e,s,r){n[n.length]=t.call(i,e,s,r)}),n)};var L="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduce===f)return n&&(t=k.bind(t,n)),s?e.reduce(t,i):e.reduce(t);if(C(e,function(e,r,a){s?i=t.call(n,i,e,r,a):(i=e,s=!0)}),!s)throw new TypeError(L);return i},k.reduceRight=k.foldr=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=k.bind(t,n)),s?e.reduceRight(t,i):e.reduceRight(t);var r=e.length;if(r!==+r){var a=k.keys(e);r=a.length}if(C(e,function(o,l,u){l=a?a[--r]:--r,s?i=t.call(n,i,e[l],l,u):(i=e[l],s=!0)}),!s)throw new TypeError(L);return i},k.find=k.detect=function(e,t,i){var n;return D(e,function(e,s,r){return t.call(i,e,s,r)?(n=e,!0):void 0}),n},k.filter=k.select=function(e,t,i){var n=[];return null==e?n:v&&e.filter===v?e.filter(t,i):(C(e,function(e,s,r){t.call(i,e,s,r)&&(n[n.length]=e)}),n)},k.reject=function(e,t,i){return k.filter(e,function(e,n,s){return!t.call(i,e,n,s)},i)},k.every=k.all=function(e,t,i){t||(t=k.identity);var n=!0;return null==e?n:_&&e.every===_?e.every(t,i):(C(e,function(e,r,a){return(n=n&&t.call(i,e,r,a))?void 0:s}),!!n)};var D=k.some=k.any=function(e,t,i){t||(t=k.identity);var n=!1;return null==e?n:y&&e.some===y?e.some(t,i):(C(e,function(e,r,a){return n||(n=t.call(i,e,r,a))?s:void 0}),!!n)};k.contains=k.include=function(e,t){return null==e?!1:b&&e.indexOf===b?-1!=e.indexOf(t):D(e,function(e){return e===t})},k.invoke=function(e,t){var i=u.call(arguments,2);return k.map(e,function(e){return(k.isFunction(t)?t:e[t]).apply(e,i)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t){return k.isEmpty(t)?[]:k.filter(e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},k.max=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return C(e,function(e,s,r){var a=t?t.call(i,e,s,r):e;a>=n.computed&&(n={value:e,computed:a})}),n.value},k.min=function(e,t,i){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return C(e,function(e,s,r){var a=t?t.call(i,e,s,r):e;a<n.computed&&(n={value:e,computed:a})}),n.value},k.shuffle=function(e){var t,i=0,n=[];return C(e,function(e){t=k.random(i++),n[i-1]=n[t],n[t]=e}),n};var E=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,i){var n=E(t);return k.pluck(k.map(e,function(e,t,s){return{value:e,index:t,criteria:n.call(i,e,t,s)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var S=function(e,t,i,n){var s={},r=E(t||k.identity);return C(e,function(t,a){var o=r.call(i,t,a,e);n(s,o,t)}),s};k.groupBy=function(e,t,i){return S(e,t,i,function(e,t,i){(k.has(e,t)?e[t]:e[t]=[]).push(i)})},k.countBy=function(e,t,i){return S(e,t,i,function(e,t){k.has(e,t)||(e[t]=0),e[t]++})},k.sortedIndex=function(e,t,i,n){i=null==i?k.identity:E(i);for(var s=i.call(n,t),r=0,a=e.length;a>r;){var o=r+a>>>1;i.call(n,e[o])<s?r=o+1:a=o}return r},k.toArray=function(e){return e?k.isArray(e)?u.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:u.call(e,0,t)},k.initial=function(e,t,i){return u.call(e,0,e.length-(null==t||i?1:t))},k.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,i){return u.call(e,null==t||i?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var A=function(e,t,i){return C(e,function(e){k.isArray(e)?t?l.apply(i,e):A(e,t,i):i.push(e)}),i};k.flatten=function(e,t){return A(e,t,[])},k.without=function(e){return k.difference(e,u.call(arguments,1))},k.uniq=k.unique=function(e,t,i,n){k.isFunction(t)&&(n=i,i=t,t=!1);var s=i?k.map(e,i,n):e,r=[],a=[];return C(s,function(i,n){(t?n&&a[a.length-1]===i:k.contains(a,i))||(a.push(i),r.push(e[n]))}),r},k.union=function(){return k.uniq(c.apply(r,arguments))},k.intersection=function(e){var t=u.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=c.apply(r,u.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=u.call(arguments),t=k.max(k.pluck(e,"length")),i=new Array(t),n=0;t>n;n++)i[n]=k.pluck(e,""+n);return i},k.object=function(e,t){if(null==e)return{};for(var i={},n=0,s=e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},k.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,s+i):i}if(b&&e.indexOf===b)return e.indexOf(t,i);for(;s>n;n++)if(e[n]===t)return n;return-1},k.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(w&&e.lastIndexOf===w)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var s=n?i:e.length;s--;)if(e[s]===t)return s;return-1},k.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=0,r=new Array(n);n>s;)r[s++]=e,e+=i;return r};var P=function(){};k.bind=function(e,t){var i,n;if(e.bind===T&&T)return T.apply(e,u.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return i=u.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(u.call(arguments)));P.prototype=e.prototype;var s=new P;P.prototype=null;var r=e.apply(s,i.concat(u.call(arguments)));return Object(r)===r?r:s}},k.bindAll=function(e){var t=u.call(arguments,1);return 0==t.length&&(t=k.functions(e)),C(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var i={};return t||(t=k.identity),function(){var n=t.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},k.delay=function(e,t){var i=u.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(u.call(arguments,1)))},k.throttle=function(e,t){var i,n,s,r,a=0,o=function(){a=new Date,s=null,r=e.apply(i,n)};return function(){var l=new Date,u=t-(l-a);return i=this,n=arguments,0>=u?(clearTimeout(s),s=null,a=l,r=e.apply(i,n)):s||(s=setTimeout(o,u)),r}},k.debounce=function(e,t,i){var n,s;return function(){var r=this,a=arguments,o=function(){n=null,i||(s=e.apply(r,a))},l=i&&!n;return clearTimeout(n),n=setTimeout(o,t),l&&(s=e.apply(r,a)),s}},k.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var i=[e];return l.apply(i,arguments),t.apply(this,i)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},k.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=M||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)k.has(e,i)&&(t[t.length]=i);return t},k.values=function(e){var t=[];for(var i in e)k.has(e,i)&&t.push(e[i]);return t},k.pairs=function(e){var t=[];for(var i in e)k.has(e,i)&&t.push([i,e[i]]);return t},k.invert=function(e){var t={};for(var i in e)k.has(e,i)&&(t[e[i]]=i);return t},k.functions=k.methods=function(e){var t=[];for(var i in e)k.isFunction(e[i])&&t.push(i);return t.sort()},k.extend=function(e){return C(u.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},k.pick=function(e){var t={},i=c.apply(r,u.call(arguments,1));return C(i,function(i){i in e&&(t[i]=e[i])}),t},k.omit=function(e){var t={},i=c.apply(r,u.call(arguments,1));for(var n in e)k.contains(i,n)||(t[n]=e[n]);return t},k.defaults=function(e){return C(u.call(arguments,1),function(t){if(t)for(var i in t)null==e[i]&&(e[i]=t[i])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var O=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var s=h.call(e);if(s!=h.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]==e)return n[r]==t;i.push(e),n.push(t);var a=0,o=!0;if("[object Array]"==s){if(a=e.length,o=a==t.length)for(;a--&&(o=O(e[a],t[a],i,n)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(u)&&u instanceof u))return!1;for(var c in e)if(k.has(e,c)&&(a++,!(o=k.has(t,c)&&O(e[c],t[c],i,n))))break;if(o){for(c in t)if(k.has(t,c)&&!a--)break;o=!a}}return i.pop(),n.pop(),o};k.isEqual=function(e,t){return O(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=x||function(e){return"[object Array]"==h.call(e)},k.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==h.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return d.call(e,t)},k.noConflict=function(){return i._=n,this},k.identity=function(e){return e},k.times=function(e,t,i){for(var n=Array(e),s=0;e>s;s++)n[s]=t.call(i,s);return n},k.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};N.unescape=k.invert(N.escape);var I={escape:new RegExp("["+k.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(N.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return N[e][t]})}}),k.result=function(e,t){if(null==e)return null;var i=e[t];return k.isFunction(i)?i.call(e):i},k.mixin=function(e){C(k.functions(e),function(t){var i=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),j.call(this,i.apply(k,e))}})};var Y=0;k.uniqueId=function(e){var t=""+ ++Y;return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,i){i=k.defaults({},i,k.templateSettings);var n=new RegExp([(i.escape||F).source,(i.interpolate||F).source,(i.evaluate||F).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(n,function(t,i,n,a,o){return r+=e.slice(s,o).replace(R,function(e){return"\\"+z[e]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(r+="';\n"+a+"\n__p+='"),s=o+t.length,t}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var a=new Function(i.variable||"obj","_",r)}catch(o){throw o.source=r,o}if(t)return a(t,k);var l=function(e){return a.call(this,e,k)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},k.chain=function(e){return k(e).chain()};var j=function(e){return this._chain?k(e).chain():e};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];k.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],j.call(this,i)}}),C(["concat","join","slice"],function(e){var t=r[e];k.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"undefined"!=typeof Mindbreeze&&"function"==typeof Mindbreeze.define?(Mindbreeze.globalExport?i._=Mindbreeze.warningProxy?Mindbreeze.warningProxy(k,"_","underscore"):k:k.noConflict(),Mindbreeze.define("underscore",function(){return k})):"function"==typeof define&&(k.noConflict(),Mindbreeze.define("underscore",function(){return k}))}.call(this),function(e){function t(e,t,i){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:i;default:throw new Error("Implement me")}}function i(e,t){return kt.call(e,t)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function s(e){yt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function r(e,t){var i=!0;return d(function(){return i&&(s(e),i=!1),t.apply(this,arguments)},t)}function a(e,t){gi[e]||(s(t),gi[e]=!0)}function o(e,t){return function(i){return f(e.call(this,i),t)}}function l(e,t){return function(i){return this.localeData().ordinal(e.call(this,i),t)}}function u(){}function c(e,t){t!==!1&&A(e),p(this,e),this._d=new Date(+e._d)}function h(e){var t=T(e),i=t.year||0,n=t.quarter||0,s=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*o,this._days=+a+7*r,this._months=+s+3*n+12*i,this._data={},this._locale=yt.localeData(),this._bubble()}function d(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var i,n,s;
if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Nt.length>0)for(i in Nt)n=Nt[i],s=t[n],"undefined"!=typeof s&&(e[n]=s);return e}function m(e){return 0>e?Math.ceil(e):Math.floor(e)}function f(e,t,i){for(var n=""+Math.abs(e),s=e>=0;n.length<t;)n="0"+n;return(s?i?"+":"":"-")+n}function g(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function v(e,t){var i;return t=Y(t,e),e.isBefore(t)?i=g(e,t):(i=g(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function _(e,t){return function(i,n){var s,r;return null===n||isNaN(+n)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,s=yt.duration(i,n),y(this,s,e),this}}function y(e,t,i,n){var s=t._milliseconds,r=t._days,a=t._months;n=null==n?!0:n,s&&e._d.setTime(+e._d+s*i),r&&pt(e,"Date",dt(e,"Date")+r*i),a&&ht(e,dt(e,"Month")+a*i),n&&yt.updateOffset(e,r||a)}function b(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function x(e,t,i){var n,s=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(n=0;s>n;n++)(i&&e[n]!==t[n]||!i&&C(e[n])!==C(t[n]))&&a++;return a+r}function M(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ui[e]||ci[t]||t}return e}function T(e){var t,n,s={};for(n in e)i(e,n)&&(t=M(n),t&&(s[t]=e[n]));return s}function k(t){var i,n;if(0===t.indexOf("week"))i=7,n="day";else{if(0!==t.indexOf("month"))return;i=12,n="month"}yt[t]=function(s,r){var a,o,l=yt._locale[t],u=[];if("number"==typeof s&&(r=s,s=e),o=function(e){var t=yt().utc().set(n,e);return l.call(yt._locale,t,s||"")},null!=r)return o(r);for(a=0;i>a;a++)u.push(o(a));return u}}function C(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function L(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function D(e,t,i){return ot(yt([e,11,31+t-i]),t,i).week}function E(e){return S(e)?366:365}function S(e){return 0===e%4&&0!==e%100||0===e%400}function A(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Lt]<0||e._a[Lt]>11?Lt:e._a[Dt]<1||e._a[Dt]>L(e._a[Ct],e._a[Lt])?Dt:e._a[Et]<0||e._a[Et]>23?Et:e._a[St]<0||e._a[St]>59?St:e._a[At]<0||e._a[At]>59?At:e._a[Pt]<0||e._a[Pt]>999?Pt:-1,e._pf._overflowDayOfYear&&(Ct>t||t>Dt)&&(t=Dt),e._pf.overflow=t)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function O(e){return e?e.toLowerCase().replace("_","-"):e}function N(e){for(var t,i,n,s,r=0;r<e.length;){for(s=O(e[r]).split("-"),t=s.length,i=O(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=I(s.slice(0,t).join("-")))return n;if(i&&i.length>=t&&x(s,i,!0)>=t-1)break;t--}r++}return null}function I(e){var t=null;if(!Ot[e]&&It)try{t=yt.locale(),require("./locale/"+e),yt.locale(t)}catch(i){}return Ot[e]}function Y(e,t){return t._isUTC?yt(e).zone(t._offset||0):yt(e).local()}function F(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,i,n=e.match(Rt);for(t=0,i=n.length;i>t;t++)n[t]=fi[n[t]]?fi[n[t]]:F(n[t]);return function(s){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(s,e):n[t];return r}}function R(e,t){return e.isValid()?(t=j(t,e.localeData()),hi[t]||(hi[t]=z(t)),hi[t](e)):e.localeData().invalidDate()}function j(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(jt.lastIndex=0;n>=0&&jt.test(e);)e=e.replace(jt,i),jt.lastIndex=0,n-=1;return e}function V(e,t){var i,n=t._strict;switch(e){case"Q":return Zt;case"DDDD":return Qt;case"YYYY":case"GGGG":case"gggg":return n?ei:qt;case"Y":case"G":case"g":return ii;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ti:Bt;case"S":if(n)return Zt;case"SS":if(n)return Kt;case"SSS":if(n)return Qt;case"DDD":return Ht;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Wt;case"a":case"A":return t._locale._meridiemParse;case"X":return Jt;case"Z":case"ZZ":return $t;case"T":return Gt;case"SSSS":return Ut;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Kt:Vt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Vt;case"Do":return Xt;default:return i=new RegExp(X(J(e.replace("\\","")),"i"))}}function H(e){e=e||"";var t=e.match($t)||[],i=t[t.length-1]||[],n=(i+"").match(oi)||["-",0,0],s=+(60*n[1])+C(n[2]);return"+"===n[0]?-s:s}function q(e,t,i){var n,s=i._a;switch(e){case"Q":null!=t&&(s[Lt]=3*(C(t)-1));break;case"M":case"MM":null!=t&&(s[Lt]=C(t)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(t),null!=n?s[Lt]=n:i._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[Dt]=C(t));break;case"Do":null!=t&&(s[Dt]=C(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(i._dayOfYear=C(t));break;case"YY":s[Ct]=yt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[Ct]=C(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":s[Et]=C(t);break;case"m":case"mm":s[St]=C(t);break;case"s":case"ss":s[At]=C(t);break;case"S":case"SS":case"SSS":case"SSSS":s[Pt]=C(1e3*("0."+t));break;case"X":i._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=H(t);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(t),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(i._w=i._w||{},i._w[e]=C(t));break;case"gg":case"GG":i._w=i._w||{},i._w[e]=yt.parseTwoDigitYear(t)}}function B(e){var i,n,s,r,a,o,l;i=e._w,null!=i.GG||null!=i.W||null!=i.E?(a=1,o=4,n=t(i.GG,e._a[Ct],ot(yt(),1,4).year),s=t(i.W,1),r=t(i.E,1)):(a=e._locale._week.dow,o=e._locale._week.doy,n=t(i.gg,e._a[Ct],ot(yt(),a,o).year),s=t(i.w,1),null!=i.d?(r=i.d,a>r&&++s):r=null!=i.e?i.e+a:a),l=lt(n,s,r,o,a),e._a[Ct]=l.year,e._dayOfYear=l.dayOfYear}function U(e){var i,n,s,r,a=[];if(!e._d){for(s=$(e),e._w&&null==e._a[Dt]&&null==e._a[Lt]&&B(e),e._dayOfYear&&(r=t(e._a[Ct],s[Ct]),e._dayOfYear>E(r)&&(e._pf._overflowDayOfYear=!0),n=nt(r,0,e._dayOfYear),e._a[Lt]=n.getUTCMonth(),e._a[Dt]=n.getUTCDate()),i=0;3>i&&null==e._a[i];++i)e._a[i]=a[i]=s[i];for(;7>i;i++)e._a[i]=a[i]=null==e._a[i]?2===i?1:0:e._a[i];e._d=(e._useUTC?nt:it).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function W(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],U(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function G(e){if(e._f===yt.ISO_8601)return K(e),void 0;e._a=[],e._pf.empty=!0;var t,i,n,s,r,a=""+e._i,o=a.length,l=0;for(n=j(e._f,e._locale).match(Rt)||[],t=0;t<n.length;t++)s=n[t],i=(a.match(V(s,e))||[])[0],i&&(r=a.substr(0,a.indexOf(i)),r.length>0&&e._pf.unusedInput.push(r),a=a.slice(a.indexOf(i)+i.length),l+=i.length),fi[s]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(s),q(s,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=o-l,a.length>0&&e._pf.unusedInput.push(a),e._isPm&&e._a[Et]<12&&(e._a[Et]+=12),e._isPm===!1&&12===e._a[Et]&&(e._a[Et]=0),U(e),A(e)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e){var t,i,s,r,a;if(0===e._f.length)return e._pf.invalidFormat=!0,e._d=new Date(0/0),void 0;for(r=0;r<e._f.length;r++)a=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[r],G(t),P(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==s||s>a)&&(s=a,i=t));d(e,i||t)}function K(e){var t,i,n=e._i,s=ni.exec(n);if(s){for(e._pf.iso=!0,t=0,i=ri.length;i>t;t++)if(ri[t][1].exec(n)){e._f=ri[t][0]+(s[6]||" ");break}for(t=0,i=ai.length;i>t;t++)if(ai[t][1].exec(n)){e._f+=ai[t][0];break}n.match($t)&&(e._f+="Z"),G(e)}else e._isValid=!1}function Q(e){K(e),e._isValid===!1&&(delete e._isValid,yt.createFromInputFallback(e))}function et(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function tt(t){var i,n=t._i;n===e?t._d=new Date:w(n)?t._d=new Date(+n):null!==(i=Yt.exec(n))?t._d=new Date(+i[1]):"string"==typeof n?Q(t):b(n)?(t._a=et(n.slice(0),function(e){return parseInt(e,10)}),U(t)):"object"==typeof n?W(t):"number"==typeof n?t._d=new Date(n):yt.createFromInputFallback(t)}function it(e,t,i,n,s,r,a){var o=new Date(e,t,i,n,s,r,a);return 1970>e&&o.setFullYear(e),o}function nt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function st(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function rt(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function at(e,t,i){var n=yt.duration(e).abs(),s=Tt(n.as("s")),r=Tt(n.as("m")),a=Tt(n.as("h")),o=Tt(n.as("d")),l=Tt(n.as("M")),u=Tt(n.as("y")),c=s<di.s&&["s",s]||1===r&&["m"]||r<di.m&&["mm",r]||1===a&&["h"]||a<di.h&&["hh",a]||1===o&&["d"]||o<di.d&&["dd",o]||1===l&&["M"]||l<di.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=i,rt.apply({},c)}function ot(e,t,i){var n,s=i-t,r=i-e.day();return r>s&&(r-=7),s-7>r&&(r+=7),n=yt(e).add(r,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function lt(e,t,i,n,s){var r,a,o=nt(e,0,1).getUTCDay();return o=0===o?7:o,i=null!=i?i:s,r=s-o+(o>n?7:0)-(s>o?7:0),a=7*(t-1)+(i-s)+r+1,{year:a>0?e:e-1,dayOfYear:a>0?a:E(e-1)+a}}function ut(t){var i=t._i,n=t._f;return t._locale=t._locale||yt.localeData(t._l),null===i||n===e&&""===i?yt.invalid({nullInput:!0}):("string"==typeof i&&(t._i=i=t._locale.preparse(i)),yt.isMoment(i)?new c(i,!0):(n?b(n)?Z(t):G(t):tt(t),new c(t)))}function ct(e,t){var i,n;if(1===t.length&&b(t[0])&&(t=t[0]),!t.length)return yt();for(i=t[0],n=1;n<t.length;++n)t[n][e](i)&&(i=t[n]);return i}function ht(e,t){var i;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),L(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e)}function dt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pt(e,t,i){return"Month"===t?ht(e,i):e._d["set"+(e._isUTC?"UTC":"")+t](i)}function mt(e,t){return function(i){return null!=i?(pt(this,e,i),yt.updateOffset(this,t),this):dt(this,e)}}function ft(e){return 400*e/146097}function gt(e){return 146097*e/400}function vt(e){yt.duration.fn[e]=function(){return this._data[e]}}function _t(e){"undefined"==typeof ender&&(bt=Mt.moment,Mt.moment=e?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",yt):yt)}for(var yt,bt,wt,xt="2.8.3",Mt="undefined"!=typeof global?global:this,Tt=Math.round,kt=Object.prototype.hasOwnProperty,Ct=0,Lt=1,Dt=2,Et=3,St=4,At=5,Pt=6,Ot={},Nt=[],It="undefined"!=typeof module&&module.exports,Yt=/^\/?Date\((\-?\d+)/i,Ft=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Rt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,jt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Vt=/\d\d?/,Ht=/\d{1,3}/,qt=/\d{1,4}/,Bt=/[+\-]?\d{1,6}/,Ut=/\d+/,Wt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$t=/Z|[\+\-]\d\d:?\d\d/gi,Gt=/T/i,Jt=/[\+\-]?\d+(\.\d{1,3})?/,Xt=/\d{1,2}/,Zt=/\d/,Kt=/\d\d/,Qt=/\d{3}/,ei=/\d{4}/,ti=/[+-]?\d{6}/,ii=/[+-]?\d+/,ni=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,si="YYYY-MM-DDTHH:mm:ssZ",ri=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ai=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],oi=/([\+\-]|\d\d)/gi,li=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ui={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ci={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hi={},di={s:45,m:45,h:22,d:26,M:11},pi="DDD w W M D d".split(" "),mi="M D H h m s w W".split(" "),fi={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return f(this.year()%100,2)},YYYY:function(){return f(this.year(),4)},YYYYY:function(){return f(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+f(Math.abs(e),6)},gg:function(){return f(this.weekYear()%100,2)},gggg:function(){return f(this.weekYear(),4)},ggggg:function(){return f(this.weekYear(),5)},GG:function(){return f(this.isoWeekYear()%100,2)},GGGG:function(){return f(this.isoWeekYear(),4)},GGGGG:function(){return f(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return C(this.milliseconds()/100)},SS:function(){return f(C(this.milliseconds()/10),2)},SSS:function(){return f(this.milliseconds(),3)},SSSS:function(){return f(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(C(e/60),2)+":"+f(C(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+f(C(e/60),2)+f(C(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},gi={},vi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];pi.length;)wt=pi.pop(),fi[wt+"o"]=l(fi[wt],wt);for(;mi.length;)wt=mi.pop(),fi[wt+wt]=o(fi[wt],2);fi.DDDD=o(fi.DDD,3),d(u.prototype,{set:function(e){var t,i;for(i in e)t=e[i],"function"==typeof t?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,i,n;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(i=yt.utc([2e3,t]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(n.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(i=yt([2e3,1]).day(t),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var i=this._calendar[e];return"function"==typeof i?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(e,t,i,n):s.replace(/%d/i,e)},pastFuture:function(e,t){var i=this._relativeTime[e>0?"future":"past"];return"function"==typeof i?i(t):i.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ot(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),yt=function(t,i,s,r){var a;return"boolean"==typeof s&&(r=s,s=e),a={},a._isAMomentObject=!0,a._i=t,a._f=i,a._l=s,a._strict=r,a._isUTC=!1,a._pf=n(),ut(a)},yt.suppressDeprecationWarnings=!1,yt.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),yt.min=function(){var e=[].slice.call(arguments,0);return ct("isBefore",e)},yt.max=function(){var e=[].slice.call(arguments,0);return ct("isAfter",e)},yt.utc=function(t,i,s,r){var a;return"boolean"==typeof s&&(r=s,s=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=s,a._i=t,a._f=i,a._strict=r,a._pf=n(),ut(a).utc()},yt.unix=function(e){return yt(1e3*e)},yt.duration=function(e,t){var n,s,r,a,o=e,l=null;return yt.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(l=Ft.exec(e))?(n="-"===l[1]?-1:1,o={y:0,d:C(l[Dt])*n,h:C(l[Et])*n,m:C(l[St])*n,s:C(l[At])*n,ms:C(l[Pt])*n}):(l=zt.exec(e))?(n="-"===l[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):"object"==typeof o&&("from"in o||"to"in o)&&(a=v(yt(o.from),yt(o.to)),o={},o.ms=a.milliseconds,o.M=a.months),s=new h(o),yt.isDuration(e)&&i(e,"_locale")&&(s._locale=e._locale),s},yt.version=xt,yt.defaultFormat=si,yt.ISO_8601=function(){},yt.momentProperties=Nt,yt.updateOffset=function(){},yt.relativeTimeThreshold=function(t,i){return di[t]===e?!1:i===e?di[t]:(di[t]=i,!0)},yt.lang=r("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return yt.locale(e,t)}),yt.locale=function(e,t){var i;return e&&(i="undefined"!=typeof t?yt.defineLocale(e,t):yt.localeData(e),i&&(yt.duration._locale=yt._locale=i)),yt._locale._abbr},yt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Ot[e]||(Ot[e]=new u),Ot[e].set(t),yt.locale(e),Ot[e]):(delete Ot[e],null)},yt.langData=r("moment.langData is deprecated. Use moment.localeData instead.",function(e){return yt.localeData(e)}),yt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return yt._locale;if(!b(e)){if(t=I(e))return t;e=[e]}return N(e)},yt.isMoment=function(e){return e instanceof c||null!=e&&i(e,"_isAMomentObject")},yt.isDuration=function(e){return e instanceof h};for(wt=vi.length-1;wt>=0;--wt)k(vi[wt]);yt.normalizeUnits=function(e){return M(e)},yt.invalid=function(e){var t=yt.utc(0/0);return null!=e?d(t._pf,e):t._pf.userInvalidated=!0,t},yt.parseZone=function(){return yt.apply(null,arguments).parseZone()},yt.parseTwoDigitYear=function(e){return C(e)+(C(e)>68?1900:2e3)},d(yt.fn=c.prototype,{clone:function(){return yt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=yt(this).utc();return 0<e.year()&&e.year()<=9999?R(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):R(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?yt.utc(this._a):yt(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=R(this,e||yt.defaultFormat);return this.localeData().postformat(t)},add:_(1,"add"),subtract:_(-1,"subtract"),diff:function(e,t,i){var n,s,r,a=Y(e,this),o=6e4*(this.zone()-a.zone());return t=M(t),"year"===t||"month"===t?(n=432e5*(this.daysInMonth()+a.daysInMonth()),s=12*(this.year()-a.year())+(this.month()-a.month()),r=this-yt(this).startOf("month")-(a-yt(a).startOf("month")),r-=6e4*(this.zone()-yt(this).startOf("month").zone()-(a.zone()-yt(a).startOf("month").zone())),s+=r/n,"year"===t&&(s/=12)):(n=this-a,s="second"===t?n/1e3:"minute"===t?n/6e4:"hour"===t?n/36e5:"day"===t?(n-o)/864e5:"week"===t?(n-o)/6048e5:n),i?s:m(s)},from:function(e,t){return yt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(yt(),e)},calendar:function(e){var t=e||yt(),i=Y(t,this).startOf("day"),n=this.diff(i,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return S(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=st(e,this.localeData()),this.add(e-t,"d")):t},month:mt("Month",!0),startOf:function(e){switch(e=M(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=M(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=M("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+this>+e):+this.clone().startOf(t)>+yt(e).startOf(t)},isBefore:function(e,t){return t=M("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+e>+this):+this.clone().startOf(t)<+yt(e).startOf(t)},isSame:function(e,t){return t=M(t||"millisecond"),"millisecond"===t?(e=yt.isMoment(e)?e:yt(e),+this===+e):+this.clone().startOf(t)===+Y(e,this).startOf(t)},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=yt.apply(null,arguments),this>e?this:e}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=yt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var i,n=this._offset||0;return null==e?this._isUTC?n:this._dateTzOffset():("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(i=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=i&&this.subtract(i,"m"),n!==e&&(!t||this._changeInProgress?y(this,yt.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,yt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?yt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return L(this.year(),this.month())},dayOfYear:function(e){var t=Tt((yt(this).startOf("day")-yt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ot(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ot(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ot(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return D(this.year(),e.dow,e.doy)},get:function(e){return e=M(e),this[e]()},set:function(e,t){return e=M(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){var i;return t===e?this._locale._abbr:(i=yt.localeData(t),null!=i&&(this._locale=i),this)},lang:r("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),yt.fn.millisecond=yt.fn.milliseconds=mt("Milliseconds",!1),yt.fn.second=yt.fn.seconds=mt("Seconds",!1),yt.fn.minute=yt.fn.minutes=mt("Minutes",!1),yt.fn.hour=yt.fn.hours=mt("Hours",!0),yt.fn.date=mt("Date",!0),yt.fn.dates=r("dates accessor is deprecated. Use date instead.",mt("Date",!0)),yt.fn.year=mt("FullYear",!0),yt.fn.years=r("years accessor is deprecated. Use year instead.",mt("FullYear",!0)),yt.fn.days=yt.fn.day,yt.fn.months=yt.fn.month,yt.fn.weeks=yt.fn.week,yt.fn.isoWeeks=yt.fn.isoWeek,yt.fn.quarters=yt.fn.quarter,yt.fn.toJSON=yt.fn.toISOString,d(yt.duration.fn=h.prototype,{_bubble:function(){var e,t,i,n=this._milliseconds,s=this._days,r=this._months,a=this._data,o=0;a.milliseconds=n%1e3,e=m(n/1e3),a.seconds=e%60,t=m(e/60),a.minutes=t%60,i=m(t/60),a.hours=i%24,s+=m(i/24),o=m(ft(s)),s-=m(gt(o)),r+=m(s/30),s%=30,o+=m(r/12),r%=12,a.days=s,a.months=r,a.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*C(this._months/12)},humanize:function(e){var t=at(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var i=yt.duration(e,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(e,t){var i=yt.duration(e,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(e){return e=M(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,i;if(e=M(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,i=this._months+12*ft(t),"month"===e?i:i/12;switch(t=this._days+gt(this._months/12),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 60*24*t+this._milliseconds/6e4;case"second":return 60*60*24*t+this._milliseconds/1e3;case"millisecond":return Math.floor(1e3*60*60*24*t)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:yt.fn.lang,locale:yt.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(i?i+"D":"")+(n||s||r?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}}),yt.duration.fn.toString=yt.duration.fn.toISOString;for(wt in li)i(li,wt)&&vt(wt.toLowerCase());yt.duration.fn.asMilliseconds=function(){return this.as("ms")},yt.duration.fn.asSeconds=function(){return this.as("s")},yt.duration.fn.asMinutes=function(){return this.as("m")},yt.duration.fn.asHours=function(){return this.as("h")},yt.duration.fn.asDays=function(){return this.as("d")},yt.duration.fn.asWeeks=function(){return this.as("weeks")},yt.duration.fn.asMonths=function(){return this.as("M")},yt.duration.fn.asYears=function(){return this.as("y")},yt.locale("en",{ordinal:function(e){var t=e%10,i=1===C(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),function(e){e(yt)}(function(e){return e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiem:function(e,t,i){return 12>e?i?"vm":"VM":i?"nm":"NM"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[MÃ´re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("ar-ma",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§Ù_ÙÙÙÙÙ_ÙÙÙÙÙØ²_ØºØ´Øª_Ø´ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙØ¨Ø±_Ø¯Ø¬ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥ØªÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø§Ø­Ø¯_Ø§ØªÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø§Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},week:{dow:6,doy:12}})
}),function(e){e(yt)}(function(e){var t={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},i={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"};return e.defineLocale("ar-sa",{months:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),monthsShort:"ÙÙØ§ÙØ±_ÙØ¨Ø±Ø§ÙØ±_ÙØ§Ø±Ø³_Ø£Ø¨Ø±ÙÙ_ÙØ§ÙÙ_ÙÙÙÙÙ_ÙÙÙÙÙ_Ø£ØºØ³Ø·Ø³_Ø³Ø¨ØªÙØ¨Ø±_Ø£ÙØªÙØ¨Ø±_ÙÙÙÙØ¨Ø±_Ø¯ÙØ³ÙØ¨Ø±".split("_"),weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){return 12>e?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯Ø§ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙÙ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"ÙÙ %s",past:"ÙÙØ° %s",s:"Ø«ÙØ§Ù",m:"Ø¯ÙÙÙØ©",mm:"%d Ø¯ÙØ§Ø¦Ù",h:"Ø³Ø§Ø¹Ø©",hh:"%d Ø³Ø§Ø¹Ø§Øª",d:"ÙÙÙ",dd:"%d Ø£ÙØ§Ù",M:"Ø´ÙØ±",MM:"%d Ø£Ø´ÙØ±",y:"Ø³ÙØ©",yy:"%d Ø³ÙÙØ§Øª"},preparse:function(e){return e.replace(/[Û°-Û¹]/g,function(e){return i[e]}).replace(/Ø/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}})}),function(e){e(yt)}(function(e){var t={1:"Ù¡",2:"Ù¢",3:"Ù£",4:"Ù¤",5:"Ù¥",6:"Ù¦",7:"Ù§",8:"Ù¨",9:"Ù©",0:"Ù "},i={"Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9","Ù ":"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5},s={s:["Ø£ÙÙ ÙÙ Ø«Ø§ÙÙØ©","Ø«Ø§ÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø«Ø§ÙÙØªØ§Ù","Ø«Ø§ÙÙØªÙÙ"],"%d Ø«ÙØ§Ù","%d Ø«Ø§ÙÙØ©","%d Ø«Ø§ÙÙØ©"],m:["Ø£ÙÙ ÙÙ Ø¯ÙÙÙØ©","Ø¯ÙÙÙØ© ÙØ§Ø­Ø¯Ø©",["Ø¯ÙÙÙØªØ§Ù","Ø¯ÙÙÙØªÙÙ"],"%d Ø¯ÙØ§Ø¦Ù","%d Ø¯ÙÙÙØ©","%d Ø¯ÙÙÙØ©"],h:["Ø£ÙÙ ÙÙ Ø³Ø§Ø¹Ø©","Ø³Ø§Ø¹Ø© ÙØ§Ø­Ø¯Ø©",["Ø³Ø§Ø¹ØªØ§Ù","Ø³Ø§Ø¹ØªÙÙ"],"%d Ø³Ø§Ø¹Ø§Øª","%d Ø³Ø§Ø¹Ø©","%d Ø³Ø§Ø¹Ø©"],d:["Ø£ÙÙ ÙÙ ÙÙÙ","ÙÙÙ ÙØ§Ø­Ø¯",["ÙÙÙØ§Ù","ÙÙÙÙÙ"],"%d Ø£ÙØ§Ù","%d ÙÙÙÙØ§","%d ÙÙÙ"],M:["Ø£ÙÙ ÙÙ Ø´ÙØ±","Ø´ÙØ± ÙØ§Ø­Ø¯",["Ø´ÙØ±Ø§Ù","Ø´ÙØ±ÙÙ"],"%d Ø£Ø´ÙØ±","%d Ø´ÙØ±Ø§","%d Ø´ÙØ±"],y:["Ø£ÙÙ ÙÙ Ø¹Ø§Ù","Ø¹Ø§Ù ÙØ§Ø­Ø¯",["Ø¹Ø§ÙØ§Ù","Ø¹Ø§ÙÙÙ"],"%d Ø£Ø¹ÙØ§Ù","%d Ø¹Ø§ÙÙØ§","%d Ø¹Ø§Ù"]},r=function(e){return function(t,i){var r=n(t),a=s[e][n(t)];return 2===r&&(a=a[i?0:1]),a.replace(/%d/i,t)}},a=["ÙØ§ÙÙÙ Ø§ÙØ«Ø§ÙÙ ÙÙØ§ÙØ±","Ø´Ø¨Ø§Ø· ÙØ¨Ø±Ø§ÙØ±","Ø¢Ø°Ø§Ø± ÙØ§Ø±Ø³","ÙÙØ³Ø§Ù Ø£Ø¨Ø±ÙÙ","Ø£ÙØ§Ø± ÙØ§ÙÙ","Ø­Ø²ÙØ±Ø§Ù ÙÙÙÙÙ","ØªÙÙØ² ÙÙÙÙÙ","Ø¢Ø¨ Ø£ØºØ³Ø·Ø³","Ø£ÙÙÙÙ Ø³Ø¨ØªÙØ¨Ø±","ØªØ´Ø±ÙÙ Ø§ÙØ£ÙÙ Ø£ÙØªÙØ¨Ø±","ØªØ´Ø±ÙÙ Ø§ÙØ«Ø§ÙÙ ÙÙÙÙØ¨Ø±","ÙØ§ÙÙÙ Ø§ÙØ£ÙÙ Ø¯ÙØ³ÙØ¨Ø±"];return e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"Ø§ÙØ£Ø­Ø¯_Ø§ÙØ¥Ø«ÙÙÙ_Ø§ÙØ«ÙØ§Ø«Ø§Ø¡_Ø§ÙØ£Ø±Ø¨Ø¹Ø§Ø¡_Ø§ÙØ®ÙÙØ³_Ø§ÙØ¬ÙØ¹Ø©_Ø§ÙØ³Ø¨Øª".split("_"),weekdaysShort:"Ø£Ø­Ø¯_Ø¥Ø«ÙÙÙ_Ø«ÙØ§Ø«Ø§Ø¡_Ø£Ø±Ø¨Ø¹Ø§Ø¡_Ø®ÙÙØ³_Ø¬ÙØ¹Ø©_Ø³Ø¨Øª".split("_"),weekdaysMin:"Ø­_Ù_Ø«_Ø±_Ø®_Ø¬_Ø³".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){return 12>e?"Øµ":"Ù"},calendar:{sameDay:"[Ø§ÙÙÙÙ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextDay:"[ØºØ¯ÙØ§ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",nextWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastDay:"[Ø£ÙØ³ Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",lastWeek:"dddd [Ø¹ÙØ¯ Ø§ÙØ³Ø§Ø¹Ø©] LT",sameElse:"L"},relativeTime:{future:"Ø¨Ø¹Ø¯ %s",past:"ÙÙØ° %s",s:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(e){return e.replace(/[Û°-Û¹]/g,function(e){return i[e]}).replace(/Ø/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"Ø")},week:{dow:6,doy:12}})}),function(e){e(yt)}(function(e){var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-Ã¼ncÃ¼",4:"-Ã¼ncÃ¼",100:"-Ã¼ncÃ¼",6:"-ncÄ±",9:"-uncu",10:"-uncu",30:"-uncu",60:"-Ä±ncÄ±",90:"-Ä±ncÄ±"};return e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertÉsi_ÃÉrÅÉnbÉ axÅamÄ±_ÃÉrÅÉnbÉ_CÃ¼mÉ axÅamÄ±_CÃ¼mÉ_ÅÉnbÉ".split("_"),weekdaysShort:"Baz_BzE_ÃAx_ÃÉr_CAx_CÃ¼m_ÅÉn".split("_"),weekdaysMin:"Bz_BE_ÃA_ÃÉ_CA_CÃ¼_ÅÉ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gÉlÉn hÉftÉ] dddd [saat] LT",lastDay:"[dÃ¼nÉn] LT",lastWeek:"[keÃ§Én hÉftÉ] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s ÉvvÉl",s:"birneÃ§É saniyyÉ",m:"bir dÉqiqÉ",mm:"%d dÉqiqÉ",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(e){return 4>e?"gecÉ":12>e?"sÉhÉr":17>e?"gÃ¼ndÃ¼z":"axÅam"},ordinal:function(e){if(0===e)return e+"-Ä±ncÄ±";var i=e%10,n=e%100-i,s=e>=100?100:null;return e+(t[i]||t[n]||t[s])},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e,t){var i=e.split("_");return 1===t%10&&11!==t%100?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var s={mm:i?"ÑÐ²ÑÐ»ÑÐ½Ð°_ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½":"ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½Ñ_ÑÐ²ÑÐ»ÑÐ½",hh:i?"Ð³Ð°Ð´Ð·ÑÐ½Ð°_Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½":"Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½Ñ_Ð³Ð°Ð´Ð·ÑÐ½",dd:"Ð´Ð·ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð·ÑÐ½",MM:"Ð¼ÐµÑÑÑ_Ð¼ÐµÑÑÑÑ_Ð¼ÐµÑÑÑÐ°Ñ",yy:"Ð³Ð¾Ð´_Ð³Ð°Ð´Ñ_Ð³Ð°Ð´Ð¾Ñ"};return"m"===n?i?"ÑÐ²ÑÐ»ÑÐ½Ð°":"ÑÐ²ÑÐ»ÑÐ½Ñ":"h"===n?i?"Ð³Ð°Ð´Ð·ÑÐ½Ð°":"Ð³Ð°Ð´Ð·ÑÐ½Ñ":e+" "+t(s[n],+e)}function n(e,t){var i={nominative:"ÑÑÑÐ´Ð·ÐµÐ½Ñ_Ð»ÑÑÑ_ÑÐ°ÐºÐ°Ð²ÑÐº_ÐºÑÐ°ÑÐ°Ð²ÑÐº_ÑÑÐ°Ð²ÐµÐ½Ñ_ÑÑÑÐ²ÐµÐ½Ñ_Ð»ÑÐ¿ÐµÐ½Ñ_Ð¶Ð½ÑÐ²ÐµÐ½Ñ_Ð²ÐµÑÐ°ÑÐµÐ½Ñ_ÐºÐ°ÑÑÑÑÑÐ½ÑÐº_Ð»ÑÑÑÐ°Ð¿Ð°Ð´_ÑÐ½ÐµÐ¶Ð°Ð½Ñ".split("_"),accusative:"ÑÑÑÐ´Ð·ÐµÐ½Ñ_Ð»ÑÑÐ°Ð³Ð°_ÑÐ°ÐºÐ°Ð²ÑÐºÐ°_ÐºÑÐ°ÑÐ°Ð²ÑÐºÐ°_ÑÑÐ°ÑÐ½Ñ_ÑÑÑÐ²ÐµÐ½Ñ_Ð»ÑÐ¿ÐµÐ½Ñ_Ð¶Ð½ÑÑÐ½Ñ_Ð²ÐµÑÐ°ÑÐ½Ñ_ÐºÐ°ÑÑÑÑÑÐ½ÑÐºÐ°_Ð»ÑÑÑÐ°Ð¿Ð°Ð´Ð°_ÑÐ½ÐµÐ¶Ð½Ñ".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function s(e,t){var i={nominative:"Ð½ÑÐ´Ð·ÐµÐ»Ñ_Ð¿Ð°Ð½ÑÐ´Ð·ÐµÐ»Ð°Ðº_Ð°ÑÑÐ¾ÑÐ°Ðº_ÑÐµÑÐ°Ð´Ð°_ÑÐ°ÑÐ²ÐµÑ_Ð¿ÑÑÐ½ÑÑÐ°_ÑÑÐ±Ð¾ÑÐ°".split("_"),accusative:"Ð½ÑÐ´Ð·ÐµÐ»Ñ_Ð¿Ð°Ð½ÑÐ´Ð·ÐµÐ»Ð°Ðº_Ð°ÑÑÐ¾ÑÐ°Ðº_ÑÐµÑÐ°Ð´Ñ_ÑÐ°ÑÐ²ÐµÑ_Ð¿ÑÑÐ½ÑÑÑ_ÑÑÐ±Ð¾ÑÑ".split("_")},n=/\[ ?[ÐÐ²] ?(?:Ð¼ÑÐ½ÑÐ»ÑÑ|Ð½Ð°ÑÑÑÐ¿Ð½ÑÑ)? ?\] ?dddd/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.defineLocale("be",{months:n,monthsShort:"ÑÑÑÐ´_Ð»ÑÑ_ÑÐ°Ðº_ÐºÑÐ°Ñ_ÑÑÐ°Ð²_ÑÑÑÐ²_Ð»ÑÐ¿_Ð¶Ð½ÑÐ²_Ð²ÐµÑ_ÐºÐ°ÑÑ_Ð»ÑÑÑ_ÑÐ½ÐµÐ¶".split("_"),weekdays:s,weekdaysShort:"Ð½Ð´_Ð¿Ð½_Ð°Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð°Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ð³.",LLL:"D MMMM YYYY Ð³., LT",LLLL:"dddd, D MMMM YYYY Ð³., LT"},calendar:{sameDay:"[Ð¡ÑÐ½Ð½Ñ Ñ] LT",nextDay:"[ÐÐ°ÑÑÑÐ° Ñ] LT",lastDay:"[Ð£ÑÐ¾ÑÐ° Ñ] LT",nextWeek:function(){return"[Ð£] dddd [Ñ] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[Ð£ Ð¼ÑÐ½ÑÐ»ÑÑ] dddd [Ñ] LT";case 1:case 2:case 4:return"[Ð£ Ð¼ÑÐ½ÑÐ»Ñ] dddd [Ñ] LT"}},sameElse:"L"},relativeTime:{future:"Ð¿ÑÐ°Ð· %s",past:"%s ÑÐ°Ð¼Ñ",s:"Ð½ÐµÐºÐ°Ð»ÑÐºÑ ÑÐµÐºÑÐ½Ð´",m:i,mm:i,h:i,hh:i,d:"Ð´Ð·ÐµÐ½Ñ",dd:i,M:"Ð¼ÐµÑÑÑ",MM:i,y:"Ð³Ð¾Ð´",yy:i},meridiem:function(e){return 4>e?"Ð½Ð¾ÑÑ":12>e?"ÑÐ°Ð½ÑÑÑ":17>e?"Ð´Ð½Ñ":"Ð²ÐµÑÐ°ÑÐ°"},ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return 2!==e%10&&3!==e%10||12===e%100||13===e%100?e+"-Ñ":e+"-Ñ";case"D":return e+"-Ð³Ð°";default:return e}},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("bg",{months:"ÑÐ½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ½Ñ_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_ÑÐ½Ð¸_ÑÐ»Ð¸_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÑÐ´Ð°_ÑÐµÑÐ²ÑÑÑÑÐº_Ð¿ÐµÑÑÐº_ÑÑÐ±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÑ_ÑÐµÑ_Ð¿ÐµÑ_ÑÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ÐÐ½ÐµÑ Ð²] LT",nextDay:"[Ð£ÑÑÐµ Ð²] LT",nextWeek:"dddd [Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð°ÑÐ°] dddd [Ð²] LT";case 1:case 2:case 4:case 5:return"[Ð Ð¸Ð·Ð¼Ð¸Ð½Ð°Ð»Ð¸Ñ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐ»ÐµÐ´ %s",past:"Ð¿ÑÐµÐ´Ð¸ %s",s:"Ð½ÑÐºÐ¾Ð»ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´Ð½Ð¸",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ°",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-ÐµÐ²":0===i?e+"-ÐµÐ½":i>10&&20>i?e+"-ÑÐ¸":1===t?e+"-Ð²Ð¸":2===t?e+"-ÑÐ¸":7===t||8===t?e+"-Ð¼Ð¸":e+"-ÑÐ¸"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t={1:"à§§",2:"à§¨",3:"à§©",4:"à§ª",5:"à§«",6:"à§¬",7:"à§­",8:"à§®",9:"à§¯",0:"à§¦"},i={"à§§":"1","à§¨":"2","à§©":"3","à§ª":"4","à§«":"5","à§¬":"6","à§­":"7","à§®":"8","à§¯":"9","à§¦":"0"};return e.defineLocale("bn",{months:"à¦à¦¾à¦¨à§à§à¦¾à¦°à§_à¦«à§à¦¬à§à§à¦¾à¦°à§_à¦®à¦¾à¦°à§à¦_à¦à¦ªà§à¦°à¦¿à¦²_à¦®à§_à¦à§à¦¨_à¦à§à¦²à¦¾à¦_à¦à¦à¦¾à¦¸à§à¦_à¦¸à§à¦ªà§à¦à§à¦®à§à¦¬à¦°_à¦à¦à§à¦à§à¦¬à¦°_à¦¨à¦­à§à¦®à§à¦¬à¦°_à¦¡à¦¿à¦¸à§à¦®à§à¦¬à¦°".split("_"),monthsShort:"à¦à¦¾à¦¨à§_à¦«à§à¦¬_à¦®à¦¾à¦°à§à¦_à¦à¦ªà¦°_à¦®à§_à¦à§à¦¨_à¦à§à¦²_à¦à¦_à¦¸à§à¦ªà§à¦_à¦à¦à§à¦à§_à¦¨à¦­_à¦¡à¦¿à¦¸à§à¦®à§".split("_"),weekdays:"à¦°à¦¬à¦¿à¦¬à¦¾à¦°_à¦¸à§à¦®à¦¬à¦¾à¦°_à¦®à¦à§à¦à¦²à¦¬à¦¾à¦°_à¦¬à§à¦§à¦¬à¦¾à¦°_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à§à¦¤à¦¿à¦¬à¦¾à¦°_à¦¶à§à¦à§à¦°à§à¦¬à¦¾à¦°_à¦¶à¦¨à¦¿à¦¬à¦¾à¦°".split("_"),weekdaysShort:"à¦°à¦¬à¦¿_à¦¸à§à¦®_à¦®à¦à§à¦à¦²_à¦¬à§à¦§_à¦¬à§à¦¹à¦¸à§à¦ªà¦¤à§à¦¤à¦¿_à¦¶à§à¦à§à¦°à§_à¦¶à¦¨à¦¿".split("_"),weekdaysMin:"à¦°à¦¬_à¦¸à¦®_à¦®à¦à§à¦_à¦¬à§_à¦¬à§à¦°à¦¿à¦¹_à¦¶à§_à¦¶à¦¨à¦¿".split("_"),longDateFormat:{LT:"A h:mm à¦¸à¦®à§",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¦à¦] LT",nextDay:"[à¦à¦à¦¾à¦®à§à¦à¦¾à¦²] LT",nextWeek:"dddd, LT",lastDay:"[à¦à¦¤à¦à¦¾à¦²] LT",lastWeek:"[à¦à¦¤] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¦ªà¦°à§",past:"%s à¦à¦à§",s:"à¦à¦à¦ à¦¸à§à¦à§à¦¨à§à¦¡",m:"à¦à¦ à¦®à¦¿à¦¨à¦¿à¦",mm:"%d à¦®à¦¿à¦¨à¦¿à¦",h:"à¦à¦ à¦à¦¨à§à¦à¦¾",hh:"%d à¦à¦¨à§à¦à¦¾",d:"à¦à¦ à¦¦à¦¿à¦¨",dd:"%d à¦¦à¦¿à¦¨",M:"à¦à¦ à¦®à¦¾à¦¸",MM:"%d à¦®à¦¾à¦¸",y:"à¦à¦ à¦¬à¦à¦°",yy:"%d à¦¬à¦à¦°"},preparse:function(e){return e.replace(/[à§§à§¨à§©à§ªà§«à§¬à§­à§®à§¯à§¦]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"à¦°à¦¾à¦¤":10>e?"à¦¶à¦à¦¾à¦²":17>e?"à¦¦à§à¦ªà§à¦°":20>e?"à¦¬à¦¿à¦à§à¦²":"à¦°à¦¾à¦¤"},week:{dow:0,doy:6}})}),function(e){e(yt)}(function(e){var t={1:"à¼¡",2:"à¼¢",3:"à¼£",4:"à¼¤",5:"à¼¥",6:"à¼¦",7:"à¼§",8:"à¼¨",9:"à¼©",0:"à¼ "},i={"à¼¡":"1","à¼¢":"2","à¼£":"3","à¼¤":"4","à¼¥":"5","à¼¦":"6","à¼§":"7","à¼¨":"8","à¼©":"9","à¼ ":"0"};return e.defineLocale("bo",{months:"à½à¾³à¼à½à¼à½à½à¼à½à½¼_à½à¾³à¼à½à¼à½à½à½²à½¦à¼à½_à½à¾³à¼à½à¼à½à½¦à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½²à¼à½_à½à¾³à¼à½à¼à½£à¾à¼à½_à½à¾³à¼à½à¼à½à¾²à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à½à¼à½_à½à¾³à¼à½à¼à½à½¢à¾à¾±à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½¦à¼à½".split("_"),monthsShort:"à½à¾³à¼à½à¼à½à½à¼à½à½¼_à½à¾³à¼à½à¼à½à½à½²à½¦à¼à½_à½à¾³à¼à½à¼à½à½¦à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½²à¼à½_à½à¾³à¼à½à¼à½£à¾à¼à½_à½à¾³à¼à½à¼à½à¾²à½´à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à½à¼à½_à½à¾³à¼à½à¼à½à½¢à¾à¾±à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½à¼à½_à½à¾³à¼à½à¼à½à½à½´à¼à½à½à½²à½¦à¼à½".split("_"),weekdays:"à½à½à½ à¼à½à½²à¼à½à¼_à½à½à½ à¼à½à¾³à¼à½à¼_à½à½à½ à¼à½à½²à½à¼à½à½à½¢à¼_à½à½à½ à¼à½£à¾·à½à¼à½à¼_à½à½à½ à¼à½à½´à½¢à¼à½à½´_à½à½à½ à¼à½à¼à½¦à½à½¦à¼_à½à½à½ à¼à½¦à¾¤à½ºà½à¼à½à¼".split("_"),weekdaysShort:"à½à½²à¼à½à¼_à½à¾³à¼à½à¼_à½à½²à½à¼à½à½à½¢à¼_à½£à¾·à½à¼à½à¼_à½à½´à½¢à¼à½à½´_à½à¼à½¦à½à½¦à¼_à½¦à¾¤à½ºà½à¼à½à¼".split("_"),weekdaysMin:"à½à½²à¼à½à¼_à½à¾³à¼à½à¼_à½à½²à½à¼à½à½à½¢à¼_à½£à¾·à½à¼à½à¼_à½à½´à½¢à¼à½à½´_à½à¼à½¦à½à½¦à¼_à½¦à¾¤à½ºà½à¼à½à¼".split("_"),longDateFormat:{LT:"A h:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à½à½²à¼à½¢à½²à½] LT",nextDay:"[à½¦à½à¼à½à½²à½] LT",nextWeek:"[à½à½à½´à½à¼à½à¾²à½à¼à½¢à¾à½ºà½¦à¼à½], LT",lastDay:"[à½à¼à½¦à½] LT",lastWeek:"[à½à½à½´à½à¼à½à¾²à½à¼à½à½à½ à¼à½] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à½£à¼",past:"%s à½¦à¾à½à¼à½£",s:"à½£à½à¼à½¦à½",m:"à½¦à¾à½¢à¼à½à¼à½à½à½²à½",mm:"%d à½¦à¾à½¢à¼à½",h:"à½à½´à¼à½à½¼à½à¼à½à½à½²à½",hh:"%d à½à½´à¼à½à½¼à½",d:"à½à½²à½à¼à½à½à½²à½",dd:"%d à½à½²à½à¼",M:"à½à¾³à¼à½à¼à½à½à½²à½",MM:"%d à½à¾³à¼à½",y:"à½£à½¼à¼à½à½à½²à½",yy:"%d à½£à½¼"},preparse:function(e){return e.replace(/[à¼¡à¼¢à¼£à¼¤à¼¥à¼¦à¼§à¼¨à¼©à¼ ]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"à½à½à½à¼à½à½¼":10>e?"à½à½¼à½à½¦à¼à½à½¦":17>e?"à½à½²à½à¼à½à½´à½":20>e?"à½à½à½¼à½à¼à½à½":"à½à½à½à¼à½à½¼"},week:{dow:0,doy:6}})}),function(e){e(yt)}(function(t){function i(e,t,i){var n={mm:"munutenn",MM:"miz",dd:"devezh"};return e+" "+r(n[i],e)}function n(e){switch(s(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function s(e){return e>9?s(e%10):e}function r(e,t){return 2===t?a(e):e}function a(t){var i={m:"v",b:"v",d:"z"};return i[t.charAt(0)]===e?t:i[t.charAt(0)]+t.substring(1)}return t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoÃ¹",m:"ur vunutenn",mm:i,h:"un eur",hh:"%d eur",d:"un devezh",dd:i,M:"ur miz",MM:i,y:"ur bloaz",yy:n},ordinal:function(e){var t=1===e?"aÃ±":"vet";return e+t},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("ca",{months:"gener_febrer_marÃ§_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demÃ  a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%dÂº",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e){return e>1&&5>e&&1!==~~(e/10)}function i(e,i,n,s){var r=e+" ";switch(n){case"s":return i||s?"pÃ¡r sekund":"pÃ¡r sekundami";case"m":return i?"minuta":s?"minutu":"minutou";case"mm":return i||s?r+(t(e)?"minuty":"minut"):r+"minutami";case"h":return i?"hodina":s?"hodinu":"hodinou";case"hh":return i||s?r+(t(e)?"hodiny":"hodin"):r+"hodinami";case"d":return i||s?"den":"dnem";case"dd":return i||s?r+(t(e)?"dny":"dnÃ­"):r+"dny";case"M":return i||s?"mÄsÃ­c":"mÄsÃ­cem";case"MM":return i||s?r+(t(e)?"mÄsÃ­ce":"mÄsÃ­cÅ¯"):r+"mÄsÃ­ci";case"y":return i||s?"rok":"rokem";case"yy":return i||s?r+(t(e)?"roky":"let"):r+"lety"}}var n="leden_Ãºnor_bÅezen_duben_kvÄten_Äerven_Äervenec_srpen_zÃ¡ÅÃ­_ÅÃ­jen_listopad_prosinec".split("_"),s="led_Ãºno_bÅe_dub_kvÄ_Ävn_Ävc_srp_zÃ¡Å_ÅÃ­j_lis_pro".split("_");return e.defineLocale("cs",{months:n,monthsShort:s,monthsParse:function(e,t){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+e[i]+"$|^"+t[i]+"$","i");return n}(n,s),weekdays:"nedÄle_pondÄlÃ­_ÃºterÃ½_stÅeda_Ätvrtek_pÃ¡tek_sobota".split("_"),weekdaysShort:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),weekdaysMin:"ne_po_Ãºt_st_Ät_pÃ¡_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.Â MM.Â YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zÃ­tra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedÄli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stÅedu v] LT";case 4:return"[ve Ätvrtek v] LT";case 5:return"[v pÃ¡tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vÄera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedÄli v] LT";case 1:case 2:return"[minulÃ©] dddd [v] LT";case 3:return"[minulou stÅedu v] LT";case 4:case 5:return"[minulÃ½] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pÅed %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("cv",{months:"ÐºÄÑÐ»Ð°Ñ_Ð½Ð°ÑÄÑ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ã§ÄÑÑÐ¼Ðµ_ÑÑÄ_Ã§ÑÑÐ»Ð°_Ð°Ð²ÄÐ½_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°ÑÑÐ°Ð²".split("_"),monthsShort:"ÐºÄÑ_Ð½Ð°Ñ_Ð¿ÑÑ_Ð°ÐºÐ°_Ð¼Ð°Ð¹_Ã§ÄÑ_ÑÑÄ_Ã§ÑÑ_Ð°Ð²_ÑÐ¿Ð°_ÑÓ³Ðº_ÑÐ°Ñ".split("_"),weekdays:"Ð²ÑÑÑÐ°ÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÑÐ¸ÐºÑÐ½_ÑÑÐ»Ð°ÑÐ¸ÐºÑÐ½_ÑÐ½ÐºÑÐ½_ÐºÄÃ§Ð½ÐµÑÐ½Ð¸ÐºÑÐ½_ÑÑÐ½ÐµÐºÑÐ½_ÑÄÐ¼Ð°ÑÐºÑÐ½".split("_"),weekdaysShort:"Ð²ÑÑ_ÑÑÐ½_ÑÑÐ»_ÑÐ½_ÐºÄÃ§_ÑÑÐ½_ÑÄÐ¼".split("_"),weekdaysMin:"Ð²Ñ_ÑÐ½_ÑÑ_ÑÐ½_ÐºÃ§_ÑÑ_ÑÐ¼".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ]",LLL:"YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ], LT",LLLL:"dddd, YYYY [Ã§ÑÐ»ÑÐ¸] MMMM [ÑÐ¹ÄÑÄÐ½] D[-Ð¼ÄÑÄ], LT"},calendar:{sameDay:"[ÐÐ°ÑÐ½] LT [ÑÐµÑÐµÑÑÐµ]",nextDay:"[Ð«ÑÐ°Ð½] LT [ÑÐµÑÐµÑÑÐµ]",lastDay:"[ÄÐ½ÐµÑ] LT [ÑÐµÑÐµÑÑÐµ]",nextWeek:"[ÃÐ¸ÑÐµÑ] dddd LT [ÑÐµÑÐµÑÑÐµ]",lastWeek:"[ÐÑÑÐ½Ä] dddd LT [ÑÐµÑÐµÑÑÐµ]",sameElse:"L"},relativeTime:{future:function(e){var t=/ÑÐµÑÐµÑ$/i.exec(e)?"ÑÐµÐ½":/Ã§ÑÐ»$/i.exec(e)?"ÑÐ°Ð½":"ÑÐ°Ð½";return e+t},past:"%s ÐºÐ°ÑÐ»Ð»Ð°",s:"Ð¿ÄÑ-Ð¸Ðº Ã§ÐµÐºÐºÑÐ½Ñ",m:"Ð¿ÄÑ Ð¼Ð¸Ð½ÑÑ",mm:"%d Ð¼Ð¸Ð½ÑÑ",h:"Ð¿ÄÑ ÑÐµÑÐµÑ",hh:"%d ÑÐµÑÐµÑ",d:"Ð¿ÄÑ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð¿ÄÑ ÑÐ¹ÄÑ",MM:"%d ÑÐ¹ÄÑ",y:"Ð¿ÄÑ Ã§ÑÐ»",yy:"%d Ã§ÑÐ»"},ordinal:"%d-Ð¼ÄÑ",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn Ã´l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(e){var t=e,i="",n=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return t>20?i=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(i=n[t]),e+i},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸n_man_tir_ons_tor_fre_lÃ¸r".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gÃ¥r kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"fÃ¥ sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"et Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}return e.defineLocale("de-at",{months:"JÃ¤nner_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"JÃ¤n._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?n[i][0]:n[i][1]}return e.defineLocale("de",{months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("el",{monthsNominativeEl:"ÎÎ±Î½Î¿ÏÎ¬ÏÎ¹Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ¬ÏÎ¹Î¿Ï_ÎÎ¬ÏÏÎ¹Î¿Ï_ÎÏÏÎ¯Î»Î¹Î¿Ï_ÎÎ¬Î¹Î¿Ï_ÎÎ¿ÏÎ½Î¹Î¿Ï_ÎÎ¿ÏÎ»Î¹Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎ­Î¼Î²ÏÎ¹Î¿Ï_ÎÎºÏÏÎ²ÏÎ¹Î¿Ï_ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï_ÎÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï".split("_"),monthsGenitiveEl:"ÎÎ±Î½Î¿ÏÎ±ÏÎ¯Î¿Ï_Î¦ÎµÎ²ÏÎ¿ÏÎ±ÏÎ¯Î¿Ï_ÎÎ±ÏÏÎ¯Î¿Ï_ÎÏÏÎ¹Î»Î¯Î¿Ï_ÎÎ±ÎÎ¿Ï_ÎÎ¿ÏÎ½Î¯Î¿Ï_ÎÎ¿ÏÎ»Î¯Î¿Ï_ÎÏÎ³Î¿ÏÏÏÎ¿Ï_Î£ÎµÏÏÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎºÏÏÎ²ÏÎ¯Î¿Ï_ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï_ÎÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"ÎÎ±Î½_Î¦ÎµÎ²_ÎÎ±Ï_ÎÏÏ_ÎÎ±Ï_ÎÎ¿ÏÎ½_ÎÎ¿ÏÎ»_ÎÏÎ³_Î£ÎµÏ_ÎÎºÏ_ÎÎ¿Îµ_ÎÎµÎº".split("_"),weekdays:"ÎÏÏÎ¹Î±ÎºÎ®_ÎÎµÏÏÎ­ÏÎ±_Î¤ÏÎ¯ÏÎ·_Î¤ÎµÏÎ¬ÏÏÎ·_Î Î­Î¼ÏÏÎ·_Î Î±ÏÎ±ÏÎºÎµÏÎ®_Î£Î¬Î²Î²Î±ÏÎ¿".split("_"),weekdaysShort:"ÎÏÏ_ÎÎµÏ_Î¤ÏÎ¹_Î¤ÎµÏ_Î ÎµÎ¼_Î Î±Ï_Î£Î±Î²".split("_"),weekdaysMin:"ÎÏ_ÎÎµ_Î¤Ï_Î¤Îµ_Î Îµ_Î Î±_Î£Î±".split("_"),meridiem:function(e,t,i){return e>11?i?"Î¼Î¼":"ÎÎ":i?"ÏÎ¼":"Î Î"},isPM:function(e){return"Î¼"===(e+"").toLowerCase()[0]},meridiemParse:/[Î Î]\.?Î?\.?/i,longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Î£Î®Î¼ÎµÏÎ± {}] LT",nextDay:"[ÎÏÏÎ¹Î¿ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Î§Î¸ÎµÏ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ÏÎ¿ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿] dddd [{}] LT";default:return"[ÏÎ·Î½ ÏÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î·] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var i=this._calendarEl[e],n=t&&t.hours();return"function"==typeof i&&(i=i.apply(t)),i.replace("{}",1===n%12?"ÏÏÎ·":"ÏÏÎ¹Ï")},relativeTime:{future:"ÏÎµ %s",past:"%s ÏÏÎ¹Î½",s:"Î´ÎµÏÏÎµÏÏÎ»ÎµÏÏÎ±",m:"Î­Î½Î± Î»ÎµÏÏÏ",mm:"%d Î»ÎµÏÏÎ¬",h:"Î¼Î¯Î± ÏÏÎ±",hh:"%d ÏÏÎµÏ",d:"Î¼Î¯Î± Î¼Î­ÏÎ±",dd:"%d Î¼Î­ÏÎµÏ",M:"Î­Î½Î±Ï Î¼Î®Î½Î±Ï",MM:"%d Î¼Î®Î½ÎµÏ",y:"Î­Î½Î±Ï ÏÏÏÎ½Î¿Ï",yy:"%d ÏÏÏÎ½Î¹Î±"},ordinal:function(e){return e+"Î·"},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}})}),function(e){e(yt)}(function(e){return e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aÅ­gusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aÅ­g_sep_okt_nov_dec".split("_"),weekdays:"DimanÄo_Lundo_Mardo_Merkredo_Ä´aÅ­do_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ä´aÅ­_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ä´a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(e,t,i){return e>11?i?"p.t.m.":"P.T.M.":i?"a.t.m.":"A.T.M."},calendar:{sameDay:"[HodiaÅ­ je] LT",nextDay:"[MorgaÅ­ je] LT",nextWeek:"dddd [je] LT",lastDay:"[HieraÅ­ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaÅ­ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,n){return/-MMM-/.test(n)?i[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_miÃ©rcoles_jueves_viernes_sÃ¡bado".split("_"),weekdaysShort:"dom._lun._mar._miÃ©._jue._vie._sÃ¡b.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maÃ±ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un aÃ±o",yy:"%d aÃ±os"},ordinal:"%dÂº",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i,n){var s={s:["mÃµne sekundi","mÃµni sekund","paar sekundit"],m:["Ã¼he minuti","Ã¼ks minut"],mm:[e+" minuti",e+" minutit"],h:["Ã¼he tunni","tund aega","Ã¼ks tund"],hh:[e+" tunni",e+" tundi"],d:["Ã¼he pÃ¤eva","Ã¼ks pÃ¤ev"],M:["kuu aja","kuu aega","Ã¼ks kuu"],MM:[e+" kuu",e+" kuud"],y:["Ã¼he aasta","aasta","Ã¼ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?s[i][2]?s[i][2]:s[i][1]:n?s[i][0]:s[i][1]}return e.defineLocale("et",{months:"jaanuar_veebruar_mÃ¤rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mÃ¤rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pÃ¼hapÃ¤ev_esmaspÃ¤ev_teisipÃ¤ev_kolmapÃ¤ev_neljapÃ¤ev_reede_laupÃ¤ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[TÃ¤na,] LT",nextDay:"[Homme,] LT",nextWeek:"[JÃ¤rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤rast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d pÃ¤eva",M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t={1:"Û±",2:"Û²",3:"Û³",4:"Û´",5:"Ûµ",6:"Û¶",7:"Û·",8:"Û¸",9:"Û¹",0:"Û°"},i={"Û±":"1","Û²":"2","Û³":"3","Û´":"4","Ûµ":"5","Û¶":"6","Û·":"7","Û¸":"8","Û¹":"9","Û°":"0"};return e.defineLocale("fa",{months:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),monthsShort:"ÚØ§ÙÙÛÙ_ÙÙØ±ÛÙ_ÙØ§Ø±Ø³_Ø¢ÙØ±ÛÙ_ÙÙ_ÚÙØ¦Ù_ÚÙØ¦ÛÙ_Ø§ÙØª_Ø³Ù¾ØªØ§ÙØ¨Ø±_Ø§Ú©ØªØ¨Ø±_ÙÙØ§ÙØ¨Ø±_Ø¯Ø³Ø§ÙØ¨Ø±".split("_"),weekdays:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysShort:"ÛÚ©âØ´ÙØ¨Ù_Ø¯ÙØ´ÙØ¨Ù_Ø³ÙâØ´ÙØ¨Ù_ÚÙØ§Ø±Ø´ÙØ¨Ù_Ù¾ÙØ¬âØ´ÙØ¨Ù_Ø¬ÙØ¹Ù_Ø´ÙØ¨Ù".split("_"),weekdaysMin:"Û_Ø¯_Ø³_Ú_Ù¾_Ø¬_Ø´".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(e){return 12>e?"ÙØ¨Ù Ø§Ø² Ø¸ÙØ±":"Ø¨Ø¹Ø¯ Ø§Ø² Ø¸ÙØ±"
},calendar:{sameDay:"[Ø§ÙØ±ÙØ² Ø³Ø§Ø¹Øª] LT",nextDay:"[ÙØ±Ø¯Ø§ Ø³Ø§Ø¹Øª] LT",nextWeek:"dddd [Ø³Ø§Ø¹Øª] LT",lastDay:"[Ø¯ÛØ±ÙØ² Ø³Ø§Ø¹Øª] LT",lastWeek:"dddd [Ù¾ÛØ´] [Ø³Ø§Ø¹Øª] LT",sameElse:"L"},relativeTime:{future:"Ø¯Ø± %s",past:"%s Ù¾ÛØ´",s:"ÚÙØ¯ÛÙ Ø«Ø§ÙÛÙ",m:"ÛÚ© Ø¯ÙÛÙÙ",mm:"%d Ø¯ÙÛÙÙ",h:"ÛÚ© Ø³Ø§Ø¹Øª",hh:"%d Ø³Ø§Ø¹Øª",d:"ÛÚ© Ø±ÙØ²",dd:"%d Ø±ÙØ²",M:"ÛÚ© ÙØ§Ù",MM:"%d ÙØ§Ù",y:"ÛÚ© Ø³Ø§Ù",yy:"%d Ø³Ø§Ù"},preparse:function(e){return e.replace(/[Û°-Û¹]/g,function(e){return i[e]}).replace(/Ø/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"Ø")},ordinal:"%dÙ",week:{dow:6,doy:12}})}),function(e){e(yt)}(function(e){function t(e,t,n,s){var r="";switch(n){case"s":return s?"muutaman sekunnin":"muutama sekunti";case"m":return s?"minuutin":"minuutti";case"mm":r=s?"minuutin":"minuuttia";break;case"h":return s?"tunnin":"tunti";case"hh":r=s?"tunnin":"tuntia";break;case"d":return s?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤";case"dd":r=s?"pÃ¤ivÃ¤n":"pÃ¤ivÃ¤Ã¤";break;case"M":return s?"kuukauden":"kuukausi";case"MM":r=s?"kuukauden":"kuukautta";break;case"y":return s?"vuoden":"vuosi";case"yy":r=s?"vuoden":"vuotta"}return r=i(e,s)+" "+r}function i(e,t){return 10>e?t?s[e]:n[e]:e}var n="nolla yksi kaksi kolme neljÃ¤ viisi kuusi seitsemÃ¤n kahdeksan yhdeksÃ¤n".split(" "),s=["nolla","yhden","kahden","kolmen","neljÃ¤n","viiden","kuuden",n[7],n[8],n[9]];return e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesÃ¤kuu_heinÃ¤kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesÃ¤_heinÃ¤_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tÃ¤nÃ¤Ã¤n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pÃ¤Ã¤stÃ¤",past:"%s sitten",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("fo",{months:"januar_februar_mars_aprÃ­l_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mÃ¡nadagur_tÃ½sdagur_mikudagur_hÃ³sdagur_frÃ­ggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mÃ¡n_tÃ½s_mik_hÃ³s_frÃ­_ley".split("_"),weekdaysMin:"su_mÃ¡_tÃ½_mi_hÃ³_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Ã dag kl.] LT",nextDay:"[Ã morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã gjÃ¡r kl.] LT",lastWeek:"[sÃ­Ã°stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sÃ­Ã°ani",s:"fÃ¡ sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tÃ­mi",hh:"%d tÃ­mar",d:"ein dagur",dd:"%d dagar",M:"ein mÃ¡naÃ°i",MM:"%d mÃ¡naÃ°ir",y:"eitt Ã¡r",yy:"%d Ã¡r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("fr-ca",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")}})}),function(e){e(yt)}(function(e){return e.defineLocale("fr",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_XuÃ±o_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._XuÃ±._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_MÃ©rcores_Xoves_Venres_SÃ¡bado".split("_"),weekdaysShort:"Dom._Lun._Mar._MÃ©r._Xov._Ven._SÃ¡b.".split("_"),weekdaysMin:"Do_Lu_Ma_MÃ©_Xo_Ve_SÃ¡".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextDay:function(){return"[maÃ±Ã¡ "+(1!==this.hours()?"Ã¡s":"Ã¡")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"Ã¡s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"Ã¡":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"Ã¡s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return"uns segundos"===e?"nuns segundos":"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un dÃ­a",dd:"%d dÃ­as",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%dÂº",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("he",{months:"×× ×××¨_×¤××¨×××¨_××¨×¥_××¤×¨××_×××_××× ×_××××_×××××¡×_×¡×¤××××¨_×××§××××¨_× ×××××¨_××¦×××¨".split("_"),monthsShort:"×× ××³_×¤××¨×³_××¨×¥_××¤×¨×³_×××_××× ×_××××_××××³_×¡×¤××³_×××§×³_× ×××³_××¦××³".split("_"),weekdays:"×¨××©××_×©× ×_×©×××©×_×¨×××¢×_××××©×_×©××©×_×©××ª".split("_"),weekdaysShort:"××³_××³_××³_××³_××³_××³_×©×³".split("_"),weekdaysMin:"×_×_×_×_×_×_×©".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [×]MMMM YYYY",LLL:"D [×]MMMM YYYY LT",LLLL:"dddd, D [×]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[×××× ×Ö¾]LT",nextDay:"[×××¨ ×Ö¾]LT",nextWeek:"dddd [××©×¢×] LT",lastDay:"[××ª××× ×Ö¾]LT",lastWeek:"[××××] dddd [××××¨×× ××©×¢×] LT",sameElse:"L"},relativeTime:{future:"××¢×× %s",past:"××¤× × %s",s:"××¡×¤×¨ ×©× ×××ª",m:"××§×",mm:"%d ××§××ª",h:"×©×¢×",hh:function(e){return 2===e?"×©×¢×ª×××":e+" ×©×¢××ª"},d:"×××",dd:function(e){return 2===e?"××××××":e+" ××××"},M:"××××©",MM:function(e){return 2===e?"××××©×××":e+" ××××©××"},y:"×©× ×",yy:function(e){return 2===e?"×©× ×ª×××":e+" ×©× ××"}}})}),function(e){e(yt)}(function(e){var t={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},i={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};return e.defineLocale("hi",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¤¼à¤°à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤¸à¥à¤¤_à¤¸à¤¿à¤¤à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¤µà¤®à¥à¤¬à¤°_à¤¦à¤¿à¤¸à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¤¼à¤°._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¥._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²._à¤à¤._à¤¸à¤¿à¤¤._à¤à¤à¥à¤à¥._à¤¨à¤µ._à¤¦à¤¿à¤¸.".split("_"),weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤²à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤²_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤²] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤²] LT",lastWeek:"[à¤ªà¤¿à¤à¤²à¥] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¤®à¥à¤",past:"%s à¤ªà¤¹à¤²à¥",s:"à¤à¥à¤ à¤¹à¥ à¤à¥à¤·à¤£",m:"à¤à¤ à¤®à¤¿à¤¨à¤",mm:"%d à¤®à¤¿à¤¨à¤",h:"à¤à¤ à¤à¤à¤à¤¾",hh:"%d à¤à¤à¤à¥",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¥à¤¨à¥",MM:"%d à¤®à¤¹à¥à¤¨à¥",y:"à¤à¤ à¤µà¤°à¥à¤·",yy:"%d à¤µà¤°à¥à¤·"},preparse:function(e){return e.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"à¤°à¤¾à¤¤":10>e?"à¤¸à¥à¤¬à¤¹":17>e?"à¤¦à¥à¤ªà¤¹à¤°":20>e?"à¤¶à¤¾à¤®":"à¤°à¤¾à¤¤"},week:{dow:0,doy:6}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"jedna minuta":"jedne minute";case"mm":return n+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return n+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return n+=1===e?"dan":"dana";case"MM":return n+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return n+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("hr",{months:"sjeÄanj_veljaÄa_oÅ¾ujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._oÅ¾u._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_Äetvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._Äet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_Äe_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[proÅ¡lu] dddd [u] LT";case 6:return"[proÅ¡le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proÅ¡li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e,t,i,n){var s=e;switch(i){case"s":return n||t?"nÃ©hÃ¡ny mÃ¡sodperc":"nÃ©hÃ¡ny mÃ¡sodperce";case"m":return"egy"+(n||t?" perc":" perce");case"mm":return s+(n||t?" perc":" perce");case"h":return"egy"+(n||t?" Ã³ra":" Ã³rÃ¡ja");case"hh":return s+(n||t?" Ã³ra":" Ã³rÃ¡ja");case"d":return"egy"+(n||t?" nap":" napja");case"dd":return s+(n||t?" nap":" napja");case"M":return"egy"+(n||t?" hÃ³nap":" hÃ³napja");case"MM":return s+(n||t?" hÃ³nap":" hÃ³napja");case"y":return"egy"+(n||t?" Ã©v":" Ã©ve");case"yy":return s+(n||t?" Ã©v":" Ã©ve")}return""}function i(e){return(e?"":"[mÃºlt] ")+"["+n[this.day()]+"] LT[-kor]"}var n="vasÃ¡rnap hÃ©tfÅn kedden szerdÃ¡n csÃ¼tÃ¶rtÃ¶kÃ¶n pÃ©nteken szombaton".split(" ");return e.defineLocale("hu",{months:"januÃ¡r_februÃ¡r_mÃ¡rcius_Ã¡prilis_mÃ¡jus_jÃºnius_jÃºlius_augusztus_szeptember_oktÃ³ber_november_december".split("_"),monthsShort:"jan_feb_mÃ¡rc_Ã¡pr_mÃ¡j_jÃºn_jÃºl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasÃ¡rnap_hÃ©tfÅ_kedd_szerda_csÃ¼tÃ¶rtÃ¶k_pÃ©ntek_szombat".split("_"),weekdaysShort:"vas_hÃ©t_kedd_sze_csÃ¼t_pÃ©n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(e,t,i){return 12>e?i===!0?"de":"DE":i===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mÃºlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e,t){var i={nominative:"Õ°Õ¸ÖÕ¶Õ¾Õ¡Ö_ÖÕ¥Õ¿ÖÕ¾Õ¡Ö_Õ´Õ¡ÖÕ¿_Õ¡ÕºÖÕ«Õ¬_Õ´Õ¡ÕµÕ«Õ½_Õ°Õ¸ÖÕ¶Õ«Õ½_Õ°Õ¸ÖÕ¬Õ«Õ½_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥Ö_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥Ö_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥Ö".split("_"),accusative:"Õ°Õ¸ÖÕ¶Õ¾Õ¡ÖÕ«_ÖÕ¥Õ¿ÖÕ¾Õ¡ÖÕ«_Õ´Õ¡ÖÕ¿Õ«_Õ¡ÕºÖÕ«Õ¬Õ«_Õ´Õ¡ÕµÕ«Õ½Õ«_Õ°Õ¸ÖÕ¶Õ«Õ½Õ«_Õ°Õ¸ÖÕ¬Õ«Õ½Õ«_ÖÕ£Õ¸Õ½Õ¿Õ¸Õ½Õ«_Õ½Õ¥ÕºÕ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ°Õ¸Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«_Õ¶Õ¸ÕµÕ¥Õ´Õ¢Õ¥ÖÕ«_Õ¤Õ¥Õ¯Õ¿Õ¥Õ´Õ¢Õ¥ÖÕ«".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function i(e){var t="Õ°Õ¶Õ¾_ÖÕ¿Ö_Õ´ÖÕ¿_Õ¡ÕºÖ_Õ´ÕµÕ½_Õ°Õ¶Õ½_Õ°Õ¬Õ½_ÖÕ£Õ½_Õ½ÕºÕ¿_Õ°Õ¯Õ¿_Õ¶Õ´Õ¢_Õ¤Õ¯Õ¿".split("_");return t[e.month()]}function n(e){var t="Õ¯Õ«ÖÕ¡Õ¯Õ«_Õ¥ÖÕ¯Õ¸ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¥ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ¹Õ¸ÖÕ¥ÖÕ·Õ¡Õ¢Õ©Õ«_Õ°Õ«Õ¶Õ£Õ·Õ¡Õ¢Õ©Õ«_Õ¸ÖÖÕ¢Õ¡Õ©_Õ·Õ¡Õ¢Õ¡Õ©".split("_");return t[e.day()]}return e.defineLocale("hy-am",{months:t,monthsShort:i,weekdays:n,weekdaysShort:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),weekdaysMin:"Õ¯ÖÕ¯_Õ¥ÖÕ¯_Õ¥ÖÖ_Õ¹ÖÖ_Õ°Õ¶Õ£_Õ¸ÖÖÕ¢_Õ·Õ¢Õ©".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Õ©.",LLL:"D MMMM YYYY Õ©., LT",LLLL:"dddd, D MMMM YYYY Õ©., LT"},calendar:{sameDay:"[Õ¡ÕµÕ½ÖÖ] LT",nextDay:"[Õ¾Õ¡Õ²Õ¨] LT",lastDay:"[Õ¥ÖÕ¥Õ¯] LT",nextWeek:function(){return"dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},lastWeek:function(){return"[Õ¡Õ¶ÖÕ¡Õ®] dddd [ÖÖÕ¨ ÕªÕ¡Õ´Õ¨] LT"},sameElse:"L"},relativeTime:{future:"%s Õ°Õ¥Õ¿Õ¸",past:"%s Õ¡Õ¼Õ¡Õ»",s:"Õ´Õ« ÖÕ¡Õ¶Õ« Õ¾Õ¡ÕµÖÕ¯ÕµÕ¡Õ¶",m:"ÖÕ¸ÕºÕ¥",mm:"%d ÖÕ¸ÕºÕ¥",h:"ÕªÕ¡Õ´",hh:"%d ÕªÕ¡Õ´",d:"ÖÖ",dd:"%d ÖÖ",M:"Õ¡Õ´Õ«Õ½",MM:"%d Õ¡Õ´Õ«Õ½",y:"Õ¿Õ¡ÖÕ«",yy:"%d Õ¿Õ¡ÖÕ«"},meridiem:function(e){return 4>e?"Õ£Õ«Õ·Õ¥ÖÕ¾Õ¡":12>e?"Õ¡Õ¼Õ¡Õ¾Õ¸Õ¿Õ¾Õ¡":17>e?"ÖÕ¥ÖÕ¥Õ¯Õ¾Õ¡":"Õ¥ÖÕ¥Õ¯Õ¸ÕµÕ¡Õ¶"},ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-Õ«Õ¶":e+"-ÖÕ¤";default:return e}},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){return 11>e?"pagi":15>e?"siang":19>e?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e){return 11===e%100?!0:1===e%10?!1:!0}function i(e,i,n,s){var r=e+" ";switch(n){case"s":return i||s?"nokkrar sekÃºndur":"nokkrum sekÃºndum";case"m":return i?"mÃ­nÃºta":"mÃ­nÃºtu";case"mm":return t(e)?r+(i||s?"mÃ­nÃºtur":"mÃ­nÃºtum"):i?r+"mÃ­nÃºta":r+"mÃ­nÃºtu";case"hh":return t(e)?r+(i||s?"klukkustundir":"klukkustundum"):r+"klukkustund";case"d":return i?"dagur":s?"dag":"degi";case"dd":return t(e)?i?r+"dagar":r+(s?"daga":"dÃ¶gum"):i?r+"dagur":r+(s?"dag":"degi");case"M":return i?"mÃ¡nuÃ°ur":s?"mÃ¡nuÃ°":"mÃ¡nuÃ°i";case"MM":return t(e)?i?r+"mÃ¡nuÃ°ir":r+(s?"mÃ¡nuÃ°i":"mÃ¡nuÃ°um"):i?r+"mÃ¡nuÃ°ur":r+(s?"mÃ¡nuÃ°":"mÃ¡nuÃ°i");case"y":return i||s?"Ã¡r":"Ã¡ri";case"yy":return t(e)?r+(i||s?"Ã¡r":"Ã¡rum"):r+(i||s?"Ã¡r":"Ã¡ri")}}return e.defineLocale("is",{months:"janÃºar_febrÃºar_mars_aprÃ­l_maÃ­_jÃºnÃ­_jÃºlÃ­_Ã¡gÃºst_september_oktÃ³ber_nÃ³vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maÃ­_jÃºn_jÃºl_Ã¡gÃº_sep_okt_nÃ³v_des".split("_"),weekdays:"sunnudagur_mÃ¡nudagur_Ã¾riÃ°judagur_miÃ°vikudagur_fimmtudagur_fÃ¶studagur_laugardagur".split("_"),weekdaysShort:"sun_mÃ¡n_Ã¾ri_miÃ°_fim_fÃ¶s_lau".split("_"),weekdaysMin:"Su_MÃ¡_Ãr_Mi_Fi_FÃ¶_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[Ã­ dag kl.] LT",nextDay:"[Ã¡ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Ã­ gÃ¦r kl.] LT",lastWeek:"[sÃ­Ã°asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s sÃ­Ã°an",s:i,m:i,mm:i,h:"klukkustund",hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_LunedÃ¬_MartedÃ¬_MercoledÃ¬_GiovedÃ¬_VenerdÃ¬_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dÂº",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("ja",{months:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æ¥ææ¥_æææ¥_ç«ææ¥_æ°´ææ¥_æ¨ææ¥_éææ¥_åææ¥".split("_"),weekdaysShort:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),weekdaysMin:"æ¥_æ_ç«_æ°´_æ¨_é_å".split("_"),longDateFormat:{LT:"Ahæmå",L:"YYYY/MM/DD",LL:"YYYYå¹´MæDæ¥",LLL:"YYYYå¹´MæDæ¥LT",LLLL:"YYYYå¹´MæDæ¥LT dddd"},meridiem:function(e){return 12>e?"åå":"åå¾"},calendar:{sameDay:"[ä»æ¥] LT",nextDay:"[ææ¥] LT",nextWeek:"[æ¥é±]dddd LT",lastDay:"[æ¨æ¥] LT",lastWeek:"[åé±]dddd LT",sameElse:"L"},relativeTime:{future:"%så¾",past:"%så",s:"æ°ç§",m:"1å",mm:"%då",h:"1æé",hh:"%dæé",d:"1æ¥",dd:"%dæ¥",M:"1ã¶æ",MM:"%dã¶æ",y:"1å¹´",yy:"%då¹´"}})}),function(e){e(yt)}(function(e){function t(e,t){var i={nominative:"áááááá á_ááááá áááá_ááá á¢á_ááá ááá_áááá¡á_ááááá¡á_ááááá¡á_ááááá¡á¢á_á¡áá¥á¢ááááá á_áá¥á¢ááááá á_ááááááá á_áááááááá á".split("_"),accusative:"áááááá á¡_ááááá áááá¡_ááá á¢á¡_ááá áááá¡_áááá¡á¡_ááááá¡á¡_ááááá¡á¡_ááááá¡á¢á¡_á¡áá¥á¢ááááá á¡_áá¥á¢ááááá á¡_ááááááá á¡_áááááááá á¡".split("_")},n=/D[oD] *MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function i(e,t){var i={nominative:"áááá á_áá á¨ááááá_á¡ááá¨ááááá_ááá®á¨ááááá_á®á£áá¨ááááá_ááá áá¡áááá_á¨ááááá".split("_"),accusative:"áááá áá¡_áá á¨ááááá¡_á¡ááá¨ááááá¡_ááá®á¨ááááá¡_á®á£áá¨ááááá¡_ááá áá¡áááá¡_á¨ááááá¡".split("_")},n=/(á¬ááá|á¨ááááá)/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.defineLocale("ka",{months:t,monthsShort:"ááá_ááá_ááá _ááá _ááá_ááá_ááá_ááá_á¡áá¥_áá¥á¢_ááá_ááá".split("_"),weekdays:i,weekdaysShort:"ááá_áá á¨_á¡áá_ááá®_á®á£á_ááá _á¨áá".split("_"),weekdaysMin:"áá_áá _á¡á_áá_á®á£_áá_á¨á".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[áá¦áá¡] LT[-áá]",nextDay:"[á®ááá] LT[-áá]",lastDay:"[áá£á¨áá] LT[-áá]",nextWeek:"[á¨ááááá] dddd LT[-áá]",lastWeek:"[á¬ááá] dddd LT-áá",sameElse:"L"},relativeTime:{future:function(e){return/(á¬ááá|á¬á£áá|á¡áááá|á¬ááá)/.test(e)?e.replace(/á$/,"á¨á"):e+"á¨á"},past:function(e){return/(á¬ááá|á¬á£áá|á¡áááá|áá¦á|ááá)/.test(e)?e.replace(/(á|á)$/,"áá¡ á¬áá"):/á¬ááá/.test(e)?e.replace(/á¬ááá$/,"á¬ááá¡ á¬áá"):void 0},s:"á áááááááá á¬ááá",m:"á¬á£áá",mm:"%d á¬á£áá",h:"á¡áááá",hh:"%d á¡áááá",d:"áá¦á",dd:"%d áá¦á",M:"ááá",MM:"%d ááá",y:"á¬ááá",yy:"%d á¬ááá"},ordinal:function(e){return 0===e?e:1===e?e+"-áá":20>e||100>=e&&0===e%20||0===e%100?"áá-"+e:e+"-á"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("km",{months:"áááá¶_áá»áááá_áá·áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),monthsShort:"áááá¶_áá»áááá_áá·áá¶_áááá¶_á§ááá¶_áá·áá»áá¶_áááááá¶_áá¸á á¶_ááááá¶_áá»áá¶_áá·áááá·áá¶_áááá¼".split("_"),weekdays:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysShort:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),weekdaysMin:"á¢á¶áá·ááá_ááááá_á¢áááá¶á_áá»á_áááá ááááá·á_áá»ááá_áááá".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[áááááá áááá] LT",nextDay:"[ááá¢áá áááá] LT",nextWeek:"dddd [áááá] LT",lastDay:"[áááá·ááá·á áááá] LT",lastWeek:"dddd [ááááá¶á ááá»á] [áááá] LT",sameElse:"L"},relativeTime:{future:"%sááá",past:"%sáá»á",s:"ááá»áááá¶ááá·áá¶áá¸",m:"áá½ááá¶áá¸",mm:"%d áá¶áá¸",h:"áá½ááááá",hh:"%d áááá",d:"áá½ááááá",dd:"%d áááá",M:"áá½ááá",MM:"%d áá",y:"áá½ááááá¶á",yy:"%d áááá¶á"},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("ko",{months:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),monthsShort:"1ì_2ì_3ì_4ì_5ì_6ì_7ì_8ì_9ì_10ì_11ì_12ì".split("_"),weekdays:"ì¼ìì¼_ììì¼_íìì¼_ììì¼_ëª©ìì¼_ê¸ìì¼_í ìì¼".split("_"),weekdaysShort:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),weekdaysMin:"ì¼_ì_í_ì_ëª©_ê¸_í ".split("_"),longDateFormat:{LT:"A hì më¶",L:"YYYY.MM.DD",LL:"YYYYë MMMM Dì¼",LLL:"YYYYë MMMM Dì¼ LT",LLLL:"YYYYë MMMM Dì¼ dddd LT"},meridiem:function(e){return 12>e?"ì¤ì ":"ì¤í"},calendar:{sameDay:"ì¤ë LT",nextDay:"ë´ì¼ LT",nextWeek:"dddd LT",lastDay:"ì´ì  LT",lastWeek:"ì§ëì£¼ dddd LT",sameElse:"L"},relativeTime:{future:"%s í",past:"%s ì ",s:"ëªì´",ss:"%dì´",m:"ì¼ë¶",mm:"%dë¶",h:"íìê°",hh:"%dìê°",d:"íë£¨",dd:"%dì¼",M:"íë¬",MM:"%dë¬",y:"ì¼ë",yy:"%dë"},ordinal:"%dì¼",meridiemParse:/(ì¤ì |ì¤í)/,isPM:function(e){return"ì¤í"===e}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?n[i][0]:n[i][1]}function i(e){var t=e.substr(0,e.indexOf(" "));return s(t)?"a "+e:"an "+e}function n(e){var t=e.substr(0,e.indexOf(" "));return s(t)?"viru "+e:"virun "+e}function s(e){if(e=parseInt(e,10),isNaN(e))return!1;if(0>e)return!0;if(10>e)return e>=4&&7>=e?!0:!1;if(100>e){var t=e%10,i=e/10;return 0===t?s(i):s(t)}if(1e4>e){for(;e>=10;)e/=10;return s(e)}return e/=1e3,s(e)}return e.defineLocale("lb",{months:"Januar_Februar_MÃ¤erz_AbrÃ«ll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_MÃ©indeg_DÃ«nschdeg_MÃ«ttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._MÃ©._DÃ«._MÃ«._Do._Fr._Sa.".split("_"),weekdaysMin:"So_MÃ©_DÃ«_MÃ«_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[GÃ«schter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:i,past:n,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d MÃ©int",y:t,yy:"%d Joer"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i,n){return t?"kelios sekundÄs":n?"keliÅ³ sekundÅ¾iÅ³":"kelias sekundes"}function i(e,t,i,n){return t?s(i)[0]:n?s(i)[1]:s(i)[2]}function n(e){return 0===e%10||e>10&&20>e}function s(e){return o[e].split("_")}function r(e,t,r,a){var o=e+" ";return 1===e?o+i(e,t,r[0],a):t?o+(n(e)?s(r)[1]:s(r)[0]):a?o+s(r)[1]:o+(n(e)?s(r)[1]:s(r)[2])}function a(e,t){var i=-1===t.indexOf("dddd HH:mm"),n=l[e.day()];return i?n:n.substring(0,n.length-2)+"Ä¯"}var o={m:"minutÄ_minutÄs_minutÄ",mm:"minutÄs_minuÄiÅ³_minutes",h:"valanda_valandos_valandÄ",hh:"valandos_valandÅ³_valandas",d:"diena_dienos_dienÄ",dd:"dienos_dienÅ³_dienas",M:"mÄnuo_mÄnesio_mÄnesÄ¯",MM:"mÄnesiai_mÄnesiÅ³_mÄnesius",y:"metai_metÅ³_metus",yy:"metai_metÅ³_metus"},l="sekmadienis_pirmadienis_antradienis_treÄiadienis_ketvirtadienis_penktadienis_Å¡eÅ¡tadienis".split("_");return e.defineLocale("lt",{months:"sausio_vasario_kovo_balandÅ¾io_geguÅ¾Äs_birÅ¾elio_liepos_rugpjÅ«Äio_rugsÄjo_spalio_lapkriÄio_gruodÅ¾io".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:a,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Å eÅ¡".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Å ".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Å iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[PraÄjusÄ¯] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieÅ¡ %s",s:t,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n=e.split("_");return i?1===t%10&&11!==t?n[2]:n[3]:1===t%10&&11!==t?n[0]:n[1]}function i(e,i,s){return e+" "+t(n[s],e,i)}var n={mm:"minÅ«ti_minÅ«tes_minÅ«te_minÅ«tes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mÄnesi_mÄneÅ¡us_mÄnesis_mÄneÅ¡i",yy:"gadu_gadus_gads_gadi"};return e.defineLocale("lv",{months:"janvÄris_februÄris_marts_aprÄ«lis_maijs_jÅ«nijs_jÅ«lijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jÅ«n_jÅ«l_aug_sep_okt_nov_dec".split("_"),weekdays:"svÄtdiena_pirmdiena_otrdiena_treÅ¡diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Å odien pulksten] LT",nextDay:"[RÄ«t pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[PagÄjuÅ¡Ä] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vÄlÄk",past:"%s agrÄk",s:"daÅ¾as sekundes",m:"minÅ«ti",mm:i,h:"stundu",hh:i,d:"dienu",dd:i,M:"mÄnesi",MM:i,y:"gadu",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("mk",{months:"ÑÐ°Ð½ÑÐ°ÑÐ¸_ÑÐµÐ²ÑÑÐ°ÑÐ¸_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐ¸Ð»_Ð¼Ð°Ñ_ÑÑÐ½Ð¸_ÑÑÐ»Ð¸_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ¿ÑÐµÐ¼Ð²ÑÐ¸_Ð¾ÐºÑÐ¾Ð¼Ð²ÑÐ¸_Ð½Ð¾ÐµÐ¼Ð²ÑÐ¸_Ð´ÐµÐºÐµÐ¼Ð²ÑÐ¸".split("_"),monthsShort:"ÑÐ°Ð½_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ñ_ÑÑÐ½_ÑÑÐ»_Ð°Ð²Ð³_ÑÐµÐ¿_Ð¾ÐºÑ_Ð½Ð¾Ðµ_Ð´ÐµÐº".split("_"),weekdays:"Ð½ÐµÐ´ÐµÐ»Ð°_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»Ð½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÑÑÐ¾Ðº_Ð¿ÐµÑÐ¾Ðº_ÑÐ°Ð±Ð¾ÑÐ°".split("_"),weekdaysShort:"Ð½ÐµÐ´_Ð¿Ð¾Ð½_Ð²ÑÐ¾_ÑÑÐµ_ÑÐµÑ_Ð¿ÐµÑ_ÑÐ°Ð±".split("_"),weekdaysMin:"Ð½e_Ð¿o_Ð²Ñ_ÑÑ_ÑÐµ_Ð¿Ðµ_Ña".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ÐÐµÐ½ÐµÑ Ð²Ð¾] LT",nextDay:"[Ð£ÑÑÐµ Ð²Ð¾] LT",nextWeek:"dddd [Ð²Ð¾] LT",lastDay:"[ÐÑÐµÑÐ° Ð²Ð¾] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ÐÐ¾ Ð¸Ð·Ð¼Ð¸Ð½Ð°ÑÐ°ÑÐ°] dddd [Ð²Ð¾] LT";case 1:case 2:case 4:case 5:return"[ÐÐ¾ Ð¸Ð·Ð¼Ð¸Ð½Ð°ÑÐ¸Ð¾Ñ] dddd [Ð²Ð¾] LT"}},sameElse:"L"},relativeTime:{future:"Ð¿Ð¾ÑÐ»Ðµ %s",past:"Ð¿ÑÐµÐ´ %s",s:"Ð½ÐµÐºÐ¾Ð»ÐºÑ ÑÐµÐºÑÐ½Ð´Ð¸",m:"Ð¼Ð¸Ð½ÑÑÐ°",mm:"%d Ð¼Ð¸Ð½ÑÑÐ¸",h:"ÑÐ°Ñ",hh:"%d ÑÐ°ÑÐ°",d:"Ð´ÐµÐ½",dd:"%d Ð´ÐµÐ½Ð°",M:"Ð¼ÐµÑÐµÑ",MM:"%d Ð¼ÐµÑÐµÑÐ¸",y:"Ð³Ð¾Ð´Ð¸Ð½Ð°",yy:"%d Ð³Ð¾Ð´Ð¸Ð½Ð¸"},ordinal:function(e){var t=e%10,i=e%100;return 0===e?e+"-ÐµÐ²":0===i?e+"-ÐµÐ½":i>10&&20>i?e+"-ÑÐ¸":1===t?e+"-Ð²Ð¸":2===t?e+"-ÑÐ¸":7===t||8===t?e+"-Ð¼Ð¸":e+"-ÑÐ¸"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("ml",{months:"à´à´¨àµà´µà´°à´¿_à´«àµà´¬àµà´°àµà´µà´°à´¿_à´®à´¾àµ¼à´àµà´àµ_à´à´ªàµà´°à´¿àµ½_à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ_à´à´à´¸àµà´±àµà´±àµ_à´¸àµà´ªàµà´±àµà´±à´à´¬àµ¼_à´à´àµà´àµà´¬àµ¼_à´¨à´µà´à´¬àµ¼_à´¡à´¿à´¸à´à´¬àµ¼".split("_"),monthsShort:"à´à´¨àµ._à´«àµà´¬àµà´°àµ._à´®à´¾àµ¼._à´à´ªàµà´°à´¿._à´®àµà´¯àµ_à´àµàµº_à´àµà´²àµ._à´à´._à´¸àµà´ªàµà´±àµà´±._à´à´àµà´àµ._à´¨à´µà´._à´¡à´¿à´¸à´.".split("_"),weekdays:"à´à´¾à´¯à´±à´¾à´´àµà´_à´¤à´¿à´àµà´à´³à´¾à´´àµà´_à´àµà´µàµà´µà´¾à´´àµà´_à´¬àµà´§à´¨à´¾à´´àµà´_à´µàµà´¯à´¾à´´à´¾à´´àµà´_à´µàµà´³àµà´³à´¿à´¯à´¾à´´àµà´_à´¶à´¨à´¿à´¯à´¾à´´àµà´".split("_"),weekdaysShort:"à´à´¾à´¯àµ¼_à´¤à´¿à´àµà´àµ¾_à´àµà´µàµà´µ_à´¬àµà´§àµ»_à´µàµà´¯à´¾à´´à´_à´µàµà´³àµà´³à´¿_à´¶à´¨à´¿".split("_"),weekdaysMin:"à´à´¾_à´¤à´¿_à´àµ_à´¬àµ_à´µàµà´¯à´¾_à´µàµ_à´¶".split("_"),longDateFormat:{LT:"A h:mm -à´¨àµ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à´à´¨àµà´¨àµ] LT",nextDay:"[à´¨à´¾à´³àµ] LT",nextWeek:"dddd, LT",lastDay:"[à´à´¨àµà´¨à´²àµ] LT",lastWeek:"[à´à´´à´¿à´àµà´] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à´à´´à´¿à´àµà´àµ",past:"%s à´®àµàµ»à´ªàµ",s:"à´àµ½à´ª à´¨à´¿à´®à´¿à´·à´àµà´àµ¾",m:"à´à´°àµ à´®à´¿à´¨à´¿à´±àµà´±àµ",mm:"%d à´®à´¿à´¨à´¿à´±àµà´±àµ",h:"à´à´°àµ à´®à´£à´¿à´àµà´àµàµ¼",hh:"%d à´®à´£à´¿à´àµà´àµàµ¼",d:"à´à´°àµ à´¦à´¿à´µà´¸à´",dd:"%d à´¦à´¿à´µà´¸à´",M:"à´à´°àµ à´®à´¾à´¸à´",MM:"%d à´®à´¾à´¸à´",y:"à´à´°àµ à´µàµ¼à´·à´",yy:"%d à´µàµ¼à´·à´"},meridiem:function(e){return 4>e?"à´°à´¾à´¤àµà´°à´¿":12>e?"à´°à´¾à´µà´¿à´²àµ":17>e?"à´à´àµà´ à´à´´à´¿à´àµà´àµ":20>e?"à´µàµà´àµà´¨àµà´¨àµà´°à´":"à´°à´¾à´¤àµà´°à´¿"}})}),function(e){e(yt)}(function(e){var t={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},i={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};return e.defineLocale("mr",{months:"à¤à¤¾à¤¨à¥à¤µà¤¾à¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤¾à¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¥_à¤à¥à¤¨_à¤à¥à¤²à¥_à¤à¤à¤¸à¥à¤_à¤¸à¤ªà¥à¤à¥à¤à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤µà¥à¤¹à¥à¤à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤à¤¬à¤°".split("_"),monthsShort:"à¤à¤¾à¤¨à¥._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤._à¤à¤ªà¥à¤°à¤¿._à¤®à¥._à¤à¥à¤¨._à¤à¥à¤²à¥._à¤à¤._à¤¸à¤ªà¥à¤à¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤µà¥à¤¹à¥à¤._à¤¡à¤¿à¤¸à¥à¤.".split("_"),weekdays:"à¤°à¤µà¤¿à¤µà¤¾à¤°_à¤¸à¥à¤®à¤µà¤¾à¤°_à¤®à¤à¤à¤³à¤µà¤¾à¤°_à¤¬à¥à¤§à¤µà¤¾à¤°_à¤à¥à¤°à¥à¤µà¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤µà¤¾à¤°_à¤¶à¤¨à¤¿à¤µà¤¾à¤°".split("_"),weekdaysShort:"à¤°à¤µà¤¿_à¤¸à¥à¤®_à¤®à¤à¤à¤³_à¤¬à¥à¤§_à¤à¥à¤°à¥_à¤¶à¥à¤à¥à¤°_à¤¶à¤¨à¤¿".split("_"),weekdaysMin:"à¤°_à¤¸à¥_à¤®à¤_à¤¬à¥_à¤à¥_à¤¶à¥_à¤¶".split("_"),longDateFormat:{LT:"A h:mm à¤µà¤¾à¤à¤¤à¤¾",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤à¤¦à¥à¤¯à¤¾] LT",nextWeek:"dddd, LT",lastDay:"[à¤à¤¾à¤²] LT",lastWeek:"[à¤®à¤¾à¤à¥à¤²] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à¤¨à¤à¤¤à¤°",past:"%s à¤ªà¥à¤°à¥à¤µà¥",s:"à¤¸à¥à¤à¤à¤¦",m:"à¤à¤ à¤®à¤¿à¤¨à¤¿à¤",mm:"%d à¤®à¤¿à¤¨à¤¿à¤à¥",h:"à¤à¤ à¤¤à¤¾à¤¸",hh:"%d à¤¤à¤¾à¤¸",d:"à¤à¤ à¤¦à¤¿à¤µà¤¸",dd:"%d à¤¦à¤¿à¤µà¤¸",M:"à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾",MM:"%d à¤®à¤¹à¤¿à¤¨à¥",y:"à¤à¤ à¤µà¤°à¥à¤·",yy:"%d à¤µà¤°à¥à¤·à¥"},preparse:function(e){return e.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"à¤°à¤¾à¤¤à¥à¤°à¥":10>e?"à¤¸à¤à¤¾à¤³à¥":17>e?"à¤¦à¥à¤ªà¤¾à¤°à¥":20>e?"à¤¸à¤¾à¤¯à¤à¤à¤¾à¤³à¥":"à¤°à¤¾à¤¤à¥à¤°à¥"},week:{dow:0,doy:6}})}),function(e){e(yt)}(function(e){return e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){return 11>e?"pagi":15>e?"tengahari":19>e?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t={1:"á",2:"á",3:"á",4:"á",5:"á",6:"á",7:"á",8:"á",9:"á",0:"á"},i={"á":"1","á":"2","á":"3","á":"4","á":"5","á":"6","á":"7","á":"8","á":"9","á":"0"};return e.defineLocale("my",{months:"áááºááá«áá®_áá±áá±á¬áºáá«áá®_áááº_á§áá¼á®_áá±_áá½ááº_áá°áá­á¯ááº_áá¼áá¯ááº_áááºáááºáá¬_á¡á±á¬ááºáá­á¯áá¬_áá­á¯áááºáá¬_áá®áááºáá¬".split("_"),monthsShort:"áááº_áá±_áááº_áá¼á®_áá±_áá½ááº_áá­á¯ááº_áá¼_áááº_á¡á±á¬ááº_áá­á¯_áá®".split("_"),weekdays:"ááááºá¹ááá½á±_ááááºá¹áá¬_á¡ááºá¹áá«_áá¯áá¹ááá°á¸_áá¼á¬áááá±á¸_áá±á¬áá¼á¬_ááá±".split("_"),weekdaysShort:"áá½á±_áá¬_ááºá¹áá«_áá°á¸_áá¼á¬_áá±á¬_áá±".split("_"),weekdaysMin:"áá½á±_áá¬_ááºá¹áá«_áá°á¸_áá¼á¬_áá±á¬_áá±".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ááá±.] LT [áá¾á¬]",nextDay:"[ááááºáá¼ááº] LT [áá¾á¬]",nextWeek:"dddd LT [áá¾á¬]",lastDay:"[ááá±.á] LT [áá¾á¬]",lastWeek:"[áá¼á®á¸áá²á·áá±á¬] dddd LT [áá¾á¬]",sameElse:"L"},relativeTime:{future:"áá¬áááºá· %s áá¾á¬",past:"áá½ááºáá²á·áá±á¬ %s á",s:"ááá¹áááº.á¡áááºá¸áááº",m:"áááºáá­áááº",mm:"%d áá­áááº",h:"áááºáá¬áá®",hh:"%d áá¬áá®",d:"áááºáááº",dd:"%d áááº",M:"áááºá",MM:"%d á",y:"áááºáá¾ááº",yy:"%d áá¾ááº"},preparse:function(e){return e.replace(/[áááááááááá]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sÃ¸ndag_mandag_tirsdag_onsdag_torsdag_fredag_lÃ¸rdag".split("_"),weekdaysShort:"sÃ¸n_man_tirs_ons_tors_fre_lÃ¸r".split("_"),weekdaysMin:"sÃ¸_ma_ti_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gÃ¥r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mÃ¥ned",MM:"%d mÃ¥neder",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})
}),function(e){e(yt)}(function(e){var t={1:"à¥§",2:"à¥¨",3:"à¥©",4:"à¥ª",5:"à¥«",6:"à¥¬",7:"à¥­",8:"à¥®",9:"à¥¯",0:"à¥¦"},i={"à¥§":"1","à¥¨":"2","à¥©":"3","à¥ª":"4","à¥«":"5","à¥¬":"6","à¥­":"7","à¥®":"8","à¥¯":"9","à¥¦":"0"};return e.defineLocale("ne",{months:"à¤à¤¨à¤µà¤°à¥_à¤«à¥à¤¬à¥à¤°à¥à¤µà¤°à¥_à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿à¤²_à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤_à¤à¤à¤·à¥à¤_à¤¸à¥à¤ªà¥à¤à¥à¤®à¥à¤¬à¤°_à¤à¤à¥à¤à¥à¤¬à¤°_à¤¨à¥à¤­à¥à¤®à¥à¤¬à¤°_à¤¡à¤¿à¤¸à¥à¤®à¥à¤¬à¤°".split("_"),monthsShort:"à¤à¤¨._à¤«à¥à¤¬à¥à¤°à¥._à¤®à¤¾à¤°à¥à¤_à¤à¤ªà¥à¤°à¤¿._à¤®à¤_à¤à¥à¤¨_à¤à¥à¤²à¤¾à¤._à¤à¤._à¤¸à¥à¤ªà¥à¤._à¤à¤à¥à¤à¥._à¤¨à¥à¤­à¥._à¤¡à¤¿à¤¸à¥.".split("_"),weekdays:"à¤à¤à¤¤à¤¬à¤¾à¤°_à¤¸à¥à¤®à¤¬à¤¾à¤°_à¤®à¤à¥à¤à¤²à¤¬à¤¾à¤°_à¤¬à¥à¤§à¤¬à¤¾à¤°_à¤¬à¤¿à¤¹à¤¿à¤¬à¤¾à¤°_à¤¶à¥à¤à¥à¤°à¤¬à¤¾à¤°_à¤¶à¤¨à¤¿à¤¬à¤¾à¤°".split("_"),weekdaysShort:"à¤à¤à¤¤._à¤¸à¥à¤®._à¤®à¤à¥à¤à¤²._à¤¬à¥à¤§._à¤¬à¤¿à¤¹à¤¿._à¤¶à¥à¤à¥à¤°._à¤¶à¤¨à¤¿.".split("_"),weekdaysMin:"à¤à¤._à¤¸à¥._à¤®à¤à¥_à¤¬à¥._à¤¬à¤¿._à¤¶à¥._à¤¶.".split("_"),longDateFormat:{LT:"Aà¤à¥ h:mm à¤¬à¤à¥",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(e){return e.replace(/[à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯à¥¦]/g,function(e){return i[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 3>e?"à¤°à¤¾à¤¤à¥":10>e?"à¤¬à¤¿à¤¹à¤¾à¤¨":15>e?"à¤¦à¤¿à¤à¤à¤¸à¥":18>e?"à¤¬à¥à¤²à¥à¤à¤¾":20>e?"à¤¸à¤¾à¤à¤":"à¤°à¤¾à¤¤à¥"},calendar:{sameDay:"[à¤à¤] LT",nextDay:"[à¤­à¥à¤²à¥] LT",nextWeek:"[à¤à¤à¤à¤¦à¥] dddd[,] LT",lastDay:"[à¤¹à¤¿à¤à¥] LT",lastWeek:"[à¤à¤à¤à¥] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sà¤®à¤¾",past:"%s à¤à¤à¤¾à¤¡à¥",s:"à¤à¥à¤¹à¥ à¤¸à¤®à¤¯",m:"à¤à¤ à¤®à¤¿à¤¨à¥à¤",mm:"%d à¤®à¤¿à¤¨à¥à¤",h:"à¤à¤ à¤à¤£à¥à¤à¤¾",hh:"%d à¤à¤£à¥à¤à¤¾",d:"à¤à¤ à¤¦à¤¿à¤¨",dd:"%d à¤¦à¤¿à¤¨",M:"à¤à¤ à¤®à¤¹à¤¿à¤¨à¤¾",MM:"%d à¤®à¤¹à¤¿à¤¨à¤¾",y:"à¤à¤ à¤¬à¤°à¥à¤·",yy:"%d à¤¬à¤°à¥à¤·"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,n){return/-MMM-/.test(n)?i[e.month()]:t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"Ã©Ã©n minuut",mm:"%d minuten",h:"Ã©Ã©n uur",hh:"%d uur",d:"Ã©Ã©n dag",dd:"%d dagen",M:"Ã©Ã©n maand",MM:"%d maanden",y:"Ã©Ã©n jaar",yy:"%d jaar"},ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mÃ¥ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mÃ¥n_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_mÃ¥_ty_on_to_fr_lÃ¸".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gÃ¥r klokka] LT",lastWeek:"[FÃ¸regÃ¥ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mÃ¥nad",MM:"%d mÃ¥nader",y:"eit Ã¥r",yy:"%d Ã¥r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e){return 5>e%10&&e%10>1&&1!==~~(e/10)%10}function i(e,i,n){var s=e+" ";switch(n){case"m":return i?"minuta":"minutÄ";case"mm":return s+(t(e)?"minuty":"minut");case"h":return i?"godzina":"godzinÄ";case"hh":return s+(t(e)?"godziny":"godzin");case"MM":return s+(t(e)?"miesiÄce":"miesiÄcy");case"yy":return s+(t(e)?"lata":"lat")}}var n="styczeÅ_luty_marzec_kwiecieÅ_maj_czerwiec_lipiec_sierpieÅ_wrzesieÅ_paÅºdziernik_listopad_grudzieÅ".split("_"),s="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzeÅnia_paÅºdziernika_listopada_grudnia".split("_");return e.defineLocale("pl",{months:function(e,t){return/D MMMM/.test(t)?s[e.month()]:n[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paÅº_lis_gru".split("_"),weekdays:"niedziela_poniedziaÅek_wtorek_Åroda_czwartek_piÄtek_sobota".split("_"),weekdaysShort:"nie_pon_wt_År_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_År_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[DziÅ o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszÅÄ niedzielÄ o] LT";case 3:return"[W zeszÅÄ ÅrodÄ o] LT";case 6:return"[W zeszÅÄ sobotÄ o] LT";default:return"[W zeszÅy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzieÅ",dd:"%d dni",M:"miesiÄc",MM:i,y:"rok",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("pt-br",{months:"janeiro_fevereiro_marÃ§o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terÃ§a-feira_quarta-feira_quinta-feira_sexta-feira_sÃ¡bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sÃ¡b".split("_"),weekdaysMin:"dom_2Âª_3Âª_4Âª_5Âª_6Âª_sÃ¡b".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [Ã s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [Ã s] LT"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrÃ¡s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dÂº"})}),function(e){e(yt)}(function(e){return e.defineLocale("pt",{months:"janeiro_fevereiro_marÃ§o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terÃ§a-feira_quarta-feira_quinta-feira_sexta-feira_sÃ¡bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sÃ¡b".split("_"),weekdaysMin:"dom_2Âª_3Âª_4Âª_5Âª_6Âª_sÃ¡b".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje Ã s] LT",nextDay:"[AmanhÃ£ Ã s] LT",nextWeek:"dddd [Ã s] LT",lastDay:"[Ontem Ã s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Ãltimo] dddd [Ã s] LT":"[Ãltima] dddd [Ã s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"hÃ¡ %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mÃªs",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dÂº",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},s=" ";return(e%100>=20||e>=100&&0===e%100)&&(s=" de "),e+s+n[i]}return e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminicÄ_luni_marÈi_miercuri_joi_vineri_sÃ¢mbÄtÄ".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_SÃ¢m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_SÃ¢".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mÃ¢ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s Ã®n urmÄ",s:"cÃ¢teva secunde",m:"un minut",mm:t,h:"o orÄ",hh:t,d:"o zi",dd:t,M:"o lunÄ",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e,t){var i=e.split("_");return 1===t%10&&11!==t%100?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var s={mm:i?"Ð¼Ð¸Ð½ÑÑÐ°_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ":"Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑÑ_Ð¼Ð¸Ð½ÑÑ",hh:"ÑÐ°Ñ_ÑÐ°ÑÐ°_ÑÐ°ÑÐ¾Ð²",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÐµÐ¹",MM:"Ð¼ÐµÑÑÑ_Ð¼ÐµÑÑÑÐ°_Ð¼ÐµÑÑÑÐµÐ²",yy:"Ð³Ð¾Ð´_Ð³Ð¾Ð´Ð°_Ð»ÐµÑ"};return"m"===n?i?"Ð¼Ð¸Ð½ÑÑÐ°":"Ð¼Ð¸Ð½ÑÑÑ":e+" "+t(s[n],+e)}function n(e,t){var i={nominative:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),accusative:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑÐ°_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑÐ°_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function s(e,t){var i={nominative:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),accusative:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ñ_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function r(e,t){var i={nominative:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÐ°_ÑÑÐ±Ð±Ð¾ÑÐ°".split("_"),accusative:"Ð²Ð¾ÑÐºÑÐµÑÐµÐ½ÑÐµ_Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº_Ð²ÑÐ¾ÑÐ½Ð¸Ðº_ÑÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑÐ³_Ð¿ÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð±Ð¾ÑÑ".split("_")},n=/\[ ?[ÐÐ²] ?(?:Ð¿ÑÐ¾ÑÐ»ÑÑ|ÑÐ»ÐµÐ´ÑÑÑÑÑ)? ?\] ?dddd/.test(t)?"accusative":"nominative";return i[n][e.day()]}return e.defineLocale("ru",{months:n,monthsShort:s,weekdays:r,weekdaysShort:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð²Ñ_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),monthsParse:[/^ÑÐ½Ð²/i,/^ÑÐµÐ²/i,/^Ð¼Ð°Ñ/i,/^Ð°Ð¿Ñ/i,/^Ð¼Ð°[Ð¹|Ñ]/i,/^Ð¸ÑÐ½/i,/^Ð¸ÑÐ»/i,/^Ð°Ð²Ð³/i,/^ÑÐµÐ½/i,/^Ð¾ÐºÑ/i,/^Ð½Ð¾Ñ/i,/^Ð´ÐµÐº/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ð³.",LLL:"D MMMM YYYY Ð³., LT",LLLL:"dddd, D MMMM YYYY Ð³., LT"},calendar:{sameDay:"[Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð²] LT",nextDay:"[ÐÐ°Ð²ÑÑÐ° Ð²] LT",lastDay:"[ÐÑÐµÑÐ° Ð²] LT",nextWeek:function(){return 2===this.day()?"[ÐÐ¾] dddd [Ð²] LT":"[Ð] dddd [Ð²] LT"},lastWeek:function(){switch(this.day()){case 0:return"[Ð Ð¿ÑÐ¾ÑÐ»Ð¾Ðµ] dddd [Ð²] LT";case 1:case 2:case 4:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÐ¹] dddd [Ð²] LT";case 3:case 5:case 6:return"[Ð Ð¿ÑÐ¾ÑÐ»ÑÑ] dddd [Ð²] LT"}},sameElse:"L"},relativeTime:{future:"ÑÐµÑÐµÐ· %s",past:"%s Ð½Ð°Ð·Ð°Ð´",s:"Ð½ÐµÑÐºÐ¾Ð»ÑÐºÐ¾ ÑÐµÐºÑÐ½Ð´",m:i,mm:i,h:"ÑÐ°Ñ",hh:i,d:"Ð´ÐµÐ½Ñ",dd:i,M:"Ð¼ÐµÑÑÑ",MM:i,y:"Ð³Ð¾Ð´",yy:i},meridiemParse:/Ð½Ð¾ÑÐ¸|ÑÑÑÐ°|Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°/i,isPM:function(e){return/^(Ð´Ð½Ñ|Ð²ÐµÑÐµÑÐ°)$/.test(e)},meridiem:function(e){return 4>e?"Ð½Ð¾ÑÐ¸":12>e?"ÑÑÑÐ°":17>e?"Ð´Ð½Ñ":"Ð²ÐµÑÐµÑÐ°"},ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-Ð¹";case"D":return e+"-Ð³Ð¾";case"w":case"W":return e+"-Ñ";default:return e}},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){function t(e){return e>1&&5>e}function i(e,i,n,s){var r=e+" ";switch(n){case"s":return i||s?"pÃ¡r sekÃºnd":"pÃ¡r sekundami";case"m":return i?"minÃºta":s?"minÃºtu":"minÃºtou";case"mm":return i||s?r+(t(e)?"minÃºty":"minÃºt"):r+"minÃºtami";case"h":return i?"hodina":s?"hodinu":"hodinou";case"hh":return i||s?r+(t(e)?"hodiny":"hodÃ­n"):r+"hodinami";case"d":return i||s?"deÅ":"dÅom";case"dd":return i||s?r+(t(e)?"dni":"dnÃ­"):r+"dÅami";case"M":return i||s?"mesiac":"mesiacom";case"MM":return i||s?r+(t(e)?"mesiace":"mesiacov"):r+"mesiacmi";case"y":return i||s?"rok":"rokom";case"yy":return i||s?r+(t(e)?"roky":"rokov"):r+"rokmi"}}var n="januÃ¡r_februÃ¡r_marec_aprÃ­l_mÃ¡j_jÃºn_jÃºl_august_september_oktÃ³ber_november_december".split("_"),s="jan_feb_mar_apr_mÃ¡j_jÃºn_jÃºl_aug_sep_okt_nov_dec".split("_");return e.defineLocale("sk",{months:n,monthsShort:s,monthsParse:function(e,t){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+e[i]+"$|^"+t[i]+"$","i");return n}(n,s),weekdays:"nedeÄ¾a_pondelok_utorok_streda_Å¡tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_Å¡t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_Å¡t_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeÄ¾u o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo Å¡tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vÄera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulÃº nedeÄ¾u o] LT";case 1:case 2:return"[minulÃ½] dddd [o] LT";case 3:return"[minulÃº stredu o] LT";case 4:case 5:return"[minulÃ½] dddd [o] LT";case 6:return"[minulÃº sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){function t(e,t,i){var n=e+" ";switch(i){case"m":return t?"ena minuta":"eno minuto";case"mm":return n+=1===e?"minuta":2===e?"minuti":3===e||4===e?"minute":"minut";case"h":return t?"ena ura":"eno uro";case"hh":return n+=1===e?"ura":2===e?"uri":3===e||4===e?"ure":"ur";case"dd":return n+=1===e?"dan":"dni";case"MM":return n+=1===e?"mesec":2===e?"meseca":3===e||4===e?"mesece":"mesecev";case"yy":return n+=1===e?"leto":2===e?"leti":3===e||4===e?"leta":"let"}}return e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_Äetrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._Äet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_Äe_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[vÄeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejÅ¡nja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejÅ¡nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"Äez %s",past:"%s nazaj",s:"nekaj sekund",m:t,mm:t,h:t,hh:t,d:"en dan",dd:t,M:"en mesec",MM:t,y:"eno leto",yy:t},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_NÃ«ntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_NÃ«n_Dhj".split("_"),weekdays:"E Diel_E HÃ«nÃ«_E MartÃ«_E MÃ«rkurÃ«_E Enjte_E Premte_E ShtunÃ«".split("_"),weekdaysShort:"Die_HÃ«n_Mar_MÃ«r_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_MÃ«_E_P_Sh".split("_"),meridiem:function(e){return 12>e?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot nÃ«] LT",nextDay:"[NesÃ«r nÃ«] LT",nextWeek:"dddd [nÃ«] LT",lastDay:"[Dje nÃ«] LT",lastWeek:"dddd [e kaluar nÃ«] LT",sameElse:"L"},relativeTime:{future:"nÃ« %s",past:"%s mÃ« parÃ«",s:"disa sekonda",m:"njÃ« minutÃ«",mm:"%d minuta",h:"njÃ« orÃ«",hh:"%d orÃ«",d:"njÃ« ditÃ«",dd:"%d ditÃ«",M:"njÃ« muaj",MM:"%d muaj",y:"njÃ« vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){var t={words:{m:["ÑÐµÐ´Ð°Ð½ Ð¼Ð¸Ð½ÑÑ","ÑÐµÐ´Ð½Ðµ Ð¼Ð¸Ð½ÑÑÐµ"],mm:["Ð¼Ð¸Ð½ÑÑ","Ð¼Ð¸Ð½ÑÑÐµ","Ð¼Ð¸Ð½ÑÑÐ°"],h:["ÑÐµÐ´Ð°Ð½ ÑÐ°Ñ","ÑÐµÐ´Ð½Ð¾Ð³ ÑÐ°ÑÐ°"],hh:["ÑÐ°Ñ","ÑÐ°ÑÐ°","ÑÐ°ÑÐ¸"],dd:["Ð´Ð°Ð½","Ð´Ð°Ð½Ð°","Ð´Ð°Ð½Ð°"],MM:["Ð¼ÐµÑÐµÑ","Ð¼ÐµÑÐµÑÐ°","Ð¼ÐµÑÐµÑÐ¸"],yy:["Ð³Ð¾Ð´Ð¸Ð½Ð°","Ð³Ð¾Ð´Ð¸Ð½Ðµ","Ð³Ð¾Ð´Ð¸Ð½Ð°"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,i,n){var s=t.words[n];return 1===n.length?i?s[0]:s[1]:e+" "+t.correctGrammaticalCase(e,s)}};return e.defineLocale("sr-cyrl",{months:["ÑÐ°Ð½ÑÐ°Ñ","ÑÐµÐ±ÑÑÐ°Ñ","Ð¼Ð°ÑÑ","Ð°Ð¿ÑÐ¸Ð»","Ð¼Ð°Ñ","ÑÑÐ½","ÑÑÐ»","Ð°Ð²Ð³ÑÑÑ","ÑÐµÐ¿ÑÐµÐ¼Ð±Ð°Ñ","Ð¾ÐºÑÐ¾Ð±Ð°Ñ","Ð½Ð¾Ð²ÐµÐ¼Ð±Ð°Ñ","Ð´ÐµÑÐµÐ¼Ð±Ð°Ñ"],monthsShort:["ÑÐ°Ð½.","ÑÐµÐ±.","Ð¼Ð°Ñ.","Ð°Ð¿Ñ.","Ð¼Ð°Ñ","ÑÑÐ½","ÑÑÐ»","Ð°Ð²Ð³.","ÑÐµÐ¿.","Ð¾ÐºÑ.","Ð½Ð¾Ð².","Ð´ÐµÑ."],weekdays:["Ð½ÐµÐ´ÐµÑÐ°","Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐ°Ðº","ÑÑÐ¾ÑÐ°Ðº","ÑÑÐµÐ´Ð°","ÑÐµÑÐ²ÑÑÐ°Ðº","Ð¿ÐµÑÐ°Ðº","ÑÑÐ±Ð¾ÑÐ°"],weekdaysShort:["Ð½ÐµÐ´.","Ð¿Ð¾Ð½.","ÑÑÐ¾.","ÑÑÐµ.","ÑÐµÑ.","Ð¿ÐµÑ.","ÑÑÐ±."],weekdaysMin:["Ð½Ðµ","Ð¿Ð¾","ÑÑ","ÑÑ","ÑÐµ","Ð¿Ðµ","ÑÑ"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Ð´Ð°Ð½Ð°Ñ Ñ] LT",nextDay:"[ÑÑÑÑÐ° Ñ] LT",nextWeek:function(){switch(this.day()){case 0:return"[Ñ] [Ð½ÐµÐ´ÐµÑÑ] [Ñ] LT";case 3:return"[Ñ] [ÑÑÐµÐ´Ñ] [Ñ] LT";case 6:return"[Ñ] [ÑÑÐ±Ð¾ÑÑ] [Ñ] LT";case 1:case 2:case 4:case 5:return"[Ñ] dddd [Ñ] LT"}},lastDay:"[ÑÑÑÐµ Ñ] LT",lastWeek:function(){var e=["[Ð¿ÑÐ¾ÑÐ»Ðµ] [Ð½ÐµÐ´ÐµÑÐµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿Ð¾Ð½ÐµÐ´ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÑÐ¾ÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐµÐ´Ðµ] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [ÑÐµÑÐ²ÑÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ð¾Ð³] [Ð¿ÐµÑÐºÐ°] [Ñ] LT","[Ð¿ÑÐ¾ÑÐ»Ðµ] [ÑÑÐ±Ð¾ÑÐµ] [Ñ] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"Ð¿ÑÐµ %s",s:"Ð½ÐµÐºÐ¾Ð»Ð¸ÐºÐ¾ ÑÐµÐºÑÐ½Ð´Ð¸",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"Ð´Ð°Ð½",dd:t.translate,M:"Ð¼ÐµÑÐµÑ",MM:t.translate,y:"Ð³Ð¾Ð´Ð¸Ð½Ñ",yy:t.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,i,n){var s=t.words[n];return 1===n.length?i?s[0]:s[1]:e+" "+t.correctGrammaticalCase(e,s)}};return e.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","Äetvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","Äet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","Äe","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juÄe u] LT",lastWeek:function(){var e=["[proÅ¡le] [nedelje] [u] LT","[proÅ¡log] [ponedeljka] [u] LT","[proÅ¡log] [utorka] [u] LT","[proÅ¡le] [srede] [u] LT","[proÅ¡log] [Äetvrtka] [u] LT","[proÅ¡log] [petka] [u] LT","[proÅ¡le] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sÃ¶ndag_mÃ¥ndag_tisdag_onsdag_torsdag_fredag_lÃ¶rdag".split("_"),weekdaysShort:"sÃ¶n_mÃ¥n_tis_ons_tor_fre_lÃ¶r".split("_"),weekdaysMin:"sÃ¶_mÃ¥_ti_on_to_fr_lÃ¶".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[IgÃ¥r] LT",nextWeek:"dddd LT",lastWeek:"[FÃ¶rra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fÃ¶r %s sedan",s:"nÃ¥gra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mÃ¥nad",MM:"%d mÃ¥nader",y:"ett Ã¥r",yy:"%d Ã¥r"},ordinal:function(e){var t=e%10,i=1===~~(e%100/10)?"e":1===t?"a":2===t?"a":3===t?"e":"e";return e+i},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("ta",{months:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),monthsShort:"à®à®©à®µà®°à®¿_à®ªà®¿à®ªà¯à®°à®µà®°à®¿_à®®à®¾à®°à¯à®à¯_à®à®ªà¯à®°à®²à¯_à®®à¯_à®à¯à®©à¯_à®à¯à®²à¯_à®à®à®¸à¯à®à¯_à®à¯à®ªà¯à®à¯à®®à¯à®ªà®°à¯_à®à®à¯à®à¯à®¾à®ªà®°à¯_à®¨à®µà®®à¯à®ªà®°à¯_à®à®¿à®à®®à¯à®ªà®°à¯".split("_"),weekdays:"à®à®¾à®¯à®¿à®±à¯à®±à¯à®à¯à®à®¿à®´à®®à¯_à®¤à®¿à®à¯à®à®à¯à®à®¿à®´à®®à¯_à®à¯à®µà¯à®µà®¾à®¯à¯à®à®¿à®´à®®à¯_à®ªà¯à®¤à®©à¯à®à®¿à®´à®®à¯_à®µà®¿à®¯à®¾à®´à®à¯à®à®¿à®´à®®à¯_à®µà¯à®³à¯à®³à®¿à®à¯à®à®¿à®´à®®à¯_à®à®©à®¿à®à¯à®à®¿à®´à®®à¯".split("_"),weekdaysShort:"à®à®¾à®¯à®¿à®±à¯_à®¤à®¿à®à¯à®à®³à¯_à®à¯à®µà¯à®µà®¾à®¯à¯_à®ªà¯à®¤à®©à¯_à®µà®¿à®¯à®¾à®´à®©à¯_à®µà¯à®³à¯à®³à®¿_à®à®©à®¿".split("_"),weekdaysMin:"à®à®¾_à®¤à®¿_à®à¯_à®ªà¯_à®µà®¿_à®µà¯_à®".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[à®à®©à¯à®±à¯] LT",nextDay:"[à®¨à®¾à®³à¯] LT",nextWeek:"dddd, LT",lastDay:"[à®¨à¯à®±à¯à®±à¯] LT",lastWeek:"[à®à®à®¨à¯à®¤ à®µà®¾à®°à®®à¯] dddd, LT",sameElse:"L"},relativeTime:{future:"%s à®à®²à¯",past:"%s à®®à¯à®©à¯",s:"à®à®°à¯ à®à®¿à®² à®µà®¿à®¨à®¾à®à®¿à®à®³à¯",m:"à®à®°à¯ à®¨à®¿à®®à®¿à®à®®à¯",mm:"%d à®¨à®¿à®®à®¿à®à®à¯à®à®³à¯",h:"à®à®°à¯ à®®à®£à®¿ à®¨à¯à®°à®®à¯",hh:"%d à®®à®£à®¿ à®¨à¯à®°à®®à¯",d:"à®à®°à¯ à®¨à®¾à®³à¯",dd:"%d à®¨à®¾à®à¯à®à®³à¯",M:"à®à®°à¯ à®®à®¾à®¤à®®à¯",MM:"%d à®®à®¾à®¤à®à¯à®à®³à¯",y:"à®à®°à¯ à®µà®°à¯à®à®®à¯",yy:"%d à®à®£à¯à®à¯à®à®³à¯"},ordinal:function(e){return e+"à®µà®¤à¯"},meridiem:function(e){return e>=6&&10>=e?" à®à®¾à®²à¯":e>=10&&14>=e?" à®¨à®£à¯à®ªà®à®²à¯":e>=14&&18>=e?" à®à®±à¯à®ªà®¾à®à¯":e>=18&&20>=e?" à®®à®¾à®²à¯":e>=20&&24>=e?" à®à®°à®µà¯":e>=0&&6>=e?" à®µà¯à®à®±à¯":void 0},week:{dow:0,doy:6}})}),function(e){e(yt)}(function(e){return e.defineLocale("th",{months:"à¸¡à¸à¸£à¸²à¸à¸¡_à¸à¸¸à¸¡à¸ à¸²à¸à¸±à¸à¸à¹_à¸¡à¸µà¸à¸²à¸à¸¡_à¹à¸¡à¸©à¸²à¸¢à¸_à¸à¸¤à¸©à¸ à¸²à¸à¸¡_à¸¡à¸´à¸à¸¸à¸à¸²à¸¢à¸_à¸à¸£à¸à¸à¸²à¸à¸¡_à¸ªà¸´à¸à¸«à¸²à¸à¸¡_à¸à¸±à¸à¸¢à¸²à¸¢à¸_à¸à¸¸à¸¥à¸²à¸à¸¡_à¸à¸¤à¸¨à¸à¸´à¸à¸²à¸¢à¸_à¸à¸±à¸à¸§à¸²à¸à¸¡".split("_"),monthsShort:"à¸¡à¸à¸£à¸²_à¸à¸¸à¸¡à¸ à¸²_à¸¡à¸µà¸à¸²_à¹à¸¡à¸©à¸²_à¸à¸¤à¸©à¸ à¸²_à¸¡à¸´à¸à¸¸à¸à¸²_à¸à¸£à¸à¸à¸²_à¸ªà¸´à¸à¸«à¸²_à¸à¸±à¸à¸¢à¸²_à¸à¸¸à¸¥à¸²_à¸à¸¤à¸¨à¸à¸´à¸à¸²_à¸à¸±à¸à¸§à¸²".split("_"),weekdays:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ªà¸à¸à¸µ_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysShort:"à¸­à¸²à¸à¸´à¸à¸¢à¹_à¸à¸±à¸à¸à¸£à¹_à¸­à¸±à¸à¸à¸²à¸£_à¸à¸¸à¸_à¸à¸¤à¸«à¸±à¸ª_à¸¨à¸¸à¸à¸£à¹_à¹à¸ªà¸²à¸£à¹".split("_"),weekdaysMin:"à¸­à¸²._à¸._à¸­._à¸._à¸à¸¤._à¸¨._à¸ª.".split("_"),longDateFormat:{LT:"H à¸à¸²à¸¬à¸´à¸à¸² m à¸à¸²à¸à¸µ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY à¹à¸§à¸¥à¸² LT",LLLL:"à¸§à¸±à¸ddddà¸à¸µà¹ D MMMM YYYY à¹à¸§à¸¥à¸² LT"},meridiem:function(e){return 12>e?"à¸à¹à¸­à¸à¹à¸à¸µà¹à¸¢à¸":"à¸«à¸¥à¸±à¸à¹à¸à¸µà¹à¸¢à¸"},calendar:{sameDay:"[à¸§à¸±à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextDay:"[à¸à¸£à¸¸à¹à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",nextWeek:"dddd[à¸«à¸à¹à¸² à¹à¸§à¸¥à¸²] LT",lastDay:"[à¹à¸¡à¸·à¹à¸­à¸§à¸²à¸à¸à¸µà¹ à¹à¸§à¸¥à¸²] LT",lastWeek:"[à¸§à¸±à¸]dddd[à¸à¸µà¹à¹à¸¥à¹à¸§ à¹à¸§à¸¥à¸²] LT",sameElse:"L"},relativeTime:{future:"à¸­à¸µà¸ %s",past:"%sà¸à¸µà¹à¹à¸¥à¹à¸§",s:"à¹à¸¡à¹à¸à¸µà¹à¸§à¸´à¸à¸²à¸à¸µ",m:"1 à¸à¸²à¸à¸µ",mm:"%d à¸à¸²à¸à¸µ",h:"1 à¸à¸±à¹à¸§à¹à¸¡à¸",hh:"%d à¸à¸±à¹à¸§à¹à¸¡à¸",d:"1 à¸§à¸±à¸",dd:"%d à¸§à¸±à¸",M:"1 à¹à¸à¸·à¸­à¸",MM:"%d à¹à¸à¸·à¸­à¸",y:"1 à¸à¸µ",yy:"%d à¸à¸µ"}})}),function(e){e(yt)}(function(e){return e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(e){return e},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'Ã¼ncÃ¼",4:"'Ã¼ncÃ¼",100:"'Ã¼ncÃ¼",6:"'ncÄ±",9:"'uncu",10:"'uncu",30:"'uncu",60:"'Ä±ncÄ±",90:"'Ä±ncÄ±"};return e.defineLocale("tr",{months:"Ocak_Åubat_Mart_Nisan_MayÄ±s_Haziran_Temmuz_AÄustos_EylÃ¼l_Ekim_KasÄ±m_AralÄ±k".split("_"),monthsShort:"Oca_Åub_Mar_Nis_May_Haz_Tem_AÄu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_SalÄ±_ÃarÅamba_PerÅembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Ãar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ãa_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugÃ¼n saat] LT",nextDay:"[yarÄ±n saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dÃ¼n] LT",lastWeek:"[geÃ§en hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s Ã¶nce",s:"birkaÃ§ saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gÃ¼n",dd:"%d gÃ¼n",M:"bir ay",MM:"%d ay",y:"bir yÄ±l",yy:"%d yÄ±l"},ordinal:function(e){if(0===e)return e+"'Ä±ncÄ±";var i=e%10,n=e%100-i,s=e>=100?100:null;return e+(t[i]||t[n]||t[s])},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("tzm-latn",{months:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brË¤ayrË¤_marË¤sË¤_ibrir_mayyw_ywnyw_ywlywz_É£wÅ¡t_Å¡wtanbir_ktË¤wbrË¤_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiá¸yas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuá¸",mm:"%d minuá¸",h:"saÉa",hh:"%d tassaÉin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(e){e(yt)}(function(e){return e.defineLocale("tzm",{months:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),monthsShort:"âµâµâµâ´°âµ¢âµ_â´±âµâ´°âµ¢âµ_âµâ´°âµâµ_âµâ´±âµâµâµ_âµâ´°âµ¢âµ¢âµ_âµ¢âµâµâµ¢âµ_âµ¢âµâµâµ¢âµâµ£_âµâµâµâµ_âµâµâµâ´°âµâ´±âµâµ_â´½âµâµâ´±âµ_âµâµâµ¡â´°âµâ´±âµâµ_â´·âµâµâµâ´±âµâµ".split("_"),weekdays:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysShort:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),weekdaysMin:"â´°âµâ´°âµâ´°âµ_â´°âµ¢âµâ´°âµ_â´°âµâµâµâ´°âµ_â´°â´½âµâ´°âµ_â´°â´½âµ¡â´°âµ_â´°âµâµâµâµ¡â´°âµ_â´°âµâµâ´¹âµ¢â´°âµ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[â´°âµâ´·âµ â´´] LT",nextDay:"[â´°âµâ´½â´° â´´] LT",nextWeek:"dddd [â´´] LT",lastDay:"[â´°âµâ´°âµâµ â´´] LT",lastWeek:"dddd [â´´] LT",sameElse:"L"},relativeTime:{future:"â´·â´°â´·âµ âµ âµ¢â´°âµ %s",past:"âµ¢â´°âµ %s",s:"âµâµâµâ´½",m:"âµâµâµâµâ´º",mm:"%d âµâµâµâµâ´º",h:"âµâ´°âµâ´°",hh:"%d âµâ´°âµâµâ´°âµâµâµ",d:"â´°âµâµ",dd:"%d oâµâµâ´°âµ",M:"â´°âµ¢oâµâµ",MM:"%d âµâµ¢âµ¢âµâµâµ",y:"â´°âµâ´³â´°âµ",yy:"%d âµâµâ´³â´°âµâµ"},week:{dow:6,doy:12}})}),function(e){e(yt)}(function(e){function t(e,t){var i=e.split("_");return 1===t%10&&11!==t%100?i[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?i[1]:i[2]}function i(e,i,n){var s={mm:"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°_ÑÐ²Ð¸Ð»Ð¸Ð½Ð¸_ÑÐ²Ð¸Ð»Ð¸Ð½",hh:"Ð³Ð¾Ð´Ð¸Ð½Ð°_Ð³Ð¾Ð´Ð¸Ð½Ð¸_Ð³Ð¾Ð´Ð¸Ð½",dd:"Ð´ÐµÐ½Ñ_Ð´Ð½Ñ_Ð´Ð½ÑÐ²",MM:"Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑ_Ð¼ÑÑÑÑÑÐ²",yy:"ÑÑÐº_ÑÐ¾ÐºÐ¸_ÑÐ¾ÐºÑÐ²"};return"m"===n?i?"ÑÐ²Ð¸Ð»Ð¸Ð½Ð°":"ÑÐ²Ð¸Ð»Ð¸Ð½Ñ":"h"===n?i?"Ð³Ð¾Ð´Ð¸Ð½Ð°":"Ð³Ð¾Ð´Ð¸Ð½Ñ":e+" "+t(s[n],+e)}function n(e,t){var i={nominative:"ÑÑÑÐµÐ½Ñ_Ð»ÑÑÐ¸Ð¹_Ð±ÐµÑÐµÐ·ÐµÐ½Ñ_ÐºÐ²ÑÑÐµÐ½Ñ_ÑÑÐ°Ð²ÐµÐ½Ñ_ÑÐµÑÐ²ÐµÐ½Ñ_Ð»Ð¸Ð¿ÐµÐ½Ñ_ÑÐµÑÐ¿ÐµÐ½Ñ_Ð²ÐµÑÐµÑÐµÐ½Ñ_Ð¶Ð¾Ð²ÑÐµÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´_Ð³ÑÑÐ´ÐµÐ½Ñ".split("_"),accusative:"ÑÑÑÐ½Ñ_Ð»ÑÑÐ¾Ð³Ð¾_Ð±ÐµÑÐµÐ·Ð½Ñ_ÐºÐ²ÑÑÐ½Ñ_ÑÑÐ°Ð²Ð½Ñ_ÑÐµÑÐ²Ð½Ñ_Ð»Ð¸Ð¿Ð½Ñ_ÑÐµÑÐ¿Ð½Ñ_Ð²ÐµÑÐµÑÐ½Ñ_Ð¶Ð¾Ð²ÑÐ½Ñ_Ð»Ð¸ÑÑÐ¾Ð¿Ð°Ð´Ð°_Ð³ÑÑÐ´Ð½Ñ".split("_")},n=/D[oD]? *MMMM?/.test(t)?"accusative":"nominative";return i[n][e.month()]}function s(e,t){var i={nominative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ð°_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ°".split("_"),accusative:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»Ð¾Ðº_Ð²ÑÐ²ÑÐ¾ÑÐ¾Ðº_ÑÐµÑÐµÐ´Ñ_ÑÐµÑÐ²ÐµÑ_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÑ".split("_"),genitive:"Ð½ÐµÐ´ÑÐ»Ñ_Ð¿Ð¾Ð½ÐµÐ´ÑÐ»ÐºÐ°_Ð²ÑÐ²ÑÐ¾ÑÐºÐ°_ÑÐµÑÐµÐ´Ð¸_ÑÐµÑÐ²ÐµÑÐ³Ð°_Ð¿âÑÑÐ½Ð¸ÑÑ_ÑÑÐ±Ð¾ÑÐ¸".split("_")},n=/(\[[ÐÐ²Ð£Ñ]\]) ?dddd/.test(t)?"accusative":/\[?(?:Ð¼Ð¸Ð½ÑÐ»Ð¾Ñ|Ð½Ð°ÑÑÑÐ¿Ð½Ð¾Ñ)? ?\] ?dddd/.test(t)?"genitive":"nominative";return i[n][e.day()]}function r(e){return function(){return e+"Ð¾"+(11===this.hours()?"Ð±":"")+"] LT"}}return e.defineLocale("uk",{months:n,monthsShort:"ÑÑÑ_Ð»ÑÑ_Ð±ÐµÑ_ÐºÐ²ÑÑ_ÑÑÐ°Ð²_ÑÐµÑÐ²_Ð»Ð¸Ð¿_ÑÐµÑÐ¿_Ð²ÐµÑ_Ð¶Ð¾Ð²Ñ_Ð»Ð¸ÑÑ_Ð³ÑÑÐ´".split("_"),weekdays:s,weekdaysShort:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),weekdaysMin:"Ð½Ð´_Ð¿Ð½_Ð²Ñ_ÑÑ_ÑÑ_Ð¿Ñ_ÑÐ±".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY Ñ.",LLL:"D MMMM YYYY Ñ., LT",LLLL:"dddd, D MMMM YYYY Ñ., LT"},calendar:{sameDay:r("[Ð¡ÑÐ¾Ð³Ð¾Ð´Ð½Ñ "),nextDay:r("[ÐÐ°Ð²ÑÑÐ° "),lastDay:r("[ÐÑÐ¾ÑÐ° "),nextWeek:r("[Ð£] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[ÐÐ¸Ð½ÑÐ»Ð¾Ñ] dddd [").call(this);case 1:case 2:case 4:return r("[ÐÐ¸Ð½ÑÐ»Ð¾Ð³Ð¾] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"Ð·Ð° %s",past:"%s ÑÐ¾Ð¼Ñ",s:"Ð´ÐµÐºÑÐ»ÑÐºÐ° ÑÐµÐºÑÐ½Ð´",m:i,mm:i,h:"Ð³Ð¾Ð´Ð¸Ð½Ñ",hh:i,d:"Ð´ÐµÐ½Ñ",dd:i,M:"Ð¼ÑÑÑÑÑ",MM:i,y:"ÑÑÐº",yy:i},meridiem:function(e){return 4>e?"Ð½Ð¾ÑÑ":12>e?"ÑÐ°Ð½ÐºÑ":17>e?"Ð´Ð½Ñ":"Ð²ÐµÑÐ¾ÑÐ°"},ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-Ð¹";case"D":return e+"-Ð³Ð¾";default:return e}},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("uz",{months:"ÑÐ½Ð²Ð°ÑÑ_ÑÐµÐ²ÑÐ°Ð»Ñ_Ð¼Ð°ÑÑ_Ð°Ð¿ÑÐµÐ»Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½Ñ_Ð¸ÑÐ»Ñ_Ð°Ð²Ð³ÑÑÑ_ÑÐµÐ½ÑÑÐ±ÑÑ_Ð¾ÐºÑÑÐ±ÑÑ_Ð½Ð¾ÑÐ±ÑÑ_Ð´ÐµÐºÐ°Ð±ÑÑ".split("_"),monthsShort:"ÑÐ½Ð²_ÑÐµÐ²_Ð¼Ð°Ñ_Ð°Ð¿Ñ_Ð¼Ð°Ð¹_Ð¸ÑÐ½_Ð¸ÑÐ»_Ð°Ð²Ð³_ÑÐµÐ½_Ð¾ÐºÑ_Ð½Ð¾Ñ_Ð´ÐµÐº".split("_"),weekdays:"Ð¯ÐºÑÐ°Ð½Ð±Ð°_ÐÑÑÐ°Ð½Ð±Ð°_Ð¡ÐµÑÐ°Ð½Ð±Ð°_Ð§Ð¾ÑÑÐ°Ð½Ð±Ð°_ÐÐ°Ð¹ÑÐ°Ð½Ð±Ð°_ÐÑÐ¼Ð°_Ð¨Ð°Ð½Ð±Ð°".split("_"),weekdaysShort:"Ð¯ÐºÑ_ÐÑÑ_Ð¡ÐµÑ_Ð§Ð¾Ñ_ÐÐ°Ð¹_ÐÑÐ¼_Ð¨Ð°Ð½".split("_"),weekdaysMin:"Ð¯Ðº_ÐÑ_Ð¡Ðµ_Ð§Ð¾_ÐÐ°_ÐÑ_Ð¨Ð°".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ÐÑÐ³ÑÐ½ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",nextDay:"[Ð­ÑÑÐ°Ð³Ð°] LT [Ð´Ð°]",nextWeek:"dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastDay:"[ÐÐµÑÐ° ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",lastWeek:"[Ð£ÑÐ³Ð°Ð½] dddd [ÐºÑÐ½Ð¸ ÑÐ¾Ð°Ñ] LT [Ð´Ð°]",sameElse:"L"},relativeTime:{future:"Ð¯ÐºÐ¸Ð½ %s Ð¸ÑÐ¸Ð´Ð°",past:"ÐÐ¸Ñ Ð½ÐµÑÐ° %s Ð¾Ð»Ð´Ð¸Ð½",s:"ÑÑÑÑÐ°Ñ",m:"Ð±Ð¸Ñ Ð´Ð°ÐºÐ¸ÐºÐ°",mm:"%d Ð´Ð°ÐºÐ¸ÐºÐ°",h:"Ð±Ð¸Ñ ÑÐ¾Ð°Ñ",hh:"%d ÑÐ¾Ð°Ñ",d:"Ð±Ð¸Ñ ÐºÑÐ½",dd:"%d ÐºÑÐ½",M:"Ð±Ð¸Ñ Ð¾Ð¹",MM:"%d Ð¾Ð¹",y:"Ð±Ð¸Ñ Ð¹Ð¸Ð»",yy:"%d Ð¹Ð¸Ð»"},week:{dow:1,doy:7}})}),function(e){e(yt)}(function(e){return e.defineLocale("vi",{months:"thÃ¡ng 1_thÃ¡ng 2_thÃ¡ng 3_thÃ¡ng 4_thÃ¡ng 5_thÃ¡ng 6_thÃ¡ng 7_thÃ¡ng 8_thÃ¡ng 9_thÃ¡ng 10_thÃ¡ng 11_thÃ¡ng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chá»§ nháº­t_thá»© hai_thá»© ba_thá»© tÆ°_thá»© nÄm_thá»© sÃ¡u_thá»© báº£y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [nÄm] YYYY",LLL:"D MMMM [nÄm] YYYY LT",LLLL:"dddd, D MMMM [nÄm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[HÃ´m nay lÃºc] LT",nextDay:"[NgÃ y mai lÃºc] LT",nextWeek:"dddd [tuáº§n tá»i lÃºc] LT",lastDay:"[HÃ´m qua lÃºc] LT",lastWeek:"dddd [tuáº§n rá»i lÃºc] LT",sameElse:"L"},relativeTime:{future:"%s tá»i",past:"%s trÆ°á»c",s:"vÃ i giÃ¢y",m:"má»t phÃºt",mm:"%d phÃºt",h:"má»t giá»",hh:"%d giá»",d:"má»t ngÃ y",dd:"%d ngÃ y",M:"má»t thÃ¡ng",MM:"%d thÃ¡ng",y:"má»t nÄm",yy:"%d nÄm"},ordinal:function(e){return e},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("zh-cn",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"å¨æ¥_å¨ä¸_å¨äº_å¨ä¸_å¨å_å¨äº_å¨å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahç¹mm",L:"YYYY-MM-DD",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYY-MM-DD",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiem:function(e,t){var i=100*e+t;return 600>i?"åæ¨":900>i?"æ©ä¸":1130>i?"ä¸å":1230>i?"ä¸­å":1800>i?"ä¸å":"æä¸"},calendar:{sameDay:function(){return 0===this.minutes()?"[ä»å¤©]Ah[ç¹æ´]":"[ä»å¤©]LT"},nextDay:function(){return 0===this.minutes()?"[æå¤©]Ah[ç¹æ´]":"[æå¤©]LT"},lastDay:function(){return 0===this.minutes()?"[æ¨å¤©]Ah[ç¹æ´]":"[æ¨å¤©]LT"},nextWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()-t.unix()>=604800?"[ä¸]":"[æ¬]",0===this.minutes()?i+"dddAhç¹æ´":i+"dddAhç¹mm"},lastWeek:function(){var t,i;return t=e().startOf("week"),i=this.unix()<t.unix()?"[ä¸]":"[æ¬]",0===this.minutes()?i+"dddAhç¹æ´":i+"dddAhç¹mm"},sameElse:"LL"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"æ¥";case"M":return e+"æ";case"w":case"W":return e+"å¨";default:return e}},relativeTime:{future:"%så",past:"%så",s:"å ç§",m:"1åé",mm:"%dåé",h:"1å°æ¶",hh:"%då°æ¶",d:"1å¤©",dd:"%då¤©",M:"1ä¸ªæ",MM:"%dä¸ªæ",y:"1å¹´",yy:"%då¹´"},week:{dow:1,doy:4}})}),function(e){e(yt)}(function(e){return e.defineLocale("zh-tw",{months:"ä¸æ_äºæ_ä¸æ_åæ_äºæ_å­æ_ä¸æ_å«æ_ä¹æ_åæ_åä¸æ_åäºæ".split("_"),monthsShort:"1æ_2æ_3æ_4æ_5æ_6æ_7æ_8æ_9æ_10æ_11æ_12æ".split("_"),weekdays:"æææ¥_ææä¸_ææäº_ææä¸_ææå_ææäº_ææå­".split("_"),weekdaysShort:"é±æ¥_é±ä¸_é±äº_é±ä¸_é±å_é±äº_é±å­".split("_"),weekdaysMin:"æ¥_ä¸_äº_ä¸_å_äº_å­".split("_"),longDateFormat:{LT:"Ahé»mm",L:"YYYYå¹´MMMDæ¥",LL:"YYYYå¹´MMMDæ¥",LLL:"YYYYå¹´MMMDæ¥LT",LLLL:"YYYYå¹´MMMDæ¥ddddLT",l:"YYYYå¹´MMMDæ¥",ll:"YYYYå¹´MMMDæ¥",lll:"YYYYå¹´MMMDæ¥LT",llll:"YYYYå¹´MMMDæ¥ddddLT"},meridiem:function(e,t){var i=100*e+t;return 900>i?"æ©ä¸":1130>i?"ä¸å":1230>i?"ä¸­å":1800>i?"ä¸å":"æä¸"},calendar:{sameDay:"[ä»å¤©]LT",nextDay:"[æå¤©]LT",nextWeek:"[ä¸]ddddLT",lastDay:"[æ¨å¤©]LT",lastWeek:"[ä¸]ddddLT",sameElse:"L"},ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"æ¥";
case"M":return e+"æ";case"w":case"W":return e+"é±";default:return e}},relativeTime:{future:"%så§",past:"%så",s:"å¹¾ç§",m:"ä¸åé",mm:"%dåé",h:"ä¸å°æ",hh:"%då°æ",d:"ä¸å¤©",dd:"%då¤©",M:"ä¸åæ",MM:"%dåæ",y:"ä¸å¹´",yy:"%då¹´"}})}),yt.locale("en"),It?module.exports=yt:"function"==typeof Mindbreeze.define&&Mindbreeze.define.amd?(Mindbreeze.define("moment",["require","exports","module"],function(e,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Mt.moment=bt),yt}),_t(!0)):_t()}.call(this),Mindbreeze.define("extensions",[],function(){var e={},t={},i=t,n=i;n.getType=function(e){return Mindbreeze.types&&Mindbreeze.types[e]},n.define=function(t,i,n){if("function"==typeof n)try{n()}catch(s){return}return e[t]=i,t},n.lookup=function(t){return e[t]},n.invokeInContext=function(){},i.invokeInContextHelper=function(e,t,i,s){var r,a,o=n.lookup(i);o&&(r=o[t],r&&(a=r.apply(o,Array.prototype.slice.apply(arguments,[4])),"function"==typeof s&&(a&&"function"==typeof a.then?a.then(s):s(a))))},n.extend=function(e,t){t&&(!t.depends||n.lookup(t.depends))&&i.extensions._addExtension(e,t)};var s=function(){this._reset()};return s.prototype.getExtensionsForExtensionPoint=function(e){return this.extensions[e]},s.prototype._addExtension=function(e,t){var i=this.extensions[e]||[];i.push(t),this.extensions[e]=i},s.prototype._reset=function(){this.extensions={}},i.extensions=new s,"function"==typeof initExtensions&&initExtensions(Mindbreeze),i.require=Mindbreeze.require,t}),Mindbreeze.define("jquery",[],function(){/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * @license Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
return function(e,t){function i(e){var t=mt[e]={};return K.each(e.split(tt),function(e,i){t[i]=!0}),t}function n(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(gt,"-$1").toLowerCase();if(n=e.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ft.test(n)?K.parseJSON(n):n}catch(r){}K.data(e,i,n)}else n=t}return n}function s(e){var t;for(t in e)if(("data"!==t||!K.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(){return!1}function a(){return!0}function o(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function u(e,t,i){if(t=t||0,K.isFunction(t))return K.grep(e,function(e,n){var s=!!t.call(e,n,e);return s===i});if(t.nodeType)return K.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=K.grep(e,function(e){return 1===e.nodeType});if(Yt.test(t))return K.filter(t,n,!i);t=K.filter(t,n)}return K.grep(e,function(e){return K.inArray(e,t)>=0===i})}function c(e){var t=Rt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function h(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function d(e,t){if(1===t.nodeType&&K.hasData(e)){var i,n,s,r=K._data(e),a=K._data(t,r),o=r.events;if(o){delete a.handle,a.events={};for(i in o)for(n=0,s=o[i].length;s>n;n++)K.event.add(t,i,o[i][n])}a.data&&(a.data=K.extend({},a.data))}}function p(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),K.support.html5Clone&&e.innerHTML&&!K.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Jt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(K.expando))}function m(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function f(e){Jt.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,s=vi.length;s--;)if(t=vi[s]+i,t in e)return t;return n}function v(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)}function _(e,t){for(var i,n,s=[],r=0,a=e.length;a>r;r++)i=e[r],i.style&&(s[r]=K._data(i,"olddisplay"),t?(s[r]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&v(i)&&(s[r]=K._data(i,"olddisplay",x(i.nodeName)))):(n=ii(i,"display"),s[r]||"none"===n||K._data(i,"olddisplay",n)));for(r=0;a>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[r]||"":"none"));return e}function y(e,t,i){var n=ci.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function b(e,t,i,n){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=K.css(e,i+gi[s],!0)),n?("content"===i&&(r-=parseFloat(ii(e,"padding"+gi[s]))||0),"margin"!==i&&(r-=parseFloat(ii(e,"border"+gi[s]+"Width"))||0)):(r+=parseFloat(ii(e,"padding"+gi[s]))||0,"padding"!==i&&(r+=parseFloat(ii(e,"border"+gi[s]+"Width"))||0));return r}function w(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,s=!0,r=K.support.boxSizing&&"border-box"===K.css(e,"boxSizing");if(0>=n||null==n){if(n=ii(e,t),(0>n||null==n)&&(n=e.style[t]),hi.test(n))return n;s=r&&(K.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+b(e,t,i||(r?"border":"content"),s)+"px"}function x(e){if(pi[e])return pi[e];var t=K("<"+e+">").appendTo(V.body),i=t.css("display");return t.remove(),("none"===i||""===i)&&(ni=V.body.appendChild(ni||K.extend(V.createElement("iframe"),{frameBorder:0,width:0,height:0})),si&&ni.createElement||(si=(ni.contentWindow||ni.contentDocument).document,si.write("<!doctype html><html><body>"),si.close()),t=si.body.appendChild(si.createElement(e)),i=ii(t,"display"),V.body.removeChild(ni)),pi[e]=i,i}function M(e,t,i,n){var s;if(K.isArray(t))K.each(t,function(t,s){i||bi.test(e)?n(e,s):M(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==K.type(t))n(e,t);else for(s in t)M(e+"["+s+"]",t[s],i,n)}function T(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s,r,a=t.toLowerCase().split(tt),o=0,l=a.length;if(K.isFunction(i))for(;l>o;o++)n=a[o],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),s=e[n]=e[n]||[],s[r?"unshift":"push"](i)}}function k(e,i,n,s,r,a){r=r||i.dataTypes[0],a=a||{},a[r]=!0;for(var o,l=e[r],u=0,c=l?l.length:0,h=e===Yi;c>u&&(h||!o);u++)o=l[u](i,n,s),"string"==typeof o&&(!h||a[o]?o=t:(i.dataTypes.unshift(o),o=k(e,i,n,s,o,a)));return!h&&o||a["*"]||(o=k(e,i,n,s,"*",a)),o}function C(e,i){var n,s,r=K.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:s||(s={}))[n]=i[n]);s&&K.extend(!0,e,s)}function L(e,i,n){var s,r,a,o,l=e.contents,u=e.dataTypes,c=e.responseFields;for(r in c)r in n&&(i[c[r]]=n[r]);for(;"*"===u[0];)u.shift(),s===t&&(s=e.mimeType||i.getResponseHeader("content-type"));if(s)for(r in l)if(l[r]&&l[r].test(s)){u.unshift(r);break}if(u[0]in n)a=u[0];else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){a=r;break}o||(o=r)}a=a||o}return a?(a!==u[0]&&u.unshift(a),n[a]):void 0}function D(e,t){var i,n,s,r,a=e.dataTypes.slice(),o=a[0],l={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;s=a[++u];)if("*"!==s){if("*"!==o&&o!==s){if(i=l[o+" "+s]||l["* "+s],!i)for(n in l)if(r=n.split(" "),r[1]===s&&(i=l[o+" "+r[0]]||l["* "+r[0]])){i===!0?i=l[n]:l[n]!==!0&&(s=r[0],a.splice(u--,0,s));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+o+" to "+s}}}o=s}return{state:"success",data:t}}function E(){try{return new e.XMLHttpRequest}catch(t){}}function S(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function A(){return setTimeout(function(){$i=t},0),$i=K.now()}function P(e,t){K.each(t,function(t,i){for(var n=(Qi[t]||[]).concat(Qi["*"]),s=0,r=n.length;r>s;s++)if(n[s].call(e,t,i))return})}function O(e,t,i){var n,s=0,r=Ki.length,a=K.Deferred().always(function(){delete o.elem}),o=function(){for(var t=$i||A(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,s=1-n,r=0,o=l.tweens.length;o>r;r++)l.tweens[r].run(s);return a.notifyWith(e,[l,s,i]),1>s&&o?i:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:$i||A(),duration:i.duration,tweens:[],createTween:function(t,i){var n=K.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(n),n},stop:function(t){for(var i=0,n=t?l.tweens.length:0;n>i;i++)l.tweens[i].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),u=l.props;for(N(u,l.opts.specialEasing);r>s;s++)if(n=Ki[s].call(l,e,u,l.opts))return n;return P(l,u),K.isFunction(l.opts.start)&&l.opts.start.call(e,l),K.fx.timer(K.extend(o,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function N(e,t){var i,n,s,r,a;for(i in e)if(n=K.camelCase(i),s=t[n],r=e[i],K.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),a=K.cssHooks[n],a&&"expand"in a){r=a.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=s)}else t[n]=s}function I(e,t,i){var n,s,r,a,o,l,u,c,h,d=this,p=e.style,m={},f=[],g=e.nodeType&&v(e);i.queue||(c=K._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,h=c.empty.fire,c.empty.fire=function(){c.unqueued||h()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,K.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===K.css(e,"display")&&"none"===K.css(e,"float")&&(K.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",K.support.shrinkWrapBlocks||d.done(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Ji.exec(r)){if(delete t[n],l=l||"toggle"===r,r===(g?"hide":"show"))continue;f.push(n)}if(a=f.length){o=K._data(e,"fxshow")||K._data(e,"fxshow",{}),"hidden"in o&&(g=o.hidden),l&&(o.hidden=!g),g?K(e).show():d.done(function(){K(e).hide()}),d.done(function(){var t;K.removeData(e,"fxshow",!0);for(t in m)K.style(e,t,m[t])});for(n=0;a>n;n++)s=f[n],u=d.createTween(s,g?o[s]:0),m[s]=o[s]||K.style(e,s),s in o||(o[s]=u.start,g&&(u.end=u.start,u.start="width"===s||"height"===s?1:0))}}function Y(e,t,i,n,s){return new Y.prototype.init(e,t,i,n,s)}function F(e,t){var i,n={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)i=gi[s],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function z(e){return K.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var R,j,V=e.document,H=e.location,q=e.navigator,B=e.jQuery,U=e.$,W=Array.prototype.push,$=Array.prototype.slice,G=Array.prototype.indexOf,J=Object.prototype.toString,X=Object.prototype.hasOwnProperty,Z=String.prototype.trim,K=function(e,t){return new K.fn.init(e,t,R)},Q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,it=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rt=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,ot=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,lt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ut=/^-ms-/,ct=/-([\da-z])/gi,ht=function(e,t){return(t+"").toUpperCase()},dt=function(){V.addEventListener?(V.removeEventListener("DOMContentLoaded",dt,!1),K.ready()):"complete"===V.readyState&&(V.detachEvent("onreadystatechange",dt),K.ready())},pt={};K.fn=K.prototype={constructor:K,init:function(e,i,n){var s,r,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:nt.exec(e),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1])return i=i instanceof K?i[0]:i,a=i&&i.nodeType?i.ownerDocument||i:V,e=K.parseHTML(s[1],a,!0),st.test(s[1])&&K.isPlainObject(i)&&this.attr.call(e,i,!0),K.merge(this,e);if(r=V.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return n.find(e);this.length=1,this[0]=r}return this.context=V,this.selector=e,this}return K.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=K.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return K.each(this,e,t)},ready:function(e){return K.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(K.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice},K.fn.init.prototype=K.fn,K.extend=K.fn.extend=function(){var e,i,n,s,r,a,o=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},l=2),"object"==typeof o||K.isFunction(o)||(o={}),u===l&&(o=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(i in e)n=o[i],s=e[i],o!==s&&(c&&s&&(K.isPlainObject(s)||(r=K.isArray(s)))?(r?(r=!1,a=n&&K.isArray(n)?n:[]):a=n&&K.isPlainObject(n)?n:{},o[i]=K.extend(c,a,s)):s!==t&&(o[i]=s));return o},K.extend({noConflict:function(t){return e.$===K&&(e.$=U),t&&e.jQuery===K&&(e.jQuery=B),K},isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){if(e===!0?!--K.readyWait:!K.isReady){if(!V.body)return setTimeout(K.ready,1);K.isReady=!0,e!==!0&&--K.readyWait>0||(j.resolveWith(V,[K]),K.fn.trigger&&K(V).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray||function(e){return"array"===K.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):pt[J.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==K.type(e)||e.nodeType||K.isWindow(e))return!1;try{if(e.constructor&&!X.call(e,"constructor")&&!X.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||X.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||V,(n=st.exec(e))?[t.createElement(n[1])]:(n=K.buildFragment([e],t,i?null:[]),K.merge([],(n.cacheable?K.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=K.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):rt.test(t.replace(ot,"@").replace(lt,"]").replace(at,""))?new Function("return "+t)():(K.error("Invalid JSON: "+t),void 0)):null},parseXML:function(i){var n,s;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||K.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ut,"ms-").replace(ct,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,n){var s,r=0,a=e.length,o=a===t||K.isFunction(e);if(n)if(o){for(s in e)if(i.apply(e[s],n)===!1)break}else for(;a>r&&i.apply(e[r++],n)!==!1;);else if(o){for(s in e)if(i.call(e[s],s,e[s])===!1)break}else for(;a>r&&i.call(e[r],r,e[r++])!==!1;);return e},trim:Z&&!Z.call("ï»¿Â ")?function(e){return null==e?"":Z.call(e)}:function(e){return null==e?"":(e+"").replace(it,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=K.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||K.isWindow(e)?W.call(n,e):K.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(G)return G.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,s=e.length,r=0;if("number"==typeof n)for(;n>r;r++)e[s++]=i[r];else for(;i[r]!==t;)e[s++]=i[r++];return e.length=s,e},grep:function(e,t,i){var n,s=[],r=0,a=e.length;for(i=!!i;a>r;r++)n=!!t(e[r],r),i!==n&&s.push(e[r]);return s},map:function(e,i,n){var s,r,a=[],o=0,l=e.length,u=e instanceof K||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||K.isArray(e));if(u)for(;l>o;o++)s=i(e[o],o,n),null!=s&&(a[a.length]=s);else for(r in e)s=i(e[r],r,n),null!=s&&(a[a.length]=s);return a.concat.apply([],a)},guid:1,proxy:function(e,i){var n,s,r;return"string"==typeof i&&(n=e[i],i=e,e=n),K.isFunction(e)?(s=$.call(arguments,2),r=function(){return e.apply(i,s.concat($.call(arguments)))},r.guid=e.guid=e.guid||K.guid++,r):t},access:function(e,i,n,s,r,a,o){var l,u=null==n,c=0,h=e.length;if(n&&"object"==typeof n){for(c in n)K.access(e,i,c,n[c],1,a,s);r=1}else if(s!==t){if(l=o===t&&K.isFunction(s),u&&(l?(l=i,i=function(e,t,i){return l.call(K(e),i)}):(i.call(e,s),i=null)),i)for(;h>c;c++)i(e[c],n,l?s.call(e[c],c,i(e[c],n)):s,o);r=1}return r?e:u?i.call(e):h?i(e[0],n):a},now:function(){return(new Date).getTime()}}),K.ready.promise=function(t){if(!j)if(j=K.Deferred(),"complete"===V.readyState)setTimeout(K.ready,1);else if(V.addEventListener)V.addEventListener("DOMContentLoaded",dt,!1),e.addEventListener("load",K.ready,!1);else{V.attachEvent("onreadystatechange",dt),e.attachEvent("onload",K.ready);var i=!1;try{i=null==e.frameElement&&V.documentElement}catch(n){}i&&i.doScroll&&function s(){if(!K.isReady){try{i.doScroll("left")}catch(e){return setTimeout(s,50)}K.ready()}}()}return j.promise(t)},K.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),R=K(V);var mt={};K.Callbacks=function(e){e="string"==typeof e?mt[e]||i(e):K.extend({},e);var n,s,r,a,o,l,u=[],c=!e.once&&[],h=function(t){for(n=e.memory&&t,s=!0,l=a||0,a=0,o=u.length,r=!0;u&&o>l;l++)if(u[l].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}r=!1,u&&(c?c.length&&h(c.shift()):n?u=[]:d.disable())},d={add:function(){if(u){var t=u.length;!function i(t){K.each(t,function(t,n){var s=K.type(n);"function"===s?e.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==s&&i(n)})}(arguments),r?o=u.length:n&&(a=t,h(n))}return this},remove:function(){return u&&K.each(arguments,function(e,t){for(var i;(i=K.inArray(t,u,i))>-1;)u.splice(i,1),r&&(o>=i&&o--,l>=i&&l--)}),this},has:function(e){return K.inArray(e,u)>-1},empty:function(){return u=[],this},disable:function(){return u=c=n=t,this},disabled:function(){return!u},lock:function(){return c=t,n||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||s&&!c||(r?c.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(i){K.each(t,function(t,n){var r=n[0],a=e[t];s[n[1]](K.isFunction(a)?function(){var e=a.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===s?i:this,[e])}:i[r])}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,n):n}},s={};return n.pipe=n.then,K.each(t,function(e,r){var a=r[2],o=r[3];n[r[1]]=a.add,o&&a.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),s[r[0]]=a.fire,s[r[0]+"With"]=a.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t,i,n,s=0,r=$.call(arguments),a=r.length,o=1!==a||e&&K.isFunction(e.promise)?a:0,l=1===o?e:K.Deferred(),u=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?$.call(arguments):s,n===t?l.notifyWith(i,n):--o||l.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);a>s;s++)r[s]&&K.isFunction(r[s].promise)?r[s].promise().done(u(s,n,r)).fail(l.reject).progress(u(s,i,t)):--o;return o||l.resolveWith(n,r),l.promise()}}),K.support=function(){var t,i,n,s,r,a,o,l,u,c,h,d=V.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*"),n=d.getElementsByTagName("a")[0],!i||!n||!i.length)return{};s=V.createElement("select"),r=s.appendChild(V.createElement("option")),a=d.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:r.selected,getSetAttribute:"t"!==d.className,enctype:!!V.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==V.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===V.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!r.disabled;try{delete d.test}catch(p){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),d.detachEvent("onclick",h)),a=V.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),d.appendChild(a),o=V.createDocumentFragment(),o.appendChild(d.lastChild),t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,o.removeChild(a),o.appendChild(d),d.attachEvent)for(u in{submit:!0,change:!0,focusin:!0})l="on"+u,c=l in d,c||(d.setAttribute(l,"return;"),c="function"==typeof d[l]),t[u+"Bubbles"]=c;return K(function(){var i,n,s,r,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=V.getElementsByTagName("body")[0];o&&(i=V.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(i,o.firstChild),n=V.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=n.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,r=V.createElement("div"),r.style.cssText=n.style.cssText=a,r.style.marginRight=r.style.width="0",n.style.width="1px",n.appendChild(r),t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),"undefined"!=typeof n.style.zoom&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),o.removeChild(i),i=n=s=r=null)}),o.removeChild(d),i=n=s=r=a=o=d=null,t}();var ft=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,gt=/([A-Z])/g;K.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(K.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?K.cache[e[K.expando]]:e[K.expando],!!e&&!s(e)},data:function(e,i,n,s){if(K.acceptData(e)){var r,a,o=K.expando,l="string"==typeof i,u=e.nodeType,c=u?K.cache:e,h=u?e[o]:e[o]&&o;if(h&&c[h]&&(s||c[h].data)||!l||n!==t)return h||(u?e[o]=h=K.deletedIds.pop()||K.guid++:h=o),c[h]||(c[h]={},u||(c[h].toJSON=K.noop)),("object"==typeof i||"function"==typeof i)&&(s?c[h]=K.extend(c[h],i):c[h].data=K.extend(c[h].data,i)),r=c[h],s||(r.data||(r.data={}),r=r.data),n!==t&&(r[K.camelCase(i)]=n),l?(a=r[i],null==a&&(a=r[K.camelCase(i)])):a=r,a}},removeData:function(e,t,i){if(K.acceptData(e)){var n,r,a,o=e.nodeType,l=o?K.cache:e,u=o?e[K.expando]:K.expando;if(l[u]){if(t&&(n=i?l[u]:l[u].data)){K.isArray(t)||(t in n?t=[t]:(t=K.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,a=t.length;a>r;r++)delete n[t[r]];if(!(i?s:K.isEmptyObject)(n))return}(i||(delete l[u].data,s(l[u])))&&(o?K.cleanData([e],!0):K.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}},_data:function(e,t,i){return K.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&K.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),K.fn.extend({data:function(e,i){var s,r,a,o,l,u=this[0],c=0,h=null;if(e===t){if(this.length&&(h=K.data(u),1===u.nodeType&&!K._data(u,"parsedAttrs"))){for(a=u.attributes,l=a.length;l>c;c++)o=a[c].name,o.indexOf("data-")||(o=K.camelCase(o.substring(5)),n(u,o,h[o]));K._data(u,"parsedAttrs",!0)}return h}return"object"==typeof e?this.each(function(){K.data(this,e)}):(s=e.split(".",2),s[1]=s[1]?"."+s[1]:"",r=s[1]+"!",K.access(this,function(i){return i===t?(h=this.triggerHandler("getData"+r,[s[0]]),h===t&&u&&(h=K.data(u,e),h=n(u,e,h)),h===t&&s[1]?this.data(s[0]):h):(s[1]=i,this.each(function(){var t=K(this);t.triggerHandler("setData"+r,s),K.data(this,e,i),t.triggerHandler("changeData"+r,s)}),void 0)},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){K.removeData(this,e)})}}),K.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=K._data(e,t),i&&(!n||K.isArray(i)?n=K._data(e,t,K.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=K.queue(e,t),n=i.length,s=i.shift(),r=K._queueHooks(e,t),a=function(){K.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,a,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return K._data(e,i)||K._data(e,i,{empty:K.Callbacks("once memory").add(function(){K.removeData(e,t+"queue",!0),K.removeData(e,i,!0)})})}}),K.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?K.queue(this[0],e):i===t?this:this.each(function(){var t=K.queue(this,e,i);K._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},delay:function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,s=1,r=K.Deferred(),a=this,o=this.length,l=function(){--s||r.resolveWith(a,[a])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";o--;)n=K._data(a[o],e+"queueHooks"),n&&n.empty&&(s++,n.empty.add(l));return l(),r.promise(i)}});var vt,_t,yt,bt=/[\t\r\n]/g,wt=/\r/g,xt=/^(?:button|input)$/i,Mt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,kt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=K.support.getSetAttribute;K.fn.extend({attr:function(e,t){return K.access(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})},prop:function(e,t){return K.access(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return e=K.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,s,r,a,o;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),i=0,n=this.length;n>i;i++)if(s=this[i],1===s.nodeType)if(s.className||1!==t.length){for(r=" "+s.className+" ",a=0,o=t.length;o>a;a++)r.indexOf(" "+t[a]+" ")<0&&(r+=t[a]+" ");s.className=K.trim(r)}else s.className=e;return this},removeClass:function(e){var i,n,s,r,a,o,l;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(tt),o=0,l=this.length;l>o;o++)if(s=this[o],1===s.nodeType&&s.className){for(n=(" "+s.className+" ").replace(bt," "),r=0,a=i.length;a>r;r++)for(;n.indexOf(" "+i[r]+" ")>=0;)n=n.replace(" "+i[r]+" "," ");s.className=e?K.trim(n):""}return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return K.isFunction(e)?this.each(function(i){K(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var s,r=0,a=K(this),o=t,l=e.split(tt);s=l[r++];)o=n?o:!a.hasClass(s),a[o?"addClass":"removeClass"](s);else("undefined"===i||"boolean"===i)&&(this.className&&K._data(this,"__className__",this.className),this.className=this.className||e===!1?"":K._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(bt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,s,r=this[0];{if(arguments.length)return s=K.isFunction(e),this.each(function(n){var r,a=K(this);1===this.nodeType&&(r=s?e.call(this,n,a.val()):e,null==r?r="":"number"==typeof r?r+="":K.isArray(r)&&(r=K.map(r,function(e){return null==e?"":e+""})),i=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=K.valHooks[r.type]||K.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(wt,""):null==n?"":n)}}}),K.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,a=r?null:[],o=r?s+1:n.length,l=0>s?o:r?s:0;o>l;l++)if(i=n[l],!(!i.selected&&l!==s||(K.support.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&K.nodeName(i.parentNode,"optgroup"))){if(t=K(i).val(),r)return t;a.push(t)}return a},set:function(e,t){var i=K.makeArray(t);return K(e).find("option").each(function(){this.selected=K.inArray(K(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,s){var r,a,o,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return s&&K.isFunction(K.fn[i])?K(e)[i](n):"undefined"==typeof e.getAttribute?K.prop(e,i,n):(o=1!==l||!K.isXMLDoc(e),o&&(i=i.toLowerCase(),a=K.attrHooks[i]||(kt.test(i)?_t:vt)),n!==t?null===n?(K.removeAttr(e,i),void 0):a&&"set"in a&&o&&(r=a.set(e,n,i))!==t?r:(e.setAttribute(i,n+""),n):a&&"get"in a&&o&&null!==(r=a.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,s,r,a=0;if(t&&1===e.nodeType)for(n=t.split(tt);a<n.length;a++)s=n[a],s&&(i=K.propFix[s]||s,r=kt.test(s),r||K.attr(e,s,""),e.removeAttribute(Ct?s:i),r&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(xt.test(e.nodeName)&&e.parentNode)K.error("type property can't be changed");else if(!K.support.radioValue&&"radio"===t&&K.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return vt&&K.nodeName(e,"button")?vt.get(e,t):t in e?e.value:null},set:function(e,t,i){return vt&&K.nodeName(e,"button")?vt.set(e,t,i):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var s,r,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!K.isXMLDoc(e),a&&(i=K.propFix[i]||i,r=K.propHooks[i]),n!==t?r&&"set"in r&&(s=r.set(e,n,i))!==t?s:e[i]=n:r&&"get"in r&&null!==(s=r.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Mt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),_t={get:function(e,i){var n,s=K.prop(e,i);return s===!0||"boolean"!=typeof s&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?K.removeAttr(e,i):(n=K.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},Ct||(yt={name:!0,id:!0,coords:!0},vt=K.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(yt[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=V.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},K.each(["width","height"],function(e,t){K.attrHooks[t]=K.extend(K.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0
}})}),K.attrHooks.contenteditable={get:vt.get,set:function(e,t,i){""===t&&(t="false"),vt.set(e,t,i)}}),K.support.hrefNormalized||K.each(["href","src","width","height"],function(e,i){K.attrHooks[i]=K.extend(K.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),K.support.style||(K.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),K.support.optSelected||(K.propHooks.selected=K.extend(K.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),K.support.enctype||(K.propFix.enctype="encoding"),K.support.checkOn||K.each(["radio","checkbox"],function(){K.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]=K.extend(K.valHooks[this],{set:function(e,t){return K.isArray(t)?e.checked=K.inArray(K(e).val(),t)>=0:void 0}})});var Lt=/^(?:textarea|input|select)$/i,Dt=/^([^\.]*|)(?:\.(.+)|)$/,Et=/(?:^|\s)hover(\.\S+|)\b/,St=/^key/,At=/^(?:mouse|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){return K.event.special.hover?e:e.replace(Et,"mouseenter$1 mouseleave$1")};K.event={add:function(e,i,n,s,r){var a,o,l,u,c,h,d,p,m,f,g;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(a=K._data(e))){for(n.handler&&(m=n,n=m.handler,r=m.selector),n.guid||(n.guid=K.guid++),l=a.events,l||(a.events=l={}),o=a.handle,o||(a.handle=o=function(e){return"undefined"==typeof K||e&&K.event.triggered===e.type?t:K.event.dispatch.apply(o.elem,arguments)},o.elem=e),i=K.trim(Ot(i)).split(" "),u=0;u<i.length;u++)c=Dt.exec(i[u])||[],h=c[1],d=(c[2]||"").split(".").sort(),g=K.event.special[h]||{},h=(r?g.delegateType:g.bindType)||h,g=K.event.special[h]||{},p=K.extend({type:h,origType:c[1],data:s,handler:n,guid:n.guid,selector:r,needsContext:r&&K.expr.match.needsContext.test(r),namespace:d.join(".")},m),f=l[h],f||(f=l[h]=[],f.delegateCount=0,g.setup&&g.setup.call(e,s,d,o)!==!1||(e.addEventListener?e.addEventListener(h,o,!1):e.attachEvent&&e.attachEvent("on"+h,o))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,p):f.push(p),K.event.global[h]=!0;e=null}},global:{},remove:function(e,t,i,n,s){var r,a,o,l,u,c,h,d,p,m,f,g=K.hasData(e)&&K._data(e);if(g&&(d=g.events)){for(t=K.trim(Ot(t||"")).split(" "),r=0;r<t.length;r++)if(a=Dt.exec(t[r])||[],o=l=a[1],u=a[2],o){for(p=K.event.special[o]||{},o=(n?p.delegateType:p.bindType)||o,m=d[o]||[],c=m.length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0;h<m.length;h++)f=m[h],!s&&l!==f.origType||i&&i.guid!==f.guid||u&&!u.test(f.namespace)||n&&n!==f.selector&&("**"!==n||!f.selector)||(m.splice(h--,1),f.selector&&m.delegateCount--,p.remove&&p.remove.call(e,f));0===m.length&&c!==m.length&&(p.teardown&&p.teardown.call(e,u,g.handle)!==!1||K.removeEvent(e,o,g.handle),delete d[o])}else for(o in d)K.event.remove(e,o+t[r],i,n,!0);K.isEmptyObject(d)&&(delete g.handle,K.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,s,r){if(!s||3!==s.nodeType&&8!==s.nodeType){var a,o,l,u,c,h,d,p,m,f,g=i.type||i,v=[];if(!Pt.test(g+K.event.triggered)&&(g.indexOf("!")>=0&&(g=g.slice(0,-1),o=!0),g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),s&&!K.event.customEvent[g]||K.event.global[g]))if(i="object"==typeof i?i[K.expando]?i:new K.Event(g,i):new K.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=o,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=g.indexOf(":")<0?"on"+g:"",s){if(i.result=t,i.target||(i.target=s),n=null!=n?K.makeArray(n):[],n.unshift(i),d=K.event.special[g]||{},!d.trigger||d.trigger.apply(s,n)!==!1){if(m=[[s,d.bindType||g]],!r&&!d.noBubble&&!K.isWindow(s)){for(f=d.delegateType||g,u=Pt.test(f+g)?s:s.parentNode,c=s;u;u=u.parentNode)m.push([u,f]),c=u;c===(s.ownerDocument||V)&&m.push([c.defaultView||c.parentWindow||e,f])}for(l=0;l<m.length&&!i.isPropagationStopped();l++)u=m[l][0],i.type=m[l][1],p=(K._data(u,"events")||{})[i.type]&&K._data(u,"handle"),p&&p.apply(u,n),p=h&&u[h],p&&K.acceptData(u)&&p.apply&&p.apply(u,n)===!1&&i.preventDefault();return i.type=g,r||i.isDefaultPrevented()||d._default&&d._default.apply(s.ownerDocument,n)!==!1||"click"===g&&K.nodeName(s,"a")||!K.acceptData(s)||h&&s[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!K.isWindow(s)&&(c=s[h],c&&(s[h]=null),K.event.triggered=g,s[g](),K.event.triggered=t,c&&(s[h]=c)),i.result}}else{a=K.cache;for(l in a)a[l].events&&a[l].events[g]&&K.event.trigger(i,n,a[l].handle.elem,!0)}}},dispatch:function(i){i=K.event.fix(i||e.event);var n,s,r,a,o,l,u,c,h,d=(K._data(this,"events")||{})[i.type]||[],p=d.delegateCount,m=$.call(arguments),f=!i.exclusive&&!i.namespace,g=K.event.special[i.type]||{},v=[];if(m[0]=i,i.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,i)!==!1){if(p&&(!i.button||"click"!==i.type))for(r=i.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0||"click"!==i.type){for(o={},u=[],n=0;p>n;n++)c=d[n],h=c.selector,o[h]===t&&(o[h]=c.needsContext?K(h,this).index(r)>=0:K.find(h,this,null,[r]).length),o[h]&&u.push(c);u.length&&v.push({elem:r,matches:u})}for(d.length>p&&v.push({elem:this,matches:d.slice(p)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,s=0;s<l.matches.length&&!i.isImmediatePropagationStopped();s++)c=l.matches[s],(f||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,a=((K.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,m),a!==t&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,r,a=i.button,o=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||V,s=n.documentElement,r=n.body,e.pageX=i.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?i.toElement:o),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,i,n=e,s=K.event.fixHooks[e.type]||{},r=s.props?this.props.concat(s.props):this.props;for(e=K.Event(n),t=r.length;t;)i=r[--t],e[i]=n[i];return e.target||(e.target=n.srcElement||V),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,n):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){K.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var s=K.extend(new K.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?K.event.trigger(s,null,t):K.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},K.event.handle=K.event.dispatch,K.removeEvent=V.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&("undefined"==typeof e[n]&&(e[n]=null),e.detachEvent(n,i))},K.Event=function(e,t){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:r):this.type=e,t&&K.extend(this,t),this.timeStamp=e&&e.timeStamp||K.now(),this[K.expando]=!0,void 0):new K.Event(e,t)},K.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},K.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return r.selector,(!s||s!==n&&!K.contains(n,s))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),K.support.submitBubbles||(K.event.special.submit={setup:function(){return K.nodeName(this,"form")?!1:(K.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=K.nodeName(i,"input")||K.nodeName(i,"button")?i.form:t;n&&!K._data(n,"_submit_attached")&&(K.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),K._data(n,"_submit_attached",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&K.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return K.nodeName(this,"form")?!1:(K.event.remove(this,"._submit"),void 0)}}),K.support.changeBubbles||(K.event.special.change={setup:function(){return Lt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(K.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),K.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),K.event.simulate("change",this,e,!0)})),!1):(K.event.add(this,"beforeactivate._change",function(e){var t=e.target;Lt.test(t.nodeName)&&!K._data(t,"_change_attached")&&(K.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||K.event.simulate("change",this.parentNode,e,!0)}),K._data(t,"_change_attached",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return K.event.remove(this,"._change"),!Lt.test(this.nodeName)}}),K.support.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){0===i++&&V.addEventListener(e,n,!0)},teardown:function(){0===--i&&V.removeEventListener(e,n,!0)}}}),K.fn.extend({on:function(e,i,n,s,a){var o,l;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(l in e)this.on(l,i,n,e[l],a);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),s===!1)s=r;else if(!s)return this;return 1===a&&(o=s,s=function(e){return K().off(e),o.apply(this,arguments)},s.guid=o.guid||(o.guid=K.guid++)),this.each(function(){K.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var s,a;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,K(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(a in e)this.off(a,i,e[a]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=r),this.each(function(){K.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return K(this.context).on(e,this.selector,t,i),this},die:function(e,t){return K(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?K.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||K.guid++,n=0,s=function(i){var s=(K._data(this,"lastToggle"+e.guid)||0)%n;return K._data(this,"lastToggle"+e.guid,s+1),i.preventDefault(),t[s].apply(this,arguments)||!1};for(s.guid=i;n<t.length;)t[n++].guid=i;return this.click(s)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},St.test(t)&&(K.event.fixHooks[t]=K.event.keyHooks),At.test(t)&&(K.event.fixHooks[t]=K.event.mouseHooks)}),function(e,t){function i(e,t,i,n){i=i||[],t=t||A;var s,r,a,o,l=t.nodeType;if(!e||"string"!=typeof e)return i;if(1!==l&&9!==l)return[];if(a=w(t),!a&&!n&&(s=it.exec(e)))if(o=s[1]){if(9===l){if(r=t.getElementById(o),!r||!r.parentNode)return i;if(r.id===o)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(o))&&x(t,r)&&r.id===o)return i.push(r),i}else{if(s[2])return Y.apply(i,F.call(t.getElementsByTagName(e),0)),i;if((o=s[3])&&dt&&t.getElementsByClassName)return Y.apply(i,F.call(t.getElementsByClassName(o),0)),i}return f(e.replace(Z,"$1"),t,i,n,a)}function n(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function s(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function r(e){return R(function(t){return t=+t,R(function(i,n){for(var s,r=e([],i.length,t),a=r.length;a--;)i[s=r[a]]&&(i[s]=!(n[s]=i[s]))})})}function a(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}function o(e,t){var n,s,r,a,o,l,u,c=H[E][e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=y.preFilter;o;){(!n||(s=Q.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),l.push(r=[])),n=!1,(s=et.exec(o))&&(r.push(n=new S(s.shift())),o=o.slice(n.length),n.type=s[0].replace(Z," "));for(a in y.filter)!(s=ot[a].exec(o))||u[a]&&!(s=u[a](s))||(r.push(n=new S(s.shift())),o=o.slice(n.length),n.type=a,n.matches=s);if(!n)break}return t?o.length:o?i.error(e):H(e,l).slice(0)}function l(e,t,i){var n=t.dir,s=i&&"parentNode"===t.dir,r=N++;return t.first?function(t,i,r){for(;t=t[n];)if(s||1===t.nodeType)return e(t,i,r)}:function(t,i,a){if(a){for(;t=t[n];)if((s||1===t.nodeType)&&e(t,i,a))return t}else for(var o,l=O+" "+r+" ",u=l+v;t=t[n];)if(s||1===t.nodeType){if((o=t[E])===u)return t.sizset;if("string"==typeof o&&0===o.indexOf(l)){if(t.sizset)return t}else{if(t[E]=u,e(t,i,a))return t.sizset=!0,t;t.sizset=!1}}}}function u(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function c(e,t,i,n,s){for(var r,a=[],o=0,l=e.length,u=null!=t;l>o;o++)(r=e[o])&&(!i||i(r,n,s))&&(a.push(r),u&&t.push(o));return a}function h(e,t,i,n,s,r){return n&&!n[E]&&(n=h(n)),s&&!s[E]&&(s=h(s,r)),R(function(r,a,o,l){var u,h,d,p=[],f=[],g=a.length,v=r||m(t||"*",o.nodeType?[o]:o,[]),_=!e||!r&&t?v:c(v,p,e,o,l),y=i?s||(r?e:g||n)?[]:a:_;if(i&&i(_,y,o,l),n)for(u=c(y,f),n(u,[],o,l),h=u.length;h--;)(d=u[h])&&(y[f[h]]=!(_[f[h]]=d));if(r){if(s||e){if(s){for(u=[],h=y.length;h--;)(d=y[h])&&u.push(_[h]=d);s(null,y=[],u,l)}for(h=y.length;h--;)(d=y[h])&&(u=s?z.call(r,d):p[h])>-1&&(r[u]=!(a[u]=d))}}else y=c(y===a?y.splice(g,y.length):y),s?s(null,a,y,l):Y.apply(a,y)})}function d(e){for(var t,i,n,s=e.length,r=y.relative[e[0].type],a=r||y.relative[" "],o=r?1:0,c=l(function(e){return e===t},a,!0),p=l(function(e){return z.call(t,e)>-1},a,!0),m=[function(e,i,n){return!r&&(n||i!==C)||((t=i).nodeType?c(e,i,n):p(e,i,n))}];s>o;o++)if(i=y.relative[e[o].type])m=[l(u(m),i)];else{if(i=y.filter[e[o].type].apply(null,e[o].matches),i[E]){for(n=++o;s>n&&!y.relative[e[n].type];n++);return h(o>1&&u(m),o>1&&e.slice(0,o-1).join("").replace(Z,"$1"),i,n>o&&d(e.slice(o,n)),s>n&&d(e=e.slice(n)),s>n&&e.join(""))}m.push(i)}return u(m)}function p(e,t){var n=t.length>0,s=e.length>0,r=function(a,o,l,u,h){var d,p,m,f=[],g=0,_="0",b=a&&[],w=null!=h,x=C,M=a||s&&y.find.TAG("*",h&&o.parentNode||o),T=O+=null==x?1:Math.E;for(w&&(C=o!==A&&o,v=r.el);null!=(d=M[_]);_++){if(s&&d){for(p=0;m=e[p];p++)if(m(d,o,l)){u.push(d);break}w&&(O=T,v=++r.el)}n&&((d=!m&&d)&&g--,a&&b.push(d))}if(g+=_,n&&_!==g){for(p=0;m=t[p];p++)m(b,f,o,l);if(a){if(g>0)for(;_--;)b[_]||f[_]||(f[_]=I.call(u));f=c(f)}Y.apply(u,f),w&&!a&&f.length>0&&g+t.length>1&&i.uniqueSort(u)}return w&&(O=T,C=x),b};return r.el=0,n?R(r):r}function m(e,t,n){for(var s=0,r=t.length;r>s;s++)i(e,t[s],n);return n}function f(e,t,i,n,s){var r,a,l,u,c,h=o(e);if(h.length,!n&&1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(l=a[0]).type&&9===t.nodeType&&!s&&y.relative[a[1].type]){if(t=y.find.ID(l.matches[0].replace(at,""),t,s)[0],!t)return i;e=e.slice(a.shift().length)}for(r=ot.POS.test(e)?-1:a.length-1;r>=0&&(l=a[r],!y.relative[u=l.type]);r--)if((c=y.find[u])&&(n=c(l.matches[0].replace(at,""),nt.test(a[0].type)&&t.parentNode||t,s))){if(a.splice(r,1),e=n.length&&a.join(""),!e)return Y.apply(i,F.call(n,0)),i;break}}return M(e,h)(n,t,s,i,nt.test(e)),i}function g(){}var v,_,y,b,w,x,M,T,k,C,L=!0,D="undefined",E=("sizcache"+Math.random()).replace(".",""),S=String,A=e.document,P=A.documentElement,O=0,N=0,I=[].pop,Y=[].push,F=[].slice,z=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},R=function(e,t){return e[E]=null==t||t,e},j=function(){var e={},t=[];return R(function(i,n){return t.push(i)>y.cacheLength&&delete e[t.shift()],e[i+" "]=n},e)},V=j(),H=j(),q=j(),B="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",W=U.replace("w","w#"),$="([*^$|!~]?=)",G="\\["+B+"*("+U+")"+B+"*(?:"+$+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+W+")|)|)"+B+"*\\]",J=":("+U+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+G+")|[^:]|\\\\.)*|.*))\\)|)",X=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),Q=new RegExp("^"+B+"*,"+B+"*"),et=new RegExp("^"+B+"*([\\x20\\t\\r\\n\\f>+~])"+B+"*"),tt=new RegExp(J),it=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,nt=/[\x20\t\r\n\f]*[+~]/,st=/h\d/i,rt=/input|select|textarea|button/i,at=/\\(?!\\)/g,ot={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),NAME:new RegExp("^\\[name=['\"]?("+U+")['\"]?\\]"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+J),POS:new RegExp(X,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),needsContext:new RegExp("^"+B+"*[>+~]|"+X,"i")},lt=function(e){var t=A.createElement("div");try{return e(t)}catch(i){return!1}finally{t=null}},ut=lt(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),ct=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==D&&"#"===e.firstChild.getAttribute("href")}),ht=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),pt=lt(function(e){e.id=E+0,e.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",P.insertBefore(e,P.firstChild);var t=A.getElementsByName&&A.getElementsByName(E).length===2+A.getElementsByName(E+0).length;return _=!A.getElementById(E),P.removeChild(e),t});try{F.call(P.childNodes,0)[0].nodeType}catch(mt){F=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){return i(t,null,null,[e]).length>0},b=i.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=b(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n];n++)i+=b(t);return i},w=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},x=i.contains=P.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:P.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},i.attr=function(e,t){var i,n=w(e);return n||(t=t.toLowerCase()),(i=y.attrHandle[t])?i(e):n||ht?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)},y=i.selectors={cacheLength:50,createPseudo:R,match:ot,attrHandle:ct?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:_?function(e,t,i){if(typeof t.getElementById!==D&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,i,n){if(typeof i.getElementById!==D&&!n){var s=i.getElementById(e);return s?s.id===e||typeof s.getAttributeNode!==D&&s.getAttributeNode("id").value===e?[s]:t:[]}},TAG:ut?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,s=[],r=0;n=i[r];r++)1===n.nodeType&&s.push(n);return s}return i},NAME:pt&&function(e,t){return typeof t.getElementsByName!==D?t.getElementsByName(name):void 0},CLASS:dt&&function(e,t,i){return typeof t.getElementsByClassName===D||i?void 0:t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||i.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&i.error(e[0]),e},PSEUDO:function(e){var t,i;return ot.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(tt.test(t)&&(i=o(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:_?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var i=typeof t.getAttributeNode!==D&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=V[E][e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&V(e,function(e){return t.test(e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(s){var r=i.attr(s,e);return null==r?"!="===t:t?(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.substr(r.length-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t?r===n||r.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n){return"nth"===e?function(e){var t,s,r=e.parentNode;if(1===i&&0===n)return!0;if(r)for(s=0,t=r.firstChild;t&&(1!==t.nodeType||(s++,e!==t));t=t.nextSibling);return s-=n,s===i||0===s%i&&s/i>=0}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var n,s=y.pseudos[e]||y.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return s[E]?s(t):s.length>1?(n=[e,e,"",t],y.setFilters.hasOwnProperty(e.toLowerCase())?R(function(e,i){for(var n,r=s(e,t),a=r.length;a--;)n=z.call(e,r[a]),e[n]=!(i[n]=r[a])}):function(e){return s(e,0,n)}):s}},pseudos:{not:R(function(e){var t=[],i=[],n=M(e.replace(Z,"$1"));return n[E]?R(function(e,t,i,s){for(var r,a=n(e,null,s,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,s,r){return t[0]=e,n(t,null,r,i),!i.pop()}}),has:R(function(e){return function(t){return i(e,t).length>0}}),contains:R(function(e){return function(t){return(t.textContent||t.innerText||b(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!y.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return st.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:s("submit"),reset:s("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return rt.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:r(function(){return[0]}),last:r(function(e,t){return[t-1]}),eq:r(function(e,t,i){return[0>i?i+t:i]}),even:r(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:r(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:r(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:r(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},T=P.compareDocumentPosition?function(e,t){return e===t?(k=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return k=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,s=[],r=[],o=e.parentNode,l=t.parentNode,u=o;if(o===l)return a(e,t);if(!o)return-1;if(!l)return 1;for(;u;)s.unshift(u),u=u.parentNode;for(u=l;u;)r.unshift(u),u=u.parentNode;i=s.length,n=r.length;for(var c=0;i>c&&n>c;c++)if(s[c]!==r[c])return a(s[c],r[c]);return c===i?a(e,r[c],-1):a(s[c],t,1)},[0,0].sort(T),L=!k,i.uniqueSort=function(e){var t,i=[],n=1,s=0;if(k=L,e.sort(T),k){for(;t=e[n];n++)t===e[n-1]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return e},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},M=i.compile=function(e,t){var i,n=[],s=[],r=q[E][e+" "];if(!r){for(t||(t=o(e)),i=t.length;i--;)r=d(t[i]),r[E]?n.push(r):s.push(r);r=q(e,p(s,n))}return r},A.querySelectorAll&&function(){var e,t=f,n=/'|\\/g,s=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,r=[":focus"],a=[":active"],l=P.matchesSelector||P.mozMatchesSelector||P.webkitMatchesSelector||P.oMatchesSelector||P.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||r.push("\\["+B+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||r.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&r.push("[*^$]="+B+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||r.push(":enabled",":disabled")}),r=new RegExp(r.join("|")),f=function(e,i,s,a,l){if(!a&&!l&&!r.test(e)){var u,c,h=!0,d=E,p=i,m=9===i.nodeType&&e;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(u=o(e),(h=i.getAttribute("id"))?d=h.replace(n,"\\$&"):i.setAttribute("id",d),d="[id='"+d+"'] ",c=u.length;c--;)u[c]=d+u[c].join("");p=nt.test(e)&&i.parentNode||i,m=u.join(",")}if(m)try{return Y.apply(s,F.call(p.querySelectorAll(m),0)),s}catch(f){}finally{h||i.removeAttribute("id")}}return t(e,i,s,a,l)},l&&(lt(function(t){e=l.call(t,"div");try{l.call(t,"[test!='']:sizzle"),a.push("!=",J)}catch(i){}}),a=new RegExp(a.join("|")),i.matchesSelector=function(t,n){if(n=n.replace(s,"='$1']"),!w(t)&&!a.test(n)&&!r.test(n))try{var o=l.call(t,n);if(o||e||t.document&&11!==t.document.nodeType)return o}catch(u){}return i(n,null,null,[t]).length>0})}(),y.pseudos.nth=y.pseudos.eq,y.filters=g.prototype=y.pseudos,y.setFilters=new g,i.attr=K.attr,K.find=i,K.expr=i.selectors,K.expr[":"]=K.expr.pseudos,K.unique=i.uniqueSort,K.text=i.getText,K.isXMLDoc=i.isXML,K.contains=i.contains}(e);var Nt=/Until$/,It=/^(?:parents|prev(?:Until|All))/,Yt=/^.[^:#\[\.,]*$/,Ft=K.expr.match.needsContext,zt={children:!0,contents:!0,next:!0,prev:!0};K.fn.extend({find:function(e){var t,i,n,s,r,a,o=this;if("string"!=typeof e)return K(e).filter(function(){for(t=0,i=o.length;i>t;t++)if(K.contains(o[t],this))return!0});for(a=this.pushStack("","find",e),t=0,i=this.length;i>t;t++)if(n=a.length,K.find(e,this[t],a),t>0)for(s=n;s<a.length;s++)for(r=0;n>r;r++)if(a[r]===a[s]){a.splice(s--,1);break}return a},has:function(e){var t,i=K(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(K.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(u(this,e,!1),"not",e)},filter:function(e){return this.pushStack(u(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Ft.test(e)?K(e,this.context).index(this[0])>=0:K.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,s=this.length,r=[],a=Ft.test(e)||"string"!=typeof e?K(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(a?a.index(i)>-1:K.find.matchesSelector(i,e)){r.push(i);break}i=i.parentNode}return r=r.length>1?K.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?K.inArray(this[0],K(e)):K.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?K(e,t):K.makeArray(e&&e.nodeType?[e]:e),n=K.merge(this.get(),i);return this.pushStack(o(i[0])||o(n[0])?n:K.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.fn.andSelf=K.fn.addBack,K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,i){return K.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,i){return K.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return K.dir(e,"previousSibling",i)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return K.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(i,n){var s=K.map(this,t,i);return Nt.test(e)||(n=i),n&&"string"==typeof n&&(s=K.filter(n,s)),s=this.length>1&&!zt[e]?K.unique(s):s,this.length>1&&It.test(e)&&(s=s.reverse()),this.pushStack(s,e,$.call(arguments).join(","))}}),K.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?K.find.matchesSelector(t[0],e)?[t[0]]:[]:K.find.matches(e,t)},dir:function(e,i,n){for(var s=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!K(r).is(n));)1===r.nodeType&&s.push(r),r=r[i];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Rt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,Vt=/^\s+/,Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=/<([\w:]+)/,Bt=/<tbody/i,Ut=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Gt=new RegExp("<(?:"+Rt+")[\\s/>]","i"),Jt=/^(?:checkbox|radio)$/,Xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Zt=/\/(java|ecma)script/i,Kt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Qt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ei=c(V),ti=ei.appendChild(V.createElement("div"));
Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td,K.support.htmlSerialize||(Qt._default=[1,"X<div>","</div>"]),K.fn.extend({text:function(e){return K.access(this,function(e){return e===t?K.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(K.isFunction(e))return this.each(function(t){K(this).wrapAll(e.call(this,t))});if(this[0]){var t=K(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return K.isFunction(e)?this.each(function(t){K(this).wrapInner(e.call(this,t))}):this.each(function(){var t=K(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(i){K(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(e,this),"before",this.selector)}},after:function(){if(!o(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=K.clean(arguments);return this.pushStack(K.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||K.filter(e,[i]).length)&&(t||1!==i.nodeType||(K.cleanData(i.getElementsByTagName("*")),K.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&K.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return K.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(jt,""):t;if(!("string"!=typeof e||Wt.test(e)||!K.support.htmlSerialize&&Gt.test(e)||!K.support.leadingWhitespace&&Vt.test(e)||Qt[(qt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ht,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(K.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(r){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return o(this[0])?this.length?this.pushStack(K(K.isFunction(e)?e():e),"replaceWith",e):this:K.isFunction(e)?this.each(function(t){var i=K(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=K(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;K(this).remove(),t?K(t).before(e):K(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=[].concat.apply([],e);var s,r,a,o,l=0,u=e[0],c=[],d=this.length;if(!K.support.checkClone&&d>1&&"string"==typeof u&&Xt.test(u))return this.each(function(){K(this).domManip(e,i,n)});if(K.isFunction(u))return this.each(function(s){var r=K(this);e[0]=u.call(this,s,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(s=K.buildFragment(e,this,c),a=s.fragment,r=a.firstChild,1===a.childNodes.length&&(a=r),r)for(i=i&&K.nodeName(r,"tr"),o=s.cacheable||d-1;d>l;l++)n.call(i&&K.nodeName(this[l],"table")?h(this[l],"tbody"):this[l],l===o?a:K.clone(a,!0,!0));a=r=null,c.length&&K.each(c,function(e,t){t.src?K.ajax?K.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):K.error("no ajax"):K.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Kt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),K.buildFragment=function(e,i,n){var s,r,a,o=e[0];return i=i||V,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,!(1===e.length&&"string"==typeof o&&o.length<512&&i===V&&"<"===o.charAt(0))||$t.test(o)||!K.support.checkClone&&Xt.test(o)||!K.support.html5Clone&&Gt.test(o)||(r=!0,s=K.fragments[o],a=s!==t),s||(s=i.createDocumentFragment(),K.clean(e,i,s,n),r&&(K.fragments[o]=a&&s)),{fragment:s,cacheable:r}},K.fragments={},K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(i){var n,s=0,r=[],a=K(i),o=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===o)return a[t](this[0]),this;for(;o>s;s++)n=(s>0?this.clone(!0):this).get(),K(a[s])[t](n),r=r.concat(n);return this.pushStack(r,e,a.selector)}}),K.extend({clone:function(e,t,i){var n,s,r,a;if(K.support.html5Clone||K.isXMLDoc(e)||!Gt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ti.innerHTML=e.outerHTML,ti.removeChild(a=ti.firstChild)),!(K.support.noCloneEvent&&K.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(p(e,a),n=m(e),s=m(a),r=0;n[r];++r)s[r]&&p(n[r],s[r]);if(t&&(d(e,a),i))for(n=m(e),s=m(a),r=0;n[r];++r)d(n[r],s[r]);return n=s=null,a},clean:function(e,t,i,n){var s,r,a,o,l,u,h,d,p,m,g,v=t===V&&ei,_=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=V),s=0;null!=(a=e[s]);s++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Ut.test(a)){for(v=v||c(t),h=t.createElement("div"),v.appendChild(h),a=a.replace(Ht,"<$1></$2>"),o=(qt.exec(a)||["",""])[1].toLowerCase(),l=Qt[o]||Qt._default,u=l[0],h.innerHTML=l[1]+a+l[2];u--;)h=h.lastChild;if(!K.support.tbody)for(d=Bt.test(a),p="table"!==o||d?"<table>"!==l[1]||d?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,r=p.length-1;r>=0;--r)K.nodeName(p[r],"tbody")&&!p[r].childNodes.length&&p[r].parentNode.removeChild(p[r]);!K.support.leadingWhitespace&&Vt.test(a)&&h.insertBefore(t.createTextNode(Vt.exec(a)[0]),h.firstChild),a=h.childNodes,h.parentNode.removeChild(h)}else a=t.createTextNode(a);a.nodeType?_.push(a):K.merge(_,a)}if(h&&(a=h=v=null),!K.support.appendChecked)for(s=0;null!=(a=_[s]);s++)K.nodeName(a,"input")?f(a):"undefined"!=typeof a.getElementsByTagName&&K.grep(a.getElementsByTagName("input"),f);if(i)for(m=function(e){return!e.type||Zt.test(e.type)?n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):void 0},s=0;null!=(a=_[s]);s++)K.nodeName(a,"script")&&m(a)||(i.appendChild(a),"undefined"!=typeof a.getElementsByTagName&&(g=K.grep(K.merge([],a.getElementsByTagName("script")),m),_.splice.apply(_,[s+1,0].concat(g)),s+=g.length));return _},cleanData:function(e,t){for(var i,n,s,r,a=0,o=K.expando,l=K.cache,u=K.support.deleteExpando,c=K.event.special;null!=(s=e[a]);a++)if((t||K.acceptData(s))&&(n=s[o],i=n&&l[n])){if(i.events)for(r in i.events)c[r]?K.event.remove(s,r):K.removeEvent(s,r,i.handle);l[n]&&(delete l[n],u?delete s[o]:s.removeAttribute?s.removeAttribute(o):s[o]=null,K.deletedIds.push(n))}}}),function(){var e,t;K.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=K.uaMatch(q.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),K.browser=t,K.sub=function(){function e(t,i){return new e.fn.init(t,i)}K.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof K&&!(n instanceof e)&&(n=e(n)),K.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(V);return e}}();var ii,ni,si,ri=/alpha\([^)]*\)/i,ai=/opacity=([^)]*)/,oi=/^(top|right|bottom|left)$/,li=/^(none|table(?!-c[ea]).+)/,ui=/^margin/,ci=new RegExp("^("+Q+")(.*)$","i"),hi=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),di=new RegExp("^([-+])=("+Q+")","i"),pi={BODY:"block"},mi={position:"absolute",visibility:"hidden",display:"block"},fi={letterSpacing:0,fontWeight:400},gi=["Top","Right","Bottom","Left"],vi=["Webkit","O","Moz","ms"],_i=K.fn.toggle;K.fn.extend({css:function(e,i){return K.access(this,function(e,i,n){return n!==t?K.style(e,i,n):K.css(e,i)},e,i,arguments.length>1)},show:function(){return _(this,!0)},hide:function(){return _(this)},toggle:function(e,t){var i="boolean"==typeof e;return K.isFunction(e)&&K.isFunction(t)?_i.apply(this,arguments):this.each(function(){(i?e:v(this))?K(this).show():K(this).hide()})}}),K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ii(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":K.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,l=K.camelCase(i),u=e.style;if(i=K.cssProps[l]||(K.cssProps[l]=g(u,l)),o=K.cssHooks[i]||K.cssHooks[l],n===t)return o&&"get"in o&&(r=o.get(e,!1,s))!==t?r:u[i];if(a=typeof n,"string"===a&&(r=di.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(K.css(e,i)),a="number"),!(null==n||"number"===a&&isNaN(n)||("number"!==a||K.cssNumber[l]||(n+="px"),o&&"set"in o&&(n=o.set(e,n,s))===t)))try{u[i]=n}catch(c){}}},css:function(e,i,n,s){var r,a,o,l=K.camelCase(i);return i=K.cssProps[l]||(K.cssProps[l]=g(e.style,l)),o=K.cssHooks[i]||K.cssHooks[l],o&&"get"in o&&(r=o.get(e,!0,s)),r===t&&(r=ii(e,i)),"normal"===r&&i in fi&&(r=fi[i]),n||s!==t?(a=parseFloat(r),n||K.isNumeric(a)?a||0:r):r},swap:function(e,t,i){var n,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];n=i.call(e);for(s in t)e.style[s]=r[s];return n}}),e.getComputedStyle?ii=function(t,i){var n,s,r,a,o=e.getComputedStyle(t,null),l=t.style;return o&&(n=o.getPropertyValue(i)||o[i],""!==n||K.contains(t.ownerDocument,t)||(n=K.style(t,i)),hi.test(n)&&ui.test(i)&&(s=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=o.width,l.width=s,l.minWidth=r,l.maxWidth=a)),n}:V.documentElement.currentStyle&&(ii=function(e,t){var i,n,s=e.currentStyle&&e.currentStyle[t],r=e.style;return null==s&&r&&r[t]&&(s=r[t]),hi.test(s)&&!oi.test(t)&&(i=r.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":s,s=r.pixelLeft+"px",r.left=i,n&&(e.runtimeStyle.left=n)),""===s?"auto":s}),K.each(["height","width"],function(e,t){K.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&li.test(ii(e,"display"))?K.swap(e,mi,function(){return w(e,t,n)}):w(e,t,n):void 0},set:function(e,i,n){return y(e,i,n?b(e,t,n,K.support.boxSizing&&"border-box"===K.css(e,"boxSizing")):0)}}}),K.support.opacity||(K.cssHooks.opacity={get:function(e,t){return ai.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=K.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===K.trim(r.replace(ri,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=ri.test(r)?r.replace(ri,s):r+" "+s)}}),K(function(){K.support.reliableMarginRight||(K.cssHooks.marginRight={get:function(e,t){return K.swap(e,{display:"inline-block"},function(){return t?ii(e,"marginRight"):void 0})}}),!K.support.pixelPosition&&K.fn.position&&K.each(["top","left"],function(e,t){K.cssHooks[t]={get:function(e,i){if(i){var n=ii(e,t);return hi.test(n)?K(e).position()[t]+"px":n}}}})}),K.expr&&K.expr.filters&&(K.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!K.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ii(e,"display"))},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(i){var n,s="string"==typeof i?i.split(" "):[i],r={};for(n=0;4>n;n++)r[e+gi[n]+t]=s[n]||s[n-2]||s[0];return r}},ui.test(e)||(K.cssHooks[e+t].set=y)});var yi=/%20/g,bi=/\[\]$/,wi=/\r?\n/g,xi=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Mi=/^(?:select|textarea)/i;K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?K.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Mi.test(this.nodeName)||xi.test(this.type))}).map(function(e,t){var i=K(this).val();return null==i?null:K.isArray(i)?K.map(i,function(e){return{name:t.name,value:e.replace(wi,"\r\n")}}):{name:t.name,value:i.replace(wi,"\r\n")}}).get()}}),K.param=function(e,i){var n,s=[],r=function(e,t){t=K.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){r(this.name,this.value)});else for(n in e)M(n,e[n],i,r);return s.join("&").replace(yi,"+")};var Ti,ki,Ci=/#.*$/,Li=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Di=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ei=/^(?:GET|HEAD)$/,Si=/^\/\//,Ai=/\?/,Pi=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Oi=/([?&])_=[^&]*/,Ni=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ii=K.fn.load,Yi={},Fi={},zi=["*/"]+["*"];try{ki=H.href}catch(Ri){ki=V.createElement("a"),ki.href="",ki=ki.href}Ti=Ni.exec(ki.toLowerCase())||[],K.fn.load=function(e,i,n){if("string"!=typeof e&&Ii)return Ii.apply(this,arguments);if(!this.length)return this;var s,r,a,o=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),K.isFunction(i)?(n=i,i=t):i&&"object"==typeof i&&(r="POST"),K.ajax({url:e,type:r,dataType:"html",data:i,complete:function(e,t){n&&o.each(n,a||[e.responseText,t,e])}}).done(function(e){a=arguments,o.html(s?K("<div>").append(e.replace(Pi,"")).find(s):e)}),this},K.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K.each(["get","post"],function(e,i){K[i]=function(e,n,s,r){return K.isFunction(n)&&(r=r||s,s=n,n=t),K.ajax({type:i,url:e,data:n,success:s,dataType:r})}}),K.extend({getScript:function(e,i){return K.get(e,t,i,"script")},getJSON:function(e,t,i){return K.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?C(e,K.ajaxSettings):(t=e,e=K.ajaxSettings),C(e,t),e},ajaxSettings:{url:ki,isLocal:Di.test(Ti[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":zi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(Yi),ajaxTransport:T(Fi),ajax:function(e,i){function n(e,i,n,a){var u,h,_,y,w,M=i;2!==b&&(b=2,l&&clearTimeout(l),o=t,r=a||"",x.readyState=e>0?4:0,n&&(y=L(d,x,n)),e>=200&&300>e||304===e?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(K.lastModified[s]=w),w=x.getResponseHeader("Etag"),w&&(K.etag[s]=w)),304===e?(M="notmodified",u=!0):(u=D(d,y),M=u.state,h=u.data,_=u.error,u=!_)):(_=M,(!M||e)&&(M="error",0>e&&(e=0))),x.status=e,x.statusText=(i||M)+"",u?f.resolveWith(p,[h,M,x]):f.rejectWith(p,[x,M,_]),x.statusCode(v),v=t,c&&m.trigger("ajax"+(u?"Success":"Error"),[x,d,u?h:_]),g.fireWith(p,[x,M]),c&&(m.trigger("ajaxComplete",[x,d]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var s,r,a,o,l,u,c,h,d=K.ajaxSetup({},i),p=d.context||d,m=p!==d&&(p.nodeType||p instanceof K)?K(p):K.event,f=K.Deferred(),g=K.Callbacks("once memory"),v=d.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!b){var i=e.toLowerCase();e=y[i]=y[i]||e,_[e]=t}return this},getAllResponseHeaders:function(){return 2===b?r:null},getResponseHeader:function(e){var i;if(2===b){if(!a)for(a={};i=Li.exec(r);)a[i[1].toLowerCase()]=i[2];i=a[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return b||(d.mimeType=e),this},abort:function(e){return e=e||w,o&&o.abort(e),n(0,e),this}};if(f.promise(x),x.success=x.done,x.error=x.fail,x.complete=g.add,x.statusCode=function(e){if(e){var t;if(2>b)for(t in e)v[t]=[v[t],e[t]];else t=e[x.status],x.always(t)}return this},d.url=((e||d.url)+"").replace(Ci,"").replace(Si,Ti[1]+"//"),d.dataTypes=K.trim(d.dataType||"*").toLowerCase().split(tt),null==d.crossDomain&&(u=Ni.exec(d.url.toLowerCase()),d.crossDomain=!(!u||u[1]===Ti[1]&&u[2]===Ti[2]&&(u[3]||("http:"===u[1]?80:443))==(Ti[3]||("http:"===Ti[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=K.param(d.data,d.traditional)),k(Yi,d,i,x),2===b)return x;if(c=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Ei.test(d.type),c&&0===K.active++&&K.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Ai.test(d.url)?"&":"?")+d.data,delete d.data),s=d.url,d.cache===!1)){var M=K.now(),T=d.url.replace(Oi,"$1_="+M);d.url=T+(T===d.url?(Ai.test(d.url)?"&":"?")+"_="+M:"")}(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(s=s||d.url,K.lastModified[s]&&x.setRequestHeader("If-Modified-Since",K.lastModified[s]),K.etag[s]&&x.setRequestHeader("If-None-Match",K.etag[s])),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+zi+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)x.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===b))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](d[h]);if(o=k(Fi,d,i,x)){x.readyState=1,c&&m.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,o.send(_,n)}catch(C){if(!(2>b))throw C;n(-1,C)}}else n(-1,"No Transport");return x},active:0,lastModified:{},etag:{}});var ji=[],Vi=/\?/,Hi=/(=)\?(?=&|$)|\?\?/,qi=K.now();K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ji.pop()||K.expando+"_"+qi++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(i,n,s){var r,a,o,l=i.data,u=i.url,c=i.jsonp!==!1,h=c&&Hi.test(u),d=c&&!h&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hi.test(l);return"jsonp"===i.dataTypes[0]||h||d?(r=i.jsonpCallback=K.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,a=e[r],h?i.url=u.replace(Hi,"$1"+r):d?i.data=l.replace(Hi,"$1"+r):c&&(i.url+=(Vi.test(u)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return o||K.error(r+" was not called"),o[0]},i.dataTypes[0]="json",e[r]=function(){o=arguments},s.always(function(){e[r]=a,i[r]&&(i.jsonpCallback=n.jsonpCallback,ji.push(r)),o&&K.isFunction(a)&&a(o[0]),o=a=t}),"script"):void 0}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),K.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=V.head||V.getElementsByTagName("head")[0]||V.documentElement;return{send:function(s,r){i=V.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,s){(s||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,s||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Bi,Ui=e.ActiveXObject?function(){for(var e in Bi)Bi[e](0,1)}:!1,Wi=0;K.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&E()||S()}:E,function(e){K.extend(K.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(K.ajaxSettings.xhr()),K.support.ajax&&K.ajaxTransport(function(i){if(!i.crossDomain||K.support.cors){var n;return{send:function(s,r){var a,o,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(o in i.xhrFields)l[o]=i.xhrFields[o];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(o in s)l.setRequestHeader(o,s[o])}catch(u){}l.send(i.hasContent&&i.data||null),n=function(e,s){var o,u,c,h,d;try{if(n&&(s||4===l.readyState))if(n=t,a&&(l.onreadystatechange=K.noop,Ui&&delete Bi[a]),s)4!==l.readyState&&l.abort();else{o=l.status,c=l.getAllResponseHeaders(),h={},d=l.responseXML,d&&d.documentElement&&(h.xml=d);try{h.text=l.responseText}catch(p){}try{u=l.statusText}catch(p){u=""}o||!i.isLocal||i.crossDomain?1223===o&&(o=204):o=h.text?200:404}}catch(m){s||r(-1,m)}h&&r(o,u,h,c)},i.async?4===l.readyState?setTimeout(n,0):(a=++Wi,Ui&&(Bi||(Bi={},K(e).unload(Ui)),Bi[a]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var $i,Gi,Ji=/^(?:toggle|show|hide)$/,Xi=new RegExp("^(?:([-+])=|)("+Q+")([a-z%]*)$","i"),Zi=/queueHooks$/,Ki=[I],Qi={"*":[function(e,t){var i,n,s=this.createTween(e,t),r=Xi.exec(t),a=s.cur(),o=+a||0,l=1,u=20;if(r){if(i=+r[2],n=r[3]||(K.cssNumber[e]?"":"px"),"px"!==n&&o){o=K.css(s.elem,e,!0)||i||1;do l=l||".5",o/=l,K.style(s.elem,e,o+n);while(l!==(l=s.cur()/a)&&1!==l&&--u)}s.unit=n,s.start=o,s.end=r[1]?o+(r[1]+1)*i:i}return s}]};K.Animation=K.extend(O,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,s=e.length;s>n;n++)i=e[n],Qi[i]=Qi[i]||[],Qi[i].unshift(t)},prefilter:function(e,t){t?Ki.unshift(e):Ki.push(e)}}),K.Tween=Y,Y.prototype={constructor:Y,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(K.cssNumber[i]?"":"px")},cur:function(){var e=Y.propHooks[this.prop];return e&&e.get?e.get(this):Y.propHooks._default.get(this)},run:function(e){var t,i=Y.propHooks[this.prop];return this.pos=t=this.options.duration?K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Y.propHooks._default.set(this),this}},Y.prototype.init.prototype=Y.prototype,Y.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Y.propHooks.scrollTop=Y.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.each(["toggle","show","hide"],function(e,t){var i=K.fn[t];K.fn[t]=function(n,s,r){return null==n||"boolean"==typeof n||!e&&K.isFunction(n)&&K.isFunction(s)?i.apply(this,arguments):this.animate(F(t,!0),n,s,r)}}),K.fn.extend({fadeTo:function(e,t,i,n){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=K.isEmptyObject(e),r=K.speed(t,i,n),a=function(){var t=O(this,K.extend({},e),r);s&&t.stop(!0)};return s||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,i,n){var s=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=K.timers,a=K._data(this);if(i)a[i]&&a[i].stop&&s(a[i]);else for(i in a)a[i]&&a[i].stop&&Zi.test(i)&&s(a[i]);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&K.dequeue(this,e)})}}),K.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),K.speed=function(e,t,i){var n=e&&"object"==typeof e?K.extend({},e):{complete:i||!i&&t||K.isFunction(e)&&e,duration:e,easing:i&&t||t&&!K.isFunction(t)&&t};return n.duration=K.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in K.fx.speeds?K.fx.speeds[n.duration]:K.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){K.isFunction(n.old)&&n.old.call(this),n.queue&&K.dequeue(this,n.queue)},n},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.timers=[],K.fx=Y.prototype.init,K.fx.tick=function(){var e,i=K.timers,n=0;for($i=K.now();n<i.length;n++)e=i[n],e()||i[n]!==e||i.splice(n--,1);i.length||K.fx.stop(),$i=t},K.fx.timer=function(e){e()&&K.timers.push(e)&&!Gi&&(Gi=setInterval(K.fx.tick,K.fx.interval))},K.fx.interval=13,K.fx.stop=function(){clearInterval(Gi),Gi=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fx.step={},K.expr&&K.expr.filters&&(K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length});var en=/^(?:body|html)$/i;K.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){K.offset.setOffset(this,e,t)});var i,n,s,r,a,o,l,u={top:0,left:0},c=this[0],h=c&&c.ownerDocument;if(h)return(n=h.body)===c?K.offset.bodyOffset(c):(i=h.documentElement,K.contains(i,c)?("undefined"!=typeof c.getBoundingClientRect&&(u=c.getBoundingClientRect()),s=z(h),r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,o=s.pageYOffset||i.scrollTop,l=s.pageXOffset||i.scrollLeft,{top:u.top+o-r,left:u.left+l-a}):u)},K.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return K.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(K.css(e,"marginTop"))||0,i+=parseFloat(K.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=K.css(e,"position");"static"===n&&(e.style.position="relative");var s,r,a=K(e),o=a.offset(),l=K.css(e,"top"),u=K.css(e,"left"),c=("absolute"===n||"fixed"===n)&&K.inArray("auto",[l,u])>-1,h={},d={};c?(d=a.position(),s=d.top,r=d.left):(s=parseFloat(l)||0,r=parseFloat(u)||0),K.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+r),"using"in t?t.using.call(e,h):a.css(h)}},K.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=en.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(K.css(e,"marginTop"))||0,i.left-=parseFloat(K.css(e,"marginLeft"))||0,n.top+=parseFloat(K.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(K.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||V.body;e&&!en.test(e.nodeName)&&"static"===K.css(e,"position");)e=e.offsetParent;return e||V.body})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);K.fn[e]=function(s){return K.access(this,function(e,s,r){var a=z(e);return r===t?a?i in a?a[i]:a.document.documentElement[s]:e[s]:(a?a.scrollTo(n?K(a).scrollLeft():r,n?r:K(a).scrollTop()):e[s]=r,void 0)},e,s,arguments.length,null)}}),K.each({Height:"height",Width:"width"},function(e,i){K.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,s){K.fn[s]=function(s,r){var a=arguments.length&&(n||"boolean"!=typeof s),o=n||(s===!0||r===!0?"margin":"border");return K.access(this,function(i,n,s){var r;return K.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):s===t?K.css(i,n,s,o):K.style(i,n,s,o)},i,a?s:t,a,null)}})}),e.jQuery=e.$=K,"function"==typeof Mindbreeze.define&&Mindbreeze.define.amd&&Mindbreeze.define.amd.jQuery&&Mindbreeze.define("jquery",[],function(){return K})}(window),$.noConflict(!0)}),function(e,t){"undefined"!=typeof exports?t(e,exports,require("underscore")):"undefined"!=typeof Mindbreeze&&"function"==typeof Mindbreeze.define?Mindbreeze.define("backbone",["underscore","jquery","exports"],function(i,n,s){var r=t(e,s,i,n);return Mindbreeze.globalExport&&(e.Backbone=Mindbreeze.warningProxy?Mindbreeze.warningProxy(r,"Backbone","backbone"):r),r}):"function"==typeof Mindbreeze.define&&Mindbreeze.define.amd?Mindbreeze.define("backbone",["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender)}(this,function(e,t,i,n){var s=e.Backbone,r=[],a=r.push,o=r.slice,l=r.splice;t.VERSION="0.9.9",t.$=n,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var u=/\s+/,c=function(e,t,i,n){if(!i)return!0;if("object"==typeof i)for(var s in i)e[t].apply(e,[s,i[s]].concat(n));else{if(!u.test(i))return!0;for(var r=i.split(u),a=0,o=r.length;o>a;a++)e[t].apply(e,[r[a]].concat(n))}},h=function(e,t,i){var n,s=-1,r=t.length;switch(i.length){case 0:for(;++s<r;)(n=t[s]).callback.call(n.ctx);return;case 1:for(;++s<r;)(n=t[s]).callback.call(n.ctx,i[0]);return;case 2:for(;++s<r;)(n=t[s]).callback.call(n.ctx,i[0],i[1]);return;case 3:for(;++s<r;)(n=t[s]).callback.call(n.ctx,i[0],i[1],i[2]);return;default:for(;++s<r;)(n=t[s]).callback.apply(n.ctx,i)}},d=t.Events={on:function(e,t,i){if(!c(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,n){if(!c(this,"once",e,[t,n])||!t)return this;var s=this,r=i.once(function(){s.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,n),this},off:function(e,t,n){var s,r,a,o,l,u,h,d;if(!this._events||!c(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:i.keys(this._events),l=0,u=o.length;u>l;l++)if(e=o[l],s=this._events[e]){if(a=[],t||n)for(h=0,d=s.length;d>h;h++)r=s[h],(t&&t!==(r.callback._callback||r.callback)||n&&n!==r.context)&&a.push(r);this._events[e]=a}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!c(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&h(this,i,t),n&&h(this,n,arguments),this},listenTo:function(e,t,n){var s=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=i.uniqueId("l"));return s[r]=e,e.on(t,n||this,this),this},stopListening:function(e,t,i){var n=this._listeners;if(n){if(e)e.off(t,i,this),t||i||delete n[e._listenerId];else{for(var s in n)n[s].off(null,null,this);this._listeners={}}return this}}};d.bind=d.on,d.unbind=d.off,i.extend(t,d);var p=t.Model=function(e,t){var n,s=e||{};this.cid=i.uniqueId("c"),this.changed={},this.attributes={},this._changes=[],t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(s=this.parse(s)),(n=i.result(this,"defaults"))&&i.defaults(s,n),this.set(s,{silent:!0}),this._currentAttributes=i.clone(this.attributes),this._previousAttributes=i.clone(this.attributes),this.initialize.apply(this,arguments)};i.extend(p.prototype,d,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var s,r;if(null==e)return this;i.isObject(e)?(r=e,n=t):(r={})[e]=t;var a=n&&n.silent,o=n&&n.unset;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var l=this.attributes;for(s in r)t=r[s],o?delete l[s]:l[s]=t,this._changes.push(s,t);return this._hasComputed=!1,a||this.change(n),this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};
for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i),e)?(n&&n(t,i,e),void 0):!1},this.sync("read",this,e)},save:function(e,t,n){var s,r,a;if(null==e||i.isObject(e)?(s=e,n=t):null!=e&&((s={})[e]=t),n=n?i.clone(n):{},n.wait){if(s&&!this._validate(s,n))return!1;r=i.clone(this.attributes)}var o=i.extend({},n,{silent:!0});if(s&&!this.set(s,n.wait?o:n))return!1;if(!s&&!this._validate(null,n))return!1;var l=this,u=n.success;n.success=function(e){a=!0;var t=l.parse(e);return n.wait&&(t=i.extend(s||{},t)),l.set(t,n)?(u&&u(l,e,n),void 0):!1};var c=this.isNew()?"create":n.patch?"patch":"update";"patch"==c&&(n.attrs=s);var h=this.sync(c,this,n);return!a&&n.wait&&(this.clear(o),this.set(r,o)),h},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&s(),n&&n(t,i,e)},this.isNew())return e.success(),!1;var r=this.sync("delete",this,e);return e.wait||s(),r},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||P();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){var t=this._changing;this._changing=!0;var n=this._computeChanges(!0);this._pending=!!n.length;for(var s=n.length-2;s>=0;s-=2)this.trigger("change:"+n[s],this,n[s+1],e);if(t)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,e),this._previousAttributes=i.clone(this.attributes);return this._changing=!1,this},hasChanged:function(e){return this._hasComputed||this._computeChanges(),null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,n=!1,s=this._previousAttributes;for(var r in e)i.isEqual(s[r],t=e[r])||((n||(n={}))[r]=t);return n},_computeChanges:function(e){this.changed={};for(var t={},i=[],n=this._currentAttributes,s=this._changes,r=s.length-2;r>=0;r-=2){var a=s[r],o=s[r+1];if(!t[a]&&(t[a]=!0,n[a]!==o)){if(this.changed[a]=o,!e)continue;i.push(a,o),n[a]=o}}return e&&(this._changes=[]),this._hasComputed=!0,i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},_validate:function(e,t){if(!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))};i.extend(m.prototype,d,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){var n,s,r,o,u,c=t&&t.at,h=null==(t&&t.sort)?!0:t.sort;for(e=i.isArray(e)?e.slice():[e],n=e.length-1;n>=0;n--)(r=this._prepareModel(e[n],t))?(e[n]=r,o=null!=r.id&&this._byId.hasOwnProperty(r.id)&&this._byId[r.id],o||this._byCid.hasOwnProperty(r.cid)&&this._byCid[r.cid]?(t&&t.merge&&o&&(o.set(r.attributes,t),u=h),e.splice(n,1)):(r.on("all",this._onModelEvent,this),this._byCid[r.cid]=r,null!=r.id&&(this._byId[r.id]=r))):(this.trigger("error",this,e[n],t),e.splice(n,1));if(e.length&&(u=h),this.length+=e.length,s=[null!=c?c:this.models.length,0],a.apply(s,e),l.apply(this.models,s),u&&this.comparator&&null==c&&this.sort({silent:!0}),t&&t.silent)return this;for(;r=e.shift();)r.trigger("add",r,this,t);return this},remove:function(e,t){var n,s,r,a;for(t||(t={}),e=i.isArray(e)?e.slice():[e],n=0,s=e.length;s>n;n++)a=this.get(e[n]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,i.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,i.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null==e)return void 0;var t=null!=e.id?e.id:e,i=e.cid||e;return this._byId.hasOwnProperty(t)?this._byId[t]:this._byCid.hasOwnProperty(i)?this._byCid[i]:void 0},at:function(e){return this.models[e]},where:function(e){return i.isEmpty(e)?[]:this.filter(function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e&&e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},update:function(e,t){var n,s,r,a,o=[],l=[],u={},c=this.model.prototype.idAttribute;if(t=i.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e)),i.isArray(e)||(e=e?[e]:[]),t.add&&!t.remove)return this.add(e,t);for(s=0,r=e.length;r>s;s++)n=e[s],a=this.get(n.id||n.cid||n[c]),t.remove&&a&&(u[a.cid]=!0),(t.add&&!a||t.merge&&a)&&o.push(n);if(t.remove)for(s=0,r=this.models.length;r>s;s++)n=this.models[s],u[n.cid]||l.push(n);return l.length&&this.remove(l,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e));for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e&&this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){var s=e.update?"update":"reset";t[s](i,e),n&&n(t,i,e)},this.sync("read",this,e)},create:function(e,t){var n=this;if(t=t?i.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||n.add(e,t);var s=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),s&&s(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return i(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];i.each(f,function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var g=["groupBy","countBy","sortBy"];i.each(g,function(e){m.prototype[e]=function(t,n){var s=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,s,n)}});var v=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,y=/:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(v.prototype,d,{initialize:function(){},route:function(e,n,s){return i.isRegExp(e)||(e=this._routeToRegExp(e)),s||(s=this[n]),t.history.route(e,i.bind(function(i){var r=this._extractParameters(e,i);s&&s.apply(this,r),this.trigger.apply(this,["route:"+n].concat(r)),t.history.trigger("route",this,n,r)},this)),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes)for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(_,"(?:$1)?").replace(y,"([^/]+)").replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var x=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,T=/^\/+|\/+$/g,k=/msie [\w.]+/,C=/\/$/;x.started=!1,i.extend(x.prototype,d,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(C,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(x.started)throw new Error("Backbone.history has already been started");x.started=!0,this.options=i.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=k.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(T,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,o=a.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&a.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),x.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!x.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new x;var L=t.View=function(e){this.cid=i.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},D=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];i.extend(L.prototype,d,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},make:function(e,i,n){var s=document.createElement(e);return i&&t.$(s).attr(i),null!=n&&t.$(s).html(n),s},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=i.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),!n)throw new Error('Method "'+e[t]+'" does not exist');var s=t.match(D),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.bind(r,n):this.$el.delegate(a,r,n)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=i.extend({},i.result(this,"options"),e)),i.extend(this,i.pick(e,E)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className")),this.setElement(this.make(i.result(this,"tagName"),e),!1)}}});var S={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.sync=function(e,n,s){var r=S[e];i.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||P()),null!=s.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var l=s.success;s.success=function(e,t,i){l&&l(e,t,i),n.trigger("sync",n,e,s)};var u=s.error;s.error=function(e){u&&u(n,e,s),n.trigger("error",n,e,s)};var c=t.ajax(i.extend(a,s));return n.trigger("request",n,c,s),c},t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var A=function(e,t){var n,s=this;n=e&&i.has(e,"constructor")?e.constructor:function(){s.apply(this,arguments)},i.extend(n,s,t);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,e&&i.extend(n.prototype,e),n.__super__=s.prototype,n};p.extend=m.extend=v.extend=L.extend=x.extend=A;var P=function(){throw new Error('A "url" property or function must be specified')};return t});var Mustache;!function(e){"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof Mindbreeze.define&&Mindbreeze.define.amd?Mindbreeze.define("mustache",[],function(){return e}):Mustache=e}(function(){function e(e,t){return RegExp.prototype.test.call(e,t)}function t(t){return!e(f,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return b[e]})}function s(e){this.string=e,this.tail=e,this.pos=0}function r(e,t){this.view=e,this.parent=t,this.clearCache()}function a(){this.clearCache()}function o(e){for(var t,i=e[3],n=i;(t=e[4])&&t.length;)e=t[t.length-1],n=e[3];return[i,n]}function l(e){function t(e,t,n){if(!i[e]){var s=l(t);i[e]=function(e,t){return s(e,t,n)}}return i[e]}var i={};return function(i,n,s){for(var r,a,l="",u=0,c=e.length;c>u;++u)switch(r=e[u],r[0]){case"#":a=s.slice.apply(s,o(r)),l+=i._section(r[1],n,a,t(u,r[4],s));break;case"^":l+=i._inverted(r[1],n,t(u,r[4],s));break;case">":l+=i._partial(r[1],n);break;case"&":l+=i._name(r[1],n);break;case"name":l+=i._escaped(r[1],n);break;case"text":l+=r[1]}return l}}function u(e){for(var t,i,n=[],s=n,r=[],a=0;a<e.length;++a)switch(t=e[a],t[0]){case"#":case"^":t[4]=[],r.push(t),s.push(t),s=t[4];break;case"/":if(0===r.length)throw new Error("Unopened section: "+t[1]);if(i=r.pop(),i[1]!==t[1])throw new Error("Unclosed section: "+i[1]);s=r.length>0?r[r.length-1][4]:n;break;default:s.push(t)}if(i=r.pop())throw new Error("Unclosed section: "+i[1]);return n}function c(e){for(var t,i,n=[],s=0;s<e.length;++s)t=e[s],i&&"text"===i[0]&&"text"===t[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t));return n}function h(e){if(2!==e.length)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}var d={};d.name="mustache.js",d.version="0.7.1",d.tags=["{{","}}"],d.Scanner=s,d.Context=r,d.Writer=a;var p=/\s*/,m=/\s+/,f=/\S/,g=/\s*=/,v=/\s*\}/,_=/#|\^|\/|>|\{|&|=|!/,y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};d.escape=n,s.prototype.eos=function(){return""===this.tail},s.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},s.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},r.make=function(e){return e instanceof r?e:new r(e)},r.prototype.clearCache=function(){this._cache={}},r.prototype.push=function(e){return new r(e,this)},r.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."===e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){var n=e.split("."),s=0;for(t=i.view;t&&s<n.length;)t=t[n[s++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},a.prototype.clearCache=function(){this._cache={},this._partialCache={}},a.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=d.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},a.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},a.prototype.compileTokens=function(e,t){var i=l(e),n=this;return function(e,s){if(s)if("function"==typeof s)n._loadPartial=s;else for(var a in s)n.compilePartial(a,s[a]);return i(n,r.make(e),t)}},a.prototype.render=function(e,t,i){return this.compile(e)(t,i)},a.prototype._section=function(e,t,i,n){var s=t.lookup(e);switch(typeof s){case"object":if(y(s)){for(var r="",a=0,o=s.length;o>a;++a)r+=n(this,t.push(s[a]));return r}return s?n(this,t.push(s)):"";case"function":var l=this,u=function(e){return l.render(e,t)},c=s.call(t.view,i,u);return null!=c?c:"";default:if(s)return n(this,t)}return""},a.prototype._inverted=function(e,t,i){var n=t.lookup(e);return!n||y(n)&&0===n.length?i(this,t):""},a.prototype._partial=function(e,t){e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e));var i=this._partialCache[e];return i?i(t):""},a.prototype._name=function(e,t){var i=t.lookup(e);return"function"==typeof i&&(i=i.call(t.view)),null==i?"":String(i)},a.prototype._escaped=function(e,t){return d.escape(this._name(e,t))},d.parse=function(e,n){function r(){if(M&&!T)for(;x.length;)w.splice(x.pop(),1);else x=[];M=!1,T=!1}e=e||"",n=n||d.tags;for(var a,o,l,f,y=h(n),b=new s(e),w=[],x=[],M=!1,T=!1;!b.eos();){if(a=b.pos,l=b.scanUntil(y[0]))for(var k=0,C=l.length;C>k;++k)f=l.charAt(k),t(f)?x.push(w.length):T=!0,w.push(["text",f,a,a+1]),a+=1,"\n"===f&&r();if(a=b.pos,!b.scan(y[0]))break;if(M=!0,o=b.scan(_)||"name",b.scan(p),"="===o)l=b.scanUntil(g),b.scan(g),b.scanUntil(y[1]);else if("{"===o){var L=new RegExp("\\s*"+i("}"+n[1]));l=b.scanUntil(L),b.scan(v),b.scanUntil(y[1]),o="&"}else l=b.scanUntil(y[1]);if(!b.scan(y[1]))throw new Error("Unclosed tag at "+b.pos);w.push([o,l,a,b.pos]),("name"===o||"{"===o||"&"===o)&&(T=!0),"="===o&&(n=l.split(m),y=h(n))}return w=c(w),u(w)};var w=new a;return d.clearCache=function(){return w.clearCache()},d.compile=function(e,t){return w.compile(e,t)},d.compilePartial=function(e,t,i){return w.compilePartial(e,t,i)},d.compileTokens=function(e,t){return w.compileTokens(e,t)},d.render=function(e,t,i){return w.render(e,t,i)},d.to_html=function(e,t,i,n){var s=d.render(e,t,i);return"function"!=typeof n?s:(n(s),void 0)},d}()),function(){var e=function(e){var t=function(e){for(var t=["de","sr-latn-cs","nb-no","en-us","hr-hr","sl-si","de-at","nl-nl","bg-bg","cs-cz","de-ch","ja-jp","de-de","hu-hu","de-li","sk-sk","es-es","si-si","it-it","zh-hans-cn","pl-pl","ru-ru","pt-pt","ro-ro","id-id","de-lu","tr-tr","fr-fr","en-gb"],i=t.length-1;i>=0;){if(t[i]===e)return!0;i--}},e=e||"undefined"!=typeof document&&document.documentElement.lang;if(e){if(e=e.toLowerCase(),t(e))return e;if(e.length>2&&(e=e.substring(0,2),t(e)))return e}return"en-us"};Mindbreeze.define("i18n/i18n",["translations/i18n-"+e(),"backbone","underscore","mustache","jquery"],function(t,i,n,s,r){var a=function(e,t){if(!a.strings[e])return a.missing=a.missing||[],n.contains(a.missing,e)||a.missing.push(e),e;var i=a.strings[e];if(!i)return e;if(n.isArray(t)){for(var r=t.length-1;r>=0;r--)i=i.replace(new RegExp("\\{"+r+"\\}"),t[r]);return i}return s.to_html(i,t)};return n.extend(a,i.Events),a.translateIfPrefixed=function(e){return/^i18n\./.test(e)?a(e.substring(5)):e},a._setLocaleAndStrings=function(e,t){this.strings=t,this.locale=e,a.trigger("change:locale",this)},a.setLocale=function(e,t){var i=a.normalizeLocale(e);Mindbreeze.require(["translations/i18n-"+i],function(i){a._setLocaleAndStrings(e,i),a.patchI18nAttributes(),t&&t(a)})},a.normalizeLocale=e,a._setLocaleAndStrings("undefined"!=typeof document&&document.documentElement.lang||"en-US",t),a.loadExtension=function(e){n.forEach(e,function(e,t){n.forEach(e,function(e,i){new RegExp("^"+i).test(a.locale)&&(a.strings[t]=e)})})},a.patchI18nAttributes=function(e){e=e||"body",r(e).find("[data-i18n]").each(function(){var e=this.getAttribute("data-i18n"),t=e.split(";");n.each(t,a.updateTranslation,this)})},a.updateTranslation=function(e){if(e){var t=e.match(/(^\[([^\]]+)\])?(.*)/),i=t&&t[2],n=t&&t[3];"html"==i?r(this).html(a(n)):i?this.setAttribute(i,a(n)):r(this).text(a(n))}},a})}(),Mindbreeze.define("utils/jsonpath_parser",["underscore"],function(e){function t(e){switch(e){case a:return"EOF";case o:return"STRING";case l:return"IDENT";case u:return"INT";case c:return".";case h:return"]";case d:return"[";default:throw new Error("Unkonwn token "+e)}}var i=/^[A-Za-z_$][\/:A-Za-z0-9_$]*/,n=/^\s+/,s=/^\d+/,r=function(t){if(e.isNumber(t))t=JSON.stringify(t);else if(!e.isString(t))throw new Error("Path must be string!");this.str=t,this.pos=0,this.cur=this._nextToken()},a=0,o=1,l=3,u=4,c=".",h="[",d="]";return r.prototype.parsePathElement=function(){var e=null;if(this.cur.kind==l)return e=this.cur.value,this.nextToken(),e;if(this.cur.kind==h){if(this.nextToken(),this.cur.kind!=o&&this.cur.kind!=u)throw new Error("Expected INT or STRING as member of subscript, got: "+t(this.cur.kind));if(e=this.cur.value,this.nextToken(),this.cur.kind!=d)throw new Error("Expected ], got: "+t(this.cur.kind));return this.nextToken(),e}throw new Error("Expected IDENT or [, got: "+t(this.cur.kind))},r.prototype.parse=function(){if(this.cur.kind==o||this.cur.kind==u){if(this.nextToken(),this.cur.kind==a)return[this.lastToken.value];throw new Error("Unexpected token "+t(this.cur.kind))}if(this.cur.kind!=l&&this.cur.kind!=h)throw new Error("Unexpected token "+t(this.cur.kind));var e=[];do{if(this.lastToken&&this.cur.kind==l&&this.lastToken.kind==l)throw new Error(". or [ expected after IDENT token, got:"+t(this.cur.kind));if(this.lastToken=this.cur,e.push(this.parsePathElement()),this.cur.kind==c&&(this.nextToken(),this.cur.kind!=l))throw new Error("IDENT expected after . token, got:"+t(this.cur.kind))}while(this.cur.kind!=a);return e},r.prototype.nextToken=function(){return this.lastToken=this.cur,this.cur=this._nextToken(),this.cur},r.prototype._nextToken=function(){var e=this.str.match(n);if(e&&(this.str=this.str.substring(e[0].length),this.pos+=e[0].length),0==this.str.length)return{kind:a};if(e=this.str.match(s))return this.str=this.str.substring(e[0].length),this.pos+=e[0].length,{kind:u,value:parseInt(e[0])};if(e=this.str.match(i))return this.str=this.str.substring(e[0].length),this.pos+=e[0].length,{kind:l,value:e[0]};var t=this.str.charAt(0);if(this.pos++,t==h||t==d||t==c)return this.str=this.str.substring(1),{kind:t};if('"'==t||"'"==t){for(var r=1,p=!1,m="";r<this.str.length;++r){var f=this.str.charAt(r);if(f==t&&!p)return this.str=this.str.substring(r+1),this.pos+=r,{kind:o,value:m};if("\\"!=f||p)if(p)switch(f){case"b":m+="\b";break;case"f":m+="\f";break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="	";break;case"'":m+="'";break;case'"':m+='"';break;case"\\":m+="\\";break;case"u":var g=r+1;if(this.str.length<g+4)throw new Error("Invalid escape sequence \\"+f);var v=parseInt(this.str.substring(g,4,16));m+=String.fromCharCode(v),r+=4;default:throw new Error("Invalid escape sequence \\"+f)}else m+=f;else p=!0}throw new Error("Unterminated string literal "+this.str)}throw new Error("Unexpected token "+t)},r.parse=function(e){var t=new r(e);return t.parse()},r}),Mindbreeze.define("utils/jsonpath",["utils/jsonpath_parser","underscore"],function(e,t){return{evalParsedPath:function(e,t){if(void 0==t)throw new Error("Unable to evaluate path "+e+" for undefined");for(var i=t,n=0;n<e.length;++n){if(void 0==i||null==i)throw new Error("Unable to get property "+e[n]+" for "+i);i=i[e[n]]}return i},evalPath:function(t,i){var n=e.parse(t);return this.evalParsedPath(n,i)},parsePath:function(i){if(t.isArray(i))return i;if(t.isNumber(i))return[i];if(!t.isString(i))return null;try{return e.parse(i)}catch(n){return null}},stringifyPath:function(e){e=this.parsePath(e);var i="";return t.each(e,function(e){if(t.isString(e)&&e.match(/^[A-Za-z_$][:A-Za-z0-9_$]+$/))i.length&&(i+="."),i+=e;else{if(!t.isString(e)&&!t.isNumber(e))throw new Error("JSONPath.stringify - expected string/number, got: "+e);i+="["+JSON.stringify(e)+"]"}}),i},_applyPropToArray:function(e,i){if(null==e)return e;var n=parseInt(i);if(!t.isArray(e)||!t.isNaN(n))return e[i];var s=0,r=[],a=t.reduce(e,function(e,n){return t.isObject(n)&&(null!=n[i]?(null==e&&(e=[]),e.push(n[i])):t.isString(n.id)&&(s++,n.id==i&&r.push(n))),e},void 0);return null==a&&s==e.length&&r.length>0&&(a=1==r.length?r[0]:r),a},get:function(e,i,n){if(null==e)return e;if(t.isArray(i)||(i=this.parsePath(i)),n=void 0===n?i.length:Math.min(i.length,n),0>n&&(n=i.length+n),0>=n)return e;for(var s=e,r=0;n>r;++r){if(null==s)return s;if((t.isString(s)||t.isNumber(s))&&r==n-1)return s==i[r]?!0:null;if(t.isObject(s)&&t.isNumber(i[r])){var a=t.keys(s),o=a[i[r]];s=s[o]}else s=t.isArray(s)&&!t.isNumber(i[r])?this._applyPropToArray(s,i[r]):s[i[r]]}return s},unset:function(e,i){if(null==e)return!1;if(t.isArray(i)||(i=this.parsePath(i)),!i||0==i.length)return!1;var n=this.get(e,i,-1),s=i[i.length-1];if(t.isArray(n)&&t.isString(s)){var r=parseInt(s);isNaN(r)||(s=r)}if(!n)return!0;if(t.isArray(n)&&!t.isNumber(s)){var a=!1;return t.each(n,function(e){e&&void 0!=e[s]&&(delete e[s],a=!0)}),a}if(t.isArray(n))n.splice(s,1);else if(void 0!=n[s])return delete n[s],!0;return!1},clonePath:function(e,i){t.isArray(i)||(i=this.parsePath(i));var n=[];n.push(t.clone(e));for(var s=e,r=0;r<i.length;r++){var a=i[r];if(s=this.get(s,[a]),!t.isArray(s)&&!t.isObject(s))break;n.push(t.clone(s))}for(var r=n.length-1;r>0;r--){var o=r-1;this.set(n[o],i[o],n[r])}return n[0]},set:function(e,i,n){if(null==e)return!1;if(t.isArray(i)||(i=this.parsePath(i)),!i||0==i.length)return!1;for(var s=e,r=0;r<i.length-1;++r){var a,o=i[r];a=t.isArray(s)&&!t.isNumber(o)?t.map(s,function(e){return e?e[o]:e}):s[o],(null==a||!t.isArray(a)&&!t.isObject(a))&&(a=t.isNumber(i[r+1])?[]:{},s[o]=a),s=s[o]}var l=i[i.length-1];if(t.isArray(s)&&!t.isNumber(l)){var u=parseInt(l);t.isNaN(u)?t.each(s,function(e){return e?e[l]=n:void 0}):s[u]=n}else s[l]=n;return!0},add:function(e,i,n){if(null==e)return!1;if(t.isArray(i)||(i=this.parsePath(i)),!i||0==i.length)return!1;for(var s=e,r=0;r<i.length;++r){var a,o=i[r];a=t.isArray(s)&&!t.isNumber(o)?t.map(s,function(e){return e?e[o]:e}):s[o],(null==a||!t.isArray(a)&&!t.isObject(a))&&(a=r==i.length-1||t.isNumber(i[r+1])?[]:{},s[o]=a),s=s[o]}if(!t.isArray(s))return!1;for(var l=JSON.stringify(n),u=s.length-1;u>=0;--u)if(JSON.stringify(s[u])==l)return!1;return s.push(n),!0},startsWith:function(e,i){if(!t.isArray(e)||!t.isArray(i))return!1;if(i.length>e)return!1;for(var n=i.length-1;n>=0;n--)if(e[n]!==i[n])return!1;return!0}}}),Mindbreeze.define("libs/apm/softwaretelemetry",[],function(){var e="undefined"==typeof true||true;return"undefined"!=typeof window&&e?(/**
@license Copyright (c) Fabasoft R&D GmbH, A-4020 Linz, 1988-2017.

Version: 17.2.7

All rights reserved. All hardware and software names used are registered
trade names and/or registered trademarks of the respective manufacturers.

The user of this computer program acknowledges that the above copyright
notice, which constitutes the Universal Copyright Convention, will be
attached at the position in the function of the computer program which the
author has deemed to sufficiently express the reservation of copyright.
It is prohibited for customers, users and/or third parties to remove,
modify or move this copyright notice.
*/
function(e,t){function i(e,t,i,n,s,r){var a=[L,N(),g.logicalclock++,e,t,i,n,s];if(r&&r.length>0)for(var o in r)r.hasOwnProperty(o)&&a.push(r[o]);return a}function n(e,t){this.id=e,this.name=t,this.events={},this.RegisterEvent=function(e,t,i){this.events[+e]=[+e,t,i],g.register=!0},this._serialize=function(){var e=[this.id,this.name];return g.registration.blacklistmodules||e.push(_.arrayFromObject(this.events)),e},this.Event=function(e,t,n,s){if(v.active){n=isNaN(n)?50:n;var r=g.context["id"+e];if("number"==typeof e&&(null==r&&0===n||r>=n)){s=isNaN(s)?0:s;var a=null;if(arguments.length>4){a=[];for(var o,l=0,u=4;u<arguments.length;u++)if(o=arguments[u],null!=o&&"undefined"!=typeof o){for(var c=0;l>c;c++)a.push("");if(l=0,"object"==typeof o){try{o="unsupported data type 'object': "+JSON.stringify(o)}catch(h){o="unsupported data type 'object'"}o.length>200&&(o=o.substr(0,197)+"..."),s|=f.FLAG_WARNING}else"number"==typeof o&&(_.isInt(o)||(o="unsupported data type 'float': "+o,s|=f.FLAG_WARNING));a.push(o)}else l++}g._add(i(e,this.id,+t,n,s,a))}}}}function s(e,t,i){return[e,N(),g.logicalclock++,t,i]}function r(e,t,i){var n=[D,N(),g.logicalclock++,e,t];return i&&i.length&&n.push(i),n}function a(e){return[E,N(),g.logicalclock++,e]}function o(e,t,i,n,s){var r=[P,N(),g.logicalclock++,e,t,i,n];return s&&r.push(s),r}function l(e,t,i,n){return[O,N(),g.logicalclock++,e,t,i,n]}function u(e){for(var t="",i=0;16>i;i++)t+=15===i&&"number"==typeof e?String.fromCharCode(e):String.fromCharCode(Math.floor(256*Math.random()));return t}function c(e){for(var t,i,n,s,r,a,o,l="",u=0;u<e.length;)t=e.charCodeAt(u++),i=e.charCodeAt(u++),n=e.charCodeAt(u++),s=t>>2,r=(3&t)<<4|i>>4,isNaN(i)?a=o=64:(a=(15&i)<<2|n>>6,o=isNaN(n)?64:63&n),l+=T.charAt(s)+T.charAt(r)+T.charAt(a)+T.charAt(o);return l}function h(e){var t,i,n,s,r,a,o,l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)s=T.indexOf(e.charAt(u++)),r=T.indexOf(e.charAt(u++)),a=T.indexOf(e.charAt(u++)),o=T.indexOf(e.charAt(u++)),t=s<<2|r>>4,i=(15&r)<<4|a>>2,n=(3&a)<<6|o,l+=String.fromCharCode(t),64!==a&&(l+=String.fromCharCode(i)),64!==o&&(l+=String.fromCharCode(n));return l}function d(e){return c(u(e))}function p(e,i){var n,s,r;s="jsonp_callback_"+g.jsonpid++,f.cache[s]=function(){delete f.cache[s],n.parentNode&&n.parentNode.removeChild(n),n=null,i.apply(this,arguments)},r="window."+I+".cache."+s,n=t.createElement("script"),n.type="text/javascript",n.async=!0,n.src=_.buildURL(e+"&callback="+encodeURIComponent(r)),t.body.appendChild(n)}function m(e){var i,n=null,s=null,r=t.getElementsByTagName("head")[0],a="";if(e&&e.assets)for(g.dlgCfg&&g.dlgCfg.version&&(a="&v="+encodeURIComponent(g.dlgCfg.version)),i=0;i<e.assets.length;++i){switch(e.assets[i].type){case"js":n=t.createElement("script"),n.async=!0,n.type="text/javascript",s="src";break;case"css":n=t.createElement("link"),n.async=!0,n.rel="stylesheet",s="href"}if(n){try{n.setAttribute("data-target-api",I)}catch(o){}n[s]=_.buildURL("?RESOURCE&file="+encodeURIComponent(e.assets[i].name)+a),r.appendChild(n),n=null}}}var f,g,v,_,y,b=3,w=function(){},x="_apm:telemetryStatus",M="_apm:guid",T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=5,C=6,L=7,D=8,E=9,S=15,A=16,P=18,O=19,N=Date.now?Date.now:function(){return(new Date).getTime()},I=function(){for(var t=N();"apm"+t in e;)t++;return"apm"+t}();v={url:"web.telemetry",flushinterval:6e4,flushtimeout:4e3,eventsperflush:1e4,reregistermodulestimeout:0,reregistertimeout:6e5,active:!0,exceptioncallback:null,includeNavigationTiming:!1,createContextFromNavigationTiming:!0,report:{enabled:!0,dialogtitle:"Application Feedback",dialogpoweredby:"powered by",dialogtext:"Let us know your feedback:",dialogtextminlength:0,dialogtextmaxlength:1e3,dialogtexttooshort:"The feedback you entered is too short.",dialogsubmittext:"Send",dialogcanceltooltip:"Cancel",closeonescape:!0,reportingunavailable:"The feedback functionality is currently unavailable.",imagepath:null,onopen:null,onsubmit:null,oncancel:null,onclose:null,onavailable:null,dialognode:null,highcontrast:null,screenshot:{enabled:!0,label:"Include Screenshot",previewlabel:"Preview"},softwareinfo:{enabled:!0,label:"Include Software Repository/Registry",previewlabel:"Preview"},displaymetadata:!0,metadatatitle:"Your feedback will include the following information:",filestitle:"You can attach the following files to your feedback:",data:{contextid:null,filter:null,key:null,description:""},pluginactive:!1,plugin:null}},g={procid:null,logicalclock:0,events:null,context:{},contextid:1,connected:!1,registration:{appname:void 0,appid:void 0,apptiername:void 0,apptierid:void 0,modules:{},filters:{},modulecount:0,timestamp:0,blacklistmodules:!1},register:!1,sendregistration:!0,sessions:null,loglevel:0,guid:null,jsonpid:1,hasform:!1,dlgApi:null,dlgCfg:!1,flushintervalhandle:0,flushtimeouthandle:0,reregistertimeouthandle:0,initialized:!1,firstrequest:!0,flushing:!1,fbavailable:function(e){g.dlgApi=e;try{v.report.onavailable&&v.report.onavailable()}catch(t){_.error(t,"report.onavailable callback failed")}},processWebAPIResponse:function(e){this.sessions=e.sessions,"number"==typeof e.loglevel&&(this.loglevel=e.loglevel),this.guid=e.GUID,this.hasform=e.hasform},flush:function(t,i){if(!g.flushing||t){g.flushing=!0;try{if(0!==g.flushtimeouthandle&&(e.clearTimeout(g.flushtimeouthandle),g.flushtimeouthandle=0),!v.active)return;var n=new Date,s=n.getUTCFullYear()+"-"+(n.getUTCMonth()+1)+"-"+n.getUTCDate()+"T"+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds()+"."+n.getUTCMilliseconds(),r=[f.version,n.getTime(),1e3,s,g.guid],a=[g.procid,g.registration.appname,g.registration.appid,g.registration.apptiername,g.registration.apptierid];if(g.register||g.sendregistration||n-g.registration.timestamp>v.reregistermodulestimeout){g.registration.blacklistmodules=!1,!g.register&&!g.sendregistration&&n-g.registration.timestamp<v.reregistertimeout&&(g.registration.blacklistmodules=!0),a.push(g.registration.filters);var o=[];a.push(o);for(var l in g.registration.modules)g.registration.modules.hasOwnProperty(l)&&o.push(g.registration.modules[l]._serialize());g.sendregistration=!1,g.register=!1,g.registration.timestamp=n}var u=[r,a];if(g.events){var c=g.events.splice(0,t?g.events.length:v.eventsperflush);g.events.length>0&&_.setupTimeout(),c&&c.length&&u.push(c)}g.transport.send(v.url,JSON.stringify({apm:u}),function(e){try{if(g.connected=!0,e.responseText){var t=JSON.parse(e.responseText);_.PersistTelemetryStatus(g.registration,t),g.processWebAPIResponse(t),_.StoreGUID(t.GUID),!0!==v.report.enabled||!0!==g.hasform&&!1!==g.hasform||!1!==g.dlgCfg||(g.dlgCfg=null,p("?RESOURCE&file=apmdialog.json",function(e){g.dlgCfg=e,m(e)})),0===t.logpool&&(g.connected=!1)}}catch(i){g.connected=!1,_.error(i,"cache.flush(): transport.send failed: "+i.name+": "+i.message)}},function(e){g.connected=!1;try{_.error(null,"cache.flush(): transport.send: status="+e.status+"; statusText='"+e.statusText+"'")}catch(t){_.error(null,"cache.flush(): transport.send: status!=200, Exception: "+t.name+": '"+t.message+"'")}},!0,i),g._reregistertimeout()}catch(h){g.connected=!1,_.error(h,"cache.flush() failed: "+h.name+": "+h.message)}g.flushing=!1}},_reregistertimeout:function(){0===g.reregistertimeouthandle&&(g.reregistertimeouthandle=e.setInterval(function(){g.sendregistration=!0},v.reregistertimeout))},_add:function(e){v.active&&(g.events||(g.events=[]),g.events.push(e))},_init:function(){g.initialized||(e.addEventListener?e.addEventListener("unload",_.flushAllEvents,!1):e.attachEvent&&e.attachEvent("onunload",_.flushAllEvents),g.initialized=!0,_.setupInterval(),_.RestoreGUID())}};var Y,F;f={version:"17.2.7",LEVEL_LOG:0,LEVEL_NORMAL:50,LEVEL_DETAIL:60,LEVEL_DEBUG:70,FLAG_NONE:0,FLAG_ENTER:1,FLAG_LEAVE:2,FLAG_WAIT:4,FLAG_WARNING:8,FLAG_ERROR:16,FLAG_PROCESS_INFO:32,EVENT_ERROR:268439552,EVENT_WARNING:268439553,EVENT_INFO:268439554,EVENT_TRACE:268439555,env:v,cache:{$jq:null,fbavailable:function(){return g.fbavailable.apply(g,arguments)}},NoConflict:function(){return e.apm===f&&(e.apm=f._apm),f},SetTransport:function(e){var t=g.transport;return g.transport=e?e:y,g.sendregistration=!0,t},RegisterApplication:function(e,t,i,n){g._init(),g.procid||(g.procid=d()),g.registration.appname=e,g.registration.appid=t,g.registration.apptiername=i,g.registration.apptierid=n,g.register=!0,_.RestoreTelemetryStatus(g.registration)},RegisterModule:function(e){var t=g.registration.modules[e];if(!t){var i=g.registration.modulecount++;t=new n(i,e),g.registration.modules[e]=t,g.register=!0}return t},RegisterFilterValue:function(e,t){g.registration.filters[e]=t,g.register=!0},CreateContext:function(t,i){if(!v.active)return null;_.setupTimeout();var n=g.sessions,a=g.loglevel;(null==t||null==g.context["id"+t])&&(t=++g.contextid,g.context["id"+t]=a);var o=[];if(null!=n)for(var l=0;l<n.length;l++){var u=n[l];if(null!=u&&"object"==typeof u&&"number"==typeof u.id&&"number"==typeof u.level)if("object"==typeof u.filters&&u.filters.length>0)for(var c=0;c<u.filters.length;c++){var h=u.filters[c];if(0===h.length||i.toLowerCase()===h.toLowerCase()){o.push(u.id),u.level>a&&(a=u.level);break}}else o.push(u.id),u.level>a&&(a=u.level)}if(g.context["id"+t]<a&&(g.context["id"+t]=a),v.createContextFromNavigationTiming&&g.firstrequest&&(g.firstrequest=!1,e.performance&&e.performance.timing&&e.performance.timing.navigationStart)){var d=e.performance.timing,p=r(t,"");p[1]=d.navigationStart,g._add(p),_.TraceNavigationTiming(t)}return g._add(r(t,i,o)),v.includeNavigationTiming&&Y&&g._add(s(k,t,Y)),Y=null,t},GetContext:function(e){if(!v.active)return null;_.setupTimeout();var t=null;return null!=g.context["id"+e]&&(t=d(g.context["id"+e]),g._add(s(k,e,t))),t},AttachContext:function(e,t){if(!v.active)return e;_.setupTimeout(),(null==e||null==g.context["id"+e])&&(e=++g.contextid);var i=f.LEVEL_NORMAL;if(null!=t){var n=_.Decode64(t);i=n.charCodeAt(15)}return(null==g.context["id"+e]||g.context["id"+e]<i)&&(g.context["id"+e]=i),g._add(s(C,e,t)),e},ReleaseContext:function(e){v.active&&(_.setupTimeout(),null!=g.context["id"+e]&&(g._add(a(e)),delete g.context["id"+e]),g.connectioncontextid==e&&(g.connectioncontextid=null))},GetSyncMark:function(e){if(!v.active)return null;var t=null;return null!=g.context["id"+e]&&(t=d(),g._add(s(S,e,t))),t},SetSyncMark:function(e,t){v.active&&null!=g.context["id"+e]&&g._add(s(A,e,t))},Report:function(e,t,i,n){v.active&&g._add(o(e,t,i,n,arguments[4]))},ReportValue:function(e,t,i,n){v.active&&g._add(l(e,t,i,n))},ReportContent:function(e,t,i,n,s){if(v.active){var r="?ReportContent";null!==g.procid&&(r+="&procid="+encodeURIComponent(g.procid)),r+="&reportkey="+encodeURIComponent(e),r+="&filename="+encodeURIComponent(t);var a=n?n:"plaintext";r+="&encoding="+encodeURIComponent(a);var o=s?s:"text/plain";r+="&mimetype="+encodeURIComponent(o),g.transport.send(_.buildURL(r),i,w,w,!0)}},ReportDialog:function(e,t,i,n,s,r,a){var o=v.report,l=_.get$();if(v.active){if(!(f.IsConnected()&&l&&l.fn.apmfeedbackdialog&&g.dlgApi))return alert(v.report.reportingunavailable),void 0;null==e&&(e=f.CreateContext(null,t));var u=f.GetAPMModule();u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_NONE,"Prepare app.telemetry feedback dialog"),o.data.contextid=e,o.data.filter=t,o.data.key=i||d(),o.data.description=n,o.pluginactive=!1,o.plugin=null;try{f._detectFscPlugin(),o.plugin=FscPluginGet(),null!==o.plugin&&(o.pluginactive=!0)}catch(c){}var h=o.plugin;if(o.pluginactive){if(o.screenshot.enabled)try{h&&h.GetScreenshot&&"function"==typeof h.GetScreenshot&&(u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_ENTER,"app.telemetry feedback dialog calls plugin.GetScreenshot()"),o.data.screenshot=h.GetScreenshot(),u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_LEAVE,"app.telemetry feedback dialog calls plugin.GetScreenshot() done"))}catch(p){o.data.screenshot=null}if(o.softwareinfo.enabled)try{h&&h.GetSystemInformation&&"function"==typeof h.GetSystemInformation&&(u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_ENTER,"app.telemetry feedback dialog calls plugin.GetSystemInformation()"),o.data.softwareinfo=h.GetSystemInformation(),u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_LEAVE,"app.telemetry feedback dialog calls plugin.GetSystemInformation() done"))}catch(m){o.data.softwareinfo=null}}return r&&(o.data.metadata=r),u.Event(e,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_ENTER,"Create app.telemetry feedback dialog"),_.createReportDialog(s,a),o.data.key}},HasActiveContext:function(e,t){if(!v.active)return!1;var i=g.context["id"+e];return null!=i?i>=t:0===t},IsConnected:function(){return v.active&&g.connected},SetConnectionContext:function(){},GetConnectionContext:function(){return null},SendXMLHttpRequest:function(e,t,i,n,s){var r,a,o=s;if(v.active&&t&&(r=this.GetContext(s),o=this.AttachContext(null,r)),a=f.GetXMLHTTPModule(),(v.active||"function"==typeof n)&&(e.onreadystatechange=function(){if(v.active)if(4!==e.readyState){if(a.Event(o,e.readyState,f.LEVEL_DEBUG,f.FLAG_NONE),"function"==typeof n){a.Event(o,10,f.LEVEL_DEBUG,f.FLAG_ENTER);try{n(e,o)}catch(i){var s="apm.SendXMLHttpRequest user callback failed: "+i.name+": "+i.message;_.error(i,s),a.Event(o,f.EVENT_ERROR,f.LEVEL_DEBUG,f.FLAG_NONE,s)}a.Event(o,11,f.LEVEL_DEBUG,f.FLAG_LEAVE)}}else{var r=e.getResponseHeader("x-apm-telemetry-syncmark");r&&f.SetSyncMark(o,r);try{a.Event(o,e.readyState,f.LEVEL_NORMAL,f.FLAG_LEAVE+f.FLAG_WAIT,e.status,e.statusText)}catch(l){}if("function"==typeof n){a.Event(o,10,f.LEVEL_NORMAL,f.FLAG_ENTER);try{n(e,o)}catch(u){var c="apm.SendXMLHttpRequest user callback failed: "+u.name+": "+u.message;_.error(u,c),a.Event(o,f.EVENT_ERROR,f.LEVEL_NORMAL,f.FLAG_NONE,c)}a.Event(o,11,f.LEVEL_NORMAL,f.FLAG_LEAVE)}t&&f.ReleaseContext(o)}else"function"==typeof n&&n(e,o);4===e.readyState&&(e.onreadystatechange=w,t&&(e.abort(),e=null))}),v.active&&(a.Event(o,0,f.LEVEL_NORMAL,f.FLAG_ENTER+f.FLAG_WAIT),r=f.GetContext(o),r&&e.setRequestHeader("x-apm-telemetry-context",r)),e.send(i),v.active&&!t)try{a.Event(o,4,f.LEVEL_NORMAL,f.FLAG_LEAVE+f.FLAG_WAIT,e.status,e.statusText)}catch(l){var u="apm.SendXMLHttpRequest failed: "+l.name+": "+l.message;_.error(l,u),a.Event(o,f.EVENT_ERROR,f.LEVEL_NORMAL,f.FLAG_NONE,u)}},GetXMLHTTPModule:function(){return g.xmlhttpmodule||(g.xmlhttpmodule=this.RegisterModule("XMLHttpRequest")),g.xmlhttpmodule},GetAPMModule:function(){return g.apimodule||(g.apimodule=this.RegisterModule("app.telemetry API")),g.apimodule},Flush:function(e,t){g.flush(e,t)},SetInterval:function(e){v.flushinterval=e,_.setupInterval()},SetTimeout:function(e){v.flushtimeout=e,_.setupTimeout()},_detectFscPlugin:function(){var e=_.get$();e&&e.apmdetectFscPlugin&&e.apmdetectFscPlugin()},utils:{_base64Key:T,_resourceTypes:["other","link","css","script","image","object","subdocument","xmlhttprequest","embed","audio","video","svg"],buildURL:function(e){var t=v.url;return t+=-1===t.indexOf("?")?e:encodeURIComponent(e)},TraceResourceTiming:function(e,t,n){function r(e){if(e[2]>0){var t=i(y,h,e[0],d,e[1]);t[1]=e[2],1e3===e[0]&&t.push(o,0,"",l),g._add(t)}}var o,l,u,c=f.RegisterModule("RT"),h=c.id,d=0,p=0,m=1,v=2,y=++g.contextid,b=n,w=0;if(t.duration?w=t.duration:void 0!==t.responseEnd&&void 0!==t.resourceStart&&(w=t.responseEnd-t.resourceStart),!(0>=w||w>36e5)){t.startTime?(b=n+Math.floor(t.startTime),o=t.initiatorType||t.entryType||"unknown",l=t.name||"",u=[[1,p,b],[2,m,t.redirectStart?n+Math.floor(t.redirectStart):0],[3,v,t.redirectEnd?n+Math.floor(t.redirectEnd):0],[4,p,t.fetchStart?n+Math.floor(t.fetchStart):0],[5,m,t.domainLookupStart?n+Math.floor(t.domainLookupStart):0],[6,v,t.domainLookupEnd?n+Math.floor(t.domainLookupEnd):0],[7,m,t.connectStart?n+Math.floor(t.connectStart):0],[8,v,t.connectEnd?n+Math.floor(t.connectEnd):0],[9,p,t.secureConnectionStart?n+Math.floor(t.secureConnectionStart):0],[10,m,t.requestStart?n+Math.floor(t.requestStart):0],[11,p,t.responseStart?n+Math.floor(t.responseStart):0],[12,v,t.responseEnd?n+Math.floor(t.responseEnd):0],[1e3,p,b]]):(b=t.resourceStart,o=_._resourceTypes[t.type]||"unknown",l=t.url||"",u=[[1,p,t.resourceStart],[2,m,t.redirectStart],[3,v,t.redirectEnd],[4,p,t.fetchStart],[5,m,t.domainLookupStart],[6,v,t.domainLookupEnd],[7,m,t.connectStart],[8,v,t.connectEnd],[9,p,t.secureConnectionStart],[10,m,t.requestStart],[11,p,t.responseStart],[12,v,t.responseEnd],[1e3,p,t.resourceStart]]),u.sort(function(e,t){var i=(e[2]>0?e[2]:0)-(t[2]>0?t[2]:0);return 0===i&&(i=e[0]-t[0]),i});var x=s(C,y,e);x[1]=b,g._add(x);for(var M=b,T=0;T<u.length;T++){var k=u[T];k[2]>M&&(M=k[2]),r(k)}x=a(y),x[1]=M,g._add(x)}},TraceNavigationTiming:function(t){function n(e){if(e[2]>0){var n=i(t,l,e[0],c,e[1]);n[1]=e[2],g._add(n)}}var r,a,o=f.RegisterModule("WT"),l=o.id,u=e.performance.timing,c=0,h=0,p=1,m=2,v=0;if(void 0!==u.loadEventEnd&&void 0!==u.navigationStart&&(v=u.loadEventEnd-u.navigationStart),!(0>=v||v>36e5)){var y=[[1,h,u.navigationStart],[2,h,u.unloadEventStart],[3,h,u.unloadEventEnd],[4,h,u.redirectStart],[5,h,u.redirectEnd],[6,h,u.fetchStart],[7,p,u.domainLookupStart],[8,m,u.domainLookupEnd],[9,p,u.connectStart],[10,m,u.connectEnd],[11,h,u.secureConnectionStart],[12,p,u.requestStart],[13,h,u.responseStart],[14,m,u.responseEnd],[15,p,u.domLoading],[16,h,u.domInteractive],[17,p,u.domContentLoadedEventStart],[18,m,u.domContentLoadedEventEnd],[19,m,u.domComplete],[20,p,u.loadEventStart],[21,m,u.loadEventEnd]];if("function"==typeof e.performance.getResourceTimings?r=e.performance.getResourceTimings():"function"==typeof e.performance.getEntriesByType?r=e.performance.getEntriesByType("resource"):"function"==typeof e.performance.webkitGetEntriesByType&&(r=e.performance.webkitGetEntriesByType("resource")),r&&r.length){var b=d(f.LEVEL_LOG),w=s(k,t,b);for(w[1]=u.navigationStart,g._add(w),a=0;a<r.length;a++)_.TraceResourceTiming(b,r[a],u.navigationStart)}for(y.sort(function(e,t){var i=(e[2]>0?e[2]:0)-(t[2]>0?t[2]:0);return 0===i&&(i=e[0]-t[0]),i}),a=0;a<y.length;a++)n(y[a])}},isInt:function(e){return 0===e%1&&9007199254740991>=e},CreateContextToken:u,RestoreGUID:function(){var i=null;try{e.localStorage&&(i=e.localStorage.getItem(M))}catch(n){_.warn("failed to access the localStorage")}!i&&t.cookie&&(i=(""+t.cookie).match(/^(?:|.*\s)apmguid=([A-Za-z0-9]{32})(?:;\s.*|)$/),i&&(i=i[1])),i&&(g.guid=i)},StoreGUID:function(i){var n=!1;try{e.localStorage&&(e.localStorage.setItem(M,i),n=!0)}catch(s){_.warn("cache.flush(): storing the apmguid in the localStorage failed")}n||(t.cookie="apmguid="+i+"; Path=/"+("https:"===location.protocol?"; Secure":""))},ComputeTelemetryStatusKey:function(e){var t=[];return t.push(x),t.push(encodeURIComponent(e.appname)),t.push(encodeURIComponent(e.appid)),t.push(encodeURIComponent(e.apptiername)),t.push(encodeURIComponent(e.apptierid)),t.join("#")},PersistTelemetryStatus:function(t,i){var n=this.ComputeTelemetryStatusKey(t);try{e.localStorage.setItem(n,JSON.stringify({ts:N(),data:i}))}catch(s){this.error(s,"utils.PersistTelemetryStatus(): caching telemetry status failed")}},RestoreTelemetryStatus:function(t){var i=this.ComputeTelemetryStatusKey(t);try{var n=e.localStorage.getItem(i);null!==n&&(n=JSON.parse(n),g.processWebAPIResponse(n.data))}catch(s){this.error(s,"utils.RestoreTelemetryStatus(): restoring the cached telemetry status failed")}try{this.CleanupTelemetryStatus()}catch(r){this.error(r,"utils.RestoreTelemetryStatus(): CleanupTelemetryStatus() failed")}},CleanupTelemetryStatus:function(){for(var t=N()-1e3*86400*b,i=0;i<e.localStorage.length;++i){var n=e.localStorage.key(i);if(x===n.substring(0,x.length)){var s=!1;try{var r=JSON.parse(e.localStorage.getItem(n));s=r.ts>t}catch(a){this.warn("utils.CleanupTelemetryStatus(): "+n+" failed to be inspected, will be removed.")}s||e.localStorage.removeItem(n)}}},Encode64:c,Decode64:h,getXHR:function(){return e.XMLHttpRequest?new XMLHttpRequest:e.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},createReportDialog:function(e,t){g.dlgApi.createDialog(v.url,v.report,t,e,g.dlgConfig,{cancelReportDialog:_.cancelReportDialog,submitReportDialog:_.submitReportDialog,apm:f,hasform:g.hasform||t&&t.formid,reg:g.registration,loadJSONP:p})},cancelReportDialog:function(e,t){var i,n,s=v.report,r=_.get$();return i=r.extend(!0,{},s.data),n=i.metadata=i.metadata||{},n.infos=t.infos,n.files=t.files,n.fields=t.fields,i.description=t.description,"function"==typeof s.oncancel&&!1===s.oncancel(i)?!1:(_.removeReportDialog(),!0)},get$:function(){var t=f.cache.$jq||e.jQuery||e.$||null;return t},removeReportDialog:function(){var e=v.report,t=e.data,i=e.plugin;if(t.screenshot=null,t.softwareinfo=null,t.metadata=null,e.pluginactive&&i&&"function"==typeof i.ClearTempFiles)try{i.ClearTempFiles()}catch(n){}},submitReportDialog:function(e,t){var i,n,s,r,a,o,l=v.report,u=_.get$();if(i=u.extend(!0,{},l.data),i.description=t.description,s=t,s=i.metadata=i.metadata||{},s.infos=t.infos,s.files=t.files,s.fields=t.fields,"function"==typeof l.onsubmit&&!1===l.onsubmit(i))return!1;for(n=f.GetAPMModule(),r=i.contextid=f.CreateContext(null,i.filter),n.Event(r,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_ENTER,"Sending app.telemetry feedback dialog content"),f.Report(i.contextid,i.filter,i.key,i.description,t.formid),o=0;o<s.infos.length;o++)s.infos[o]&&s.infos[o].name&&s.infos[o].value&&(f.ReportValue(i.contextid,i.key,s.infos[o].name,s.infos[o].value),n.Event(r,f.EVENT_INFO,f.LEVEL_DETAIL,f.FLAG_NONE,"add ReportValue for report-key='"+i.key+"' with name='"+s.infos[o].name+"'"));for(o=0;o<s.fields.length;o++)s.fields[o]&&(s.fields[o].id||s.fields[o].name)&&s.fields[o].value&&(f.ReportValue(i.contextid,i.key,s.fields[o].id||s.fields[o].name,s.fields[o].value),n.Event(r,f.EVENT_INFO,f.LEVEL_DETAIL,f.FLAG_NONE,"add ReportValue for report-key='"+i.key+"' with name='"+s.fields[o].name+"'"));for(g.flush(!0),o=0;o<s.files.length;o++)s.files[o]&&s.files[o].filename&&"function"==typeof s.files[o].getContent&&s.files[o].checked&&(a=s.files[o].getContent(s.files[o].filename,s.files[o])||s.files[o].content,s.files[o].mimeType||(s.files[o].mimeType="text/plain"),a&&(f.ReportContent(i.key,s.files[o].filename,a,"base64",s.files[o].mimeType),n.Event(r,f.EVENT_INFO,f.LEVEL_DETAIL,f.FLAG_NONE,"add ReportContent for report-key='"+i.key+"' with filename='"+s.files[o].filename+"' and size="+a.length)));return n.Event(r,f.EVENT_INFO,f.LEVEL_NORMAL,f.FLAG_LEAVE,"Sending app.telemetry feedback dialog content done"),f.ReleaseContext(r),v.report.data.contextid=null,_.removeReportDialog(),!0},setupInterval:function(){g.initialized&&(0!==g.flushintervalhandle&&e.clearInterval(g.flushintervalhandle),g.flushintervalhandle=e.setInterval(g.flush,v.flushinterval))},setupTimeout:function(){g.initialized&&0===g.flushtimeouthandle&&(g.flushtimeouthandle=e.setTimeout(g.flush,v.flushtimeout))},arrayFromObject:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},error:function(e,t){"function"==typeof v.exceptioncallback?v.exceptioncallback(e,t):"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)},warn:function(e){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e)},flushAllEvents:function(){g.flush(!0,!0)}}},_=f.utils,y=g.transport={send:function(e,t,i,n,s,r){var a=!1;if(r&&navigator.sendBeacon&&(a=navigator.sendBeacon(e,t),a&&i({status:200,statusText:"OK (beacon)"})),!a){var o=_.getXHR();if(o){o.open("POST",e,!r),o.onreadystatechange=function(){var e;if(4===o.readyState){try{e={status:o.status,statusText:o.statusText||"Request failed"},200===o.status?(e.responseText=o.responseText,i(e)):n(e)}catch(t){}o.onreadystatechange=w,o.abort(),o=null}};try{o.setRequestHeader("Content-Type","application/json; charset=utf-8")}catch(l){_.warn("could not set request Content-Type header for telemetry data request")}o.send(t)}}}},e.performance&&e.performance.timing&&e.addEventListener&&(F=Y=d(f.LEVEL_LOG),e.addEventListener("load",function(){e.setTimeout(function(){var t,i,n=e.performance.timing;v.active&&v.includeNavigationTiming&&F&&(i=++g.contextid,t=s(C,i,F),_.TraceNavigationTiming(i),t=a(i),t[1]=n.loadEventEnd,g._add(t),F=null)},100)},!1)),f._apm=e.apm,e.apm=f,e[I]=f}(this,document),apm.NoConflict(!0)):{env:{active:!1},RegisterApplication:function(){},RegisterModule:function(){return{RegisterEvent:function(){}}},GetContext:function(){},CreateContext:function(){return 1},ReleaseContext:function(){},Flush:function(){},AttachContext:function(){}}}),Mindbreeze.define("utils/browser",["underscore"],function(e){function t(e,t){e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function i(t){var i={},n=t.split("?")[1]&&t.split("?")[1].replace(/\+/g," ").split("&");return e.each(n,function(e){var t,n,s=e.split("=");if(t=s[0],s.length>1)try{n=decodeURIComponent(s[1]),i[t]=n}catch(r){}}),i}function n(){var e=e,t=!!window.opr&&e&&!!e.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,i="undefined"!=typeof InstallTrigger,n=n||!1,s=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||n&&n.pushNotification),r=!1||!!document.documentMode,a=!r&&!!window.StyleMedia,o=!!window.chrome&&!!window.chrome.webstore,l=(o||t)&&!!window.CSS;return t?"Opera":i?"Firefox":s?"Safari":r?"IE":a?"Edge":o?"Chrome":l?"Blink":null}var s,r=function(){s={};try{var t=location.search.substring(1).replace(/\+/g," ").split("&");e.each(t,function(e){var t,i,n=e.split("=");if(t=n[0],n.length>1)try{i=decodeURIComponent(n[1]),s[t]=i}catch(r){}})}catch(i){}},a={getURLParameter:function(e,t){return this.getURLParameters(t)[e]},getURLParameters:function(e){return(e||"undefined"==typeof s)&&r(),s},getURLParameterByString:function(e,i){return t(e,i)},getURLParametersByString:function(e){return i(e)},getURL:function(){var e=this.getWindow();return e&&e.location.href},getScheme:function(){var e=this.getWindow();return e&&e.location.protocol},getHostname:function(){var e=this.getWindow();return e&&e.location.host},getPort:function(){var e=this.getWindow();return e&&e.location.port},getPathname:function(){var e=this.getWindow();return e&&e.location.pathname},getHashValue:function(){var e=this.getWindow();return e&&e.location.hash},getWindow:function(){return"undefined"!=typeof window?window:void 0},hasIEVendorPrefix:function(){return"msTransition"in document.createElement("div").style},isTouchDevice:function(){var e=document.createElement("div");return e.setAttribute("ontouchstart","return;"),"function"==typeof e.ontouchstart?!0:!1},isMobileSafari:function(){return/ Mobile\//.test(navigator.userAgent)&&/ Safari\//.test(navigator.userAgent)},localStorageAvailable:function(){var e="localStorageAvailable"+(new Date).getTime();try{return localStorage[e]="true",localStorage.removeItem(e),!0}catch(t){return!1}},loadCSS:function(e,t){var i=document.getElementById(t);i||(i=document.createElement("link"),i.rel="stylesheet",i.href=e,i.id=t,(document.head||document.getElementsByTagName("script")[0].parentNode).appendChild(i))},getBrowserName:function(){return n()}};return a.isMobileSafariPrivateMode=function(){return a.isMobileSafari()&&!a.localStorageAvailable()},a}),Mindbreeze.define("utils/uuid",[],function(){return{generate:function(){for(var e=[],t="0123456789ABCDEF",i=0;32>i;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);e[12]="4",e[16]=t.substr(8|3&e[16],1);var n=e.join("");return n}}}),Mindbreeze.define("client/resourceinfo",["require"],function(e){return{scriptLocation:e.toUrl("")}}),Mindbreeze.define("utils/url",[],function(){var e=function(e){if(!e)return e;var t=e.match(/^(http(?:s)?\:)?(\/\/[^\/]+)/im);if(!t)throw Error('"'+e+'" is not a valid URL');return(t[1]||window.location.protocol)+t[2]};return{isRelative:function(e){return!/^https?:\/\//.test(e)},directory:function(e){return e.replace(/\/[^\/]*$/,"/")},getOriginFromDataSource:e,sameOrigin:function(t,i){var n=e(t),s=e(i);return n===s}}}),Mindbreeze.define("client/localized_model",["underscore","backbone","i18n/i18n"],function(e,t,i){return t.Model.extend({localizedProperties:[],get:function(i){var n=t.Model.prototype.get.apply(this,arguments);return e.indexOf(this.localizedProperties,i)>=0?this.localize(n):n},localize:function(t){if(t){if(e.isString(t))return i(t);var n=i.locale,s=t[n];return s||n.length>2&&(n=n.substring(0,2),s=t[n]),s}}})}),Mindbreeze.define("service/channel",["require","underscore","backbone","client/localized_model"],function(e,t,i,n){function s(e,t,i){var i=[t,e].concat(Array.prototype.slice.call(i));e.trigger.apply(e,i)}var r;Mindbreeze.require(["utils/trace"],function(e){r=e});var a=function(e,t){this.traceContext=e&&e.traceContext,this.on("all",function(){t.apply(this,arguments),e&&e.trigger.apply(e,arguments)})};t.extend(a.prototype,i.Events);var o=n.extend({localizedProperties:["title","description"],defaults:{enabled:!0},initialize:function(e,t){this.set("id",this.get("url")),this.set("trace",this.get("trace")!==!1),null!=t&&(this.options=t)},call:function(e,i,n,s,o){if(this.get("enabled")){var l={};if(this.options&&this.options.headers&&(l=t.extend(l,this.options.headers)),l=t.extend(l,o),i&&i.name&&t.isString(i.name)&&(l["x-mes-api-request-name"]=i.name),this.get("trace")){var u;r&&(u=r.events.httpRequest.enter(n&&n.traceContext&&n.traceContext.context,e,this.get("url")),l=r.adaptRequestHeaders(l?t.clone(l):null,u.context)),n=new a(n,function(e,t){var i=t.status,n=t.error;/response/i.test(e)&&(i="200",n="OK"),u&&u.leave(i,n)})}var c=t.toArray(arguments);return c[4]=l,this.internalCall.apply(this,c)}},success:function(e,t,i){i&&i.trigger("response",e,this),t.triggerDone(e)},error:function(e,t,i){i&&i.trigger("error",e,this),t.triggerFail(e)},internalCall:function(e,t,i){i.trigger("error",{status:500,message:"Channel.call is abstract!"});var n=new l;return n.triggerFail(),n},get:function(e){return"checked"===e?this.get("enabled")?"checked":"":"name"===e?this.get("title")||this.get("url").replace(/api\/v2\/$/,""):n.prototype.get.apply(this,arguments)},id:null}),l=o.DeferredCallFinished=function(e){this.channel=e,this._finished=!1,this._failed=!0,this.channel&&(this.once("fail",function(){s(this.channel,"fail",arguments)},this),this.once("done",function(){s(this.channel,"done",arguments)},this)),this.on("fail done",function(){this._finished=!0},this),this.initialize.apply(this,arguments)};return t.extend(l.prototype,i.Events,{initialize:function(){},triggerFail:function(){this._failed=!0,this._finished=!0;var e=["fail"].concat(Array.prototype.slice.call(arguments));this.trigger.apply(this,e)},triggerDone:function(){this._failed=!1,this._finished=!0;var e=["done"].concat(Array.prototype.slice.call(arguments));this.trigger.apply(this,e)},isDone:function(){return this._finished&&!this._failed},isFailed:function(){return this._finished&&this._failed},always:function(e,t){if(this.isFailed()||this.isDone()){var i=t||this;e.call(i)}this.on("fail done",e,t)},fail:function(e,t){if(this.isFailed()){var i=t||this;e.call(i)}this.on("fail",e,t)},done:function(e,t){if(this.isDone()){var i=t||this;e.call(i)}this.on("done",e,t)}}),o}),Mindbreeze.define("service/messageframes",["i18n/i18n","utils/url","utils/browser","jquery","underscore","backbone","service/channel"],function(e,t,i,n,s,r){function a(e,t,i,n,r,a){this.cid=s.uniqueId("c"),this.url=e,this.request=t,this.method=i,this.dataType=n||"json",this.headers=r,this.formatOptions=a}function o(e){this.options=e||{}}var l=1e4,u=l;(new Date).getTime();var c={},h=function(){this.loginWindows={},this.cleanUp={}};s.extend(h.prototype,{showLogin:function(t){var i=this,s=this.getId(t),r=this.getLoginWindow(t),a=!0;if(m.idpEnabled(m.getIdp(t))){if(!r){var o=document.createElement("div");o.className="modal mb-login",o.innerHTML='<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><i class="icon-cogs"></i> '+e("login")+'</h4></div><div class="modal-body"> </div> </div> </div>',n(o).on("hidden",function(){a&&m.disableIdp(m.getIdp(t)),i.hideLogin(t)
});var l=document.createElement("iframe");l.src=this.getLoginUrl(t),l.title="Login",l.setAttribute("data-channel",t.get("url")),n(o).find(".modal-body")[0].appendChild(l),this.loginWindows[s]=l,this.cleanUp[s]=(this.cleanUp[s]||[]).concat(function(){a=!1,n(o).modal("hide").remove()}),document.body.appendChild(o),n(o).modal()}return this.loginWindows[s]}},hideLogin:function(e){var t=this,i=this.getId(e),n=this.getLoginWindow(e);if(n){try{s.defer(function(){n.close&&n.close()})}catch(r){}try{n.parentNode.removeChild(n)}catch(r){}delete t.loginWindows[i],s.each(this.cleanUp[i],function(e){e.apply(this,[])}),delete this.cleanUp[i],this.$focusAfterLogin&&this.$focusAfterLogin.focus()}},getLoginWindow:function(e){return this.loginWindows[this.getId(e)]},getId:function(e){var t=e.idpURL,i=t||e.get("url");return i},getLoginUrl:function(e){var i=((new Date).getTime(),e.get("url")+"/../../../"),n=i+"mashup-login?inDialog=true&origin="+t.getOriginFromDataSource(window.location.href);return n},loginInBackground:function(e){var t=this;if(s.isArray(e))return s.each(e,function(e){t.loginInBackground(e)}),void 0;if(!e.get("loggedIn")){var t=this,i=(this.getId(e),this.getLoginWindow(e));if(!i){s.delay(function(){t.hideLogin(e),t.showLogin(e)},3e4);var n=document.createElement("iframe");n.style.display="none",n.src=this.getLoginUrl(e),n.title="login in background",n.setAttribute("data-channel",e.get("url")),document.body.appendChild(n),this.loginWindows[this.getId(e)]=n}}}});var d=new h,p=function(){this._dataSourceToIdp={},this._idpToDataSources={},this._idpEnabled={}};s.extend(p.prototype,r.Events,{register:function(e,t){if(t){e&&"null"!==e||(e=t.get("dataSource"));var i=this._idpToDataSources[e]||[];s.indexOf(s.map(i,function(e){return e&&e.get("dataSource")}),t.get("dataSource"))<0&&i.push(t),this._idpToDataSources[e]=i,this._dataSourceToIdp[t.get("dataSource")]=e}},getIdp:function(e){return this._dataSourceToIdp[e.get("dataSource")||e.messageFrame&&e.messageFrame.get("dataSource")]},getChannelsForIdp:function(e){return this._idpToDataSources[e]},enableIdp:function(e){this.idpEnabled(e)||(this._idpEnabled[e]=!0,this.trigger("idpenabledchanged",this.idpEnabled(e)))},disableIdp:function(e){this.idpEnabled(e)&&(this._idpEnabled[e]=!1,this.trigger("idpenabledchanged",this.idpEnabled(e)))},idpEnabled:function(e){var t=this._idpEnabled[e];return t||"undefined"==typeof t}});var m=new p,f=function(e){return e=function(){var t=new RegExp("^((?:f|ht)tp(?:s)?://[^/]+)","im"),i=e.match(t);if(null==i)return e;var n=i[1].toString(),s=e.substr(n.length,e.length-n.length);if(!s||0==s.length||"/"===s)return n+"/";var r=s.lastIndexOf("/");if(r==s.length-1)return n+s;var a=s.substr(0,r+1);return-1!=a.indexOf("inapp/",a.length-"inapp/".length)&&(a=s+"/"),n+a}(),/^\/\//.test(e)?window.location.protocol+e:e},g=function(){this.origin=t.getOriginFromDataSource(i.getURL())};s.extend(g.prototype,{channels:[],register:function(e){this.channels.push(e)},dispatch:function(e){s.forEach(this.channels,function(t){var i,n,s=t.get("dataSource"),r=t.getMessageFrameStart(s),a=d.getLoginWindow(t);try{i=t.iframe.contentWindow===e.source||(a===e.source||a&&a.contentWindow===e.source&&e.origin===t.get("dataSource").substring(0,e.origin.length))&&a.getAttribute("data-channel")===t.get("url")}catch(o){i=!1}if(i){n=e.data.replace(r,"");try{n=JSON.parse(n)}catch(o){}t.messageReceived(n)}})}});var v=new g;i.getWindow()&&n(i.getWindow()).bind("message",function(e){v.dispatch(e.originalEvent)}),s.extend(a.prototype,r.Events,{dispose:function(){this.trigger("dipose")},toMessage:function(){return/^json$/i.test(this.dataType)?JSON.stringify(this.request):this.request},done:function(e){this.trigger("response",e,this.url)},failed:function(e){this.trigger("error",e,this.url)}});var _=r.Model.extend({defaults:{enabled:!0},initialize:function(e,i){i=i||{},this.options=i;var n=this;m.idpEnabled(m.getIdp(n))||this.set("enabled",!1),m.on("idpenabledchanged",function(){n.set("enabled",m.idpEnabled(m.getIdp(n)))});var s=i.messageFramePath,r=i.target;this.set("dataSource",f(this.get("url").replace(/api\/v2\/.*/i,""))),this.set("messageFramePath",s||"../messageFrame.html?"+t.getOriginFromDataSource(window.location.href)),this.set("dataSourceOrigin",t.getOriginFromDataSource(this.get("url"))),this.set("target",r||"body"),this.calls={},this.remoteWindow;var n=this;window.setTimeout(function(){n.connect()},0)},perform:function(e,t){if(!t&&null!=this.calls[e.cid])return this.calls[e.cid];if(this.calls[e.cid]=e,this.verifyConnection(),this.iframe&&this.iframe.contentWindow)try{var i=JSON.stringify({headers:e.headers,method:e.method,dataSource:e.url,dataType:e.dataType,urlPath:"",handleLogin:!1,parameters:e.toMessage(),id:e.cid,formatOptions:e.formatOptions});this.iframe.contentWindow.postMessage(i,this.get("dataSourceOrigin"))}catch(n){throw this.reconnect(),new Error("Lost connection")}},getMessageFrameStart:function(e){return s.isFunction(this.options.getMessageFrameStart)?this.options.getMessageFrameStart(e):new RegExp("^messageFrame:"+t.getOriginFromDataSource(e)+"[^:]*:")},restartActiveCalls:function(){var e=this;s.each(this.calls,function(t){e.perform(t,!0)})},messageReceived:function(e){var t=this;if("messageFrameInfo"===e._tag)m.register(e.idpURL,this),this.verifyConnectionTimeoutMs=e.sendsReceivedOnPostMessage?u:null;else if("loggedIn:"===e||"loggedIn"===e._tag){this.set("loggedIn",!0),d.hideLogin(this),this.restartActiveCalls();var i=m.getChannelsForIdp(m.getIdp(this));s.each(i,function(e){e.get("url")===t.get("url")&&e.set("loggedIn",!0),e.get("loggedIn")||d.loginInBackground(e)})}if(this.connected(),this.clearMessageId(e._messageId),"received"!==e._tag){var r=!1;if(/loginrequired/i.test(e._tag))r=!0;else if(/messageFrameInfo/.test(e._tag))return this.idpURL="null"===e.idpURL?null:e.idpURL,void 0;if((401===e.status||/<meta http-equiv=\"refresh\"/.test(e.result))&&(r=!0),r){if(this.set("loggedIn",!1),this.$focusAfterLogin=n(":focus"),!this.options.loginAsError)return d.showLogin(this),void 0;e._tag="ajaxError",e.status=401,e.error="Synthesized error from login info."}var a=this.calls[e.id];a&&(/ajaxError/.test(e._tag)?a.failed({status:e.status,message:e.result,url:a.url,error:e.error}):a.done(e.result),this.calls[e.id]=null,delete this.calls[e.id])}},clearMessageId:function(e){e&&(this.calls=s.select(this.calls,function(t){return t.cid!==e}))},verifyConnection:function(){var e=this;this.verifyConnectionTimeoutMs&&(window.clearTimeout(this.verifyConnectionTimeout),this.verifyConnectionTimeout=window.setTimeout(function(){e.reconnect()},this.verifyConnectionTimeoutMs))},reconnect:function(){this.disconnect("lost connection"),this.connect()},connect:function(){v.register(this),this.appendIframe()},appendIframe:function(){this.iframe=document.createElement("iframe"),this.iframe.style.display="none",this.iframe.src=f(this.get("url"))+this.get("messageFramePath"),this.iframe.title="iframe for postmessage commmunication",this.iframe.onload=s.bind(this.connected,this),n(this.get("target")).append(this.iframe)},connected:function(){this._connected||(this._connected=!0,this.restartActiveCalls()),window.clearTimeout(this.verifyConnectionTimeout),delete this.verifyConnectionTimeout},disconnect:function(){try{this.iframe.parentNode.removeChild(this.iframe)}catch(e){}this._connected=!1},_receiveMessage:function(e){var t=e.data.cid,i=this.calls[t];i&&i.done(e.data)}});return o.Call=a,o.idpRegistry=m,s.extend(o.prototype,{_idFromUrl:function(e){return e},forURL:function(e,t){var i=this._idFromUrl(e);return c[i]||(c[i]=new _({url:e},s.extend({},this.options,t))),c[i]},enableIdpOfChannel:function(e){m.enableIdp(m.getIdp(e))}}),o}),Mindbreeze.define("service/messageframe_channel",["jquery","underscore","backbone","service/channel","service/messageframes"],function(e,t,i,n,s){var r=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments);var e=this.get("messageFrames"),t=this.get("url"),i=this;this.messageFrame=e.forURL(t,this.options),this.messageFrame.get("enabled")||this.set("enabled",!1),this.messageFrame.on("change:enabled",function(e,t){t||i.set("enabled",!1)}),this.listenTo(this,"add",this.enableIdp),this.listenTo(this,"change:enabled",this.enableIdp)},enableIdp:function(){if(this.get("enabled")){var e=this.get("messageFrames");e.enableIdpOfChannel(this)}},clone:function(){var e=n.prototype.clone.apply(this,arguments);return e.set("enabled",this.get("enabled")),e},internalCall:function(e,i,r,a,o,l){l=l||{};var u=new n.DeferredCallFinished(this),c="json";a&&a.dataType&&(c=a.dataType);var h=this.get("url")+(e||""),d=new s.Call(h,"json"===c?JSON.stringify(i):i,l.method||this.get("method"),"text",o,a);d.on("response",function(e,i){if("json"===c&&!t.isObject(e))try{e=JSON.parse(e)}catch(n){var s={status:200,url:i,message:"Could not parse JSON.",error:n};this.error(s,u,r)}this.success(e,u,r)},this),d.on("error",function(e){this.error(e,u,r)},this);try{this.messageFrame.perform(d)}catch(p){var m={status:500,url:h,message:"Caught exception performing messageFrame call",error:p};this.error(m,u,r)}return u}});return r}),Mindbreeze.define("utils/trace",["libs/apm/softwaretelemetry","utils/browser","utils/uuid","client/resourceinfo","service/messageframes","service/messageframe_channel","jquery","underscore","backbone"],function(e,t,i,n,s,r,a,o,l){if(e.env.active){var u=new s,c=new r({messageFrames:u,url:n.scriptLocation+"../../api/v2/",trace:!1});e.env.url=n.scriptLocation+"../../web.telemetry",e.SetTransport({send:function(e,t,i,n){var s=this._responseObserver={};o.extend(s,l.Events),s.once("all",function(e,t){"response"===e?i({status:200,statusText:"OK",responseText:t}):n({status:t.status,statusText:t.statusText,responseText:t.responseText})}),e=e.replace(/.*\/web\.telemetry/,"/web.telemetry"),c.call("../.."+e,t,s,{dataType:"text"})}})}var h=function(){};h.prototype={send:function(i){(new Date).getTime();var n=!1;return i.context||(n=!0,i.context=e.CreateContext(null,w.sessionId),b.identity.none(i.context,w.userName),b.referer.none(i.context,t.getURL(),t.getScheme(),t.getHostname(),t.getPort(),t.getPathname())),this.beforeEvent(i),i.id=i.id||this.id,i.level=i.level||this.level||e.LEVEL_LOG,i.flag=i.flag||this.flag||e.FLAG_NONE,i.parameters=i.parameters||[],this.module.Event&&this.module.Event.apply(this.module,[i.context,i.id,i.level,i.flag].concat(i.parameters)),n?i.context:null},beforeEvent:function(e){var t;w.surroundingContextTokenCallbacks.length>0&&(t=this.getCallbackAction(e),t&&this.attachSurroundingContextTokens(e.context,t))},getCallbackAction:function(e){if(!(w.surroundingContextTokenCallbacks.length<1)){var t;return"search"===this.name?t=e.parameters&&e.parameters.length>2&&/^true$/i.test(e.parameters[2])?"nextPage":"search":"action"===this.name&&(e.parameters&&e.parameters.length>0&&/^facet selection changed$/i.test(e.parameters[0])?t="filter":e.parameters&&e.parameters.length>0&&/^suggest$/i.test(e.parameters[0])&&(t="suggest")),t}},attachSurroundingContextTokens:function(t,i){o.each(w.surroundingContextTokenCallbacks,function(n){var s;try{s=n(i)}catch(r){"undefined"!=typeof console&&console.warn&&console.warn("error calling context token callback: ",r)}s&&e.AttachContext(t,s)})}};var d=function(e,t,i,n,s,r,a){this.module=e,this.id=t,this.level=r,this.flag=a,this.name=i,this.module.RegisterEvent(this.id,i,n),this.module.RegisterEvent(this.id+1e3,i,s)};o.extend(d.prototype,h.prototype,{enter:function(t){var i=this.send({context:t,flag:e.FLAG_ENTER,parameters:Array.prototype.slice.call(arguments,1)});return new p(i||t,this.module,this.id+1e3,this.level,this.flag,!!i)}});var p=function(e,t,i,n,s,r,a){this.context=e,this.module=t,this.id=i,this.level=n,this.flag=s,this.releaseContext=r,this.parent=a};o.extend(p.prototype,h.prototype,{leave:function(){for(var t=this.parent;t&&t.parent;)t=t.parent;this.leaveParameters=t&&t.leaveParameters||Array.prototype.slice.call(arguments),this.left||(this.left=!0,this.send({id:this.id,context:this.context,flag:e.FLAG_LEAVE,parameters:this.leaveParameters}),this.releaseContext&&w.releaseContext(this.context))},willLeave:function(){return this.left=!0,new p(this.context,this.module,this.id,this.level,this.flag,this.releaseContext,this)}});var m=function(e,t,i,n,s,r){this.module=e,this.id=t,this.level=s,this.flag=r,this.module.RegisterEvent(this.id,i,n)};o.extend(m.prototype,h.prototype,{none:function(t){var i=this.send({id:this.id,context:t,flag:e.FLAG_NONE,parameters:Array.prototype.slice.call(arguments,1)});i&&w.releaseContext(i)}}),e.RegisterApplication("Mindbreeze","http://localhost:23000/","Client","Client (gspmsa1.parisgsa.lan:443)");var f=e.RegisterModule("XMLHttpRequest"),g=e.RegisterModule("UI"),v=e.RegisterModule("Service"),_=e.RegisterModule("UserContext"),y=e.RegisterModule("Output");e.Flush(!0);var b={};b.identity=new m(_,1,"identity","username"),b.referer=new m(_,2,"referer","referer;referer_scheme;referer_host;referer_port;referer_path"),b.httpRequest=new d(f,3,"send","path;url","status;status_description"),b.uiRender=new d(g,4,"render","type"),b.uiAction=new d(g,5,"action","name;sender"),b.serviceCall=new d(v,6,"call","method"),b.search=new d(v,7,"search","count;user_query_expr;next_page;previous_page","result_count;total_count;empty_results"),b.outputParse=new d(y,8,"parse"),b.outputMerge=new d(y,9,"merge");var w={surroundingContextTokenCallbacks:[],sessionId:a('meta[name="mes:user"]').attr("content")||i.generate(),emailAddress:a('meta[name="mes:emailaddress"]').attr("content"),getInfos:function(){return[{name:"email",hidden:!0,value:w.emailAddress},{name:"username",value:w.userName}]},feedbackHTML5ScreenshotEnabled:function(){return e&&e.env&&e.env.report&&null!=e.env.report.enableHTML5Screenshot?e.env.report.enableHTML5Screenshot:!0},enableHTML5Screenshot:function(t){return e&&e.env&&e.env.report&&(e.env.report.enableHTML5Screenshot=t),this},feedback:function(t){e.ReportDialog(null,w.sessionId,i.generate(),null,null,{infos:w.getInfos()},{formid:t})},events:b,releaseContext:function(t){t&&e.ReleaseContext(t)},adaptRequestHeaders:function(t,i){return t=t||{},t["x-apm-telemetry-context"]=e.GetContext(i),t},instrument:function(e,t,i){var n=b[t],s=function(){var t,s=i&&i.apply(this,arguments),r=n.enter.apply(n,[null].concat(s)),a="OK",l="";try{t=e.apply(this,o.toArray(arguments).concat([r]))}catch(u){throw a="NOK",l=u.message,u}finally{r.leave(a,l)}return t};return s},enabled:e.env.active,setUserName:function(e){w.userName=e},addSurroundingContextTokenCallback:function(e){w.surroundingContextTokenCallbacks.push(e)},removeSurroundingContextTokenCallback:function(e){w.surroundingContextTokenCallbacks=o.without(this.surroundingContextTokenCallbacks,e)}};return w}),Mindbreeze.define("utils/clone",[],function(){return function(e){return void 0===e?void 0:JSON.parse(JSON.stringify(e))}}),Mindbreeze.define("model/readonlytree",["underscore","backbone","utils/jsonpath","utils/trace","utils/clone"],function(e,t,i,n){var s=function(e,t,n){this.treeModel=e,this.path=t,this.pathElts=i.parsePath(this.path),this.canoncialPath=i.stringifyPath(this.pathElts),this.attributes=i.get(n,this.pathElts),this.listenTo(this.treeModel,"change",this._onTreeChange,this),this._onTreeInvalidate(this.treeModel),this.listenTo(this.treeModel,"invalidate",this._onTreeInvalidate,this),this.listenTo(this.treeModel,"reset",this._onTreeReset,this)};e.extend(s.prototype,t.Events,{submodel:function(e){return new s(this.treeModel,e,this.attributes)},_onTreeInvalidate:function(t,n){n=i.get(this.treeModel.attributes,this.pathElts),this._attributesChanged=this._attributesChanged||!e.isEqual(this.attributes,n),this.attributes=n},_onTreeChange:function(e,t){this._attributesChanged&&(delete this._attributesChanged,this.trigger("change",this,t))},_onTreeReset:function(e,t){this.trigger("reset",this,t)},get:function(e){if(void 0===e)return this.attributes;if("computing"===e)return this.treeModel.get("computing");if(!this.attributes)return void 0;var t=this.attributes[e];return void 0===t&&(t=i.get(this.attributes,e)),t},submodel:function(t,n){return e.isArray(t)||(t=i.parsePath(t)),t=this.pathElts.concat(t),this.treeModel.submodel(t,n)},load:function(t,i){var i=i||{};i=e.extend(i,{path:this.pathElts}),this.treeModel.load(t,i)},dispose:function(){this.stopListening(this.treeModel)},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null}});var r=function(t,i){i=i||{};var n=t||{};this.cid=e.uniqueId("c"),this.attributes={},this.initialize&&this.initialize(i),this.load(n,e.extend({silent:!0}),i)};return e.extend(r.prototype,t.Events,{idAttribute:"id",submodel:function(e,t){return new s(this,e,this.attributes,t)},parse:function(e){return e},load:function(t,s){s=s||{};var r,a,o,l=t||{};if(a=s.traceContext,s.path||(s.path=[]),e.isArray(s.path)&&(s.path=i.parsePath(s.path)),0==s.path.length?this.idAttribute in l&&(this.id=l.id):s.path.length>0&&(this.attributes=i.clonePath(this.attributes,s.path)),s.parse&&(r=n.events.outputParse.enter(a&&a.context),s.traceContext=r,l=this.parse(t,s),r.leave()),this.trigger("load",this,l,s),s.merge){r=n.events.outputParse.enter(a&&a.context),s.traceContext=r;var u=this.attributes;if(s.path&&s.path.length>0){var c=s.path.length-1;u=i.get(this.attributes,s.path,c),o=i.get(u,[s.path[c]]),s=e.extend(s,{parent:u})}else o=this.attributes;var h="undefined"!=typeof l.computing?l.computing:"undefined"!=typeof o?o.computing:void 0;l=this.merge(o,l,s),null!=h&&(l.computing=h),r.leave()}if(s.traceContext=a,s.path.length?i.set(this.attributes,s.path,l):this.attributes=l,this.trigger("invalidate",this,this.attributes,s),!s.silent){var d=this;if(s.path.length>0){var p=i.get(this.attributes,[s.path[0]]);d.trigger("change:"+i.stringifyPath(s.path[0]),d,p,s)}e.each(e.keys(l),function(e){d.trigger("change:"+i.stringifyPath(s.path.concat([e])),d,l[e],s)}),this.trigger("change",this,s)}},merge:function(t,i){if(null==t)return i;if(null==i)return t;if(!e.isObject(t)||!e.isObject(i))return i;for(var n=e.keys(i),s=e.clone(t),r=0;r<n.length;++r){var a=n[r];s[a]=null==s[a]?i[a]:this.merge(s[a],i[a])}return s},reset:function(t,i){i=i||{},t=e.extend({},t,i.additionalAttributes),i.silent||this.trigger("before:reset",this,this.attributes,i);var n=this.load(t,i);return i.silent||this.trigger("reset",this,this.attributes,i),n},update:function(t,i){i=i||{},t=e.extend({},t,i.additionalAttributes),i.merge||(i.merge=!0);var n=this.load(t,i);return n},get:function(e,t){if(void 0===e)return this.attributes;t=t||{};var n;if(t.path||(n=this.attributes[e]),void 0!==n)return n;var s=t.path||[];return s=i.parsePath(s),s=s.concat(i.parsePath(e)),i.get(this.attributes,s)},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},dispose:function(){}}),r.extend=t.Model.extend,r}),Mindbreeze.define("service/stub",["underscore","backbone","utils/trace","service/channel"],function(e,t,i,n){var s=function(e){e&&e.path&&(this.path=e.path)};return e.extend(s.prototype,{getDataType:function(){return{dataType:this.dataType}},call:function(t,i,n){e.isFunction(t.prepareRequest)&&(i=e.clone(i),t.prepareRequest(i));try{var s=t.get("url")+(this.path||"");i&&i.user_context&&(i.user_context.service_url=s)}catch(r){}return t.call(this.path,i,n,this.getDataType(t,i))},cast:function(i,s,r,a){function o(){var e=f++;e>=h.length?d.triggerDone():h[e].always(o,e)}var l,u,c=this,h=[],d=new n.DeferredCallFinished,p=0;if(u=e.isArray(i)?e.bind(e.each,e,i):e.isFunction(i&&i.each)?e.bind(i.each,i):function(e){e(i)},r){var m=function(){};e.extend(m.prototype,t.Events),l=new m,l.traceContext=r.traceContext,l.on("all",function(t){if(/response|error/.test(t)){p--;var i=p>0}for(var n=e.toArray(arguments);n.length<4;)n.push(this);n.push(i),r.trigger.apply(r,n)})}if(u(function(t){t&&t.prepareRequest||!i||!i.prepareRequest||(s=e.clone(s),i.prepareRequest(t,s));var n=c.call(t,s,l,a);n&&(p++,h.push(n))}),0==h.length)d.triggerFail();else{var f=0;h[0].always(o,0)}return d}}),s.extend=t.Model.extend,s}),Mindbreeze.define("model/compute_wiring",["utils/trace","underscore","backbone","model/readonlytree","utils/clone"],function(e,t,i,n,s){var r=function(e,t,i){i=i||{},this.input=e,this.output=t,this.computedInput=new n({}),this.computeOn=i.computeOn||"change",this.listenToChannel=i.listenToChannel,this.initialize.apply(this,arguments),this.activate(i),this.defaultResponseOptions=i.defaultResponseOptions};return t.extend(r.prototype,i.Events,{initialize:function(){},isActivated:function(){return this._activated},deactivate:function(){this._activated=!1,this.input.setSilent(!0),this.getListenToChannel()&&this.stopListening(this.channel,this.computeOn,this.compute),this.stopListening(this.input,this.computeOn,this.compute)},activate:function(e){this._activated=!0,this.getListenToChannel()&&this.stopListening(this.channel,this.computeOn,this.compute),this.stopListening(this.input,this.computeOn,this.compute),this.getListenToChannel()&&this.listenTo(this.channel,this.computeOn,this.compute),this.listenTo(this.input,this.computeOn,this.compute),this.input.setSilent(!1),e&&e.silent||this.input.change()},compute:function(n,r){try{this.computedInput.load(s(this.input.get()))}catch(a){}if(this.input&&this.input.validate&&!this.input.validate())return this._responseObserver&&(this.stopListening(this._responseObserver,"response",this._handleComputationResponse),this._responseObserver=null),this.output.reset(null,{invalid:!0}),this.trigger("computed"),!1;r=r||{};var o,l,u,c,h="search";this.input&&this.input.get&&(o=this.input.get("count"),l=this.input.get("user.query.unparsed"),u="NEXT"===this.input.get("paging.direction")?"TRUE":"FALSE",c="PREVIOUS"===this.input.get("paging.direction")?"TRUE":"FALSE");var d=r.traceContext;d&&(d=d.willLeave());var p=e.events.serviceCall.enter(d&&d.context,h),m=e.events.search.enter(p.context,o,l,u,c);null!=this._responseObserver&&(this.stopListening(this._responseObserver),this.trigger("aborted"),this._responseObserver=null),this.trigger("computing"),this._responsesReceived=0;var f=this._responseObserver={traceContext:m};t.extend(f,i.Events),this.listenTo(this._responseObserver,"response",this._handleComputationResponse);var g=this.performComputation(this.input,f);g.always(function(){if(this._responseObserver==f){this._responseObserver=null,this.trigger("computed",{traceContext:m});var e=this.output.get("resultset.results"),t=this.output.get("estimated_count")||0;m.leave(e&&e.length||0,t,t>0?"FALSE":"TRUE"),p.leave(),d&&d.leave()}},this)},_handleComputationResponse:function(e,i,n,s){var r=this._responsesReceived++,a=0==r,o={computing:s};a?this.output.reset(e,t.extend({additionalAttributes:o},this.defaultResponseOptions,{parse:!0,channel:i,traceContext:n.traceContext})):this.output.update(e,t.extend({additionalAttributes:o},this.defaultResponseOptions,{parse:!0,channel:i,traceContext:n.traceContext}))},getListenToChannel:function(){return this.listenToChannel!==!1&&this.channel&&this.channel.on}}),r.extend=i.Model.extend,r}),Mindbreeze.define("service/wiring",["underscore","backbone","model/compute_wiring","service/stub","utils/clone"],function(e,t,i,n,s){var r=i.extend({initialize:function(e,t,i){this.channel=i.channel,this.serviceStub=i.serviceStub||new n},performComputation:function(e,t){var i,n=e.attributes;try{n=s(n),this.trigger("compute",this,n)}catch(r){console&&console.log&&console.log("Failed to trigger compute, reverting to original input",r),n=e.attributes}return i=e.toJSON(n),this.serviceStub.cast(this.channel,i,t)}});return r}),Mindbreeze.define("model/tree",["underscore","backbone","utils/jsonpath","utils/clone","utils/trace"],function(e,t,i,n,s){var r=function(e,t,n){this.treeModel=e,this.path=t,this.pathElts=i.parsePath(this.path),this.canoncialPath=i.stringifyPath(this.pathElts),this.attributes=i.get(n,this.pathElts),this.aliases={},this.listenTo(this.treeModel,"change",this._onTreeChange,this),this.listenTo(this.treeModel,"invalidate",this._onTreeInvalidate,this)};e.extend(r.prototype,t.Events,{clone:function(){return new r(this.treeModel.clone(),this.path,n(this.attributes))},_onTreeInvalidate:function(){this.attributes,this.attributes=i.get(this.treeModel.attributes,this.pathElts)},_onTreeChange:function(e,t){this.trigger("change",this,t)},exists:function(){return null!=this.treeModel.get(this.pathElts)},_fullPath:function(t){var n=this.pathElts,s=t&&t.path||null;return null!=s&&(e.isArray(s)||(s=i.parsePath(s)),n=n.concat(s)),n},set:function(t,i,n){e.isObject(t)&&(n=i);var s=this._fullPath(n);if(null==t&&s.length>0&&(t=JSON.stringify(s[s.length-1]),s=s.slice(0,-1)),e.isObject(t)){var r=t;n=e.extend({aliases:this.aliases},n,{path:s}),this.treeModel.set(r,n)}else n=e.extend({aliases:this.aliases},n,{path:s}),this.treeModel.set(t,i,n);return this},clear:function(t){var i=this._fullPath(t);return this.treeModel.set(void 0,void 0,e.extend({},t,{unset:!0,path:i})),this},unset:function(t,i){return this.set(t,void 0,e.extend({},i,{unset:!0}))},add:function(t,i,n){return n=e.extend({path:this.path,aliases:this.aliases},n),this.treeModel.add(t,i,n),this},change:function(t){return t=t||{},t=e.extend({path:this.path,aliases:this.aliases},t),this.treeModel.change(t),this},toJSON:function(){return n(this.attributes)},_get:function(t){if(null==t)return this.attributes;if(!this.attributes)return null;var n=this.attributes[t];if(void 0===n){var s=this.aliases[t];if(s)return this.treeModel.get(s)}if(void 0===n){var r=i.parsePath(t);if(!r)return n;if(n=i.get(this.attributes,t),void 0!==n)return n;if(e.isArray(r)&&r.length>0){var a=this.aliases[r[0]];if(a&&e.isArray(a)){var s=a.concat(r.slice(1));return this.treeModel.get(s)}}}return n},get:function(){var t=this._get.apply(this,arguments);return e.isObject(t)?n(t):t},dispose:function(){this.stopListening(this.treeModel),this.treeModel=null,this.aliases={}},addAlias:function(e,t){this.aliases[e]=i.parsePath(t)},removeAlias:function(e){delete this.aliases[e]},submodel:function(t,n){return e.isArray(t)||(t=i.parsePath(t)),t=this.pathElts.concat(t),this.treeModel.submodel(t,n)}});var a=function(t,i){i=i||{};var s=t||{};this.cid=e.uniqueId("c"),this.attributes={},this._changes=[],this.load(s,e.extend({silent:!0},i)),this._currentAttributes=n(this.attributes),this._previousAttributes=n(this.attributes),this.initialize.apply(this,arguments)};return e.extend(a.prototype,t.Events,{initialize:function(){},addValidator:function(e){"function"==typeof e&&(this._validators=this._validators||[],this._validators.push(e),this._reValidate())},removeValidator:function(t){this._validators=e.filter(this._validators,function(e){return e!==t})},validate:function(){return e.reduce(this._validators,function(e,t){return e&&t()?e:!1},!0)},_reValidate:function(){var e=this.validate();e!==this._previouslyValid&&(this._previouslyValid=e,this.trigger("validated",this,e),e?this.trigger("validated:valid",this,e):this.trigger("validated:invalid",this,e))},setSilent:function(e){this.silent=e},clone:function(){return new this.constructor(n(this.attributes))},submodel:function(e,t){return new r(this,e,this.attributes,t)},parse:function(e){return e},load:function(e,t){var i,r,a=e||{};if(t=t||{},r=t.traceContext,t.parse&&(i=s.events.outputParse.enter(r&&r.context),t.traceContext=i,a=this.parse(e,t),i.leave()),t.merge){i=s.events.outputParse.enter(r&&r.context),t.traceContext=i;var o=n(this.attributes);a=this.merge(o,a,t),i.leave()}t.traceContext=r,this.set(a,t)},_get:function(e){if(null==e)return this.attributes;var t=this.attributes[e];return void 0==t?i.get(this.attributes,e):t},get:function(){var t=this._get.apply(this,arguments);return e.isObject(t)?n(t):t},_validate:function(){return!0},add:function(t,n,s){if(null==t)return this;var r=i.parsePath(t),a=s&&s.silent||this.silent,o=s&&s.path||[];e.isArray(o)||(o=i.parsePath(o)),o=o.concat(r);var l=this.attributes;return i.add(l,o,n),this._changes.push(o,i.get(l,o)),this._hasComputed=!1,this.invalidateIfNeeded(s),a||this.change(s),this},set:function(t,n,s){var r,a;if(null==t&&null==s)return this;var o=[];if(!e.isObject(t)||e.isArray(t)&&null!=s){var l=[];null!=t&&(l=i.parsePath(t)),null!=l&&e.isArray(l)&&l.length>0&&(o=l.slice(0,-1),t=l[l.length-1]),null!=t&&((a={})[t]=n)}else a=t,s=n;var u=s&&s.silent,c=s&&s.single,h=s&&s.unset,d=s&&s.path||[];if(e.isArray(d)||(d=i.parsePath(d)),null==a&&0==o.length&&d.length>0&&(t=d[d.length-1],d=d.slice(0,-1),(a={})[t]=n),d=d.concat(o),!this._validate(a,s))return!1;var p=this.attributes;if(e.isArray(a)&&d.length>0){var m={},f=d.length-1;m[d[d.length-1]]=a,a=m,d.splice(f,1)}var g=e.isArray(a);for(r in a){g&&(r=parseInt(r));var v=a[r],_=d.concat(r);h?i.unset(p,_):c||i.set(p,_,v),this._changes.push(_,v)}return this._hasComputed=!1,this.invalidateIfNeeded(s),u||this.change(s),this._reValidate(),this},unset:function(t,i){return this.set(t,void 0,e.extend({},i,{unset:!0}))},clear:function(t){var i={};for(var n in this.attributes)i[n]=void 0;return this.set(i,e.extend({},t,{unset:!0}))},invalidateIfNeeded:function(e){this._changes.length>0&&this.trigger("invalidate",this,e)},change:function(e){if(!this.silent){var e=e||{};e&&e.path||[];var t=this._changing;this._changing=!0;var i=this._computeChanges(!0,e.force);this._pending=i.length>0;for(var s=i.length-2;s>=0;s-=2)this.trigger("changeattr",this,i[s],i[s+1],e);if(t)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,e),this._previousAttributes=n(this.attributes);return this._changing=!1,this}},_computeChanges:function(e,t){this.changed={};for(var s={},r=[],a=this._currentAttributes,o=this._changes,l=o.length-2;l>=0;l-=2){var u=o[l],c=o[l+1],h=i.stringifyPath(u);if(!s[h]&&(s[h]=!0,t||i.get(a,u)!==c)){if(this.changed[h]=c,!e)continue;r.push(u,c),null!=c?i.set(a,h,n(c)):i.unset(a,h)}}return e&&(this._changes=[]),this._hasComputed=!0,r},toJSON:function(e){return null==e&&(e=this.attribute),n(e)},exists:function(){return null!=this.attributes},resetActionState:function(){}}),a.extend=t.Model.extend,a}),Mindbreeze.define("utils/events",["underscore","backbone"],function(e){var t=/\s+/,i=function(e){return e.split(t)};return{proxyEvent:function(t,n){var s,r=this,a=null;e.isObject(t)?(s=e.keys(t),a=t):s=i(t),e.each(s,function(e){if("all"==e)throw new Error("Forwarding all events is not supported.");var t=a&&a[e]||e;r._forwardCallbacks||(r._forwardCallbacks={}),r._forwardCallbacks[t]||(r._forwardCallbacks[t]=function(){var e=Array.prototype.slice.apply(arguments);e.unshift(t),r.trigger.apply(r,e)}),n.on(e,r._forwardCallbacks[t],r)})},stopProxyingEvent:function(t,n){var s,r=this,a=null;e.isObject(t)?(s=e.keys(t),a=t):s=i(t),e.each(s,function(e){var t,i=a&&a[e]||e;r._forwardCallbacks&&(t=r._forwardCallbacks[i]),n.off(e,t,r)})},proxyAllEvents:function(e,t){var i=this;this.listenTo(e,"all",function(e){t&&t.test(e)||i.trigger.apply(i,arguments)})}}}),Mindbreeze.define("model/computed",["underscore","backbone","utils/events"],function(e,t,i){var n=function(t,i){this.cid=e.uniqueId("c"),i=i||{},this._configure(i),this.wiring=t,this.input=i.input||t.input,this.output=i.output||t.output,this.computedInput=i.computedInput||t.computedInput,this.initialize.apply(this,arguments),this.listenToChanges()};return e.extend(n.prototype,t.Events,i,{_configure:function(e){this.options=e},initialize:function(){return this},isActivated:function(){return this.wiring.isActivated()},activate:function(e){this.wiring.activate(e)},deactivate:function(e){this.wiring.deactivate(e)},stopListeningToChanges:function(){this.stopProxyingEvent("computing aborted computed compute",this.wiring),this.stopProxyingEvent({change:"changeinput"},this.input)},listenToChanges:function(){this.proxyEvent("computing aborted computed compute",this.wiring),this.listenTo(this.output,"change",this._onOutputChangeEvent),this.proxyEvent({change:"changeinput"},this.input)},_onOutputChangeEvent:function(e,t){this.output==e&&this.trigger("change",this,t)},set:function(){return this.input.set.apply(this.input,arguments)
},unset:function(){return this.input.unset.apply(this.input,arguments)},get:function(e,t){var i=this.output.get.apply(this.output,arguments);return void 0!==i||t&&t.outputOnly?i:this.computedInput.get.apply(this.computedInput,arguments)},dispose:function(){this.input&&this.input.dispose&&this.input.dispose(),this.output&&this.output.dispose&&this.output.dispose(),this.computedInput&&this.computedInput.dispose&&this.computedInput.dispose(),this.stopListeningToChanges(),this.stopListening()},destroy:function(){this.dispose()},submodel:function(t,i){if(!this.input.submodel||!this.output.submodel)throw new Error("Submodel functionality required on input and output to perform submodelling.");e.isObject(t)&&!e.isArray(t)&&void 0===i?i=t:(i=i||{},i.path=t);var s=null,r=null;this.options.freezeInputPath||(s=void 0!==i.inputPath?i.inputPath:i.path),this.options.freezeOutputPath||(r=void 0!==i.outputPath?i.outputPath:i.path);var a,o,l;try{a=null!=s?this.input.submodel(s,i):this.input,o=null!=r?this.output.submodel(r,i):this.output,l=null!=s?this.computedInput.submodel(s,i):this.computedInput}catch(u){throw a&&a.dispose&&a.dispose(),o&&o.dispose&&o.dispose(),l&&l.dispose&&l.dispose(),u}if(a==this.input&&o==this.output)return this;var c=e.extend({},this.options,i);return c.input=a,c.output=o,c.computedInput=l,new n(this.wiring,c)}}),n.extend=t.Model.extend,n}),Mindbreeze.define("service/factory",["underscore","backbone","service/channel","service/stub","service/wiring","model/readonlytree","model/tree","model/computed","utils/events"],function(e,t,i,n,s,r,a,o,l){var u=function(){};return e.extend(u.prototype,t.Events,l,{createStub:function(){return new n},createInput:function(e,t){var i=new a(e,t);return this.proxyEvent({"before:serialize":"before:serializeinput"},i),i},createOutput:function(e,t){var i=new r(e,t);return this.proxyEvent({load:"loadoutput"},i),i},createWiring:function(t,i){i=i||{};var n=i.input||this.createInput(),r=i.output||this.createOutput(),a=e.extend({channel:t},i);return delete a.input,delete a.output,a.serviceStub||(a.serviceStub=this.createStub()),new s(n,r,a)},createModel:function(e,t){var i=new o(this.createWiring(e,t),t);return this.proxyEvent("compute",i),i}}),u}),Mindbreeze.define("api/v2/common",["backbone","underscore","model/readonlytree","service/stub","service/factory","utils/jsonpath"],function(e,t,i,n,s,r){var a={},o=a.StatusMessages={mergeMessage:function(e,i){if(!i)return e;if(!e)return i;var n=t.clone(e);n.service_ids||(n.service_ids=[]),t.isArray(n.service_ids)&&t.isArray(i.service_ids)&&(n.service_ids=n.service_ids.concat(i.service_ids));var s=["error","warning","info"];return t.each(s,function(e){!n[e]&&i[e]&&(n[e]=i[e])}),n},parse:function(e){if(!e)return e;var i={};return t.each(e,function(e){var t=e.id;t&&(i[t]=o.mergeMessage(i[t],e))}),i},merge:function(e,i){e||(e={}),i||(i={});var n=t.clone(e),s=t.union(t.keys(n),t.keys(i));return t.each(s,function(e){return"no_results"!=e||n[e]&&i[e]?(n[e]=o.mergeMessage(n[e],i[e]),void 0):(delete n[e],void 0)}),n}},l=a.PropertyFormat={_selectProperty:function(e,i){for(var n=t.map(e,i),s=[],r=0;r<n.length;++r)null==n[r]&&e[r]||s.push(n[r]);return 0==s.length&&e.length>0?null:s},_getProperty:function(e,i){null!=e&&null==e.value&&null==e.html&&null==e.data&&null!=e.properties&&(e=e.properties);var n=null;n=t.isArray(e)?t.reduce(e,function(e,i){return i&&i.data&&(t.isArray(i.data)?e=t.union(e,i.data):e.push(i.data)),e},[]):e.data;var s=t.isArray(n);if(s){var r=l._selectProperty(n,function(e){return e?e[i]:void 0});return r}return t.isObject(n)?n[i]:t.isString(n)?n:null},html:function(e,i){if(!e)return null;if(t.isArray(e)){var n=l._selectProperty(e,function(e){return l._getProperty(e,"html",i)});return t.isArray(n)?t.flatten(n,!1):n}return l._getProperty(e,"html",i)},value:function(e,i){if(!e)return null;if(t.isString(e))return e;if(t.isArray(e)){var n=l._selectProperty(e,function(e){return l._getProperty(e,"value",i)});return t.isArray(n)?t.flatten(n,!1):n}return l._getProperty(e,"value",i)},property:function(e){if(!e)return void 0;if(t.isArray(e.data)&&!e.properties){for(var i=!0,n=[],s=0;s<e.data.length&&i;++s){var r=e.data[s];i=r.properties&&!r.html&&!r.value&&!r.data,n.push(r.properties)}if(i&&n.length>0)return n}if(e.properties)return e.properties;if(t.isArray(e)&&e.length&&0==t.reduce(e,function(e,t){return null!=t.id&&e--,e},e.length)){var o={};return a.Properties.parse(o,e),o}return void 0},forFormat:function(e,i,n){if(t.isDate(i)||!t.isObject(i))return i;switch(e){case"HTML":return l.html(i,n);case"VALUE":return l.value(i,n);case"PROPERTY":return l.property(i,n)}throw new Error("Unsupported format",e,"!")}};a.Properties={parseValue:function(e){return t.isString(e.str)?e.str:t.isNumber(e.num)&&void 0===e.unit?e.num:e.num&&"ms_since_1970"==e.unit?new Date(e.num):e.query_expr?e.query_expr:e.action?e.action:e},minValue:function(e,t,i){return i(e,t)<0?e:t},parseNested:function(e){return t.map(e,function(e){if(e=t.clone(e),t.isArray(e.data)){for(var i=[],n=0;n<e.data.length;n++){var s=e.data[n];s=t.clone(s),s["data:position"]=n,s["property:id"]=e.id,s.value&&(s.value=a.Properties.parseValue(s.value));var r={};a.Properties.parse(r,s.properties),t.extend(s,r),i.push(s)}e.data=i}return e})},parse:function(e,i){return i?(t.each(i,function(i){i=t.clone(i),t.isArray(i.data)&&(i.data=t.map(i.data,function(e){return e.properties&&(e.properties=a.Properties.parse({},e.properties)),e.value?(e=t.clone(e),e.value=a.Properties.parseValue(e.value),e):e})),i.properties&&("icon"===i.id||"actions"===i.id?i.data=t.reduce(i.properties,function(e,t){return t.data&&(e=e.concat(t.data)),e},[]):(i.properties=a.Properties.parseNested(i.properties),i.properties=t.filter(i.properties,function(e){var i=t.find(e.data,function(e){return e&&(e.html||e.value)});return i}))),e[i.id]=i}),e):e},merge:function(e,i){return a.mapByPluck(a.mergeByName(t.values(e),t.values(i),"id",function(e,t){return e?t?(JSON.stringify(e)!==JSON.stringify(t)&&"undefined"!=typeof console&&console.warn&&console.warn("mismatch in facet value properties with id: '"+(e&&e.id)+"'",e,t),e):e:t}),"id")}},a.isPropertyArray=function(e){return t.isArray(e)&&e.length&&0==t.reduce(e,function(e,t){return t&&null!=t.id&&e--,e},e.length)},a.propertyListToArray=function(e,i){if(!e||t.isArray(e))return e;i=i||"id";var n=[];return t.each(t.keys(e),function(s){var r=e[s];if(r){var a=t.clone(r);a[i]=s,n.push(a)}}),n.length<1?void 0:n},a.arrayToPropertyList=function(e,i){if(!e||!t.isArray(e))return e;i=i||"id";for(var n={},s=0;s<e.length;++s){if(!e[s][i]){n=e;break}var r=e[s][i];n[r]=e[s]}return n},a.mapByPluck=function(e,i){var n={};return t.each(e,function(e){if(e){var t=e[i];t&&(n[t]=e)}}),n},a.mergeByName=function(e,i,n,s){if(!e)return i;if(!i)return e;var r=a.mapByPluck(e,n),o=a.mapByPluck(i,n),l=t.union(t.keys(r),t.keys(o)).sort();return t.map(l,function(e){var t=r[e],i=o[e];return s?s(t,i):t||i})},a.genericCompare=function(e,i){if(t.isObject(e)&&t.isObject(i)&&(e=JSON.stringify(e),i=JSON.stringify(i)),t.isString(e)&&t.isString(i)){if(e=e.toLowerCase(),i=i.toLowerCase(),e>i)return 1;if(i>e)return-1}return e>i?1:i>e?-1:0},a.valueCompare=function(e,i){return e&&e.num&&i&&i.num?a.genericCompare(e.num,i.num):e&&e.str&&i&&i.str?a.genericCompare(e.str,i.str):t.isArray(e)&&t.isArray(i)?a.valueCompare(t.first(e.sort(a.valueCompare)),t.first(i.sort(a.valueCompare))):a.genericCompare(e,i)},a.PROPERTY_COMPARE_FUNCTION=function(e,i){function n(e,i){return e&&e.get&&t.isFunction(e.get)?e.get(i,{outputOnly:!0}):r.get(e,i)}var s=r.parsePath(e);return function(e,r){var o=e&&n(e,s),l=r&&n(r,s);return i&&t.isFunction(i.valueCompare)?i.valueCompare(o,l):a.valueCompare(o,l)}},a.PREDEFINED_ORDER_COMPARE_FUNCTION=function(e,i,n){function s(e,i){return e&&e.get&&t.isFunction(e.get)?e.get(i):r.get(e,i)}var o=r.parsePath(e);return i=i||[],function(e,r){var l=e&&s(e,o),u=r&&s(r,o),c=i.indexOf(l),h=i.indexOf(u);return 0>c&&(c=Number.MAX_VALUE),0>h&&(h=Number.MAX_VALUE),c==h?n&&t.isFunction(n.valueCompare)?n.valueCompare(l,u):a.valueCompare(l,u):h>c?-1:1}};var u=864e5;return a.valueCompareYear=function(e,i){return e&&i&&"ms_since_1970"==e.unit&&e.unit==i.unit&&(e=new Date(e.num+u),i=new Date(i.num+u)),t.isDate(e)&&t.isDate(i)?e.getFullYear()-i.getFullYear():a.valueCompare(e,i)},a.valueCompareMonth=function(e,i){return e&&i&&"ms_since_1970"==e.unit&&e.unit==i.unit&&(e=new Date(e.num+u),i=new Date(i.num+u)),t.isDate(e)&&t.isDate(i)?e.getMonth()-i.getMonth():a.valueCompare(e,i)},a.COMPARE_BY_CRITERIA={PREDEFINED:a.PREDEFINED_ORDER_COMPARE_FUNCTION,PROPERTY:a.PROPERTY_COMPARE_FUNCTION,ORDER:a.PROPERTY_COMPARE_FUNCTION("order"),VALUE:a.PROPERTY_COMPARE_FUNCTION("value"),YEAR:a.PROPERTY_COMPARE_FUNCTION("query_expr.value",{valueCompare:a.valueCompareYear}),MONTH:a.PROPERTY_COMPARE_FUNCTION("query_expr.value",{valueCompare:a.valueCompareMonth}),HTML:function(e,t){return a.genericCompare(e.count,t.count)},COUNT:function(e,t){return a.PROPERTY_COMPARE_FUNCTION("count",{valueCompare:function(e,t){return(e||-1)-(t||-1)}})(e,t)}},a.getCompareFunction=function(e,t,i){i=i||{},"DESCENDING"!==t&&(t="ASCENDING");var n=a.COMPARE_BY_CRITERIA[e]||a.COMPARE_BY_CRITERIA.ORDER;return"PROPERTY"===e?n=n(i.criteriaPropertyName):"PREDEFINED"==e&&(n=n(i.criteriaPropertyName||"value",i.predefinedOrder)),n=a.ORDER_TRANSFORMER[t](n),i.subCriteria&&(n=a.SUBCRITERIA_TRANSFORMER(n,a.getCompareFunction(i.subCriteria.criteria,i.subCriteria.direction,i.subCriteria.options))),n},a.getValues=function(e,i){var n=[];return t.forEach(e,function(e){n=n.concat(r.get(e,i))}),t.uniq(n)},a._distributeGroupWeights=function(e,i,n){var s=t.keys(e).sort(function(t,i){return e[t]-e[i]}),r=n||0;return t.forEach(s,function(t){var n=i[t],s=n&&n.length||0;e[t]=r,r+=s}),e},a._getMinValue=function(e,i){var n;return t.isArray(e)?1===e.length?e[0]:(n=t.min(e,function(e){return i[e]}),1/0===n?e.join(","):n):e},a.wrapOrderFunctionWithSort=function(e,t){return function(i){return e.apply(this,[i,t].concat(Array.prototype.slice.call(arguments,2)))}},a.getOrderFunctionByList=function(e,i,n,s){e=e||[],s=s||{};var o=t.object(e,t.range(e.length)),l=e.length;return i=r.parsePath(i||"name"),function(e,u,c){t.uniqueId("group");var h,d=t.clone(o),p=a.getValues(e,i),m=t.reduce(p,function(e,t){var i=d[t];return"undefined"==typeof i&&e.push(t),e},[]);m.length>0&&(!s.applyPartial&&t.isFunction(u)&&e.sort(u),t.forEach(e,function(e,t){var n,u=r.get(e,i);u=a._getMinValue(u,d),s.applyPartial&&"undefined"==typeof o[u]&&(u="Mindbreeze.unweighted"),"undefined"==typeof d[u]&&(n=l,s.applyPartial||(n+=t),d[u]=n)})),h=t.groupBy(e,function(e){var t=r.get(e,i);return t=a._getMinValue(t,d),s.applyPartial&&"undefined"==typeof o[t]&&(t="Mindbreeze.unweighted"),t}),d=a._distributeGroupWeights(d,h,c),t.forEach(h,function(e,i){var r=d[i];e.length>1?n?n(e,s.applyPartial?u:u.subSortFunction,r):t.forEach(e,function(e,t){e.order={num:r+t}}):e[0].order={num:r}})}},a.sortByCriteria=function(e,i){if(e){var n=!t.isArray(e),s=e,r=i.sortFunction||a.getCompareFunction(i.criteria,i.direction,i);return n&&(s=t.values(e)),i.applyCustomOrder&&(i.applyCustomOrder(s,r),r=i.sortFunction||a.getCompareFunction("ORDER","ASCENDING",i)),s=s.sort(r),n?a.mapByPluck(s,i.mapKeyPropertyName):s}},a.ORDER_TRANSFORMER={DESCENDING:function(e){return function(){return-e.apply(this,arguments)}},ASCENDING:function(e){return e}},a.SUBCRITERIA_TRANSFORMER=function(e,t){var i=function(){var i=e.apply(this,arguments);return 0===i?t.apply(this,arguments):i};return i.subSortFunction=t,i},a.mergePropertyDefinitions=function(e,i){return e?(t.each(i,function(t,i){var n=e[i];n&&n.format!==t.format&&(t.format="PROPERTY"),e[i]=t}),e):i},a.hasMoreResults=function(e){return t.reduce(e,function(e,t){return e||t&&"COUNT_LIMIT"===t.termination_cause},!1)},a}),Mindbreeze.define("api/v2/getprofile",["i18n/i18n","api/v2/common","backbone","underscore","model/readonlytree","service/stub","service/factory","utils/clone"],function(e,t,i,n,s,r,a){var o={},l=o.GetProfileServiceStub=r.extend({path:"getprofile",call:function(e,t,i){return r.prototype.call.apply(this,[e,t,i])}}),u=o.GetProfileOutputModel=s.extend({initialize:function(e){this.channel=e.channel,this.serviceStub=e.serviceStub},parse:function(e){return e=n.clone(e),e.status_messages=t.StatusMessages.parse(e.status_messages),e},merge:function(e){return e},update:function(e,t){var s=this,r=this._responseObserver={},a={};e||this.load({}),n.extend(r,i.Events),this._responseObserver.on("response",function(e){s.load(e,{parse:!0,merge:!1}),n.isFunction(t)&&t(s)}),n.isFunction(t)&&this._responseObserver.on("error",function(e){try{t(null,e)}catch(i){console&&console.error&&console.error(i,i.stack)}}),this.serviceStub.cast(e||this.channel,a,r)}}),c=o.ServiceFactory=function(){};return n.extend(c.prototype,a.prototype,{createModel:function(e,t){t=t||{},t.channel=t.channel||e,t.serviceStub=t.serviceStub||new l;var i=new u({},t);return i}}),o}),Mindbreeze.define("model/properties",["underscore","backbone","utils/jsonpath","api/v2/common"],function(e,t,i,n){var s=function(t,i){i=i||{},this.formatProvider=i.formatProvider||n.PropertyFormat,this.defaultFormat=i.defaultFormat||"VALUE",this.propertyDefinitions=i.propertyDefinitions,this.cid=e.uniqueId("c"),this.properties={},this.load(t,e.extend({silent:!0}),i)};return e.extend(s.prototype,t.Events,{idAttribute:"id",load:function(e,t){t=t||{};var i=e||{};this.idAttribute in i&&(this.id=i.id),this.properties=i,t.silent||this.trigger("change",this,this.properties,t)},merge:function(){},reset:function(e,t){t=t||{};var i=this.load(e,t);return t.silent||this.trigger("reset",this,this.properties,t),i},submodel:function(e,t){if(void 0==e)return this;var i=this.get(e,t);return new s(i,this.options)},get:function(t,s){if(void 0==t)return this.properties;var s=s||{},r=s.format||this.defaultFormat;this.propertyDefinitions&&!s.overridePropertyFormat&&this.propertyDefinitions[t]&&this.propertyDefinitions[t].format&&(r=this.propertyDefinitions[t].format);var a=!1,o=this.properties,l=[];if("."!=t){var u=i.parsePath(t);if(!u)throw new Error("Failed to parse JSON path: "+t);for(var c=0;c<u.length&&(!e.isNumber(u[c])||e.isArray(o));++c){var h=c==u.length-1,d=i.get(o,[u[c]]);if(null==d)break;if(!h){var p=i.get(d,[u[c+1]]);if(null==p){var m=u.length-1>c&&(e.isNumber(u[c+1])||!e.isNaN(parseInt(u[c+1]))),f=u.length-2==c;if(!f||!m){var g=this,v=e.reduce(["PROPERTY","VALUE"],function(t,n){if(null!=t)return t;var s=g.formatProvider.forFormat(n,d);return null==s?null:(!e.isArray(s)||1!=s.length||e.isNumber(u[c+1])&&!e.isNaN(parseInt(u[c+1]))||(s=s[0]),i.get(s,[u[c+1]]))},null);null!=v&&(d=v,c+=1)}}}o=d}l=u.slice(c),l.length>0&&"PROPERTY"!=r&&(r="VALUE",a=!0)}var _=this.formatProvider.forFormat(r,o);if("VALUE"!=r&&null!=o&&void 0==_&&(_=this.formatProvider.forFormat("VALUE",o)),null!=o&&void 0==_&&(_=o),null!=_&&"PROPERTY"==r&&s.format&&"PROPERTY"!=s.format)if(r=s.format,e.isArray(_)){var g=this;_=e.flatten(e.map(_,function(e){return g.formatProvider.forFormat(s.format,e)}))}else _=this.formatProvider.forFormat(s.format,_);if(null!=l&&l.length>0){var y=void 0;if(e.isArray(_)&&1==_.length&&(y=i.get(_[0],l)),void 0===y&&(y=i.get(_,l)),void 0==y&&n.isPropertyArray(_)){var b={};n.Properties.parse(b,_),y=i.get(b,l),e.isObject(y)&&"PROPERTY"!=s.format&&(y=this.formatProvider.forFormat(a?s.format:r,y))}return y}return e.isArray(_)&&1==_.length?_[0]:_}}),s.extend=t.Model.extend,s.fromAttsAndProperties=function(t,i,n){var r={},a=e.keys(n);return e.each(a,function(e){var s=n[e],a=s.root;s.path;var o=s.format,l=i&&i[a];void 0!==l&&(t[a]=l),r[e]={format:o}}),new s(t,{propertyDefinitions:r})},s}),Mindbreeze.define("utils/encode",[],function(){return{htmlEncode:function(e){return e?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}}}),Mindbreeze.define("utils/string",["jquery","underscore"],function(e,t){var i=function(e){return e?String.prototype.trim.apply(e):e};String.prototype.trim||(i=function(e){return e?e.replace(/^\s+|\s+$/gm,""):e});var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],r=function(e){return n[e]},a="(?:"+t.keys(n).join("|")+")",o=RegExp(a),l=RegExp(a,"g");return{trim:i,stripHtml:function(e){return e?e.replace(/<[^>]*>/g,""):e},escape:function(e){return e=null==e?"":""+e,o.test(e)?e.replace(l,r):e},normalizeString:function(e){var t=s;e=e.toLowerCase();for(var i=0;i<t.length;i++)e=e.replace(t[i].letters,t[i].base);return e},addHighlights:function(e,t){return e||e.replace?('<span class="unmatched">'+e.replace(t,function(e){return'</span><span class="matched">'+e+'</span><span class="unmatched">'})+"</span>").replace(/<span class="unmatched"><\/span>/g,""):e}}}),Mindbreeze.define("model/attribute_proxy",["underscore","backbone","utils/events"],function(e,t){function i(e,t){this.model=e,this.model.output&&(this.output=this.model.output),this.model.input&&(this.input=this.model.input),this.attribtueDefinitions=t;var i=this;this.listenTo(this.model,"all",function(){i.trigger.apply(i,arguments)})}return e.extend(i.prototype,t.Events,{get:function(t){if(this.attribtueDefinitions&&this.attribtueDefinitions[t]&&this.attribtueDefinitions[t].get){var i=[this.model].concat(e.toArray(arguments));return this.attribtueDefinitions[t].get.apply(this.model,i)}return this.model.get.apply(this.model,arguments)},set:function(t){if(this.attribtueDefinitions&&this.attribtueDefinitions[t]&&this.attribtueDefinitions[t].set){var i=[this.model].concat(e.toArray(arguments));return this.attribtueDefinitions[t].set.apply(this.model,i)}return this.model.set.apply(this.model,arguments)},reset:function(){return this.model.reset.apply(this.model,arguments)},destroy:function(){try{this.model.destroy.apply(this.model,arguments)}catch(e){}this.stopListening(this.model)}}),i}),Mindbreeze.define("api/v2/search",["i18n/i18n","api/v2/common","backbone","underscore","model/readonlytree","model/tree","model/computed","model/compute_wiring","model/properties","service/stub","service/factory","utils/jsonpath","utils/clone","utils/encode","utils/string","utils/browser","model/attribute_proxy","service/channel"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v){function _(e){function t(e,s){if(e||(e={formats:[]}),!s)return e;var r=s.formats||[s.format];return e.formats=n.union(e.formats,r),!e.properties&&s.properties&&(e.properties={}),e.properties&&s.properties&&n.each(n.union(n.keys(e.properties),n.keys(s.properties)),function(r){n.contains(i,r)||(e.properties[r]&&delete e.properties[r].properties,s.properties[r]&&delete s.properties[r].properties),e.properties[r]=t(e.properties[r],s.properties[r],r)}),e}var i=this.options.nestedProperties;e=n.clone(e),e.noadditionalproperties||(e["mes:key"]=e["mes:key"]||{format:"VALUE"},e.category=e.category||{format:"VALUE"},e.categoryinstance=e.categoryinstance||{format:"VALUE"}),delete e.noadditionalproperties;var s={},r={};return n.each(n.keys(e),function(a){var o=h.parsePath(a);if(n.isArray(o)&&0!=o.length){var l=o[0],u=n.clone(e[a]);n.contains(i,l)||delete u.properties,u.root=l,u.path=o.slice(1),s[l]=t(s[l],u,l),r[a]=u}}),this.originalProperties=r,this.properties=s,this}function y(e,t){var i=[];return n.each(t,function(t){i.push(e[t])}),i}var b=/user_generated_\d+/,w=function(e,t){var i=e?e.rank_score:-1,n=t?t.rank_score:-1;return i>=n?-1:1},x=function(e,i){var n=e?e.order:null,s=i?i.order:null;return null==n||null==s?w(e,i):-t.valueCompare(n,s)},M=function(e){if(e)for(var t=n.max(e,function(e){return e.order?e.order:void 0}).order,i=0;i<e.length;i++){var s=e[i].order;if(n.isNumber(s)){if(n.isNumber(t))var r=Math.round(100*100*(s/t))/100;else var r=0;r+="",e[i].properties.relevance_order={data:[{value:r}],id:"relevance_order",name:"relevance_order"}}}return e},T={};T.DISPLAY_TIMEOUT=3e3,T.PropertyFormat=t.PropertyFormat,T.createStringFacetValue=function(e,t){n.isString(t)&&(t={value:t}),t.html||(t.html=p.htmlEncode(t.value)),t.query_expr=t.query_expr||{label:e,description:t.html,regex:"^\\Q"+t.value+"\\E$",path:[]},t.query_expr.id=t.query_expr.id||t.value;var i={html:t.html,query_expr:t.query_expr};return null!=t.count&&(i.count=t.count),i},T.createStringFacetValues=function(e,t){return n.map(t,n.bind(T.createStringFacetValue,T,e))},T.createStringFacet=function(e,t){return e.entries=n.map(t,n.bind(T.createStringFacetValue,T,e.id)),e},T.addFacetValue=function(e,t,i,s){s=n.extend({merge:!0},s);var r,a="facets['"+t+"']",o=e.output;r=o.submodel(a+".entries"),r.load([T.createStringFacetValue(t,{value:i,query_expr:{or:[{label:t,description:i,regex:"^\\Q"+i+"\\E$",path:[]}]}})],s)};var k={parseResult:function(e,i){return e.id=(i.channel&&i.channel.id?i.channel.id+".":"")+i.view_id+"."+e.location,e.channel=i.channel,null!=e.order&&(e.order=t.Properties.parseValue(e.order)),e.properties=t.Properties.parse({},e.properties),e},parseResults:function(e,t){return n.map(e,function(e){return k.parseResult(e,t)})},parsePerServiceDataset:function(e){return e.paging_state&&(e.paging_state.service_id=e.id),e},parseAlternatives:function(e){var t={};return n.each(e,function(e){t[e.id]?n.isArray(t[e.id])?t[e.id].push(e):t[e.id]=[t[e.id],e]:t[e.id]=e}),t},parseFacetEntries:function(e,i){var i=i||{};return k.filterEmptyFacetEntries(n.map(e,function(e){if(e.isUserGenerated=e&&e.query_expr&&b.test(e.query_expr.id),e.properties=t.Properties.parse({},e.properties),e.value&&(e.value=t.Properties.parseValue(e.value)),e.query_expr&&(e.query_expr.path=i.path),e.entries){var s=(i.path||[]).concat(e.query_expr);e.entries=k.parseFacetEntries(e.entries,n.extend({},i,{path:s}))}return e.showAddAnd=(!i.path||i.path.length<1)&&(e.isUserGenerated||e.count)&&(!e.entries||e.entries.length<1),e}))},filterEmptyFacetEntries:function(e){return n.filter(e,function(e){return e.html&&m.trim(e.html)||null!=e.properties})},parseFacet:function(e,t){return e.entries=k.parseFacetEntries(e.entries,t),e},parseFacets:function(e,t){var i={};return n.each(e,function(e){e=k.parseFacet(e,t),i[e.id]?n.isArray(i[e.id])?i[e.id].push(e):i[e.id]=[i[e.id],e]:i[e.id]=e}),i},parseResultSet:function(e,i,s){e=n.clone(e),e.results=k.parseResults(e.results,s),e.per_service_dataset=n.collect(e.per_service_dataset,k.parsePerServiceDataset),null!=e.order_next_result&&(e.order_next_result=t.Properties.parseValue(e.order_next_result));var r="true"===f.getURLParameter("relevance-info");return r&&(e.results=M(e.results)),e.result_pages=k.parseResultPages(e.result_pages,i,s),e},parseResultPages:function(e,i){var s,r=!(!i||!i.paging_failed),a=!1;if(e&&e.pages&&e.pages.length){for(n.each(e.pages,function(e){for(a=a||e.current_page,e.page=e.page_number+1,e.original_page_numbers=[],s=0;s<e.starts.length;s++)e.original_page_numbers.push(e.page_number);e.order=t.Properties.parseValue(e.order)}),s=0;s<e.pages.length-1;s++)e.pages[s].order_range=[e.pages[s].order,e.pages[s+1].order];e.pages[e.pages.length-1].order_range=[e.pages[e.pages.length-1].order,null],r||a||(e.pages[0].current_page=!0),e.onFirstPage=e.pages[0].current_page===!0,e.onLastPage=e.pages[e.pages.length-1].current_page===!0}return e},parse:function(e,i){var s={};i=i||{},e.status_messages&&(s.status_messages=t.StatusMessages.parse(e.status_messages));for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];"resultset"==r?s.resultset=k.parseResultSet(a,s.status_messages,i):"status_messages"==r||("facets"==r?s.facets=k.parseFacets(a,i):"alternatives"==r?s.alternatives=k.parseAlternatives(a,i):s[r]=e[r])}return s&&s.resultset&&n.each(s.resultset.results,function(e){var t=e.order,i=e.group&&e.group.str;t&&(e.properties.order={id:"order",name:"order",data:[{value:t}]}),i&&(e.properties.group={id:"group",name:"group",data:[{value:i}]})}),1==s.estimated_count&&(s.singular=!0),s}},C=T.SearchOutputModel=s.extend({createStringFacetValue:T.createStringFacetValue,createStringFacetValues:T.createStringFacetValues,createStringFacet:T.createStringFacet,getTypeFromPath:function(e){if(!e)return"SearchResponse";if(n.isArray(e)||(e=h.parsePath(e)),0==e.length)return"SearchResponse";if("alternatives"==e[0]){if(1==e.length)return"Alternatives";if(2==e.length)return"Alternative"}if("available_properties"==e[0]&&1==e.length)return"AvailableProperties";if("available_facets"==e[0]&&1==e.length)return"AvailableFacets";if("orderable"==e[0]&&1==e.length)return"Orderables";if("resultset"==e[0]){if(1==e.length)return"ResultSet";if("results"==e[1]){if(2==e.length)return"Results";if(3==e.length)return"Result"}}if("facets"==e[0]){if(1==e.length)return"Facets";if(2==e.length)return"Facet";if(3==e.length&&"entries"==e[2])return"FacetEntries"}return void 0
},getMergeFunctionByType:function(e){if(!e)return void 0;switch(e){case"SearchResponse":return n.bind(this.mergeSearchResponse,this);case"AvailableFacets":return n.bind(this.mergeAvailableFacets,this);case"AvailableProperties":return n.bind(this.mergeAvailableProperties,this);case"ResultSet":return n.bind(this.mergeResultSet,this);case"ResultPages":return n.bind(this.mergeResultPages,this);case"ResultPage":return n.bind(this.mergeResultPage,this);case"Results":return n.bind(this.mergeResults,this);case"Result":return void 0;case"Alternatives":return n.bind(this.mergeAlternatives,this);case"Alternative":return n.bind(this.mergeAlternative,this);case"Orderables":return n.bind(this.mergeOrderables,this);case"Facets":return n.bind(this.mergeFacets,this);case"Facet":return n.bind(this.mergeFacet,this);case"FacetEntries":return n.bind(this.mergeFacetEntries,this)}return void 0},getParseFunctionByType:function(e){if(!e)return void 0;switch(e){case"SearchResponse":return n.bind(this.parseSearchResponse,this);case"ResultSet":return n.bind(this.parseResultSet,this);case"Pages":return n.bind(this.parseResultPages,this);case"Results":return n.bind(this.parseResults,this);case"Result":return void 0;case"Alternatives":return n.bind(this.parseAlternatives,this);case"Alternative":return n.bind(this.parseAlternative,this);case"Facets":return n.bind(this.parseFacets,this);case"Facet":return n.bind(this.parseFacet,this);case"FacetEntries":return n.bind(this.parseFacetEntries,this)}return void 0},mergeResults:function(e,t,i){if(i=i||{},i.resultComparator=i.resultComparator||i.defaultResultComparator||x,!e)return t;if(!t)return e;for(var n,s,r,a=e.length+t.length,o=[],l=0,u=0;o.length<a;)n=l<e.length?e[l]:null,s=u<t.length?t[u]:null,r=n?s?i.resultComparator(n,s,i)<=0:!0:!1,r?(o.push(n),l++):(o.push(s),u++);return o},mergeAlternatives:function(e,t){if(!e)return t;if(!t)return e;var i=this,s={},r=n.union(n.keys(e),n.keys(t));return n.each(r,function(n){s[n]=i.mergeAlternative(e[n],t[n])}),s},mergeOrderables:function(e,t){if(!e||e.length<1)return t;if(!t||t.length<1)return e;var i=n.pluck(e,"name"),s=n.reduce(t,function(e,t){return n.indexOf(i,t.name)<0&&(i.push(t),e.push(t)),e},[].concat(e));return s},mergeAvailableFacets:function(e,i){return t.mergeByName(e,i,"name",this.mergeAvailableFacet)},mergeAvailableProperties:function(e,i){return t.mergeByName(e,i,"name",this.mergeAvailableProperty)},mergeFacets:function(e,t){if(!e)return t;if(!t)return e;var i=this,s={},r=n.union(n.keys(e),n.keys(t));return n.each(r,function(n){s[n]=i.mergeFacet(e[n],t[n])}),s},mergeAlternativeEntries:function(e,t){if(!e)return t;if(!t)return e;var i=n.clone(e);return i.count+=t.count,JSON.stringify(i.query_expr)!=JSON.stringify(t.query_expr)&&(i.query_expr={or:[i.query_expr,t.query_expr]}),i},mergeFacetEntry:function(e,i,s){var s=s||{};if(!s.order_mismatch){if(!e)return i;if(!i)return e}if(!e&&!i)return e;e=null!=e?e:{html:i.html,count:0,query_expr:i.query_expr},i=null!=i?i:{html:e.html,count:0,query_expr:e.query_expr};var r=n.clone(e);r.isUserGenerated=r.isUserGenerated||i.isUserGenerated,r.showAddAnd=r.showAddAnd&&i.showAddAnd,n.isNumber(r.count)?n.isNumber(i.count)&&(r.count+=i.count):r.count=i.count,n.isNumber(r.count)&&delete r.excluded,JSON.stringify(r.query_expr)!=JSON.stringify(i.query_expr)&&(r.query_expr={or:[r.query_expr,i.query_expr],id:r.query_expr.id||i.query_expr.id,path:r.query_expr.path||i.query_expr.path});var a=r.order_criteria,o=r.order_direction,l=s.order_mismatch||!1;if(!l){if(!i.entries)return r;if(!r.entries&&i.entries)return r.entries=i.entries,r.order_criteria=i.order_criteria,r.order_direction=i.order_direction,r}return(null==e.order_criteria||null==i.order_criteria||e.order_criteria!=i.order_criteria)&&(a=null,l=!0),(null==e.order_direction||null==i.order_direction||e.order_direction!=i.order_direction)&&(o=null,l=!0),r.properties=t.Properties.merge(e.properties,i.properties),r.entries=this.mergeFacetEntries(r.entries,i.entries,{order_criteria:a,order_direction:o,order_mismatch:l}),r},mergeAlternative:function(e,t){var i={};e?n.isArray(e)||(e=[e]):e=[],t?n.isArray(t)||(t=[t]):t=[];for(var s=0;s<e.length;++s)i[e[s].name]=e[s];for(var s=0;s<t.length;++s){var r=t[s].name;i[r]=i[r]?this.mergeSingleAlternative(i[r],t[s]):t[s]}for(var a=n.keys(i),o=[],s=0;s<a.length;s++)o[s]=i[a[s]];return 1==o.length?o[0]:o},mergeFacet:function(e,t){var i={};e?n.isArray(e)||(e=[e]):e=[],t?n.isArray(t)||(t=[t]):t=[];for(var s=0;s<e.length;++s)i[e[s].name]=e[s];for(var s=0;s<t.length;++s){var r=t[s].name;i[r]=i[r]?this.mergeSingleFacet(i[r],t[s]):t[s]}for(var a=n.keys(i),o=[],s=0;s<a.length;s++)o[s]=i[a[s]];return 1==o.length?o[0]:o},mergeSingleAlternative:function(e,i){if(!e)return i;if(!i)return e;var s,r=this,a=n.clone(e),o=t.mapByPluck(e.entries,"html"),l=t.mapByPluck(i.entries,"html"),u=n.union(n.keys(o),n.keys(l));return s=n.map(u,function(e){return r.mergeAlternativeEntries(o[e],l[e])}),a.entries=s.sort(function(e,t){return t.count-e.count}),a},mergeSingleFacet:function(e,t){if(!e)return t;if(!t)return e;var i=n.clone(e),s=i.order_criteria,r=i.order_direction,a=!1;return(null==e.order_criteria||null==t.order_criteria||e.order_criteria!=t.order_criteria)&&(s=null,a=!0),(null==e.order_direction||null==t.order_direction||e.order_direction!=t.order_direction)&&(r=null,a=!0),i.count_filtered_facet_values=i.count_filtered_facet_values&&t.count_filtered_facet_values,i.entries=this.mergeFacetEntries(i.entries,t.entries,{order_criteria:s,order_direction:r,order_mismatch:a}),i.configured=e.configured||t.configured,i},getFacetCompareFunction:function(e,i){return"ASCENDING"!==i&&(i="DESCENDING"),n.bind(t.getCompareFunction(e,i),this)},mergeFacetEntries:function(e,i,s){var s=s||{},r=s.order_mismatch;if(!r){if(!e)return i;if(!i)return e}e=e||[],i=i||[];var a,o;s.parent&&(a=s.parent.order_criteria,o=s.parent.order_direction);var l=s.order_criteria||a||"COUNT",u=s.order_direction||o||"DESCENDING",c=[];c=c.concat(n.filter(e,function(e){return null==e.html&&e.properties})),c=c.concat(n.filter(i,function(e){return null==e.html&&e.properties}));var c,h=this,d=t.mapByPluck(e,"html"),p=t.mapByPluck(i,"html"),m=n.union(n.keys(d),n.keys(p));return c=c.concat(n.map(m,function(e){return h.mergeFacetEntry(d[e],p[e],s)})),c=c.sort(this.getFacetCompareFunction(l,u))},mergeResultSet:function(e,t,i,s){if(!e)return t;if(!t)return e;var r=n.clone(e);i=i||{};var a="DESCENDING";e.order_direction==t.order_direction&&null!=e.order_direction&&(a=e.order_direction),i.orderDirection=a,"ASCENDING"==a&&(i.defaultResultComparator=function(){return-x.apply(this,arguments)}),r.results=this.mergeResults(r.results,t.results,i),r.order_next_result=this.mergeOrderNextResult(r.order_next_result,r.per_service_dataset,t.order_next_result,t.per_service_dataset,i);var o="true"===f.getURLParameter("relevance-info");if(o&&(r.results=M(r.results)),n.isArray(r.per_service_dataset)&&n.isArray(t.per_service_dataset)){for(var l={},u=0;u<r.per_service_dataset.length;++u){var c=r.per_service_dataset[u];l[c.id]=c}for(var u=0;u<t.per_service_dataset.length;++u){var c=t.per_service_dataset[u];l[c.id]=c}r.per_service_dataset=n.values(l)}else r.per_service_dataset=r.per_service_dataset?r.per_service_dataset:t.per_service_dataset;return r.prev_avail=r.prev_avail||t.prev_avail,r.next_avail=r.next_avail||t.next_avail,r.result_pages=this.mergeResultPages(r.result_pages,t.result_pages,s,i),r},mergeResultPages:function(e,i,s,r){var a=t.ORDER_TRANSFORMER[r.orderDirection](t.genericCompare),o=!(!s||!s.paging_failed);if(!e)return i;if(!i)return e;if(!(e.pages&&e.pages.length>0))return i;if(!(i.pages&&i.pages.length>0))return e;Math.max(e.pages.length,i.pages.length);var l=e.qeng_ids?e.qeng_ids.length:0,u=i.qeng_ids?i.qeng_ids.length:0,c=n.clone(e);if(c.qeng_ids=c.qeng_ids?c.qeng_ids.concat(i.qeng_ids):i.qeng_ids,o){var h=!1,d=n.flatten(n.pluck(c.qeng_ids,"service_id")),p=s.paging_failed.service_ids;h=0===n.difference(d,p).length}c.pages=this.mergeResultPagesBasedOnOrder(e.pages,l,i.pages,u,a,c.page_size),c.page_count=c.pages?c.pages.length:0,c.more_avail=c.more_avail||i.more_avail;var m=!1;return n.each(c.pages,function(e){e.current_page&&(m&&delete e.current_page,m=!0)},[]),c.onFirstPage=c.pages[0].current_page===!0,c.onLastPage=c.pages[c.pages.length-1].current_page===!0,c},mergeResultPagesBasedOnOrder:function(e,t,i,s,r,a){for(var o,l,u,c,h,d,p,m=[],f=0,g=0;f<e.length||g<i.length;)if(o=f<e.length&&e[f],l=g<i.length&&i[g],o)if(l)if(null===o.order_range[1]||null===l.order_range[1]||r(o.order_range[0],l.order_range[0])>=0&&r(o.order_range[0],l.order_range[1])<=0||r(l.order_range[0],o.order_range[0])>=0&&r(l.order_range[0],o.order_range[1])<=0){for(u=0,c=0,d=f;d<e.length&&e[d].original_page_numbers[0]===o.original_page_numbers[0];d++){for(p=g;p<i.length&&i[p].original_page_numbers[0]===l.original_page_numbers[0];p++)m.push(this.mergeResultPage(o,t,l,s,r)),u>0&&(m[m.length-1].offset=u),u+=a;c++}for(h=0,p=g;p<i.length&&i[p].original_page_numbers[0]===l.original_page_numbers[0];p++)m.push(this.mergeResultPage(o,t,l,s,r)),m[m.length-1].offset=u,u+=a,h++;f+=c,g+=h}else r(e[f].order,i[g].order)<0?(m.push(this.mergeResultPage(o,t,null,s,r)),f+=1):(m.push(this.mergeResultPage(null,t,l,s,r)),g+=1);else m.push(this.mergeResultPage(o,t,null,s,r)),f+=1;else m.push(this.mergeResultPage(null,t,l,s,r)),g+=1;return n.each(m,function(e,t){e.page_number=t,e.page=e.page_number+1}),m},nonNullOrMinValue:function(e,i,n){return null===e?i:null===i?e:t.Properties.minValue(e,i,n)},mergeResultPage:function(e,i,s,r,a){e||(e={starts:new Array(i),counts:new Array(i),order:null,order_range:[null,null],original_page_numbers:new Array(i)}),s||(s={starts:new Array(r),counts:new Array(r),order:null,order_range:[null,null],original_page_numbers:new Array(r)});var o={starts:e.starts.concat(s.starts),counts:e.counts.concat(s.counts),page_number:n.isNumber(e.page_number)?e.page_number:s.page_number,original_page_numbers:e.original_page_numbers.concat(s.original_page_numbers),order:this.nonNullOrMinValue(e.order,s.order,a),page:e.page||s.page,order_range:[this.nonNullOrMinValue(e.order_range[0],s.order_range[0],a),t.Properties.minValue(e.order_range[1],s.order_range[1],t.ORDER_TRANSFORMER.DESCENDING(a))]};return(e.current_page||s.current_page)&&(o.current_page=!0),o},mergeOrderNextResult:function(e,i,n,s,r){return e?n?t.ORDER_TRANSFORMER[r.orderDirection](t.genericCompare)(e,n)<0?e:n:e:n},mergeSearchResponse:function(e,i,s){e=e||{},i=i||{};var r;return e.search_request?(r=n.clone(e),r.status_messages=t.StatusMessages.merge(r.status_messages,i.status_messages),n.isUndefined(i.estimated_count)||(r.estimated_count=r.estimated_count?r.estimated_count+i.estimated_count:i.estimated_count),r.available_facets=this.mergeAvailableFacets(r.available_facets,i.available_facets),r.available_properties=this.mergeAvailableProperties(r.available_properties,i.available_properties),r.resultset=this.mergeResultSet(r.resultset,i.resultset,s,r.status_messages),r.facets=this.mergeFacets(r.facets,i.facets),r.orderable=this.mergeOrderables(r.orderable,i.orderable),r.alternatives=this.mergeAlternatives(r.alternatives,i.alternatives,s),r.search_request&&(r.show_query_spelling_alternatives=!r.estimated_count||r.extimated_count<=r.search_request.alternatives_query_spelling_max_estimated_count),r.order_direction_available=r.order_direction_available===!0&&i.order_direction_available===!0):(r=n.clone(i),r.status_messages=t.StatusMessages.merge(r.status_messages,i.status_messages)),r},merge:function(e,t,i){var i=i||{};if(null!=i.path){var s=this.getTypeFromPath(i.path);if(!s)throw new Error("Merge failed. Unable to detect type from path "+JSON.stringify(i.path));var r=this.getMergeFunctionByType(s);return i=n.clone(i),delete i.path,r(e,t,i)}return this.mergeSearchResponse.apply(this,arguments)}});n.extend(C.prototype,k);var L={parse:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&("facets"===i||"properties"===i?t[i]=this.parsePropertyDefinitions(e[i]):"boostings"===i?t[i]=this.parseBoostings(e[i]):"user"===i?(t[i]=this.parseUser(e[i]),t[i].query&&(t[i].query=this.parseQueryExpr(t[i].query))):t[i]="source_context"===i?this.parseConstraints(e[i]):"pattern_constraints"==i?this.parsePatternConstraints(e[i]):e[i]);return t},jsonifyPropertyDefinitions:function(e){var i=this;return n.map(t.propertyListToArray(e,"name"),function(e){return n.isEmpty(e.properties)?e.properties&&delete e.properties:e.properties=i.jsonifyPropertyDefinitions(e.properties),e})},jsonifyConstraints:function(e){var i=n.clone(e);return i.constraints=t.propertyListToArray(i.constraints),i.constraints=n.map(i.constraints,function(e){return e=n.clone(e),e.filtered=t.propertyListToArray(e.filtered),e.filtered||delete e.filtered,e.filter_base=t.propertyListToArray(e.filter_base),e.filter_base||delete e.filter_base,e}),i},jsonifyPatternConstraints:function(e){var i=this,s=n.clone(e);return s=t.propertyListToArray(s),s=n.map(s,function(e){return e=n.clone(e),e.source&&(e.source.filtered=t.propertyListToArray(e.source.filtered),e.source.filtered?e.source.filtered=n.map(e.source.filtered,function(e){return i.jsonifyQueryExpr(e)}):delete e.source.filtered,e.source.filter_base=t.propertyListToArray(e.source.filter_base),e.source.filter_base?e.source.filter_base=n.map(e.source.filter_base,function(e){return i.jsonifyQueryExpr(e)}):delete e.source.filter_base),e})},jsonifyQueryExpr:function(e){var i=this,s=n.clone(e);return n.each(n.keys(s),function(e){if("and"==e||"or"==e){var r=s[e];n.isObject(r)&&!n.isArray(r)&&(r=t.propertyListToArray(r)),s[e]=n.map(r,i.jsonifyQueryExpr,i)}}),s},parsePropertyDefinitions:function(e){var i=this;return t.arrayToPropertyList(n.map(e,function(e){return n.isArray(e.properties)&&(e.properties=i.parsePropertyDefinitions(e.properties)),e}),"name")},parseBoostings:function(e){return t.arrayToPropertyList(e)},parsePatternConstraints:function(e){var i=this,s=n.clone(e);return s=t.arrayToPropertyList(s),s=n.map(s,function(e){return e=n.clone(e),e.source&&(e.source.filtered=t.arrayToPropertyList(e.source.filtered),e.source.filtered?e.source.filtered=n.map(e.source.filtered,function(e){return i.jsonifyQueryExpr(e)}):delete e.source.filtered,e.source.filter_base=t.arrayToPropertyList(e.source.filter_base),e.source.filter_base?e.source.filter_base=n.map(e.source.filter_base,function(e){return i.jsonifyQueryExpr(e)}):delete e.source.filter_base),e})},parseConstraints:function(e){var i=n.clone(e);if(!i.constraints)return i;if(n.isArray(i.constraints)){for(var s=0;s<i.constraints.length;++s){var r=i.constraints[s];r.filtered&&n.isArray(r.filtered)&&(r.filtered=t.arrayToPropertyList(r.filtered)),r.filter_base&&n.isArray(r.filter_base)&&(r.filter_base=t.arrayToPropertyList(r.filter_base))}i.constraints=t.arrayToPropertyList(i.constraints)}return i},parseQueryExpr:function(e){var i=this,s=n.clone(e);return n.each(n.keys(s),function(e){if("and"==e||"or"==e){var r=s[e];n.isArray(r)&&(r=t.arrayToPropertyList(r)),n.isObject(r)&&(s[e]=i.parseQueryExpr(r)),s[e]=r}}),s},parseUser:function(e){if(!e)return e;var t=this.parseConstraints(e);return e.query&&(t.query=this.parseQueryExpr(e.query)),t},jsonifyBoostings:function(e){return t.propertyListToArray(e)},jsonify:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&("facets"===i||"properties"===i?t[i]=this.jsonifyPropertyDefinitions(e[i]):"boostings"===i?t[i]=this.jsonifyBoostings(e[i]):"user"===i?(t[i]=this.jsonifyConstraints(e[i]),t[i].query&&(t[i].query=this.jsonifyQueryExpr(t[i].query))):t[i]="source_context"===i?this.jsonifyConstraints(e[i]):"pattern_constraints"==i?this.jsonifyPatternConstraints(e[i]):e[i]);return t}},D=T.SearchInputModel=r.extend({toJSON:function(e){if(null==e)var e=this.attributes;e=n.clone(e);var t=this.jsonify(e);return t},initialize:function(){null==this.get("sort_date_facets_by_value")&&this.set("sort_date_facets_by_value",!0,{silent:!1}),r.prototype.initialize.apply(this,arguments)}});n.extend(D.prototype,L);var E=T.SearchServiceStub=u.extend({path:"search",call:function(e,t,i){var s,r=n.clone(t);if(r.path=this.path,r.paging_states=n.select(r.paging_states,function(t){return t&&t.service_id===e.id}),r.result_pages){if(s=this.filterResultPages(r.result_pages,e.id),!s)return;if(s.emitResponse)return this.emitSuccessResponse({status_messages:[{id:"paging_failed",hidden:!0}],search_request:r,resultset:{result_pages:s.result_pages}},e,i);r.result_pages=s.result_pages}return u.prototype.call.apply(this,[e,r,i])},emitSuccessResponse:function(e,t,i){var n=new v.DeferredCallFinished(t);return setTimeout(function(){t.success(e,n,i)}),n},filterResultPages:function(e,t){if(e){var i,s=[],r=!1,a=n.select(e.qeng_ids,function(e,i){return e.service_id===t?(s.push(i),!0):void 0},[]);if(!(s.length<1)&&(e=n.clone(e),e.qeng_ids=a,i=n.find(e.pages,function(e){return e.current_page})))return i=n.clone(i),i.starts=y(i.starts,s),i.counts=y(i.counts,s),delete i.order,i.page_number=i.original_page_numbers[s[0]],n.isNumber(i.starts[0])&&(r=!0),r?(e.pages=[i],{result_pages:e}):(e.pages=n.select(n.map(e.pages,function(e){return e=n.clone(e),e.starts=y(e.starts,s),e.counts=y(e.counts,s),e.original_page_numbers=y(e.original_page_numbers),e}),function(e){return e.counts.length&&n.isNumber(e.starts[0])&&!e.offset}),n.each(e.pages,function(e,t){e.page_number=t}),{emitResponse:!0,result_pages:e})}}}),S=T.PagingCache=function(){this.initialize.apply(this,arguments)};S.prototype={MAX_PAGES:1,initialize:function(e){this.reset=n.bind(this.reset,this),e.listenTo(e,"change",this.reset),this.reset()},reset:function(){var e;if(this.modelIdSet=[],this.models)for(e=0;e<this.models.length;e++)this.cleanupModel(this.models[e]);this.models=[]},at:function(e){return this.models[e]},set:function(e,t){var i=n.indexOf(this.modelIdSet,t.cid);i>=0&&this.modelIdSet.splice(i,1),this.modelIdSet.push(t.cid),this.models[e]=t,this.cleanup()},cleanup:function(){var e,t;if(this.modelIdSet.length>this.MAX_PAGES)for(e=this.modelIdSet.splice(0,this.modelIdSet.length-this.MAX_PAGES),t=0;t<this.models.length;t++)this.models[t]&&n.contains(e,this.models[t].cid)&&(this.cleanupModel(this.models[t]),delete this.models[t])},cleanupModel:function(e){e&&e.destroy()}};var A=T.ResultCollection=function(e,t){this.cid=n.uniqueId("c"),this.options=t||{},this.options.nestedProperties=this.options.nestedProperties||["mes:nested"],this._updateProperties(e||{}),this._modelMap={},this.models=[]};n.extend(A.prototype,i.Events,{_updateProperties:_,setView:function(e){this.searchModel=e,this.options.enableImmediateDisplayOfFederatedResults=e&&e.options&&e.options.enableImmediateDisplayOfFederatedResults,this.resultset=e.submodel("resultset"),this.options.enableImmediateDisplayOfFederatedResults?this.listenTo(this.resultset.output,"change",this._onChangeOutput):(this.listenTo(this.searchModel,"computed",function(){this.done=!0,clearTimeout(this.timeout),this._onChangeOutput(this.resultset.output)}),this.listenTo(this.searchModel,"change",function(){this.changed=!0,this.done||new Date-this.startTime>T.DISPLAY_TIMEOUT&&(t._onChangeOutput(t.resultset.output),t.trigger("updated"))}),this.listenTo(this.searchModel,"compute",function(){this.done=!1,this.changed=!1,this.startTime=new Date,clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.done&&t.changed&&(t._onChangeOutput(t.resultset.output),t.trigger("updated"))},T.DISPLAY_TIMEOUT)}),this.listenTo(this.searchModel,"reset",function(){this.done=!0}));var t=this;this.listenTo(this.resultset.output,"reset",this._onResetOutput),this._onChangeOutput(this.resultset.output)},change:function(e){e=e||{},this.searchModel&&this.searchModel.updateResultCollection(this,e)},addProperty:function(e,t){for(var i=n.keys(e),s=0;s<i.length;++s){var r=i[s];this.originalProperties[r]=e[r]}i.length>0&&(this._updateProperties(this.originalProperties),this.change(t))},removeProperty:function(e,t){this.originalProperties[e]&&(delete this.originalProperties[e],this._updateProperties(this.originalProperties),this.change(t))},setProperties:function(e,t){this._updateProperties(e),this.change(t)},dispose:function(){this.stopListening(),this.searchModel&&this.searchModel.removeResultCollection(this),this.resultset&&this.resultset.dispose(),this.searchModel=null},clear:function(e){for(var t=0;t<this.models.length;t++){var i=this.models[t];i&&(i.output.id,i.trigger("remove",i,this,e),this.stopListening(i),i.destroy())}this._modelMap={},this.models=[]},_modelEvent:function(e,t,i){("add"!=e&&"remove"!=e||i==this)&&this.trigger.apply(this,arguments)},_onResetOutput:function(){this.trigger("reset",this),this.options.enableImmediateDisplayOfFederatedResults||this._onChangeOutput()},_onChangeOutput:function(e,i){try{var s=e&&e.get("results")||[],u=e&&e.get("result_pages.page_size"),c=e&&e.get("order_direction")||"DESCENDING",h=[],d=[],p={},m=n.map(this.models,function(e){return e.get("id")}),f=[].concat(this.models);u&&this.options.limitToPageSize&&(s=s.slice(0,u));var g=e&&e.get("order_next_result"),v=(t.ORDER_TRANSFORMER[c]||t.ORDER_TRANSFORMER.DESCENDING)(t.genericCompare);(this.options.enableImmediateDisplayOfFederatedResults||void 0===g)&&(v=function(){return 1});for(var _=0;_<s.length&&(void 0===s[_].order||null===s[_].order||v(g,s[_].order)>=0||s[_]._displayed);++_){var y=s[_];y._displayed=!0;var b={},w={};if(b.id=y.id,b.location=y.location,b["mes:group"]=y.group,y.properties){var x=n.keys(this.originalProperties),M=this;n.each(x,function(e){var t=M.originalProperties[e],i=t.root;t.path;var n=t.format,s=y.properties[i];void 0!==s&&(b[i]=s),w[e]={format:n}});var T=this._modelMap[y.id],k=n.indexOf(m,y.id);if(T&&k==_&&n.isEqual(y.group,T.get("mes:group")))T.output._source!=y&&(T.output.reset(b,i),T.output._source=y),f=n.without(f,T);else{var C=new l(b,{propertyDefinitions:w});C._source=y;var L,D=null;null!=this.searchModel?(D=this.searchModel.wiring,L=this.searchModel.input):(D=new o(new r,C),L=D.input),T=new a(D,{input:L,output:C}),this.listenTo(T,"all",this._modelEvent),d.push(T)}T.channel=y.channel,h.push(T),p[y.id]=T}}for(var _=0;_<s.length;++_)p[s[_].id]||delete s[_]._displayed;this.models=h,this._modelMap=p;for(var E=0;E<f.length;E++){var T=f[E];T&&(T.output&&(T.output._source=null),T.trigger("remove",T,this,i),this.stopListening(T),T.destroy())}for(var E=0,S=0;S<h.length;S++){var T=h[S];d[E]==T&&(E++,T.trigger("add",T,this,n.extend({at:S},i)))}n.forEach(this.models,function(e,t){e.position=t})}catch(A){throw console&&console.error&&console.error("Error occured.",A.stack),A}},get:function(e){return this._modelMap[e]}});var P="value",O=T.FacetValueCollection=function(e,t,i){this.cid=n.uniqueId("c"),this.facets={},this.name=e,this.facets[e]=t[P]?{format:t[P].format}:{format:"HTML"},i=i||{},this.comparator=i.comparator,this.usePath=i.usePath,this.options=i,this._updateProperties(t||{}),this._modelMap={},this.models=[]};n.extend(O.prototype,i.Events,{_updateProperties:_,setView:function(e){this.searchModel=e,this.facet=e.submodel(["facets",this.name]),this.listenTo(this.facet.output,"change",this._onChangeOutput),this.listenTo(this.facet.output,"reset",this._onResetOutput),this._onChangeOutput(this.facet.output)},dispose:function(e){this.facet.dispose(),this.stopListening(),this.view&&this.view.removeFacet(this,e),this.view=null},clear:function(e){for(var t=0;t<this.models.length;t++){var i=this.models[t];i&&(i.output.id,i.trigger("remove",i,this,e),this.stopListening(i),i.destroy())}this._modelMap={},this.models=[]},_modelEvent:function(e,t,i){("add"!=e&&"remove"!=e||i==this)&&this.trigger.apply(this,arguments)},_onResetOutput:function(){this.trigger("reset",this)},_onChangeOutput:function(e){try{for(var t={},i=(this.usePath?e.get(["facets",this.name,"entries"]):e.get("entries"))||[],r=(this.usePath?e.get(["facets",this.name,"order_criteria"]):e.get("order_criteria"))||"COUNT",o=[],u=[],c={},h={},d=void 0,p=0;p<i.length;++p){var m=i[p],f=n.clone(m);switch(void 0===d&&(d=n.isDate(f[P])?"Date":n.isString(f[P])?"String":"unknown"),f.facet=this.name,this.facets[this.name].format){case"HTML":f[P]=f.html;break;case"VALUE":f[P]=f[P];break;default:f[P]=f.html}f.id=f[P];var v=f.entries,_=this.name+"."+f.id,y={facets:{}};y.facets[_]={entries:v},y=new s(y),f.entries&&(f.entries=new O(_,this.properties,{comparator:this.comparator,usePath:!0}));var b=this._modelMap[f.id];if(b&&"COUNT"==r&&(f.excluded||b.count==f.count))b.get("entries")?(b.get("entries")._onChangeOutput(y),f.entries=b.get("entries")):f.entries&&f.entries._onChangeOutput(y),(b.output||b).reset(f);else{f.entries&&f.entries._onChangeOutput(y),b&&(h[f.id]=b);var w=l.fromAttsAndProperties(f,f.properties,this.originalProperties);b=null==this.searchModel||null==this.searchModel.wiring?w:new a(this.searchModel.wiring,{input:this.searchModel.input,output:w}),this.options.attributeDefinitions&&(b=new g(b,this.options.attributeDefinitions)),this.listenTo(b,"all",this._modelEvent),u.push(b)}o.push(b),c[f.id]=b}this._modelMap;var x=this.models;if(this.models=o,this._modelMap=c,this.sort(),this.options.allFacetValueAttributes){var M=new s(this.options.allFacetValueAttributes);this.listenTo(M,"all",this._modelEvent),this.options.attributeDefinitions&&(M=new g(M,this.options.attributeDefinitions)),u.push(M),o.unshift(M),c[this.options.allFacetValueAttributes.id]=M}for(var T=0;T<x.length;T++){var b=x[T];if(b){var k=(b.output||b).id;(!c[k]||h[k])&&(b.trigger("remove",b,this,t),this.stopListening(b),b.destroy&&b.destroy())}}for(var T=0,C=0;C<o.length;C++){var b=o[C];u[T]==b&&(T++,b.trigger("add",b,this,n.extend({at:C},t)))}this.dataType=d,this.models=o,this._modelMap=c,n.forEach(this.models,function(e,t){e.position=t})}catch(L){throw console.error("Error occured.",L.stack),L}},sort:function(e){return this.comparator?(n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e&&e.silent||this.trigger("sort",this,e),this):void 0},add:function(e,t){var i=e.id||e.get("id");this._modelMap[i]=e;var s=this.models.length;this.listenTo(e,"all",this._modelEvent),this.models.push(e.trigger("add",e,this,n.extend({at:s},t)))},get:function(e){return this._modelMap[e]},at:function(e){return this.models[e]},each:function(e){if(e){var t=n.keys(this._modelMap),i=this;n.each(t,function(t){e(i._modelMap[t],t)})}}});var N=function(){function e(){t.apply(this,i)}var t=this,i=arguments;return e.prototype=t.prototype,new e},I=a.extend({type:"view",remove:function(){},initialize:function(){var e={};this.aggregations=e,this.facetNames={},this.resultProperties={},this.pagesMaxPageCount={}},createResultCollection:function(){return N.apply(A,arguments)},createFacetValueCollection:function(){return N.apply(O,arguments)},addResultCollection:function(e,t){t=t||{},null!=e&&null!=e.cid&&(this.resultProperties[e.cid]||(this.resultProperties[e.cid]=e,e.setView(this),t=n.extend({},t,{add:!0}),this._computeChangesToDefinition("properties",this.resultProperties,t)))},addFacet:function(e,t){t=t||{},null!=e&&null!=e.cid&&(this.facetNames[e.cid]||(this.facetNames[e.cid]=e,e.setView(this),t.addToFacets!==!1&&(t=n.extend({},t,{add:!0}),this._computeChangesToDefinition("facets",this.facetNames,t))))},updateMaxPageCount:function(){var e=n.max(n.values(this.pagesMaxPageCount));0>=e?this.input.set("max_page_count",null,{unset:!0}):this.input.set("max_page_count",e)},getPagesModel:function(e){var t,i=this,n=e.maxPageCount||10,r=new s,o=this.output.submodel("resultset.result_pages"),l="computed";return o.on("reset",function(){r.load({})}),this.on(l,function(){var e=d(o.get());e&&e.pages&&(e.pages=e.pages.slice(0,n),e.more_avail=e.more_avail||e.pages.length>n,e.onFirstPage=e.pages[0].current_page===!0,e.onLastPage=e.pages[e.pages.length-1].current_page===!0),r.load(e)}),t=new a(this.wiring,{input:this.input.submodel("result_pages"),output:r}),t.loadPage=function(e){i.loadPage(e)},t.dispose=function(){delete i.pagesMaxPageCount[t.cid],i.updateMaxPageCount(),o.dispose(),a.prototype.dispose.apply(this,arguments)},this.pagesMaxPageCount[t.cid]=n,this.updateMaxPageCount(),t},clone:function(){var e=this.input.clone();return(new Y).createModel(this.wiring.channel,{silent:!0,input:e,output:new C})},removeResultCollection:function(e,t){null!=e&&null!=e.cid&&(delete this.resultProperties[e.cid],this._computeChangesToDefinition("properties",this.resultProperties,t))},removeFacet:function(e,t){null!=e&&null!=e.cid&&(delete this.facetNames[e.cid],e.clear(),e.stopListening(),this._computeChangesToDefinition("facets",this.facetNames,t))},updateResultCollection:function(e,t){this._computeChangesToDefinition("properties",this.resultProperties,t)},_computeChangesToDefinition:function(e,t,i){try{for(var i=i||{},s=this.input.get(e)||[],r=n.pluck(n.values(t),e),a="formats",o="format",l={},u=!1,c=0;c<r.length;++c)for(var h=r[c],d=n.keys(h),p=0;p<d.length;++p){var m=d[p],f=[];h[m][a]?f=h[m][a]:h[m][o]&&f.push(h[m][o]);var g=l[m];g?l[m][a]=n.union(g[a],f):l[m]={formats:f},h[m]&&h[m].properties&&(l[m].properties=n.extend(l[m].properties||{},h[m].properties)),null==s[m]&&(u=!0)}if(!u){var v=n.keys(s),_=n.keys(l);u=v.length==_.length?0!=n.difference(v,_).length:!0}if(!u)for(var d=n.keys(l),c=0;c<d.length;c++){var m=d[c],y=s[m][a],b=l[m][a];if(y.length!=b.length||0!=n.difference(y,b).length){u=!0;break}}u?(i.add||this.input.exists())&&this.input.set(e,l,i):i.silent||this.input.change()}catch(w){console&&console.log&&console.log(w)}},updateWithPage:function(e,t){if(this._updateWithPageSearchModelCid===e.cid){var i=n.uniqueId("m"),s=e.get();this.output&&this.output.attributes&&this.output.attributes.resultset&&(s&&s.resultset&&s.resultset.next_avail||(this.output.attributes.resultset.next_avail=!1)),n.each(s&&s.resultset&&s.resultset.results,function(e){e.modelId=i});var r=n.clone(s.resultset);if(r){if(this.output.attributes.resultset&&(r.order_direction=this.output.attributes.resultset.order_direction,delete this.output.attributes.resultset.results,delete this.output.attributes.resultset.order_next_result,n.each(this.output.attributes.resultset.result_pages.pages,function(e){e.current_page=t.page_number===e.page_number}),t.offset)){var a;n.each(this.output.attributes.resultset.result_pages.pages,function(e){e.current_page&&(delete e.current_page,a=!0),a&&e.offset===t.offset&&(e.current_page=!0,a=!1)})}r.results=r.results.slice(t.offset||0,(t.offset||0)+r.result_pages.page_size),r.order_next_result=void 0,delete r.result_pages,this.output.submodel("resultset").load(r,{parse:!1,merge:!0})}}},loadPage:function(e){var t,i=this,s=e.page,r=d(this.output.get("resultset.result_pages")),a=r.pages[s];return n.each(r.pages,function(e){delete e.current_page}),a.current_page=!0,this._currentPage=a,i.input&&i.input.validate&&!i.input.validate()?void 0:(e.disablePropagateComputing||this.trigger("computing"),t=this.clone(),this._updateWithPageSearchModelCid=t.cid,this.onComputedOrTimeout(t,function(e){i.updateWithPage(e,i._currentPage)},T.DISPLAY_TIMEOUT),t.on("computed",function(){e.disablePropagateComputing||i.trigger("computed"),t.off(),e.computedCallback&&e.computedCallback()}),t.set("facets",[],{silent:!0}),t.set("result_pages",r),t)},onComputedOrTimeout:function(e,t,i){var n=!1,s=!1,r=new Date,a=setTimeout(function(){!n&&s&&t(e)},i);e.on("computed",function(){n=!0,clearTimeout(a),t(e)}),e.on("change",function(){s=!0,n||new Date-r>i&&t(e)})},previousPage:function(e){this._page("PREVIOUS",e)},nextPage:function(e){if(e=e||{},e.append===!0){var t=this,i=this.clone();if(t.input&&t.input.validate&&!t.input.validate())return;e.disablePropagateComputing||this.trigger("computing"),this.once("computing",function(){i.off()});var s=n.uniqueId("m"),r=function(){var e=i.get();if(t.output&&t.output.attributes&&t.output.attributes.resultset&&(e&&e.resultset&&e.resultset.next_avail||(t.output.attributes.resultset.next_avail=!1)),n.each(e&&e.resultset&&e.resultset.results,function(e){e.modelId=s}),!t.input||!t.input.validate||t.input.validate()){var r=e.resultset;
t.output.attributes.resultset&&(t.output.attributes.resultset.order_next_result=r.order_next_result),r&&delete r.result_pages,t.output.submodel("resultset").load(r,{parse:!1,merge:!0,resultComparator:function(e,i,n){if(t.options.enableImmediateDisplayOfFederatedResults){if(e.modelId!==i.modelId){if(e.modelId===s)return 1;if(i.modelId===s)return-1}}else if(e._displayed!==i._displayed)return e._displayed?-1:1;return n&&n.defaultResultComparator?n.defaultResultComparator.apply(t,arguments):x.apply(t,arguments)}}),r&&delete r.results}};return this.options.enableImmediateDisplayOfFederatedResults?i.on("change",r):this.onComputedOrTimeout(i,r,T.DISPLAY_TIMEOUT),i.on("computed",function(){e.disablePropagateComputing||t.trigger("computed"),i.off(),i.destroy(),e.computedCallback&&e.computedCallback()}),i.set("facets",[],{silent:!0}),i.set("paging_states",t.get("resultset.per_service_dataset.paging_state"),{silent:!0}),i.set("paging",{direction:"NEXT"}),i}this._page("NEXT",e)},_page:function(e){this.set("paging_states",this.get("resultset.per_service_dataset.paging_state"),{silent:!0}),this.set("paging",{direction:e})},setSelectedFacetValues:function(e,t,i){var s=this.submodel("user.constraints"),r={};n.each(t,function(t){r[t]={label:e,regex:"^\\Q"+t+"\\E$",description:t,id:t,value:{str:t}}}),s.set("filter_"+e,{label:e,filter_base:r,filtered_name:i}),s.destroy()},getViewById:function(){return this}}),Y=T.ServiceFactory=function(){};return n.extend(Y.prototype,c.prototype,{createInput:function(e,t){return new D(e,t)},createOutput:function(e,t){var i=new C(e,t);return this.proxyEvent({load:"loadoutput"},i),i},createModel:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new E,t.defaultResponseOptions={};var i=new I(this.createWiring(e,t),t);return this.proxyEvent("compute",i),i}}),T.SearchRequest=L,T.SearchResponse=k,T.and=function(){var e=Array.prototype.slice.apply(arguments);if(e.length<1)return null;if(1===e.length)return e;var t=[];return n.each(e,function(e){e&&(e.and&&1===n.keys(e).length?t=t.concat(e.and):t.push(e))}),{and:t}},T}),Mindbreeze.define("api/v2/preview",["i18n/i18n","api/v2/common","api/v2/search","backbone","underscore","model/tree","model/readonlytree","service/stub","service/factory"],function(e,t,i,n,s,r,a,o,l){var u={},c=u.PreviewResponse={parseResult:function(e){return e=s.clone(e),e.properties=t.Properties.parse({},e.properties),e},parse:function(e){return e=s.clone(e),e.result&&(e.result=c.parseResult(e.result)),e.status_messages=t.StatusMessages.parse(e.status_messages),e}},h=u.PreviewServiceStub=o.extend({path:"preview",call:function(e,t,i){return o.prototype.call.apply(this,[e,t,i])}}),d=u.PreviewInputModel=r.extend({toJSON:function(){var e=this.attributes,t=s.clone(e);return t.query_expr&&(t.query_expr=i.SearchRequest.jsonifyQueryExpr(t.query_expr)),t.properties&&(t.properties=i.SearchRequest.jsonifyPropertyDefinitions(t.properties)),t}}),p=u.PreviewOutputModel=a.extend({parse:function(e){return e=s.clone(e),e=u.PreviewResponse.parse(e)}}),m=u.ServiceFactory=function(){};return s.extend(m.prototype,l.prototype,{call:function(e,t,i,r){var a=(new h,this.createOutput());if(r=r||{},s.isFunction(i)){var o=this._responseObserver={};s.extend(o,n.Events),o.traceContext=r.traceContext,this._responseObserver.on("response",function(e){var t=c.parse(e);a.reset(t);try{i(a)}catch(n){console&&console.error&&console.error(n,n.stack)}}),this._responseObserver.on("error",function(e){try{i(null,e)}catch(t){console&&console.error&&console.error(t,t.stack)}})}(new h).call(e,t,o)},createInput:function(e,t){return new d(e,t)},createOutput:function(e,t){return new p(e,t)}}),u}),Mindbreeze.define("api/v2/suggest",["i18n/i18n","api/v2/common","api/v2/search","backbone","underscore","model/tree","model/readonlytree","service/stub","service/factory","model/computed"],function(e,t,i,n,s,r,a,o,l,u){var c={},h={mergeResult:function(e,t){if(null==e)return t;if(null==t)return e;var i=s.clone(e);return i.score+=t.score,i},merge:function(e,t){if(!e)return t;if(!t)return e;if(!t.results)return e;for(var i=s.keys(t.results),n=s.clone(e.results)||{},r=0;r<i.length;r++){var a=i[r];n[a]=h.mergeResult(n[a],t.results[a])}for(var o=s.sortBy(s.keys(n),function(e){return-n[e].score}),l={},r=0;r<o.length;++r){var u=o[r];l[u]=n[u]}var c=s.clone(e);return c.results=l,c},parseResults:function(e){for(var t={},i=0;i<e.length;++i)t[e[i].value]=e[i];return t},parse:function(e){var i=s.clone(e);return e.results&&(i.results=h.parseResults(e.results)),i.status_messages=t.StatusMessages.parse(e.status_messages),i}},d=c.SuggestInputModel=r.extend({toJSON:function(){var e=this.attributes,t=s.clone(e);return t.property_constraint&&(t.property_constraint=i.SearchRequest.jsonifyQueryExpr(t.property_constraint)),t}}),p=c.SuggestServiceStub=o.extend({path:"suggest"}),m=c.ServiceFactory=function(){};return s.extend(m.prototype,l.prototype,{prepareRequest:function(e){if(e=s.clone(e),e.source_context&&e.source_context.constraints){var i=t.propertyListToArray(e.source_context.constraints);s.each(i,function(e){e.filter_base&&(e.filter_base=t.propertyListToArray(e.filter_base)),e.filtered&&(e.filtered=t.propertyListToArray(e.filtered))}),e.source_context.constraints=i}return e},call:function(e,t,i,r){if(new p,this.createOutput(),t=this.prepareRequest(t),s.isFunction(i)){var a=null,o=null,l={traceContext:r&&r.traceContext};s.extend(l,n.Events),l.on("response",function(e){var t=h.parse(e);a=h.merge(a,t)}),l.on("error",function(e){o||(o=[]),o.push(e)});var u=(new p).cast(e,t,l);u.always(function(){try{i(a,o)}catch(e){console&&console.error&&console.error(e,e.stack)}})}},createInput:function(e,t){return new d(e,t)},createModel:function(e,t){return t=t||{},t.serviceStub=t.serviceStub||new p,t.defaultResponseOptions={},new u(this.createWiring(e,t),t)}}),c}),Mindbreeze.define("api/v2/sourceinfo",["i18n/i18n","api/v2/common","backbone","underscore","model/readonlytree","service/stub","service/factory","utils/clone"],function(e,t,i,n,s,r,a,o){var l={},u=l.SourceInfoResponse={parseResult:function(e){return e=n.clone(e),e.properties=t.Properties.parse({},e.properties),e},parse:function(e,i){var s={};return i=n.extend({},i,{response:e}),s.sources=u.parseSources(e.sources,i),s.status_messages=t.StatusMessages.parse(e.status_messages),s.user_name=u.parseUserName(e.user_name,i),s},parseUserName:function(e){return e?e:void 0},parseSources:function(e,t){var i={};for(var s in e)if(e.hasOwnProperty(s)){var r=e[s];"sources"==s?i.sources=n.reduce(r,function(e,i){return e[i.id]=u.parseSource(i,t),e},{}):"data_sources"==s?i.data_sources=u.parseDataSources(r,t):"constraints"==s?i.constraints=u.parseConstraints(r,t):i[s]=e[s]}return u.appendDataSourcesToSources(i),u.appendConstraintsToDataSources(i),i},appendDataSourcesToSources:function(e){n.each(e.data_sources,function(t){n.each(t.source_ids,function(i){var n=e.sources[i];n&&(n.data_sources=n.data_sources||{},n.data_sources[t.name]=o(t))})})},appendConstraintsToDataSources:function(e){n.each(e.constraints,function(t){n.each(t.data_source_ids,function(i){n.each(e.data_sources,function(e){n.find(e.ids,function(e){return e===i})&&(e.constraints=e.constraints||{},e.constraints[t.name]=o(t))})})})},parseDataSources:function(e,t){t=t||{};var i=n.reduce(e,function(e,i){return e[i.name]=u.parseDataSource(i,t),e},{});return i=u.sortDataSources(i,t)},parseConstraints:function(e,t){var i=n.reduce(e,function(e,i){return e[i.name]=u.parseConstraint(i,t),e},{});return i},parseSource:function(e){return delete e.data_sources,e},parseDataSource:function(e,t){return t=t||{},delete e.constraints,e.query_expr.id=e.query_expr.id||"datasource_"+e.name,e.categories=n.map(e.categories,u.parseCategory,t),t.source_id&&(e.source_ids=[t.source_id]),e},parseCategory:function(e){return"undefined"==typeof e.id&&(e.id=e.name),e},parseConstraint:function(e,t){return t=t||{},e.html=e.html.replace(/"https?:\/\/[^"]*\/http/i,'"http'),e.query_expr.id=e.query_expr.id||"constraint_"+e.name,t.source_id&&(e.source_ids=[t.source_id]),e},mergeDataSource:function(e,t){if(!e)return t;if(!t)return e;var i=n.clone(e);return i.ids=u.mergeArrays(i.ids,t.ids),i.category=u.mergeArrays(i.category,t.category),JSON.stringify(i.query_expr)!=JSON.stringify(t.query_expr)&&(i.query_expr=u.or(i.query_expr,t.query_expr)),i.source_ids=u.mergeArrays(i.source_ids,t.source_ids),i},or:function(){var e=n.reduce(arguments,function(e,t){return t&&e.push(t),e},[]);return e.length>1?{or:e,id:n.pluck(e,"id").sort().join(",")}:e.length>0?e[0]:void 0},mergeArrays:function(){return n.reduce(arguments,function(e,t){return t&&(e=e.concat(t)),e},[])},getDataSourceOrderby:function(e){var t,i;return n.forEach(e.sources.data_sources,function(s){n.forEach(s.source_ids,function(n){var s=e.sources[n];s&&(t?t!==s.data_source_orderby&&(i=!0):t=s.data_source_orderby)})}),i?void 0:t},sortDataSources:function(e,i){return t.sortByCriteria(e,{applyCustomOrder:i.applyCustomOrder||l.applyCustomOrder,criteria:"PROPERTY",criteriaPropertyName:u.getDataSourceOrderby(i.response)||"name",mapKeyPropertyName:"name"})}};u.mergeConstraint=u.mergeDataSource;var c=l.SourceInfoServiceStub=r.extend({path:"sourceinfo",call:function(e,t,i){return r.prototype.call.apply(this,[e,t,i])}}),h=l.SourceInfoOutputModel=s.extend({initialize:function(e){this.channel=e.channel,this.serviceStub=e.serviceStub},parse:function(e,t){return e=n.clone(e),e=l.SourceInfoResponse.parse(e,t)},_mergeObjects:function(e,t){var e=n.filter(e,n.isObject);return n.reduce(e,function(e,i){return n.reduce(i,function(e,i,n){return e[n]=e[n]?t(e[n],i):i,e},e)},{})},merge:function(e,i,s){var r=n.clone(e);return s=n.extend({},s,{response:r}),e.sources?(r.sources=n.clone(r.sources),r.sources.sources=this._mergeObjects([r.sources.sources,i.sources.sources],function(e){return e}),r.sources.data_sources=this._mergeObjects([r.sources.data_sources,i.sources.data_sources],u.mergeDataSource),s.noSortDataSources||(r.sources.data_sources=u.sortDataSources(r.sources.data_sources,s)),r.sources.constraints=this._mergeObjects([r.sources.constraints,i.sources.constraints],u.mergeConstraint)):r=i,r.status_messages=t.StatusMessages.merge(r.status_messages,i.status_messages),i.user_name&&(r.user_name=i.user_name),r},update:function(e,t){var s=this,r=this._responseObserver={},a={};e||this.load({sources:{sources:{},constraints:{},data_sources:{}}}),n.extend(r,i.Events),this._responseObserver.on("response",function(e,i){var r={parse:!0,merge:!0,source_id:i.get("id")};s.applyCustomOrder&&(r.applyCustomOrder=s.applyCustomOrder),s.load(e,r),n.isFunction(t)&&t(e)}),n.isFunction(t)&&this._responseObserver.on("error",function(e){try{t(null,e)}catch(i){console&&console.error&&console.error(i,i.stack)}}),this.serviceStub.cast(e||this.channel,a,r)}}),d=l.ServiceFactory=function(){};return n.extend(d.prototype,a.prototype,{createModel:function(e,t){t=t||{},t.channel=t.channel||e,t.serviceStub=t.serviceStub||new c;var i=new h({},t);return i}}),l}),Mindbreeze.define("api/v2/usersourceinfo",["api/v2/sourceinfo","service/factory","underscore"],function(e,t,i){var n={},s=n.UserSourceInfoServiceStub=e.SourceInfoServiceStub.extend({path:"usersourceinfo"}),r=n.UserSourceInfoOutputModel=e.SourceInfoOutputModel.extend({}),a=n.ServiceFactory=function(){};return i.extend(a.prototype,t.prototype,{createModel:function(e,t){t=t||{},t.channel=t.channel||e,t.serviceStub=t.serviceStub||new s;var i=new r({},t);return i}}),n}),Mindbreeze.define("api/v2/logout",["api/v2/common","backbone","underscore","service/stub","service/factory"],function(e,t,i,n,s){var r={},a=r.LogoutServiceStub=n.extend({path:"../../logout",call:function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e.get("url")+this.path,t.title="logout in background",document.body.appendChild(t)}}),o=r.ServiceFactory=function(){};return i.extend(o.prototype,s.prototype,{cast:function(e){(new a).cast(e)},getLogoutPath:function(){return(new a).path}}),r}),Mindbreeze.define("client/sourceinfo",["client/resourceinfo"],function(e){return{builtinSources:[e.scriptLocation+"../../api/v2/"]}}),Mindbreeze.define("service/ajax_channel",["jquery","underscore","backbone","service/channel"],function(e,t,i,n){var s=n.extend({internalCall:function(t,i,s,r,a,o){var l=this,u=new n.DeferredCallFinished(this),c=r&&r.dataType||"json";return e.ajax({url:this.get("url")+(t||""),type:o&&o.method||"post",crossDomain:o&&o.crossDomain||!0,xhrFields:o&&o.xhrFields||{withCredentials:!0},headers:o&&o.headers||{},dataType:c,data:i?/json/i.test(c)?JSON.stringify(i):i:null,context:this}).done(function(e){l.success(e,u,s)}).fail(function(e,t,i){var n={status:e.statusCode(),message:t,url:this.get("url"),error:i};l.error(n,u,s)}),u}});return s}),Mindbreeze.define("service/constrained_channel",["underscore","service/channel"],function(e,t){var i=t.extend({initialize:function(e,i){t.prototype.initialize.apply(this,arguments),this.set("id",this.get("url")+"#"+escape(JSON.stringify(i.constraint,null,1))),this.constraint=i.constraint,this.channel=i.channel,this.requestTransformers=i.requestTransformers||[]},setConstraint:function(e){this.constraint=e},getConstraint:function(){return this.constraint},addConstraintsToRequest:function(e){if(this.constraint){e.source_context||(e.source_context={});var t=this.constraint;e.source_context.constraints=e.source_context.constraints||[],e.source_context.constraints.push(t)}return e},call:function(t,i){if(this.get("enabled")&&this.channel){i=this.addConstraintsToRequest(i);for(var n=0;n<this.requestTransformers.length;++n)i=this.requestTransformers[n](i,{path:t}),console.log(i);var s=e.toArray(arguments);return s[1]=i,this.channel.call.apply(this.channel,s)}}});return i.createConstrained=function(e,t){return new i(null,{channel:e,pathconstraint:t})},i}),Mindbreeze.define("service/channel_factory",["utils/url","service/channel","service/messageframes","service/messageframe_channel","service/ajax_channel","service/constrained_channel","underscore"],function(e,t,i,n,s,r,a){function o(e){this.options=e,this.messageFrames=new i(this.options)}return a.extend(o.prototype,{_useFactory:function(e){return e instanceof t?!1:a.isObject(e)&&e.url?!0:a.isString(e)?!0:!1},createChannel:function(t,i){if(!t||!this._useFactory(t)||a.isObject(t)&&t.useFactory===!1)return t;t=a.clone(t),a.isString(t)&&(t={url:t},i&&i.trace===!1&&(t.trace=!1));var o,l=t.constraint;return l&&delete t.constraint,e.isRelative(t.url)?o=new s(t,this.options):(t.messageFrames||(t.messageFrames=this.messageFrames),o=new n(t,this.options)),l&&(o=new r(t,a.extend({},{channel:o,constraint:l},this.options))),o}}),o}),Mindbreeze.define("service/channels",["backbone","i18n/i18n","service/channel_factory","api/v2/common","underscore"],function(e,t,i,n,s){var r=e.Collection.extend({initialize:function(n,s){e.Collection.prototype.initialize.apply(this,arguments),this.channelFactory=new i(s),this.alerts=new e.Collection,this.options=s,this.listenTo(this,"done",this.checkMessages),this.listenTo(this,"fail",this.failedCall),this.listenTo(t,"change:locale",this.changedLocale)},changedLocale:function(){this.trigger("change")},failedCall:function(e,i){var n="<strong>"+t("Error")+"</strong> "+i.error+" ("+i.url+")";this.addAlert({id:n,level:"error",message:n})},checkMessages:function(e,t){t&&this.addAlerts(t.status_messages)},addAlerts:function(e){e=n.StatusMessages.parse(e);var t=this;s.each(e,function(e,i){"timeout"!==i&&"no_results"!=i&&(e=s.clone(e),e.id=i,e.level=e.error?"error":e.warning?"warning":"info",e.service_ids=e.service_ids&&e.service_ids.join(", "),t.addAlert(e))})},addAlert:function(e){e&&e.hidden||this.alerts.add(e)},_prepareModel:function(e,t){var i=this.channelFactory.createChannel(e,t);return i.prepareRequest=s.bind(this.prepareRequest,this,i),i},prepareRequest:function(e,i){try{i.user_context||(i.user_context={}),s.isObject(i.user_context)&&(this.options&&this.options.referer&&(i.user_context.referer=i.user_context.referer||this.options.referer),this.options&&this.options.sessionDescription&&(i.user_context.session_description=i.user_context.session_description||this.options.sessionDescription),i.user_context.locale=t.locale,i.user_context.service_id=e.get?e.get("id"):e.id,i.user_context.utc_time_zone_differential_in_seconds=60*-(new Date).getTimezoneOffset())}catch(n){console&&console.warn&&console.warn("Failed to prepare request",n)}return this}});return r.ignoreSuccessiveErrorsCallback=function(e,t){if(this.callback&&this.channels){var i=this;i.failedChannels||(i.failedChannels={});var n=-1;if(t&&t.status&&(n=t.status),e&&e.id){if(i.failedChannels[e.id]||(i.failedChannels[e.id]=[]),s.contains(i.failedChannels[e.id],n))return;i.failedChannels[e.id]=s.union(i.failedChannels[e.id],[n])}return i.failedChannels[e.id]&&1==i.failedChannels[e.id].length&&this.channels.once("done",function(e){e&&e.id?i.failedChannels&&delete i.failedChannels[e.id]:i.failedChannels={}}),this.callback.apply(this.context,arguments)}},r}),Mindbreeze.define("api/v2/resources",["client/sourceinfo","i18n/i18n","api/v2/common","backbone","underscore","model/tree","model/readonlytree","service/stub","service/factory","service/channels"],function(e,t,i,n,s,r,a,o,l){var u=function(){},c=u.ResourcesServiceStub=o.extend({path:"resource",call:function(e,t,i){return s.isFunction(e.prepareRequest)&&(t=s.clone(t),e.prepareRequest(t)),t.id?e.call("put"+this.path,t,i,{},null,{method:"POST"}):e.call(this.path+"/"+encodeURI(t),null,i,{dataType:"text"},null,{method:"GET"})}}),h=u.ServiceFactory=function(){};return s.extend(h.prototype,l.prototype,{get:function(e,t,i){var r,a,o,l=(new c,this._responseObserver={});return s.extend(l,n.Events),this._responseObserver.on("response",function(e){r=e}),this._responseObserver.on("error",function(e){a||(a=[]),a.push(e)}),o=(new c).cast(i,e,l,{method:"GET"}),o.always(function(){try{t(r,a)}catch(e){console&&console.error&&console.error(e,e.stack)}}),o},put:function(e,t,i){var r,a,o=this._responseObserver={};return s.extend(o,n.Events),this._responseObserver.on("response",function(e){t=e}),this._responseObserver.on("error",function(e){r||(r=[]),r.push(e)}),a=(new c).cast(i,{id:e,string_content:t},o,{}),a.always(function(){try{}catch(e){console&&console.error&&console.error(e,e.stack)}}),a}}),u}),Mindbreeze.define("api/v2/export",["i18n/i18n","api/v2/common","backbone","underscore","model/readonlytree","service/stub","service/factory","utils/clone"],function(e,t,i,n,s,r,a){var o={},l=o.ExportServiceStub=r.extend({path:"export",getDataType:function(e,t){var i=r.prototype.getDataType.apply(this,arguments);return null!=t&&t.export_format&&(i.responseType="blob"),i},call:function(e,t,i){return r.prototype.call.apply(this,[e,t,i])}});o.ExportOutputModel=s.extend({initialize:function(e){this.channel=e.channel,this.serviceStub=e.serviceStub},parse:function(e){return e=n.clone(e)},merge:function(e){return e}});var u=o.ServiceFactory=function(){};return n.extend(u.prototype,a.prototype,{createStub:function(){return new l},createModel:function(e,t){t=t||{},t.channel=t.channel||e,t.serviceStub=t.serviceStub||new l;var i=new o({},t);return i}}),o}),Mindbreeze.define("model/persisted_collection",["i18n/i18n","backbone","underscore"],function(e,t,i){function n(e,n,s,r){function a(t){if(r.success){var i=e.parse(t)&&e.parse(t)[0];r.success(i,200)}}function o(e){r.error&&r.error(null,e)}function l(){r.success&&r.success({},200)}function u(e){r.error&&r.error(null,e)}function c(e){r.success&&r.success(e,200)}function h(e){r.error&&r.error(null,e)}var d={appid:this.appid};switch(n){case"create":case"update":d[n]=s.toJSON(r),this.usePaths&&!d[n].path&&(d[n].path=this.path);var p={};i.extend(p,t.Events),e.listenTo(p,"response",a),e.listenTo(p,"error",o),e.serviceStub.cast(e.channels,d,p);break;case"delete":d.remove={id:s.id},this.usePaths&&(d.remove={path:s.get("path")});var p={};i.extend(p,t.Events),e.listenTo(p,"response",l),e.listenTo(p,"error",u),e.serviceStub.cast(e.channels,d,p);break;case"read":d.read={},this.path&&(d.read.path=this.path),this.property&&(d.read.property=this.property),this.owner&&(d.read.owner=this.owner),s instanceof t.Model&&(d.read.id=s.id);var p={};i.extend(p,t.Events),e.listenTo(p,"response",c),e.listenTo(p,"error",h),e.serviceStub.cast(e.channels,d,p);break;default:throw new Error("PersistedCollection: Unsupported operation "+n+"!")}}var s=t.Model.extend({initialize:function(e,t){this.channels=t.channels,this.serviceStub=t.serviceStub,this.appid=t.appid,this.syncMethod=i.bind(n,this,this),t.parse&&i.isFunction(t.parse)&&(this.parse=t.parse)},sync:function(){return this.syncMethod.apply(this,arguments)}}),r=t.Collection.extend({_prepareModel:function(){var e=t.Collection.prototype._prepareModel.apply(this,arguments);return e.sync=this.syncMethod,e},initialize:function(e,t){this.channels=t.channels,this.serviceStub=t.serviceStub,this.appid=t.appid,this.syncMethod=i.bind(n,this,this),this.listenTo(this,"add",this.saveModel),this.listenTo(this,"update",this.saveModel),this.listenTo(this,"remove",this.destroyModel),t.parse&&i.isFunction(t.parse)&&(this.parse=t.parse)},saveModel:function(e){e.save(),this.trigger("change")},destroyModel:function(e){e.destroy(),this.trigger("change")},sync:function(){return this.syncMethod.apply(this,arguments)}});return r.Model=s,r}),Mindbreeze.define("api/v2/persisted",["client/sourceinfo","i18n/i18n","api/v2/common","backbone","underscore","model/tree","model/readonlytree","model/persisted_collection","service/stub","service/factory","service/channels"],function(e,t,i,n,s,r,a,o,l){var u=l.extend({path:"persistedresources"}),c=l.extend({path:"persistedcollections"}),h=l.extend({path:"persistedcollectionschema"}),d=o.Model.extend({parse:function(e){var t=s.extend({},e),i={};return s.isArray(e&&e.property)&&(i.properties=s.reduce(e.property,function(e,t){return e[t.key]=t.value,e},{}),delete t.property),e&&e.id||!e||!e.path||(i.id=e.path.join("/")),s.extend({},t,i)},toJSON:function(){var e=s.clone(this.attributes);if(e.properties&&s.isObject(e.properties)){for(var t=[],i=s.keys(e.properties),n=0;n<i.length;++n)t.push({key:i[n],value:e.properties[i[n]]});e.property=t,delete e.properties}return e}}),p=o.extend({usePaths:!0,model:d,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new u,o.prototype.initialize.apply(this,arguments),this.path=t.path,this.property=t.property},parse:function(e){return e.persisted_resources}}),m=o.extend({usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new c,o.prototype.initialize.apply(this,arguments),this.path=t.path},parse:function(e){return e.persisted_collection}}),f=function(e){this._persistedResourcesStub=new u,this._persistedCollectionsStub=new c,this._persistedCollectionSchemaStub=new h,this.options=e};return s.extend(f.prototype,{resources:function(e,t){var i=s.extend({},this.options,{serviceStub:this._persistedResourcesStub,path:e,property:t});return new p(null,i)},resource:function(e){var t=s.extend({},this.options,{serviceStub:this._persistedResourcesStub,path:e});return new d(null,t)},collections:function(e){var t=s.extend({},this.options,{serviceStub:this._persistedCollectionsStub,path:e});return new m(null,t)},collection:function(e){var t=s.extend({},this.options,{serviceStub:this._persistedCollectionsStub,path:e});return new d(null,t)},schema:function(e){var t=s.extend({},this.options,{serviceStub:this._persistedCollectionSchemaStub,path:e});return new p(null,t)}}),f}),Mindbreeze.define("api/v2/personalization",["api/v2/sourceinfo","service/factory","service/stub","model/readonlytree","backbone","underscore"],function(e,t,i,n,s,r){var a={},o=a.PersonalizationServiceStub=i.extend({path:"personalization"}),l=a.PersonalizationOutputModel=s.Model.extend({}),u=a.ServiceFactory=function(){};return r.extend(u.prototype,t.prototype,{createModel:function(e,t){t=t||{},t.channel=t.channel||e,t.serviceStub=t.serviceStub||new o;var i=new l({},t);return i},createStub:function(){return new o}}),a}),Mindbreeze.define("api/v2/api",["api/v2/getprofile","api/v2/search","api/v2/preview","api/v2/suggest","api/v2/sourceinfo","api/v2/usersourceinfo","api/v2/logout","api/v2/resources","api/v2/export","api/v2/persisted","api/v2/personalization"],function(e,t,i,n,s,r,a,o,l,u,c){var h={search:new t.ServiceFactory,preview:new i.ServiceFactory,suggest:new n.ServiceFactory,sourceInfo:new s.ServiceFactory,userSourceInfo:new r.ServiceFactory,getProfile:new e.ServiceFactory,logout:new a.ServiceFactory,resources:new o.ServiceFactory,exportsearch:new l.ServiceFactory,personalization:new c.ServiceFactory};return h}),Mindbreeze.define("utils/backbone-utils",["utils/string","backbone"],function(e,t){t.Collection.prototype.dispose=t.Collection.prototype.dispose||function(){this.stopListening()},t.Collection.prototype.nextName=function(e,t){e=e||this._namePrefix||"";var i=new RegExp("^"+e+"(\\d+)"),n=1;return this.models.forEach(function(e){var t=e.get("name"),s=t.match(i);s&&(n=Math.max(n,parseInt(s[1],10)+1))}),e+n+(t||"")},t.Collection.prototype.nameFromQuery=function(t,i){var n,s=e.trim(t&&!t.label&&t.unparsed);return s&&i&&(s+=i),n=this.isNameTaken(s),n?this.nextName(s+" "):s},t.Collection.prototype.isNameTaken=function(e,t){return this.find(function(i){return i!==t&&i.get("name")===e})}}),Mindbreeze.define("utils/dom",["underscore","backbone","jquery"],function(e,t,i){function n(e,t){this.el=e,this.prefix=t||""}function s(){}e.extend(n.prototype,t.Events,{has:function(e){return null!=this.get(e)},get:function(e){if(!e){for(var t={},i=0;i<this.el.attributes.length;++i){var n=this.el.attributes[i];n.name.length>=this.prefix.length&&n.name.substring(0,this.prefix.length)==this.prefix&&(t[n.name.substring(this.prefix.length)]=n.value)}return t}return this.el.getAttribute(this.prefix+e)},getCamelCase:function(){var t={};return e.each(this.get(),function(e,i){var n=i.replace(/-(.)/g,function(e,t){return t.toUpperCase()});t[n]=e}),t},set:function(e,t,i){var n=!1;i=i||{},i.unset&&this.el.hasAttribute(this.prefix+e)&&(n=!0,this.el.removeAttribute(this.prefix+e)),this.el.getAttribute(this.prefix+e)!==t&&(n=!0,this.el.setAttribute(this.prefix+e,t)),n&&(this.trigger("change:"+e,this,t),this.trigger("change",this))}}),n.camelCaseToSeparated=function(e){return e&&e.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})},e.extend(s.prototype,t.Events,{has:function(){return!1},get:function(){return null},set:function(){}});var r={getAttributes:function(e){for(var t,i,n,s=e.attributes,r=s.length,a={};r--;)t=s[r],i=t.nodeName,n=t.nodeValue,a[i]=n;return a},insertAt:function(e,t,i){if(e){var n=e.childNodes.length>i&&e.childNodes[i];n?e.insertBefore(t,n):e.appendChild(t)}},createStyleElement:function(e){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e,t},updateScriptContent:function(e,t){e&&(e.text?e.text=t:e.innerHTML=t)},isClipped:function(e){return e?e.scrollWidth>e.offsetWidth:!1},instantiate:function(e){if(e){var t=i(e);return t.length>0?t.get(0):void 0}},focus:function(e,t){var n=i(e),s=r.getFocusableSelector(t);n.is(s)||(n=n.find(s).first()),n.length&&n.focus()},getFocusableSelector:function(e){var t=":focusable:visible";return e&&(t+="[tabindex!=-1]"),t},focusable:function(e,t){return e=e||document.body,i(e).find(r.getFocusableSelector(t))},focusNextIfActive:function(e,t){if(e){var n=i(e);(e===document.activeElement||n.find(document.activeElement).length)&&r.focusNext(n,t)}},focusNext:function(e,t){if(e){var n,s=i(e),a=r.focusable(null,t);n=s.find(":focusable").last()[0],n||(n=e);var o=a.index(n)+1;o>=a.length&&(o=0);var l=a[o];window.setTimeout(function(){l.focus()},0)}},isChild:function(e,t){for(;e&&e!==document;){if(e===t)return!0;e=e.parentNode}return!1},AttributeModel:n,EmptyModel:s};return r}),Mindbreeze.define("utils/keys",[],function(){return{tab:9,enter:13,esc:27,"delete":46,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,f2:113,f10:121,menu:93}}),Mindbreeze.define("utils/flexbox",["underscore","jquery"],function(e){return function(){var t=e.find(["","moz","ms","o","webkit"],function(e){var t,i=document.createElement("div"),n=e?e+"FlexBasis":"flexBasis";return document.body.appendChild(i),t="undefined"!=typeof i.style[n],document.body.removeChild(i),t});if("undefined"!=typeof t)return!0;var i=!1,n=document.createElement("div"),s=document.createElement("div");return n.style.width="0",n.style.height="3px",n.style.display="flex",n.style.flexDirection="column",s.style.flex="1",n.appendChild(s),document.body.appendChild(n),3===s.offsetHeight&&(i=!0),i||(n.style.display="-ms-flexbox",n.style.MsFlex="1",3===s.offsetHeight&&(i=!0)),document.body.removeChild(n),i}}),Mindbreeze.define("client/extensions",["backbone","underscore"],function(e,t){function i(){}return t.extend(i.prototype,e.Events,{onceAfter:function(e,t,i){this.once("after:"+e,t,i),this.trigger("register:after:"+e,t)},registerLaterCallback:function(){var e=t.toArray(arguments),i=e.pop();return i.apply(this,e)},provide:function(e,i,n){if(arguments.length<3)return this;var s=t.toArray(arguments).slice(2,arguments.length);if("after"==e&&n&&t.isFunction(n.listenTo)){var r=t.bind.apply(t,[this.registerLaterCallback,this].concat(s));n.listenTo(this,"register:"+e+":"+i,r,this)}return s=[e+":"+i].concat(s),this.trigger.apply(this,s),this}}),i.instance=new i,i.instance}),Mindbreeze.define("client/template",["underscore","backbone","utils/dom","utils/jsonpath","i18n/i18n","jquery","model/attribute_proxy"],function(e,t,i,n,s,r,a){var o=t.Collection.extend({initialize:function(e,i){t.Collection.prototype.initialize.apply(this,arguments),this.template=i.template,this.selectorPattern=i.selectorPattern,this.listenTo(this.template,"change",this.updateModels),this.updateModels()},updateModels:function(){var t=this,i=0;e.each(this.template.schema.attributes,function(e,n){var s=t.selectorPattern||".*",r=e.selector||"global",a=new RegExp(s).test(r),o=a&&e.visible!==!1&&(!e.depends||t.evalExpr(e.depends,n));o?(t.add({id:n,attribute:e},{at:i}),i++):t.get(n)&&t.get(n).trigger("destroy",t.get(n))})},evalExpr:function(e){var t=new Function("attributes","return "+e);return!!t.call(this,this.template.getAttributes())}}),l=function(e,t,i){this.el=e,this.node=t,this.application=i,t?(t.parentNode&&(this.parentTemplate=t.parentNode.template),this.children=t.children):this.children=[],this.instances=new u,this.content={properties:[]},this.initialize()},u=function(){this.instances=[],this.length=0};return u.prototype={push:function(t){if(t){var i=this,n=t.remove;t.remove=function(){i.instances=e.without(i.instances,this),i.length=i.instances.length,n.apply(this,arguments),t.remove=n},this.instances.push(t),this.length=this.instances.length}},remove:function(){e.forEach(this.instances,function(e){e&&e.remove&&e.remove()}),this.instances=[],this.length=this.instances.length}},e.extend(l.prototype,t.Events,{initialize:function(){this.attributeModel=this.el&&this.el!=document?new i.AttributeModel(this.el,"data-"):new i.EmptyModel,this.listenTo(this.attributeModel,"all",this.proxyEvents),this.editable=!!this.schema,this.createDefaultTemplateIfNonePresent()},getSchemaAttributeCollection:function(e){return this.schema?new o(null,{template:this,selectorPattern:e&&e.selectorPattern}):void 0},proxyEvents:function(e){this.trigger.apply(this,[e,this].concat(Array.prototype.slice.call(arguments,2)))},append:function(e){this.node.append(e)},createDefaultTemplateIfNonePresent:function(){if(!this.isTemplatePresent()){var e=this.getDefaultTemplateAsEl();this.append(e)}},isTemplatePresent:function(){return!(this.hasContent()&&this.node&&this.node.children.length<1)},getDefaultTemplateAsEl:function(){var e=this.getDefaultTemplate();return e?i.instantiate(e):void 0},getDefaultTemplate:function(){return this.constructor.DEFAULT_TEMPLATE},name:function(){return s(this.editableName||this.attributeModel.get("template"))},pathSchema:function(){return{type:"string",title:"Model path",readonly:!0}
},parentPath:function(){return this.parentTemplate&&this.parentTemplate.path?this.parentTemplate.path():[]},model:function(e){var t,i,n=e.model;if(this.attributeModel.has("model")&&(t=this.attributeModel.get("model"),n=this.application.models[t]),this.attributeModel.has("model-transformation")){var s=this.attributeModel.get("model-transformation");s&&this.application[s]&&(n=new a(n,this.application[s].call(this.application)))}return i=this.localPath(),n&&n.submodel&&i&&i.length&&(n=n.submodel(i)),n},localPath:function(){return this.attributeModel.has("path")?n.parsePath(this.attributeModel.get("path")):[]},path:function(){return this.parentPath().concat(this.localPath())},set:function(e,t){this.schema&&(t=this.schema.serializeAttribute(t,e)),this.schema.useCamelCaseNames&&(e=i.AttributeModel.camelCaseToSeparated(e)),this.setAttribute(e,t)},get:function(e,t){if(!e){var i=this.getAttributes();if(!this.schema)return i;for(var n in i)i[n]=this.schema.parseAttribute(i[n],n);return i}var s=this.getAttribute(e);return this.schema?this.schema.parseAttribute(s,e,t):s},getInput:function(){var e,t=this.schema.filterInputAttributes(this.getAttributes());for(var i in t)e=this.schema.inputAttributes[i]&&this.schema.inputAttributes[i].path||i,t[e]=this.schema.parseAttribute(t[i],i),e!==i&&delete t[i];return t},getAttribute:function(e){return this.schema.useCamelCaseNames&&(e=i.AttributeModel.camelCaseToSeparated(e)),this.attributeModel.get(e)},hasAttribute:function(e){return this.schema.useCamelCaseNames&&(e=i.AttributeModel.camelCaseToSeparated(e)),this.attributeModel.has(e)},removeAttribute:function(e){this.schema.useCamelCaseNames&&(e=i.AttributeModel.camelCaseToSeparated(e)),this.attributeModel.set(e,null,{unset:!0})},setAttribute:function(e,t){return this.schema.useCamelCaseNames&&(e=i.AttributeModel.camelCaseToSeparated(e)),this.attributeModel.set(e,t),this},hasContent:function(){return!1},getContent:function(){return this.el.innerHTML},setContent:function(e){this.el.innerHTML=e},getAttributes:function(){return this.useCamelCaseNames?this.attributeModel.getCamelCase():this.attributeModel.get()},getInputAttributes:function(){return this.schema.filterInputAttributes(this.attributeModel.get())},getOptions:function(e){return e},createView:function(t){var i=t.ViewConstructor||this.constructor.View,n=this.model(t),t=this.getOptions(t),s=new i(e.extend({},this.attributeModel.get(),t,{model:n,el:this.createEl(),template:this}));return this.instances.push(s),t.node&&e.each(t.node.children,function(e){this.createSubView(e,t,n)},this),s},createEl:function(){return this.el},createSubView:function(e,t,i){var n=e.template.createView({application:t.application,model:i,node:e});return n&&e.template&&n.el!==e.template.el&&n.el!==e.template.el.parentNode&&r(e.template.el).after(n.el),n},removeViews:function(){this.instances&&this.instances.remove&&this.instances.remove()},remove:function(t){this.stopListening(),this.removeViews(),this.instances=new u,e.forEach(t.node.children,function(e){e.template.remove({node:e})})},_appendChildren:function(t,i){var n=this,s=this.children;e.each(t.childNodes,function(t){if(t&&!/mb-dont-serialize/.test(t.className)){for(var r=0;r<n.instances.instances.length;++r)if(n.instances.instances[r]&&n.instances.instances[r].owns&&n.instances.instances[r].owns(t))return;var a=e.find(s,function(e){return e.el===t?(i.innerHTML+=e.template.serialize(),!0):void 0});if(!a){var o=t.cloneNode();n._appendChildren(t,o),i.appendChild(o)}}})},serialize:function(){var t=document.createElement("div");this._appendChildren(this.el,t);var n=this,s="<"+this.el.tagName+" ",r=e.extend(i.getAttributes(this.el),e.object(e.map(e.keys(this.get()),function(e){return"data-"+e}),e.values(this.get()))),a=r["data-content"];return s+=e.filter(e.collect(r,function(e,t){return t&&e&&"data-content"!==t?t+'="'+n.schema.serializeAttribute(e,t.substring(5))+'"':void 0}),function(e){return e}).join(" "),s+=">",s+=this.schema.content?a:t.innerHTML,s+="</"+this.el.tagName+">"}}),l.Schema=function(t){t=t||{},this.inputAttributes=t.inputAttributes||{},this.attributes=t.attributes||{};for(var i=e.keys(this.inputAttributes),n=0;n<i.length;++n){var s=i[n];this.attributes[s]=this.inputAttributes[s],this.attributes[s].model_stored=!0}this.inputAttributeNames=[];for(var r=e.keys(this.attributes),a=0;a<r.length;++a){var s=r[a];this.attributes[s].model_stored&&this.inputAttributeNames.push(s)}this.content=t.content},e.extend(l.Schema.prototype,t.Events,{useCamelCaseNames:!1,parseAttributes:function(t){var i=this;return e.each(this.attributes,function(e,n){var s=i.parseAttribute(t[n],n);void 0!==s&&(t[n]=s)}),t},getSchema:function(e){return this.attributes[e]},validateInput:function(e,t){var i=this.getSchema(t),n=i&&i.type||"string";switch(n){case"int":if(isNaN(parseInt(e)))return{ok:!1,error:"Number expected!"}}return{ok:!0}},parseAttribute:function(e,t,i){var n=this.getSchema(t),r=n&&n.type||"string",i=void 0===i?n&&n["default"]:i;switch(null===i&&(i=void 0),r){case"QueryExpr":try{return JSON.parse(e)}catch(a){return{unparsed:e}}return i;case"boolean":return new RegExp("^"+!i+"$","i").test(e)?!i:!!i;case"int":return e?parseInt(e,10):i;case"float":return e?parseFloat(e):i;case"date":return e?new Date(e):i;case"SearchRequest":return e?JSON.parse(e):i;case"list":if(e)try{return JSON.parse(e)}catch(a){return e.split(/\s*,\s*/)}return i;case"i18nString":return s.translateIfPrefixed(e?e:i)}return e||i},serializeAttribute:function(t,i){var n=this.getSchema(i),s=n&&n.type||"string";switch(s){case"QueryExpr":return t?1==e.keys(t).length&&t.unparsed?t.unparsed:JSON.stringify(t):void 0;case"int":return t?t.toString():void 0}return t},filterInputAttributes:function(t){var i=this.inputAttributeNames,n={};return e.each(t,function(t,s){e.indexOf(i,s)>=0&&(n[s]=t)}),n},optionsAsAttributes:function(t){var i=this;return e.map(t,function(e,t){return"data-"+t+"="+i.serializeAttribute(e,t)}).join(" ")}}),l.extend=t.Model.extend,l}),Mindbreeze.define("client/templatetree",["require","underscore"],function(e,t){function i(n,s,r){var a,o="component!"+n.templateType;e([o],function(e){var o,l;n.template=new e(n.el,n,s),o=n.children.length,l=function(){if(o--,0===o)try{r(a)}catch(e){console&&console.warn&&console.warn("Failed to notify template tree initialization.",e.stack,e)}},n.template.initializationPromise&&(o++,n.template.initializationPromise.always(l)),0===o&&r(),t.forEach(n.children,function(e){try{i(e,s,l)}catch(t){a||(a=[]),a.push(t)}})})}function n(e,i){t.forEach(e.children,function(e){n(e,i)}),i(e)}var s=function(){this.init.apply(this,arguments)},r=function(e,t,i,n){this.tree=e,this.el=t,this.templateType=i,this.parentNode=n,this.children=[]};return t.extend(r.prototype,{remove:function(){var e=this;this.parentNode&&(this.parentNode.children=t.filter(this.parentNode.children,function(t){return t!==e}),delete this.parentNode)},firstChildOfType:function(e){return t.find(this.children,function(t){return t.templateType===e})},append:function(e){e&&(this.el.appendChild(e),this.collect())},collect:function(e){var i=this;t.forEach(this.el.childNodes,function(t){i.tree.collect(i,t,e)})},initializeChildren:function(e,n,s){t.forEach(this.children,function(t){i(t,e,function(){if(t.template.createView({application:e,model:n,node:t}),s)try{s()}catch(i){console.error(i,i.stack)}})})},destroy:function(e){n(this,function(e){e.template&&e.template.removeViews&&e.template.removeViews()}),this.template.remove({node:this}),e&&e()},destroyChildren:function(e){t.forEach(this.children,function(e){n(e,function(e){e.template&&e.template.removeViews&&e.template.removeViews()}),e.template.remove({node:e})}),e&&e()}}),t.extend(s.prototype,{init:function(e,i,n){e=e||document.body,t.isArray(e)?this.rootEls=e:(n&&(e.innerHTML=n),this.rootEls=[e]),this.rootTemplateType=i,this.rootNode=this.build()},matches:function(e){try{return!(!e.getAttribute||!e.getAttribute("data-template")&&"text/x-mustache-template"!==e.getAttribute("type"))}catch(t){return!1}},getType:function(e){try{return e.getAttribute("data-template")||"mustache"}catch(t){return"mustache"}},collect:function(e,i,n){try{if(i&&i.getAttribute&&"true"===i.getAttribute("data-mb-exclude"))return}catch(s){}var a=this;if(this.matches(i)){if(-1!=t.indexOf(this.processedEls,i))return;var o=new r(this,i,this.getType(i),e);this.processedEls.push(i),e.children.push(o),n&&n(o),e=o}t.forEach(i.childNodes,function(t){a.collect(e,t,n)})},build:function(){var e=this;this.processedEls=[];var i=new r(e,1===this.rootEls.length?this.rootEls[0]:null,e.rootTemplateType);return t.each(this.rootEls,function(t){e.collect(i,t)}),i},initialize:function(e,t,n){var s=this;i(this.rootNode,e,function(){if(s.rootNode.template.createView({application:e,model:t,node:s.rootNode}),n)try{n()}catch(i){console.error(i,i.stack)}})},reload:function(e,t,i,n){var s=this;this.destroy(function(){n&&n(),s.rootNode=s.build(),s.initialize(e,t,i)})},destroy:function(e){n(this.rootNode,function(e){e.template&&e.template.removeViews&&e.template.removeViews()}),this.rootNode.template.remove({node:this.rootNode}),e&&e()},getTemplateByEl:function(e){var t;return n(this.rootNode,function(i){t||i.el===e&&(t=i.template)}),t},getTemplateById:function(e){return e?this.getTemplateByEl(document.getElementById(e)):void 0}}),s}),function(){Mindbreeze.define("component",{load:function(e,t,i){var n="components/"+e+"/js/"+e;t([n],function(e){i(e)})}})}(),Mindbreeze.define("jquery-taphold",["jquery"],function(e){function t(e){var t=s(this);if(settings=s.extend({},r,e.data),"undefined"!=typeof t.data("events")&&"undefined"!=typeof t.data("events").click){for(var i in t.data("events").click)if(""==t.data("events").click[i].namespace){var n=t.data("events").click[i].handler;t.data("taphold_click_handler",n),t.unbind("click",n);break}}else"function"==typeof settings.clickHandler&&t.data("taphold_click_handler",settings.clickHandler);t.data("taphold_triggered",!1),t.data("taphold_clicked",!1),t.data("taphold_cancelled",!1),t.data("taphold_timer",setTimeout(function(){t.data("taphold_cancelled")||t.data("taphold_clicked")||(t.trigger(s.extend(e,s.Event("taphold"))),t.data("taphold_triggered",!0))},settings.duration))}function i(e){var t=s(this);t.data("taphold_cancelled")||(clearTimeout(t.data("taphold_timer")),t.data("taphold_triggered")||t.data("taphold_clicked")||("function"==typeof t.data("taphold_click_handler")&&t.data("taphold_click_handler")(s.extend(e,s.Event("click"))),t.data("taphold_clicked",!0)))}function n(){e(this).data("taphold_cancelled",!0)}var s=e,r={duration:1e3,clickHandler:null},a="ontouchstart"in window||"onmsgesturechange"in window;e.event.special.taphold={setup:function(s){e(this).bind(a?"touchstart":"mousedown",s,t).bind(a?"touchend":"mouseup",i).bind(a?"touchmove touchcancel":"mouseleave",n)},teardown:function(){e(this).unbind(a?"touchstart":"mousedown",t).unbind(a?"touchend":"mouseup",i).unbind(a?"touchmove touchcancel":"mouseleave",n)}}}),Mindbreeze.define("components/base/js/base",["backbone","underscore","utils/trace","utils/keys","utils/dom","i18n/i18n","jquery","jquery-taphold"],function(e,t,i,n,s,r,a){var o=/^(\S+)\s*(.*)$/,l=e.View.extend({tagName:"div",events:{"click a, *.action, *[data-action-object], *[data-action-name]":"handleAction","keypress a, *.action, *[data-action-object]":"handleAction","click [data-toggle='fulltext']":"showModalWhenClipped","mouseenter [data-toggle='fulltext']":"updateCursorForClippedElement","change select[data-action-object], change select[data-action-name]":"handleAction","click button.edit":"edit","click button.delete":"delete","dblclick *[data-action-object]":"handleAction","taphold *[data-action-object]":"handleAction","keypress button.edit":"edit","keypress button.delete":"delete"},initialize:function(){this.defaultOptions&&(this.options=t.extend({},this.defaultOptions,this.options)),this.ownedNodes=[],this.options.role&&!this.el.getAttribute("role")&&(this.el.setAttribute("role",this.options.role),/presentation|tooltip/i.test(this.options.role)||this.el.setAttribute("tabindex","0")),this.setModel(this.model),this.options.application&&this.options.application.editing?this.setEditable(!0):this.setEditable(!1);for(var e=/^data-on(.+)$/,i=0;i<this.el.attributes.length;++i){var n=this.el.attributes[i],s=n.name.match(e);if(s&&s[1]){var r=t.bind(new Function("application","view","event",n.value),this.el,this.options.application,this);a(this.el).on(s[1],r)}}},delegateEvents:function(e){if(!e&&!(e=t.result(this,"events")))return this;this.undelegateEvents();for(var n in e){var s=e[n];if(t.isFunction(s)||(s=this[e[n]]),s){var r=n.match(o),a=r[1],l=r[2];s=t.bind(s,this),this.doInstrument(e[n])&&(s=i.instrument(s,"uiAction",function(e){return function(t){var i=[e];return t&&t.target&&i.push(t.target.className),i}}(e[n]))),a+=".delegateEvents"+this.cid,""===l?this.$el.on(a,s):this.$el.on(a,l,s)}}return this},doInstrument:function(e){return/handleAction$|openHref/i.test(e)?!1:!0},render:function(){return this},setEditable:function(e){e?(this.insertAt(this.getEditControls(),0,!0),this.$el.addClass("mb-editable")):this.$el.removeClass("mb-editable")},edit:function(e){if(!this.editingDisabled){if(e&&"keypress"===e.type&&13!==e.which)return!0;e&&e.stopPropagation(),this.options.template.editable&&this.options.application.editTemplate(this.options.template)}},"delete":function(e){if(!this.editingDisabled){if(e&&"keypress"===e.type&&13!==e.which)return!0;this.setEditable(!1),this.options.application.deleteTemplate(this.options.template)}},disableEditing:function(){this.editingDisabled=!0},getEditControls:function(){return this.make("div",{"class":"mb-edit-bar"},(this.options.template&&this.options.template.editable?'<button class="btn edit"><i class="icon-pencil"></i></button>\n':"")+'<button class="btn delete"><i class="icon-trash"></i></button>\n'+'<span class="btn mb-drag-handle"><i class="icon-move"></i></span>')},change:function(e,t){t=t||{},t.removed&&this.remove()},handleAction:function(e,i){var r=e.currentTarget.getAttribute("data-event-mask")||"keypress|click";if(e.currentTarget.disabled===!0)return!0;if(!new RegExp(r).test(e.type))return!0;if(e&&"keypress"===e.type&&e.which!==n.enter&&(e.which!==n.space||!/button/i.test(e.currentTarget.getAttribute("role"))))return!0;this.options.application&&t.isFunction(this.options.application.closeMenus)&&this.options.application.closeMenus();var o=e.currentTarget,l=!/checkbox|radio/i.test(o.type),u=void 0,c=o.getAttribute("data-action-object"),h=o.getAttribute("data-action-name"),d=o.getAttribute("data-action"),p=o.getAttribute("data-name"),m=o.getAttribute("data-add"),f=o.getAttribute("data-unset"),g=o.getAttribute("data-value"),v=o.getAttribute("data-ref"),_=o.getAttribute("href"),y=!1,b=new s.AttributeModel(o,"data-").getCamelCase();b.actionName&&delete b.actionName,!g&&/^select$/i.test(o.tagName)&&(g=o.value),!g&&/checkbox|radio/i.test(o.type)&&(g=o.checked);var w=a(":focus");if(c&&e&&e.handleObj&&e.handleObj.selector&&!e.handleObj.selector.match(/.*\[data-action-object\]/))return!l;try{g=JSON.parse(g)}catch(e){}if(v&&(g=this.getActionModel(e).output.get(v)),!c)if(h)c={},c[h]=b;else if(p)c={setValue:{key:p,value:g}};else if(m)c={addValue:{key:m,value:g}};else if(f)c={unsetValue:{key:f}};else if(d){y=!0;var x=new Function("application","view",d);try{x.apply(this.getActionModel(e),[this.options.application,this])}catch(e){console.error("Failed to execute action",JSON.stringify(d),e)}}else _&&(c={openHref:{href:_}});if(c){y=!0,/string/i.test(typeof c)&&(c=JSON.parse(c));try{t.forEach(c,t.bind(function(t,n){var s=this.handleActionObjectCall(t,n,o,w,i,e);u!==!1&&(u=s)},this)),c.stopPropagation&&(l=!0)}catch(e){console.error("Failed to execute action",c,e.stack,e)}}!y||"undefined"!=typeof u&&u!==!1||l&&!e.enforceDefault&&(e.preventDefault(),e.stopPropagation())},handleActionObjectCall:function(e,t,i,n,s,r){return this.options.application.handleAction(e,t,i,this.getActionModel(r),this,n,s,r)},getActionModel:function(){return this.model},$getOrCreateInfoModal:function(){return this.$infoModal?this.$infoModal:(this.$infoModal=a('<div class="modal hide fade" tabindex="-1" role="dialog" aria-label="'+r("info_header")+'" aria-hidden="true">'+'<div class="modal-body">'+'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã</button>'+'<p class="mb-modal-content"></p>'+"</div>"+"</div>"),a(document.body).append(this.$infoModal),this.$infoModal)},showModalWhenClipped:function(e){var t,i=e.currentTarget;s.isClipped(i)&&(t=this.$getOrCreateInfoModal(),t.find(".mb-modal-content").html(i.innerHTML),t.modal(),e.preventDefault(),e.stopPropagation())},updateCursorForClippedElement:function(e){var t=e.currentTarget;s.isClipped(t)?a(t).addClass("mb-clickable"):a(t).removeClass("mb-clickable")},setModel:function(e){this.model&&this.stopListening(this.model),this.model=e,this.model&&(this.listenTo(this.model,"computing",this.computing),this.listenTo(this.model,"computed",this.computed),this.listenTo(this.model,"aborted",this.aborted),this.listenTo(this.model,"change",this.change),this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"destroy",this.remove))},appendChild:function(e,t){return e?(this.el.appendChild(e),t&&this.getOrCreateOwnNodes().push(e),e):void 0},getOrCreateOwnNodes:function(){return null==this.ownedNodes&&(this.ownedNodes=[]),this.ownedNodes},insertBefore:function(e,t,i){return e&&t?(this.el.insertBefore(e,t),i&&this.getOrCreateOwnNodes().push(e),e):void 0},insertAt:function(e,t,i){return this.el.childNodes.length>t?this.insertBefore(e,this.el.childNodes[t],i):this.appendChild(e,i),e},owns:function(e){return-1!=this.ownedNodes.indexOf(e)},removeOwnedNode:function(e){if(e){var i=t.indexOf(this.getOrCreateOwnNodes(),e);i>=0&&this.ownedNodes.splice(i),e.parentNode&&e.parentNode.removeChild(e)}},removeOwnedNodes:function(){t.each(this.getOrCreateOwnNodes(),function(e){e.parentNode&&e.parentNode.removeChild(e)}),this.ownedNodes=[]},remove:function(e){this.options.focusNext&&s.focusNextIfActive(this.el),e&&e!==this.model||(this.setEditable(!1),this.computed(),a(this.el).find(":focus").trigger("changeselect"),this.removeOwnedNodes(),this.options.template&&this.options.template.el==this.el||a(this.el).remove(),this.$infoModal&&this.$infoModal.remove(),this.setModel(),this.stopListening(),this.undelegateEvents(),this._removed=!0)},isComputing:function(){return this._computing},computing:function(){this._computing=!0,this.$el.removeClass("mb-initial").addClass("mb-computing").attr("aria-busy","true")},computed:function(){this._computing=!1,this.$el.removeClass("mb-computing").removeAttr("aria-busy")},disconnect:function(){this.stopListening(this.model)},aborted:function(){this.computed()}});return l}),Mindbreeze.define("components/list/js/list",["api/v2/search","client/template","component!base","jquery","underscore"],function(e,t,i,n,s){var r=t.extend({initialize:function(){t.prototype.initialize.apply(this,s.toArray(arguments)),this.$el=n(this.el)},schema:new t.Schema({inputAttributes:{}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template",repeated:!0}},getContent:function(){return s.map(this.children,function(e){return e.template})},setContent:function(e,t){if(t.at)this.children[t.at].template=e;else if(s.isArray(e)&&e.length==this.children.length)for(var i=0;i<e.lenght;i++)this.children[i].template=e},createView:function(e){var t=new this.constructor.View(s.extend({},e,{model:this.model(e),application:e.application,template:this,el:this.el,elementTemplate:this.children[0].template}));return this.instances.push(t),t},remove:function(e){s.forEach(this.instances,function(e){e.remove()}),this.instances=[],s.forEach(e.node.children,function(e){e.template.remove({node:e})})}}),a=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.collection=this.options.model,this.collection.on("change",this.rebuildAll,this),this.collection.on("add",this.rebuildAll,this),this.views=[],this.rebuildAll()},addView:function(e){this.views.push(e)},removeViews:function(){s.each(this.views,function(e){e.remove()})},remove:function(e){return e&&e!==this.model?void 0:(this.removeViews(),i.prototype.remove.apply(this,arguments),this.collection.off("change"),this.collection.dispose&&this.collection.dispose(),this)},getModels:function(){return this.collection&&(this.collection.get()||this.collection.models)},rebuildAll:function(e,t,i){var n=this,r=this.getModels();i=i||{},this.removeViews(),s.each(r,function(e,t){var i=t,s=n.collection.submodel?n.collection.submodel("["+JSON.stringify(t)+"]"):n.collection.at(t),r=n.createChildView(s,i);if(r){n.addView(r);var a=r.render().el;n.insertAt(a,i)}})},createChildView:function(e,t){return this.options.elementTemplate?this.options.elementTemplate.createView({model:e,position:t,application:this.options.application}):new this.childView({model:e,position:t,parent:this,application:this.options.application})}});return r.View=a,r}),Mindbreeze.define("utils/mustache",["underscore","mustache","utils/jsonpath","i18n/i18n"],function(e,t,i,n){function s(e){return this.escapeFunction=e,t.Writer.apply(this,Array.prototype.slice.call(arguments,1))}function r(e,t){this.template=e;var t=t||{};this.options=t}function a(e){return e}var o=/i18n\./;return t.Writer&&t.Writer.prototype._escaped?(s.prototype=e.clone(t.Writer.prototype),s.prototype.constructor=s,s.prototype._escaped=function(e,i){return this.escapeFunction?this.escapeFunction(this._name(e,i)):t.Writer.prototype._escaped.apply(this,arguments)}):s=t.Writer,e.extend(r.prototype,{_format:function(e){var t=null;switch(e[0]){case"#":t="PROPERTY";break;case"name":t="VALUE";break;case"&":t="HTML";break;case"^":t="PROPERTY";break;case"text":}return t},addPropertiesFromTokens:function(t,i){for(var n=0;n<t.length;++n){var s=t[n],r="#"==s[0],a=s[1],o=/\?$/.test(a);a=a.replace(/\?$/,"");var l=this._format(s);if(null!=l){var u=null;if(o&&this.addPropertiesFromTokens(s[4],i),r&&(u=this.addPropertiesFromTokens(s[4],{})),i[a]?i[a].format!=l&&(i[a].format="PROPERTY"):i[a]={format:l},null!=u){var c=i[a].properties||{};i[a].properties=e.extend(c,u)}}}return i},getNestedProperties:function(){if(!this.tokens)try{this.tokens=t.parse(this.template)}catch(e){throw console&&console.warn&&console.warn("Failed to parse template ",this.template,e),e}return this.nestedProperties||(this.nestedProperties=this.addPropertiesFromTokens(this.tokens,{})),this.nestedProperties},getProperties:function(){if(!this.tokens)try{this.tokens=t.parse(this.template)}catch(e){throw console&&console.warn&&console.warn("Failed to parse template ",this.template,e),e}if(!this.properties){for(var i={},n=[].concat(this.tokens),s=0;s<n.length;++s){var r=n[s],a=r[1],o=/\?$/.test(a);a=a.replace(/\?$/,"");var l=this._format(r);null!=l&&(o&&(n=n.concat(r[4])),i[a]?i[a].format!=l&&(i[a].format="PROPERTY"):i[a]={format:l})}this.properties=i}return this.properties},_toString:function(t){if(e.isArray(t)){var i=this;return e.map(t,function(e){return i._toString(e)}).join(",")}return e.isString(t)?t:null!=t?JSON.stringify(t):t},renderTokens:function(t,i,s,r,a,l){function u(t){if(e.isArray(t)){var i=e.filter(e.flatten(t,!1),function(e){return null!=e});return 0==i.length&&t.length>0?null:i}return t}for(var c={},h=[],d=0;d<t.length;++d)try{var p=t[d],m=p[1],f=this._format(p);if(null==f){h.push(p);continue}var g=l+d;if(o.test(m)){p[1]=m;var v=m.replace(o,"");c.i18n=c.i18n||{},c.i18n[v]=n(v),h.push(p)}else{var _;if(/\?$/.test(m)?(_=!(!i||!i.get(m.replace(/\?$/,""),{format:f})),_||(_=null)):_=i&&i.get(m,{format:f}),"PROPERTY"==f){var y=this,b=function(t,n,s,o,l){var u,c,h,d;try{var p=n[4];n=e.clone(n);var m;if(/\?$/.test(t)?(m=!(!i||!i.get(t.replace(/\?$/,""),{format:"PROPERTY"})),m||(m=null)):m=i&&i.get(t,{format:f}),"^"==n[0]){if(null!=m)return;n[0]="#",u=i,h=i}else{if(null==m)return;if(e.isObject(m)||e.isArray(m)){u=i&&i.submodel(t,{format:f}),c=!0;try{h=i&&i.submodel(t,{format:"VALUE"}),d=!0}catch(g){h=u}}else u=i}var v=y.renderTokens(p,u,h,r,a,s+"_");n[1]=s,n[4]=v.tokens,l[s]=v.view,o.push(n)}finally{c&&u&&u.dispose&&u.dispose(),d&&h&&h.dispose&&h.dispose()}};if(e.isArray(_))for(var w=0;w<_.length;++w)b(m+"["+w+"]",p,g+"_"+w,h,c);else b(m,p,g,h,c)}else{p=e.clone(p);var _,x=!1;/\?$/.test(m)&&(m=m.replace(/\?$/,""),x=!0),_=i&&i.get(m,{format:f}),null==u(_)&&(_=s&&s.get(m,{format:f})),x&&(_=!!_,_||(_=null)),"PROPERTY"==f||e.isString(_)||(_=this.str(_)),p[1]=g,c[g]=_,h.push(p)}}}catch(M){console&&console.warn&&console.warn("Failed to render token.",M,M.stack)}return{view:c,tokens:h}},render:function(i,n,r){if(!this.tokens)try{this.tokens=t.parse(this.template)}catch(a){throw console&&console.warn&&console.warn("Failed to parse template ",this.template,a),a}var r=r||{};this.str=r.str||e.bind(this._toString,this),this.getProperties();var o=this.renderTokens(this.tokens,i,i,n,r,"token_");return new s(this.options.escape).compileTokens(o.tokens,"")(o.view,!1)}}),r.noEscape=a,r}),Mindbreeze.define("components/mustache/js/mustache",["component!base","client/template","mustache","utils/dom","utils/mustache","api/v2/common","jquery","i18n/i18n","underscore"],function(e,t,i,n,s,r,a,o,l){var u=function(e,t){return l.each(t,function(t,i){var n=e[i];n&&n.format!==t.format&&(t.format="PROPERTY"),e[i]=t,n&&n.properties&&(t.properties=t.properties?u(n.properties,t.properties):n.properties)}),e},c=t.extend({editableName:"editor_result_template_template_label",initialize:function(){t.prototype.initialize.apply(this,l.toArray(arguments)),this.content=this.el.innerHTML,this.mustacheAdapter=new s(this.content),this.attrAdapters=l.reduce(this.attributeModel.get(),function(e,t,i){return/^attr-/.test(i)&&(e[i.substring(5)]=new s(t,{escape:s.noEscape})),e},{});try{this.properties=this.mustacheAdapter.getNestedProperties()}catch(e){console&&console.warn(e),this.properties={}}this.properties=l.reduce(this.attrAdapters,function(e,t){return u(t.getNestedProperties(),e)},this.properties),this.editable=!1},isTemplatePresent:function(){return/\S/.test(this.el.innerHTML)},schema:new t.Schema({}),hasContent:function(){return!0},getContentSchema:function(){return{type:"mustache"}},getContent:function(){return this.el.innerHTML},setContent:function(e){return n.updateScriptContent(this.el,e),this},createView:function(e){var t=this.model(e);e=l.extend({},this.attributeModel.get(),e,{template:this,content:this.content,tagName:this.el.getAttribute("data-tag-name")||"div",className:this.el.getAttribute("data-class-name"),model:t}),delete e.el;var i=new this.constructor.View(e);return this.instances.push(i),i},getProperties:function(e){if(e){var t={};return e.replace(new RegExp("{{(\\^|#|\\/|=|!|>|\\{|%)?([^\\}]+)\\1?}}+","g"),function(e,i,n){t[n]={format:"HTML"}}),t.hasOwnProperty("mes:date")&&!t.hasOwnProperty("modification_date")&&(t.modification_date={format:"HTML"}),t}}}),h=e.extend({initialize:function(t){this.$el.addClass("mb-dont-serialize"),this.options.template&&this.options.template.mustacheAdapter&&(this.mustache=this.options.template.mustacheAdapter),this.attrs=this.options.template&&this.options.template.attrAdapters,this.options.templateString&&(this.content=this.options.templateString||this.options.template.el.innerHTML),e.prototype.initialize.apply(this,l.toArray(arguments)),this.createSubComponent=t.createSubComponent,this.render()},change:function(){this.render()},setEditable:function(){},renderData:function(){return this.options.useOutputOnly?this.model&&this.model.output:this.model},render:function(){if(this.applyAttrs(),this.mustache)try{this.$el.html(this.mustache.render(this.renderData(),r.PropertyFormat).replace(/template:script/g,"script"))}catch(e){console&&console.error(e,e.stack),this.el.innerHTML=""}else this.el.innerHTML=i.to_html(this.content,l.extend({i18n:o.strings},this.renderData().get()||this.renderData().toJSON()||{}));return this.options.application&&this.options.application.views&&this.options.modelType&&this.options.application.views.trigger("afterRender:"+this.options.modelType,this.options.application,this,this.model),this},applyAttrs:function(){var e=this;l.each(this.attrs,function(t,i){e.renderAttr(i,t)})},renderAttr:function(e,t){var i;try{i=t.render(this.renderData(),r.PropertyFormat)}catch(n){console&&console.error(n),i=""}""==i?this.$el.removeAttr(e):this.$el.attr(e,i)}});return c.View=h,c}),Mindbreeze.define("editors/adder/js/model",["i18n/i18n","component!list","component!mustache","utils/dom","underscore","backbone"],function(e,t,i,n,s,r){t.View;var a=r.Model.extend({create:function(e,t,i){var n=this.get("templateType"),s=e.create(n,this.get("options"));i?t.el.insertBefore(s,i):t.el.appendChild(s),window.setTimeout(function(){e.reload(function(){s.scrollIntoView(),e.editTemplate(e.templateTree.getTemplateByEl(s))})},0)},toJSON:function(){var t=r.Model.prototype.toJSON.apply(this,arguments);return s.forEach(t,function(i,n){t[n]="id"===n?i:e(i)}),t}}),o=r.Model.extend({toJSON:function(){var t=r.Model.prototype.toJSON.apply(this,arguments);return s.forEach(t,function(i,n){t[n]="id"===n?i:e(i)}),t}}),l=r.Collection.extend({model:a}),u=r.Collection.extend({model:o});return u.Adders=l,u}),Mindbreeze.define("client/templateregistry",["backbone","editors/adder/js/model","i18n/i18n","underscore"],function(e,t,i,n){function s(e,s,r,a){var o,l=n.collect(s.getAdders(r,a),function(e){return n.extend({templateType:s.id},e)}),u=i(s.name||s.id),c=e.get(u),h=new t.Adders,d=e.reduce(function(e,t,i){return e>=0?e:t.get("id")===u?i:e},-1);e.remove(u),c&&(o=c.get("adders"),h.add(o.filter(function(e){return e.get("templateType")!==s.id})));var p={};d>=0&&(p.at=d),l&&l.length&&(h.add(l),e.add({id:u,name:s.name||s.id,description:s.description,adders:h},p))}var r=function(e,t){return n.isNumber(e.weight)&&n.isNumber(t.weight)?e.weight-t.weight:n.isNumber(e.weight)?-1:1},a=function(){this.templateTypes={}};n.extend(a.prototype,e.Events,{add:function(e){this.templateTypes[e.id]=e},getAdders:function(e,i){var a=this,o=new t,l=n.pluck(n.values(this.templateTypes).sort(r),"id");return n.forEach(l,function(t){var n=a.templateTypes[t];n.on&&n.on("changed",function(){s(o,n,e,i)}),s(o,n,e,i)}),o},create:function(e,t){var i=this.templateTypes[e];return i?i.create(t):null}});var o=new a;return o}),Mindbreeze.define("client/formqueryadapter",["underscore","extensions","i18n/i18n","api/v2/api","backbone","jquery"],function(e,t,i,n,s){var r=function(){};return e.extend(r.prototype,s.Events,{USER_QUERY_NAME:"query",formFieldTagNamePattern:/^input|textarea|select$/i,forms:[],fields:{},addForm:function(t){e.indexOf(this.forms,t)>=0||(this.forms.push(t),this._updateFields())},findElements:function(e){var t={},i={fieldsetcount:0},n=[];return this.addElement(e,t,n,[]),this._collectFormFields(e,t,i,[],n),n},removeForm:function(t){var i=e.indexOf(this.forms,t);i>=0&&delete this.forms[i],this._updateFields()},_collectFormFields:function(e,t,i,n,s,r){r||(r=e),n||(n=[]);var a=r.getAttribute("data-query-fieldset"),o=r.getAttribute("data-name")||"_id_queryfieldset"+JSON.stringify(i.fieldsetcount);if(a&&"alternatives"==a&&(n=n.concat(["and",o,"or"]),i.fieldsetcount++),!this.addElement(r,t,s,n))for(var l=0;l<r.childNodes.length;++l){var u=r.childNodes[l];1==u.nodeType&&this._collectFormFields(e,t,i,n,s,u)}},addElement:function(e,t,i,n){if(e.tagName.match(this.formFieldTagNamePattern)){var s=e.getAttribute("name"),r=e.getAttribute("data-query-label"),a=e.getAttribute("data-query-path-suffix")||[],o=e.getAttribute("data-query-exclude"),l=e.getAttribute("data-query-type")||"unparsed";if("true"==o&&(a=["not"].concat(a)),"query"!=s&&null==r&&(r=s),!s)return;return t[s]||(i&&i.push(e),t[s]={},r&&(t[s].label=r),l&&(t[s].queryType=l),t[s].path=0==n.length?["and",s]:n.concat([s]),a&&a.length>0&&(t[s].path=t[s].path.concat(a))),!0}},_updateFields:function(){var t=this,i={fieldsetcount:0};this.fields={},e.forEach(this.forms,function(e){t._collectFormFields(e,t.fields,i,[])
})},dispose:function(){delete this.forms,delete this.fields},field:function(e){return this.fields[e]},queryField:function(){return this.fields[this.USER_QUERY_NAME]||{path:["and","query"]}},_hasAllowedPropertiesOnly:function(t){var i=Array.prototype.slice.call(arguments,1).sort();return!e.find(t,function(t,n){return e.indexOf(i,n,!0)<0})},userQueryExprAndPath:function(e){return this.exprAndPath(this.USER_QUERY_NAME,e)},exprAndPath:function(t,i){if(!i)return this.field(t);var n=this.field(t),i=e.clone(i);return n?(n.label&&!i.label&&(i.label=n.label),{path:n.path,expr:i}):null}}),r}),Mindbreeze.define("components/stack/js/stack",["i18n/i18n","component!base","client/template","backbone","jquery","underscore"],function(e,t,i,n,s,r){var a=i.extend({createSubView:function(e,t){var n=r.toArray(arguments);n.splice(2,1,t.model),i.prototype.createSubView.apply(this,n)}});return a.Model=n.Model.extend({push:function(e){var t=this.get("child"),i=this;t?t.push(e):(this.set("child",e),this.listenTo(e,"change",function(){i.trigger.apply(i,["change"].concat(Array.prototype.slice.apply(1,arguments)))}))},pop:function(){var e,t,i=this.get("child");return i?(e=i.get("child"))?i.pop():(t=this.get("child"),this.unset("child"),this.stopListening(t),t):void 0},popToApplication:function(e){return this.get("application")===e?(this.unset("child"),!0):(this.get("child")&&this.get("child").popToApplication(e),void 0)},popAll:function(){var e=this.get("child");e&&e.popAll(),this.unset("child")},lastChild:function(){for(var e=this.get("child");e&&e.get("child");)e=e.get("child");return e}}),a.View=t.extend({options:{className:"mb-stack-element"},events:function(){return r.extend({},t.prototype.events,{keyup:"closeOnEscape","keypress .mb-stack-title":"closeChildren","click .mb-stack-title":"closeChildren","keypress .mb-stack-close":"close","click .mb-stack-close":"close"})},closeOnEscape:function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.close(e))},close:function(e){return e&&"keypress"===e.type&&13!==e.which?!0:(this.options.parent&&this.options.parent.closeChildren(e),void 0)},initialize:function(){t.prototype.initialize.apply(this,arguments),this.$el.hasClass("mb-stack")||(this.$el.addClass(this.options.className).addClass("mb-role"),this.$el.attr("role","document"),this.$el.attr("aria-labelledby","stack-title-"+this.cid)),this.titleEl=this.$el.find("> .mb-stack-title").get(0),this.contentEl=this.$el.find("> .mb-stack-content").get(0),this.options.parent&&this.insertAt(this.make("button",{"class":"mb-stack-close btn-link pull-right mb-clickable mb-no-print"},'<i class="icon-remove-circle"></i> '+e("Close")),0),this.handleResize=r.bind(this.handleResize,this),s(window).on("resize",this.handleResize)},handleResize:function(){this.model&&this.model.unset("scrollTop")},setModel:function(){t.prototype.setModel.apply(this,arguments),this.model&&(this.listenTo(this.model,"change:child",this.updateChild),this.listenTo(this.model,"change:title",this.updateTitle),this.listenTo(this.model,"change:content",this.updateContent))},closeChildren:function(e){if(e&&"keypress"===e.type&&13!==e.which)return!0;e.preventDefault(),e.stopPropagation();var t=this.model.get("child");if(t){t.trigger("remove"),this.model.trigger("closeStack",t),this.model.unset("child");var i=t.get("previousFocus");i&&i.focus(),this.model.get("scrollTop")&&(this.$el.scrollParent().scrollTop(this.model.get("scrollTop")),this.model.unset("scrollTop"))}},updateTitle:function(){this.titleEl||(this.titleEl=this.make("div",{"class":"mb-stack-title",id:"stack-title-"+this.cid}),this.el.appendChild(this.titleEl)),this.titleEl.innerHTML=this.model.get("title")},updateContent:function(){this.contentEl||(this.contentEl=this.make("div",{"class":"mb-stack-content"}),this.el.appendChild(this.contentEl)),this.contentEl.innerHTML=this.model.get("content")},updateChild:function(){var e=this.model.get("child");e&&!this.childEl&&(this.addChild(e),this.$el.addClass("mb-has-child")),e||(this.childEl&&(this.childEl.parentNode&&this.childEl.parentNode.removeChild(this.childEl),delete this.childEl),this.$el.removeClass("mb-has-child"))},addChild:function(e){this.model.set("scrollTop",this.$el.scrollParent().scrollTop());var t=new a.View({model:e,parent:this});this.childEl=t.render().el,t.options.application=new this.options.application.constructor(r.extend({rootEl:this.childEl,startSearch:!1},e.get("applicationOptions"))),e.set("application",t.options.application),t.options.application.models.stack=this.options.application.models.stack,this.appendChild(this.childEl)},render:function(){return this.updateTitle(),this.updateContent(),this.updateChild(),this},remove:function(){t.prototype.remove.apply(this,arguments),this.options.application.parentApplication&&this.options.application.destroy(),s(window).off("resize",this.handleResize)}}),a}),Mindbreeze.define("client/queryprofiler",["backbone","moment","underscore","extensions","client/application","component!stack","service/stub","api/v2/personalization","service/channel","service/channels","model/persisted_collection","api/v2/resources","jquery"],function(e,t,i,n,s,r,a,o,l,u,c,h,d){var p=function(e){this.application=e.application,this.listenTo(this.application,"destroy",this.destroy),e=e||{};var t=e.profilerSettings||{};this.SEARCH_INTERVALL=t.searchIntervalSeconds||60,this.WEIGHT_PREVIEW=t.actionWeightPreview||.5,this.WEIGHT_OPENHREF=t.actionWeightOpenHREF||1,e.parentProfiler?(this.parentProfiler=e.parentProfiler,this.queryContext=e.parentProfiler.queryContext):(this.queryContext={query_id:this.getTime()},this.sessionContext=this.setNewSession()),this.currentQueryObject=null,this.currentRefinements=null,this.listenTo(this.application,"actionperformed",this.actionPerformed),this.listenTo(this.application,"changeUserQueryTab",this.afterChangeView),this.scrollTimer_preview=null,this.scrollTimer_window=null,this.userHasScrolled=!1};return i.extend(p.prototype,e.Events,{isPersonalizationEnabledForChannel:function(e){try{var t=this.application.models.sourceInfo.get(["sources","sources",e,"services"])||[],n=i.filter(t,function(e){return"personalization"==e.id});return n&&n.length>0}catch(s){return!1}},registerSearchModel:function(e){this.listenTo(e,"changeinput",this.onUserQuery),this.listenTo(this.application.models.stack,"closeStack",this.stackClosed)},unregisterSearchModel:function(e){this.stopListening(e)},handleWindowScrolling:function(){this.userHasScrolled||(null!==this.scrollTimer_window&&clearTimeout(this.scrollTimer_window),this.scrollTimer_window=setTimeout(i.bind(function(){this.userHasScrolled=!0},this),100))},afterChangeView:function(e,t){if(e){var i=t&&t.and&&t.and[1]&&t.and[1].name;e&&(this.queryContext.app_tab_id=e),i&&(this.queryContext.app_extend_tab_id=i)}},actionPerformed:function(t,n){var s=0,r="",a=this,o="";if("preview"==t)s=this.WEIGHT_PREVIEW,this.handleOpenPreview(n);else if("openHref"==t)s=this.WEIGHT_OPENHREF,this.handleOpenFolder();else if("vote"==t){if("toggleCommentBox"==u)return;var l=n.actionargs&&n.actionargs[0];l.weight;var u=l.action;"up"==l.weight?s=1:"down"==l.weight&&(s=-1),o=n.application.options.comment,n.application.options.comment=""}else{if("sendFeedback"!=t)return;n=i.extend(n,n.application.previewFeedback),o=n.comment,s=n.weight}var c=n.model.get("location"),h=n.model.get("mes:key"),d=n.model.get("category")+":"+n.model.get("categoryinstance"),p=n.model.channel;if(c&&p&&this.isPersonalizationEnabledForChannel(p.id)){var m=n.model.position,f=this.application.api.personalization.createStub(),g=i.extend({},e.Events);this.queryContext=this.getQueryContextProperties();var v=f.call(p,{query_result:{query_context:this.queryContext,result_id:c,action:t,action_trigger:r,position:m,weight:s,fqcategory:d,key:h,comment:o}},g);v.always(function(){a.application.trigger("queryprofilerdone")})}},getQueryContextProperties:function(){var e=i.find(this.application.models.sourceInfo.get("sources.sources[0].services"),function(e){return"personalization"==e.id}),t=e.personalization_options&&e.personalization_options.properties;if(t&&t.length){var n=this;this.queryContext.properties=[],i.each(t,function(e){n.queryContext.properties.push({key:e.key,value:n.getValueFromPersonalizationProperties(e)})})}return this.queryContext},getValueFromPersonalizationProperties:function(e){if("profile"==e.source){var t=this.application.models.profileSettings&&this.application.models.profileSettings.length>0;if(t)var i=this.application.models.profileSettings.models[0].get("data").settings;else var i=!1;if(i&&i[e.field])return i[e.field]+""}else if("searchrequest"==e.source){var n=this.application.models.search.get("search_request");if(n&&n[e.field])return n[e.field]+""}else{if("application"==e.source)return this.getPersonalizationApplication(e);if("result"==e.source){var s=this.application.models.search.get("resultset");if(s&&s[e.field])return s[e.field]+""}}},getPersonalizationApplication:function(){},handleOpenPreview:function(e){this.application.queryProfiler.options=e,this.sessionContext.actions.preview={start:this.getTime()},d(document).on("scroll",i.bind(this.handlePreviewScrollEvent,this,e))},handlePreviewScrollEvent:function(e){"scroll"==arguments[1].type&&(null!==this.scrollTimer_preview&&clearTimeout(this.scrollTimer_preview),this.scrollTimer_preview=setTimeout(i.bind(function(){var e=document.documentElement,t=document.body,i="scrollTop",n="scrollHeight",s=parseInt(100*((e[i]||t[i])/((e[n]||t[n])-e.clientHeight))),r=this.application.queryProfiler.sessionContext.actions.preview;(!r||!r.scrollPosition||r.scrollPosition<s)&&(this.application.queryProfiler.sessionContext.actions.preview.scrollPosition=s)},e),250))},handleOpenFolder:function(){this.sessionContext.actions.openHref={start:this.getTime()}},stackClosed:function(e){d(document).off("scroll"),e&&e.get&&this.sessionContext&&this.sessionContext.actions&&this.sessionContext.actions.preview&&this.sessionContext.actions.preview.start&&!this.sessionContext.actions.preview.end&&(this.sessionContext.actions.preview.end=this.getTime(),this.sessionContext.actions.preview.end-this.sessionContext.actions.preview.start,this.setPersonalization(e.get("actionOptions")))},setPersonalization:function(t){if(this.sessionContext.actions.preview.end&&this.sessionContext.actions.preview.start){var n=t.model&&t.model.channel;if(n&&this.isPersonalizationEnabledForChannel(n.id)){var s=this.application.api.personalization.createStub(),r=i.extend({},e.Events),a=t.model.get("location"),o=t.model.get("mes:key"),l=t.model.get("category")+":"+t.model.get("categoryinstance"),u=this.sessionContext.actions.preview.scrollPosition||0,c=t.model.position,h=this.sessionContext.actions.preview.end-this.sessionContext.actions.preview.start,d=s.call(n,{query_result:{query_context:this.application.queryProfiler.queryContext,position:c,result_id:a,action:"previewClosed",duration_in_ms:h,scroll_position_in_percentage:u,fqcategory:l,key:o}},r);d.always(function(){})}}},handleFocusEvent:function(){this.sessionContext&&this.sessionContext.actions&&this.sessionContext.actions.openHref&&this.sessionContext.actions.openHref.start&&!this.sessionContext.actions.openHref.end&&(this.sessionContext.actions.openHref.end=this.getTime(),(this.sessionContext.actions.openHref.end-this.sessionContext.actions.openHref.start)/1e3)},setQueryID:function(e){this.queryContext.prev_query_id=this.queryContext.query_id||null,this.queryContext.prev_refinement_id=this.queryContext.refinement_id||null,this.queryContext.query_id=e,this.queryContext.prev_refinement_id||delete this.queryContext.prev_refinement_id,delete this.queryContext.refinement_id},setRefinementID:function(e){this.queryContext.prev_refinement_id=this.queryContext.refinement_id,this.queryContext.refinement_id=e},createRequestTransformer:function(){var e=this;return function(t,i){return"search"==i.path&&t&&t.id&&e.isPersonalizationEnabledForChannel(t.id)&&(i.query_context=e.queryContext,i.query_context_user_query=e.application.getUnparsedUserQuery()),i}},destroy:function(){this.stopListening()},onUserQuery:function(e){var t=e.get("user.query.and.query"),n=this.currentQueryObject;i.isEqual(n,t)?this.onQueryRefinement(e):(this.setQueryID(this.getTime()),this.checkForNewSession(),this.currentQueryObject=t)},checkForNewSession:function(){var e=this.queryContext.prev_query_id,t=this.queryContext.query_id;if(this.sessionContext&&this.sessionContext.actions,!e)return!1;var i=(t-e)/1e3;i>this.SEARCH_INTERVALL&&(this.sessionContext=this.setNewSession())},setNewSession:function(){var e=this.sessionContext&&this.sessionContext.session_id,t={};return t.actions={},t.session_id=this.getTime(),e&&(t.prev_session_id=this.sessionContext.session_id),t},onQueryRefinement:function(e){var t=e.get("user.constraints");this.currentRefinements=t,this.queryContext.prev_refinement_id=this.queryContext.refinement_id,this.queryContext.refinement_id=this.getTime(),this.queryContext.currentRefinements||delete this.queryContext.currentRefinements,this.queryContext.prev_refinement_id||delete this.queryContext.prev_refinement_id},getTime:function(){return(new Date).getTime().toString()}}),p}),Mindbreeze.define("service/constrainedchannels",["underscore","service/channels"],function(e,t){var i=t.extend({initialize:function(e,i){t.prototype.initialize.apply(this,arguments),i=i||{},this.requestTransformers=i.requestTransformers||[]},setConstraint:function(e){this.constraint=e},getConstraint:function(){return this.constraint},prepareRequest:function(e,i){try{for(var n=0;n<this.requestTransformers.length;++n)i=this.requestTransformers[n](e,i,{path:i.path})}catch(s){console&&console.warn&&console.warn("Failed to transform request: ",s)}if(this.constraint){i.source_context||(i.source_context={});var r=this.constraint;i.source_context.constraints=i.source_context.constraints||[],i.source_context.constraints.push(r)}return t.prototype.prepareRequest.apply(this,arguments)}});return i}),Mindbreeze.define("utils/localStorage",["utils/browser"],function(e){var t={};return t.removeItem=function(e){delete t[e]},t.setItem=function(e,i){t[e]=i},t.getItem=function(e){return t[e]},e.localStorageAvailable()?localStorage:t}),Mindbreeze.define("model/tabs",["i18n/i18n","utils/localStorage","backbone","underscore"],function(e,t,i,n){var s=function(e,i){var n=this.settingName(),s=t[n];try{s=JSON.parse(s)}catch(r){s={}}if("undefined"==typeof i)return e?s[e]:s;e?s[e]=i:s=i;try{t[n]=JSON.stringify(s)}catch(r){}},r=i.Model.extend({initialize:function(){i.Model.prototype.initialize.apply(this,arguments),this.listenTo(this,"destroy",this.destroy)},destroy:function(){this.stopListening(),i.Model.prototype.destroy.apply(this,arguments),this.removeSettings()},get:function(t,n){n=n||{},n.localize=n.localize===!1?!1:!0;var s=i.Model.prototype.get.apply(this,arguments);return n.localize&&"name"===t&&(s=e(s)),s},set:function(e){var t;"name"===e&&(t=this.setting(),this.removeSettings()),i.Model.prototype.set.apply(this,arguments),t&&this.setting(null,t)},isCustomTab:function(){return!!this.get("customTab")},isDataSourceTab:function(){return!!this.get("_dataSourceTab")},settingName:function(){return"tabs."+(this.id||this.get("name",{localize:!1}))},setting:s,removeSettings:function(){t.removeItem(this.settingName())}});return i.Collection.extend({model:r,initialize:function(e,t){this.options=t,this.constraintsModel=t.constraintsModel,this.listenTo(this.constraintsModel,"change",this.update),this.listenTo(this,"add",this.update),this.listenTo(this,"remove",this.update),this.update()},save:function(){},update:function(){var e=!!this.constraintsModel.get("view"),t=this.constraintsModel.get("view.name"),i=!1;n.each(this.models,function(n){var s=n.get("name",{localize:!1})===t||!e&&!n.get("constraint");n.set("selected",s),s&&(i=!0)}),i||this.options.application.selectFirstTab()},getByName:function(e,t){var i=this.find(function(i){return i.get("name",t)===e});return i||t||(i=this.getByName(e,{localize:!1})),i},getSelectedTab:function(){var e=this.find(function(e){return e.get("selected")});return e},getSelectedTabName:function(){var e=this.getSelectedTab();return e?e.get("name"):void 0},settingName:function(){return"tabs.__global__"},setting:function(e,t){var i=this.getSelectedTab();return i?i.setting(e,t):s.apply(this,arguments)}})}),Mindbreeze.define("model/templateinfo",["backbone"],function(e){return e.Model.extend({initialize:function(t,i){e.Model.prototype.initialize.apply(this,arguments),i&&i.mainpartBinding&&this.listenTo(i.mainpartBinding,"change",this._mainpartBindingChanged)},_mainpartBindingChanged:function(e){this.set("mainpart",e.get())}})}),Mindbreeze.define("model/tasks",["i18n/i18n","utils/localStorage","backbone","underscore"],function(e,t,i,n){var s={INITIAL:0,RUNNING:1,TERMINATED:2},r=i.Model.extend({sync:function(){},initialize:function(e,t){this.attributes.state||(this.attributes.state=s.INITIAL),i.Model.prototype.initialize.apply(this,arguments),this.options=t||{}},progressAvailable:function(){return 1==this.options.progressAvailable},interruptible:function(){return 1==this.options.interruptible},start:function(){return this.set("state",s.INPROGRESS),this},state:function(){return this.get("state")},isFinished:function(){return 1==this.get("finished")},isCancelled:function(){return 1==this.get("cancelled")},isTerminated:function(){return this.state()==s.TERMINATED},isRunning:function(){return this.state()==s.RUNNING},start:function(e,t){return e=e||{},e=n.extend({},e,{state:s.RUNNING}),this.set(e,t),this},cancel:function(e,t){return e=e||{},e=n.extend({},e,{state:s.TERMINATED,cancelled:!0}),this.set(e,t),this},finish:function(e,t){return e=e||{},e=n.extend({},e,{state:s.TERMINATED,finished:!0}),this.set(e,t),this},stop:function(t,i){return t=t||{},t=n.extend({},t,{state:s.TERMINATED,finished:!0,exportStatus:e("EXPORT_"+i.status)}),this.set(t,i),this},get:function(e){return"isFinished"===e?this.isFinished():i.Model.prototype.get.apply(this,arguments)}}),a=i.Collection.extend({model:r,initialize:function(){}});return a}),Mindbreeze.define("bootstrap",["jquery"],function(e){/* ===================================================
 * bootstrap-transition.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * @license Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()})}(e),!function(e){var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){function i(){n.trigger("closed").remove()}var n,s=e(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),n=e(r),t&&t.preventDefault(),n.length||(n=s.hasClass("alert")?s:s.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,i):i())};var n=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var n=e(this),s=n.data("alert");s||n.data("alert",s=new i(this)),"string"==typeof t&&s[t].call(n)})},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(e),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[s]()),i[s](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),s=n.data("button"),r="object"==typeof i&&i;s||n.data("button",s=new t(this,r)),"toggle"==i?s.toggle():i&&s.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(e),!function(e){var t=function(t,i){this.$element=e(t),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var i=this.$element.find(".item.active"),n=i.parent().children(),s=n.index(i),r=this;if(!(t>n.length-1||0>t))return this.sliding?this.$element.one("slid",function(){r.to(t)}):s==t?this.pause().cycle():this.slide(t>s?"next":"prev",e(n[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,i){var n,s=this.$element.find(".item.active"),r=i||s[t](),a=this.interval,o="next"==t?"left":"right",l="next"==t?"first":"last",u=this;if(this.sliding=!0,a&&this.pause(),r=r.length?r:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:r[0]}),!r.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,s.addClass(o),r.addClass(o),this.$element.one(e.support.transition.end,function(){r.removeClass([t,o].join(" ")).addClass("active"),s.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each(function(){var n=e(this),s=n.data("carousel"),r=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),a="string"==typeof i?i:r.slide;s||n.data("carousel",s=new t(this,r)),"number"==typeof i?s.to(i):a?s[a]():r.interval&&s.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide]",function(t){var i,n=e(this),s=e(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=e.extend({},s.data(),n.data());s.carousel(r),t.preventDefault()})}(e),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,i,n,s;if(!this.transitioning){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(s=n.data("collapse"),s&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var s=this,r=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each(function(){var n=e(this),s=n.data("collapse"),r="object"==typeof i&&i;s||n.data("collapse",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i,n=e(this),s=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=e(s).data("collapse")?"toggle":n.data();n[e(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(s).collapse(r)})}(e),!function(e){function t(){e(n).each(function(){i(e(this)).removeClass("open")})}function i(t){var i,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=e(n),i.length||(i=t.parent()),i}var n="[data-toggle=dropdown]",s=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var n,s,r=e(this);if(!r.is(".disabled, :disabled"))return n=i(r),s=n.hasClass("open"),t(),s||n.toggleClass("open"),r.focus(),!1},keydown:function(t){var n,s,r,a,o;if(/(38|40|27)/.test(t.keyCode)&&(n=e(this),t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled"))){if(r=i(n),a=r.hasClass("open"),!a||a&&27==t.keyCode)return n.click();s=e("[role=menu] li:not(.divider):visible a",r),s.length&&(o=s.index(s.filter(":focus")),38==t.keyCode&&o>0&&o--,40==t.keyCode&&o<s.length-1&&o++,~o||(o=0),s.eq(o).focus())}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var i=e(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this}}(e),!function(e){var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each(function(){var n=e(this),s=n.data("modal"),r=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new t(this,r)),"string"==typeof i?s[i]():r.show&&s.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this),n=i.attr("href"),s=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},s.data(),i.data());t.preventDefault(),s.modal(r).one("hide",function(){i.focus()})})}(e),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var s,r;this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(s="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()},show:function(){var e,t,i,n,s,r,a;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(r),e.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),i=this.getPosition(t),n=e[0].offsetWidth,s=e[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":a={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":a={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":a={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":a={top:i.top+i.height/2-s/2,left:i.left+i.width}}e.offset(a).addClass(r).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).detach()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.detach()})}var i=this.tip();return i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=this;if(t)var i=e(t.currentTarget)[this.type](this._options).data(this.type);i[i.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each(function(){var n=e(this),s=n.data("tooltip"),r="object"==typeof i&&i;s||n.data("tooltip",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(e),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-content")||("function"==typeof i.content?i.content.call(t[0]):i.content)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each(function(){var n=e(this),s=n.data("popover"),r="object"==typeof i&&i;s||n.data("popover",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(e),!function(e){function t(t,i){var n,s=e.proxy(this.process,this),r=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=r.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,i=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),s=/^#\w/.test(n)&&e(n);return s&&s.length&&[[s.position().top+i.$scrollElement.scrollTop(),n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),s=this.offsets,r=this.targets,a=this.activeTarget;if(t>=n)return a!=(e=r.last()[0])&&this.activate(e);for(e=s.length;e--;)a!=r[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(r[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each(function(){var n=e(this),s=n.data("scrollspy"),r="object"==typeof i&&i;s||n.data("scrollspy",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(e),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,s=this.element,r=s.closest("ul:not(.dropdown-menu)"),a=s.attr("data-target");a||(a=s.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),s.trigger(n),n.isDefaultPrevented()||(i=e(a),this.activate(s.parent("li"),r),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}var r=i.find("> .active"),a=n&&e.support.transition&&r.hasClass("fade");a?r.one(e.support.transition.end,s):s(),r.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),s=n.data("tab");s||n.data("tab",s=new t(this)),"string"==typeof i&&s[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(e),!function(e){var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],s=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):s.push(t):i.push(t);return i.concat(n,s)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=e(t).map(function(t,n){return t=e(i.options.item).attr("data-value",n),t.find("a").html(i.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),i=t.next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each(function(){var n=e(this),s=n.data("typeahead"),r="object"==typeof i&&i;s||n.data("typeahead",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||(t.preventDefault(),i.typeahead(i.data()))})}(e),!function(e){var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),r=this.options.offset,a=r.bottom,o=r.top,l="affix affix-top affix-bottom";"object"!=typeof r&&(a=o=r),"function"==typeof o&&(o=r.top()),"function"==typeof a&&(a=r.bottom()),t=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=a&&s.top+this.$element.height()>=i-a?"bottom":null!=o&&o>=n?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?s.top-n:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each(function(){var n=e(this),s=n.data("affix"),r="object"==typeof i&&i;s||n.data("affix",s=new t(this,r)),"string"==typeof i&&s[i]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)})}),e(document).off(".data-api")}(e)}),/**
 * @license RequireJS text 2.0.9 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
Mindbreeze.define("text",["module"],function(e){var t,i,n,s,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),h=u&&location.hostname,d=u&&(location.port||void 0),p={},m=e.config&&e.config()||{};return t={version:"2.0.9",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=a[t];try{e=new ActiveXObject(i)}catch(n){}if(e){a=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,r=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(s="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,s){var r,a,o,l=t.xdRegExp.exec(e);return l?(r=l[2],a=l[3],a=a.split(":"),o=a[1],a=a[0],!(r&&r!==i||a&&a.toLowerCase()!==n.toLowerCase()||(o||a)&&o!==s)):!0},finishLoad:function(e,i,n,s){n=i?t.strip(n):n,m.isBuild&&(p[e]=n),s(n)},load:function(e,i,n,s){if(s.isBuild&&!s.inlineText)return n(),void 0;m.isBuild=s.isBuild;var r=t.parseName(e),a=r.moduleName+(r.ext?"."+r.ext:""),o=i.toUrl(a),l=m.useXhr||t.useXhr;!u||l(o,c,h,d)?t.get(o,function(i){t.finishLoad(e,r.strip,i,n)},function(e){n.error&&n.error(e)}):i([a],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)})},write:function(e,i,n){if(p.hasOwnProperty(i)){var s=t.jsEscape(p[i]);n.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,n,s,r){var a=t.parseName(i),o=a.ext?"."+a.ext:"",l=a.moduleName+o,u=n.toUrl(a.moduleName+o)+".js";t.load(l,n,function(){var i=function(e){return s(u,e)};i.asModule=function(e,t){return s.asModule(e,u,t)},t.write(e,l,i,r)},r)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var s=i.readFileSync(e,"utf8");0===s.indexOf("ï»¿")&&(s=s.substring(1)),t(s)}catch(r){n(r)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,i,n,s){var r,a=t.createXhr();if(a.open("GET",e,!0),s)for(r in s)s.hasOwnProperty(r)&&a.setRequestHeader(r.toLowerCase(),s[r]);m.onXhr&&m.onXhr(a,e),a.onreadystatechange=function(){var t,s;4===a.readyState&&(t=a.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=a,n(s)):i(a.responseText),m.onXhrComplete&&m.onXhrComplete(a,e))},a.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,s="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),s)),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(a),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,a,o,l={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(o,1,0,!1),a=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),a.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(i.available(),l),a.close(),i.close(),t(l.value)}catch(u){throw new Error((o&&o.path||"")+": "+u)}}),t}),Mindbreeze.define("text!components/preview/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-class-name="mb-preview">\n  {{^.?}}{{{i18n.document-not-found}}}{{/.?}}\n  {{{icon}}}\n  <dl class="mb-comma-separated-values mb-horizontal">\n    {{#mes:date?}}<dt>{{{i18n.date}}}</dt><dd>{{{mes:date}}}</dd>{{/mes:date?}}\n    {{#mes:summary}}<dt>{{name}}</dt>{{#data}}<dd>{{{html}}}</dd>{{/data}}{{/mes:summary}}\n  </dl>\n  <section>\n    {{{content}}}\n  </section>\n</script>\n'}),Mindbreeze.define("components/preview/js/preview",["client/template","component!base","service/channel_factory","model/properties","utils/trace","api/v2/search","text!../mustache/template.mustache","jquery","underscore"],function(e,t,i,n,s,r,a,o,l){var u=e.extend({editableName:"editor_preview_title",initialize:function(){e.prototype.initialize.apply(this,l.toArray(arguments)),this.$el=o(this.el)},schema:new e.Schema({attributes:{completehtml:{type:"boolean",title:"editor_preview_completehtml",required:!1},enablePdfjs:{type:"boolean",title:"editor_preview_enable_pdfjs","default":!0,defaultValue:!0}},inputAttributes:{location:{title:"location"},full_html:{type:"boolean",title:"editor_preview_full_html",required:!1}}}),getDefaultTemplate:function(){return a},hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},getContent:function(){return this.children[0].template},createView:function(e){var t=!0;this.attributeModel.get("completehtml")===!1&&(t=!1);var i=new c(l.extend({},this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase(),e,{application:e.application,template:this,completehtml:t,resultTemplate:e.node.children[0].template}));return this.instances.push(i),i},remove:function(e){l.forEach(this.instances,function(e){e.remove()}),this.instances=[],l.forEach(e.node.children,function(e){e.template.remove({node:e})})},name:function(){return null}}),c=t.extend({initialize:function(){this.api=this.options.application.api,t.prototype.initialize.apply(this,l.toArray(arguments)),this.model=this.api.preview.createOutput(),this.resizeCallback=l.bind(this.resize,this),o(window).on("resize",this.resizeCallback)},remove:function(){return o(window).off("resize",this.resizeCallback),s.enableHTML5Screenshot(this.html5ScreenshotWasEnabled),t.prototype.remove.apply(this,arguments)},clear:function(){this.el.innerHTML=""},getDisplayedProperties:function(){var e=l.extend({},this.options.resultTemplate.properties);return delete e["."],e},pageY:function(e){return e.offsetParent?e.offsetTop+this.pageY(e.offsetParent):e.offsetTop},resizeToBottom:function(e,t){var i=e.ownerDocument.documentElement.clientHeight;i-=this.pageY(e)+t,i=0>i?0:i,e.style.height=i+"px"},resize:function(){var e=o(this.el).find(".mb-previewcontent").get(0);return e&&this.resizeToBottom(e,55),this},setContentPreview:function(e,t,i){i.channel,this.parentView&&this.parentView.$el.addClass("mb-in-preview"),this.removeOwnedNodes();var n=this.make("div",{"class":"mb-preview"}),s=""+t.content_location;if(t.query_expr)try{var a=r.SearchRequest.jsonifyQueryExpr(t.query_expr),o=JSON.stringify(a),l=encodeURIComponent(o);l&&(s+="&queryjsonv2="+l)}catch(u){console&&console.warn&&console.warn("Failed to process query expr:",t.query_expr,u)}if(s+="&itemdatajsonv2="+encodeURIComponent(JSON.stringify({collections:["testing"]})),"application/pdf"!=t.content_type||/mobile.*safari/i.test(navigator.userAgent))var c=this.make("iframe",{src:s,"class":"mb-previewcontent",style:"width: 100%; height: 100%"});else var c=this.make("object",{data:s,"class":"mb-previewcontent",style:"width: 100%; height: 100%"});n.appendChild(c),this.appendChild(n,!0),this.pdfjslistener(t),this.pdfjsviewerinit(c),n.setAttribute("tabindex","0")},pdfjslistener:function(e){var t=this;e&&e.model.output,window.addEventListener("message",function(i){if(l.isObject(i.data)&&i.data.name){var n=o.extend(!0,{},i.data),s={view:this,model:e.model,application:t.options.application,targetInfo:n};"pdfjsviewer:annotation:mouseover"==i.data.name?t.options.application.views.trigger("preview:annotation:mouseover",s):"pdfjsviewer:annotation:mouseleave"==i.data.name?t.options.application.views.trigger("preview:annotation:mouseleave",s):"pdfjsviewer:annoation:click"==i.data.name?t.options.application.views.trigger("preview:annotation:click",s):"pdfjsviewer:annotation:textselected"==i.data.name&&t.options.application.views.trigger("preview:text:selected",s)}},!1),t.options.application.views.on("preview:text:annotations:change",function(e){o(".mb-previewcontent").get(0).contentWindow.postMessage({name:"pdfjsviewerannotationschange",page:e.page,createOrUpdate:e.createOrUpdate,"delete":e.delete},"*")})},pdfjsviewerinit:function(e){if("IFRAME"==e.tagName){var t=this;o(e).load(function(){var e=t.options.application&&t.options.application.views&&t.options.application.views._events&&t.options.application.views._events["annotation:transform"];e||(e=function(e){return e.href&&e.href.match(/[&?]isnegation=true/)?(e.isEntity=!0,e.style={"border-color":"green"},e):(e.isEntity=!0,e.style={color:"green"},e)}),window.addEventListener("message",function(t){l.isObject(t.data)&&"pdfjsviewerinit"==t.data.name&&t.source.postMessage({name:"pdfjsviewersetuptransformers",annotationTransformer:encodeURI(e)},"*")},!1)})}},setHtmlPreview:function(e,t,i){var i=i||{},r=new n([],{propertyDefinitions:{}}),a=s.events.uiRender.enter(i.traceContext&&i.traceContext.context);try{this.parentView&&this.parentView.$el.addClass("mb-in-preview"),r&&r.trigger("change"),this.removeOwnedNodes();var u=this.make("div",{"class":"mb-html-preview-container"});o(u).html(t),i&&i.model&&i.model.get("categoryclass")&&l.isString(i.model.get("categoryclass"))&&o(u).addClass(i.model.get("categoryclass")),this.appendChild(u,!0),u.setAttribute("tabindex","0"),window.setTimeout(function(){u.focus()},1)}finally{a.leave()}},setPreview:function(e,t,i){i=i||{};var n=s.events.uiRender.enter(i.traceContext&&i.traceContext.context);try{var r=this,a=this.options.resultTemplate.createView({model:t,application:e}),o=a.remove;this.parentView&&this.parentView.$el.addClass("mb-in-preview"),a.remove=function(){l.isFunction(o)&&o.apply(a,arguments),r.parentView&&r.parentView.$el.removeClass("mb-in-preview")},t&&t.trigger("change"),this.removeOwnedNodes(),this.appendChild(a.el,!0),a.$el.attr("tabindex","0"),window.setTimeout(function(){a.$el.focus()},1)}finally{n.leave()}}});return u.View=c,u}),Mindbreeze.define("api/v2/applist",["api/v2/common","backbone","underscore","service/stub","service/factory","service/messageframe_channel","service/messageframes","utils/url","service/channels","client/localized_model"],function(e,t,i,n,s,r,a,o,l,u){var c={};c.Model=u.extend({localizedProperties:["title"],parse:function(e){return e=i.clone(e),e.channels=new l,i.each(e.sources,function(t){t=i.clone(t),t.url=t.searchURL+"api/v2/",t.id=t.url,t.useFactory=!0,t.enabled=!1,delete t.searchURL,e.channels.add(t)}),delete e.sources,e}}),c.Applists=t.Collection.extend({model:c.Model,comparator:function(e){return e.get("isCustomDataSources")?1:0},initialize:function(){this.add({id:"custom_datasources",isCustomDataSources:!0,title:"custom_datasources",channels:new l})},fetch:function(e){if(e.channels){var n=this,s=this._responseObserver={},l=new a({messageFramePath:"messageFrame.html?id=0&origin="+o.getOriginFromDataSource(window.location.href),getMessageFrameStart:function(){return/^messageFrame:0:/}});e=i.clone(e||{}),void 0===e.parse&&(e.parse=!0),i.extend(s,t.Events),this._responseObserver.on("response",function(t,i){t.id=i.id,n.add(t,e)}),this._responseObserver.on("error",function(){});var u=i.map(e.channels,function(e){return new r({url:e,messageFrames:l,method:"GET"})}),c=new h;c.cast(u,null,s)}}});var h=c.ApplistServiceStub=n.extend({path:"13.3-app-list.json"}),d=c.ServiceFactory=function(){};return i.extend(d.prototype,s.prototype,{cast:function(e){(new h).cast(e)},getApplistPath:function(){return(new h).path}}),c}),Mindbreeze.define("utils/aria/role",["jquery","underscore"],function(e,t){var i=function(){this.initialize.apply(this,arguments)};return i.prototype.initialize=function(i,n){n=n||{},this.$containerEl=e(i),this.selector=n.selector,this.handlers=n.handlers,this.$containerEl.on("mousedown.mb-role",this.selector,t.bind(this.mousedown,this)),this.$containerEl.on("focusin.mb-role",t.bind(this.focusin,this))},i.prototype.mousedown=function(t){var i=t.currentTarget,n=i.getAttribute("role");this.handlers[n]&&e(i).find("button[tabindex!=0],a[tabindex!=0],[role=tab][tabindex!=0]").attr("tabindex","-1")},i.prototype.focusin=function(i){var n=this,s=t.toArray(e(i.target).parents(this.selector)),r=!1,a=!1;i.mbRoleHandled||(e(i.target).is(this.selector)&&s.splice(0,0,i.target),t.each(s,function(t){if(!r){var s=t.getAttribute("role"),o=n.handlers[s],l=n.$el&&n.$el[0]==t;a=a||!!o,o&&(l||(n.$el&&(n.leave(n.$el,i),n.$el.attr("tabindex","0")),n.$el=e(t),n.$el.attr("tabindex","-1"),n.update(n.$el,i,o)),r=!0)}}),i.mbRoleHandled=a),!a&&n.$el&&(n.leave(n.$el,i),n.$el.attr("tabindex","0"),delete n.$el)},i.prototype.update=function(e,t,i){this.$el.attr("tabindex",-1),this.handler=i,this.handler.update.apply(this.handler,arguments)},i.prototype.leave=function(){this.handler&&this.handler.destroy(),delete this.handler},i.prototype.destroy=function(){this.$containerEl&&this.$containerEl.off(".mb-role"),delete this.$containerEl,delete this.selector,delete this.handlers},i}),Mindbreeze.define("utils/aria/accordion",["jquery","underscore","utils/keys","i18n/i18n"],function(e,t,i,n){var s=500,r=function(){};return r.prototype.switchTabs=function(t,i){var n=this,s=function(){var i=n.$tabs.not(t);i.attr("tabindex","-1"),t.attr("tabindex","0"),0==n.accordian&&(i.each(function(){e("#"+this.getAttribute("aria-controls")).hide().attr("aria-hidden","true")}),e("#"+t.attr("aria-controls")).show().removeAttr("aria-hidden"),i.attr("aria-selected","false"),i.trigger("tabdeactivate"),t.attr("aria-selected","true"),t.trigger("tabactivate")),t.attr("data-action-object")&&t.click()};window.clearTimeout(this._activateTimeout),t.focus(),i?this._activateTimeout=window.setTimeout(function(){s()},i):s()},r.prototype.togglePanel=function(e){var t=this.$panel.find("#"+e.attr("aria-controls"));"false"!==e.attr("aria-expanded")?(t.attr("aria-hidden","true"),t.slideUp(100),e.attr("aria-expanded","false"),e.attr("title",n("Open")),e.trigger("accordiondeactivate")):(t.removeAttr("aria-hidden"),t.slideDown(100),e.attr("aria-expanded","true"),e.attr("title",n("Close")),e.trigger("accordionactivate"))},r.prototype.updateFields=function(){this.$tabs=this.$panel.find(this.tabSelector),this.$panels=this.$panel.find(this.panelSelector)},r.prototype.handleTabKeyDown=function(e,t){if(!/input|select|option/i.test(t.target.tagName)){if(t.altKey)return!0;switch(t.keyCode){case i.enter:case i.space:return 1==this.accordian?(this.togglePanel(e),t.stopPropagation(),!1):!0;case i.left:case i.up:this.updateFields();var n;if(t.ctrlKey);else{var r=this.$tabs.index(e);n=0==r?this.$tabs.last():this.$tabs.eq(r-1),this.switchTabs(n,s)}return t.stopPropagation(),!1;case i.right:case i.down:this.updateFields();var n,r=this.$tabs.index(e);return n=r==this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(r+1),this.switchTabs(n,s),t.stopPropagation(),!1;case i.home:return this.updateFields(),this.switchTabs(this.$tabs.first(),s),t.stopPropagation(),!1;case i.end:return this.updateFields(),this.switchTabs(this.$tabs.last(),s),t.stopPropagation(),!1}}},r.prototype.handleTabKeyPress=function(e,t){if(!/input|select|option/i.test(t.target.tagName)){if(t.altKey)return!0;switch(t.keyCode){case i.enter:case i.space:case i.left:case i.up:case i.right:case i.down:case i.home:case i.end:return t.stopPropagation(),!1;case i.pageup:case i.pagedown:return t.ctrlKey?(t.stopPropagation(),!1):!0}return!0}},r.prototype.handleTabClick=function(e,t){this.updateFields();var i=this.$tabs.not(e);return e.attr("tabindex","0"),e.focus(),i.attr("tabindex","-1"),0==this.accordian?this.switchTabs(e):this.togglePanel(e),t.stopPropagation(),!1},r.prototype.handlePanelKeyDown=function(t,n){if(!/input|select|option/i.test(n.target.tagName)){if(n.altKey)return!0;switch(n.keyCode){case i.tab:this.updateFields();var r=t.find(":focusable"),a=r.index(e(n.target)),o=this.$panels.index(t),l=this.$panels.length;if(n.shiftKey){if(0==a&&o>0)for(var u=o-1;u>=0;u--){var c=this.$panels.eq(u),h=e("#"+c.attr("aria-labelledby"));if(r.length=0,r=c.find(":focusable"),r.length>0)return r.last().focus(),0==this.accordian&&(this.$tabs.attr("aria-selected","false"),h.attr("aria-selected","true")),n.stopPropagation(),!1}}else if(l>o&&a==r.length-1)for(var u=o+1;l>u;u++){var d=this.$panels.eq(u),p=e("#"+d.attr("aria-labelledby"));if(r.length=0,r=d.find(":focusable"),r.length>0)return r.first().focus(),0==this.accordian&&(this.$tabs.attr("aria-selected","false"),p.attr("aria-selected","true")),n.stopPropagation,!1}break;case i.left:case i.up:if(!n.ctrlKey)return!0;var m=e("#"+t.attr("aria-labelledby"));return m.focus(),n.stopPropagation(),!1;case i.pageup:var f;if(this.updateFields(),!n.ctrlKey)return!0;var m=this.$tabs.filter("[aria-expanded=true]"),a=this.$tabs.index(m);return f=0==a?this.$tabs.last():this.$tabs.eq(a-1),this.switchTabs(f,s),n.stopPropagation(),n.preventDefault(),!1;case i.pagedown:this.updateFields();var f;if(!n.ctrlKey)return!1;var m=e("#"+t.attr("aria-labelledby")),a=this.$tabs.index(m);return f=a==this.$tabs.length-1?this.$tabs.first():this.$tabs.eq(a+1),this.switchTabs(f,s),n.stopPropagation(),n.preventDefault(),!1}return!0}},r.prototype.handlePanelKeyPress=function(e,t){if(!/input|select|option/i.test(t.target.tagName)){if(t.altKey)return!0;if(t.ctrlKey&&(t.keyCode==i.pageup||t.keyCode==i.pagedown))return t.stopPropagation(),t.preventDefault(),!1;switch(t.keyCode){case i.esc:return t.stopPropagation(),t.preventDefault(),!1}return!0}},r.prototype.handlePanelClick=function(t){this.updateFields();var i=e("#"+t.attr("aria-labelledby")),n=this.$tabs.not(i);return i.attr("tabindex","0"),n.attr("tabindex","-1"),0==this.accordian&&(i.attr("aria-selected","true"),n.attr("aria-selected","false")),!0},e.extend(e.expr[":"],{focusable:function(t){var i=t.nodeName.toLowerCase(),n=e(t).attr("tabindex");return 1==e(t)["area"==i?"parents":"closest"](":hidden").length?!1:!isNaN(n)&&0>n?!1:1==/input|select|textarea|button|object/.test(i)?!t.disabled:1==("a"==i||"area"==i)?t.href.length>0:!1}}),t.extend(r.prototype,{tabSelector:"[role=tab][aria-hidden!=true]",panelSelector:"[role=tabpanel][aria-hidden!=true]",update:function(t,i){var n=this;this.$panel=t,this.$el=t,i.preventDefault(),i.stopPropagation(),this.accordian=/true/i.test(t.attr("aria-multiselectable")),this.updateSelection(),this.$panel.on("focus.mb-role-tablist",function(e){n.updateSelection(),e.preventDefault(),e.stopPropagation()}),this.$panel.on("keydown.mb-role-tablist",this.tabSelector,function(t){return n.handleTabKeyDown(e(this),t)}),this.$panel.on("keypress.mb-role-tablist",this.tabSelector,function(t){return n.handleTabKeyPress(e(this),t)}),this.$panel.on("click.mb-role-tablist",this.tabSelector,function(t){return n.handleTabClick(e(this),t)}),this.$panel.on("keydown.mb-role-tablist",this.panelSelector,function(t){return n.handlePanelKeyDown(e(this),t)}),this.$panel.on("keypress.mb-role-tablist",this.panelSelector,function(t){return n.handlePanelKeyPress(e(this),t)}),this.$panel.on("click.mb-role-tablist",this.panelSelector,function(t){return n.handlePanelClick(e(this),t)})},updateSelection:function(){var t,i,n=(document.activeElement.hasAttribute("data-prevent-refocus")||/input/i.test(document.activeElement&&document.activeElement.tagName))&&!!this.$el.find(document.activeElement).length,s=!n;this.updateFields(),this.$tabs.each(function(){var i=this===document.activeElement||!!e(this).find(document.activeElement).length;!t&&i&&(t=e(this),s=!1)}),t||this.$tabs.each(function(){t||"0"!==this.getAttribute("tabindex")?this.setAttribute("tabindex","-1"):t=e(this)}),t||(t=this.$tabs.first()),i=this.$tabs.not(t),t.attr("tabindex","0"),i.attr("tabindex","-1"),0==this.accordian&&(t.attr("aria-selected","true"),i.attr("aria-selected","false")),s&&t.focus()},destroy:function(){this.$panel&&this.$panel.off(".mb-role-tablist")}})}),Mindbreeze.define("utils/aria/toolbar",["jquery","underscore","utils/keys"],function(e,t,i){return{update:function(t,n){var s,r=this,a=t.find("a:visible, button:visible");e(n.target),this.$el=t,a.each(function(){s||document.activeElement!==this&&e(document.activeElement).parentsUntil(this).parent()[0]!==this||(s=e(this))}),s||(s=t.find("[tabindex=0]")),1!==s.length&&(s=null),a.each(function(){var t=e(this);s=s||t,t!==s&&t.attr("tabindex","-1")}),s&&(s.attr("tabindex","0"),s.is(":focus")||n.target===s[0]||window.setTimeout(function(){s.focus()},0)),t.on("focus.mb-role-toolbar",function(e){r.destroy(),r.update(t,e),e.preventDefault(),e.stopPropagation()}),t.on("keydown.mb-role-toolbar",function(n){var s,a,o=e(n.currentTarget),l=o.find("a:visible, button:visible");if(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)return!0;switch(n.which){case i.left:s="prev";break;case i.up:s="prev";break;case i.right:s="next";break;case i.down:s="next";break;case i.home:s="first";break;case i.end:s="last";break;case i.esc:case i.tab:"menu"===t.attr("role")&&r.closeMenu(t)}if(s){var u=l.index(n.target);u>=0&&("first"===s?u=0:"prev"===s?u-=1:"last"===s?u=l.length-1:u+=1,u>=l.length&&(u=0),0>u&&(u=l.length-1),a=l.eq(u)),a||(a=l.eq(0)),a.length&&(l.filter("[tabindex=0]").attr("tabindex","-1"),a.attr("tabindex","0"),a.focus()),n.preventDefault(),n.stopPropagation()}return!0})},closeMenu:function(e){e.trigger("menuclose")},destroy:function(){this.$el&&this.$el.off(".mb-role-toolbar")}}}),Mindbreeze.define("utils/aria/dialog",["jquery","underscore","utils/keys","utils/dom"],function(e,t,i,n){return{update:function(e){e.on("keydown.mb-role-dialog",function(t){var s,r,a=(t.target,!1);t.which===i.tab&&(s=e.find(n.getFocusableSelector(!0)),r=s.index(t.target),0>r&&(r=0),t.shiftKey?r--:r++,0>r&&(a=!0,r=s.length-1),r>=s.length&&(a=!0,r=0),a&&(s[r].focus(),t.preventDefault()))})},destroy:function(){this.$el&&this.$el.off(".mb-role-dialog")}}}),Mindbreeze.define("utils/timer",["underscore"],function(e){return{delayedThrottled:function(t,i){var n,s,r,a=function(){n=e.toArray(arguments),r=this,s&&window.clearTimeout(s),s=window.setTimeout(function(){t.apply(r,n)},i)};return a.abort=function(){s&&window.clearTimeout(s)},a}}}),Mindbreeze.define("utils/aria/tooltip",["jquery","underscore","utils/timer","utils/keys"],function(e,t,i,n){var s=500,r=function(t,i){var s=this;i=i||{},this.selector=i.selector,this.$containerEl=e(t),this.$containerEl.on("keydown.mb-role-tooltip",function(e){s.navigatingWithTab=e.which===n.tab}),this.$containerEl.on("mousedown.mb-role-tooltip",function(){s.navigatingWithTab=!1}),this.$containerEl.on("focusin.mb-role-tooltip",this.selector,function(e){s.updateTooltipWithFocus(e)}),e(document.body).on("focusin.mb-role-tooltip",function(t){var i=e(t.target);i.is(s.selector)||(i=e(t.target).closest(s.selector)),s.$el&&i[0]!==s.$el[0]&&s.hideTooltip(t,s.waitFor,i)})};return r.prototype.updateTooltipWithFocus=function(t){var i=e(t.target).closest(this.selector);this.$el&&this.$el[0]===i[0]||(this.hideTooltip(t,this.waitFor||"blur"),this.navigatingWithTab&&this.showTooltip(t,"blur",i))},r.prototype.showTooltip=i.delayedThrottled(function(t,i,n){n=n||e(t.currentTarget),n.is(this.selector)||(n=e(t.target).closest(this.selector)),this.$el&&this.$el[0]!==n[0]&&this.hideTooltip(t,this.waitFor),this.waitFor||(this.$el=n,this.$tip=e("#"+this.$el.attr("aria-describedby")),this.$tip.removeAttr("aria-hidden"),this.waitFor=i)},s),r.prototype.hideTooltip=function(t,i,n){n=n||e(t.target),this.showTooltip.abort(),!this.$tip||this.waitFor&&this.waitFor!==i||(this.$tip.attr("aria-hidden","true"),delete this.$el,delete this.waitFor)},r.prototype.destroy=function(){e(document.body).off(".mb-role-tooltip"),this.$containerEl&&this.$containerEl.off(".mb-role-tooltip"),delete this.$containerEl,delete this.selector},r}),Mindbreeze.define("utils/accessibility",["jquery","underscore","utils/dom","utils/aria/role","utils/aria/accordion","utils/aria/toolbar","utils/aria/dialog","utils/aria/tooltip","utils/keys"],function(e,t,i,n,s,r,a,o,l){var u=37,c=38,h=39,d=40,p=36,m=35,f=function(){this.initialize.apply(this,arguments)};t.extend(f.prototype,{initialize:function(i){this.$el=e(i.el),this.$el.attr("role","tree"),this.$el.attr("tabindex","0"),this.$el.on("keyup.mb-accessibility",t.bind(this.keyUp,this)),this.$el.on("focusin.mb-accessibility",t.bind(this.focus,this)),this.$el.on("focusout.mb-accessibility",t.bind(this.focusout,this)),this.$el.on("changeselect.mb-select-target",t.bind(this.changeselect,this))},treeitems:function(){var e=this.$el.find("[role=treeitem]");return e},setTabable:function(t){var i=this.treeitems().not(t);i.attr("tabindex","-1"),this.$el.find(".mb-select-target").attr("tabindex","-1"),e(t).attr("tabindex","0")},selected:function(){var e,t=this.$el.find(":focus"),i=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]");return i.length>0?(e=i[0],this.findElInTree(e)):void 0},findElInTree:function(e,t){var i,n,t=t||this.tree(),s=t.items||t.groups;if(t.el===e)return t;if(s)for(i=0;i<s.length;i++)if(n=this.findElInTree(e,s[i]))return n},tree:function(){var e=this.$el[0],t={el:e};return t.items=this.items(e,t),t},items:function(e,t){var i,n,s,r,a,o,l=[],u=e.childNodes.length;for(i=0;u>i;i++)s=e.childNodes[i],n=s.getAttribute&&s.getAttribute("role"),r=s.getAttribute&&s.getAttribute("aria-hidden"),/treeitem/i.test(n)&&!/true/i.test(r)?(a={el:s,parent:t},a.groups=this.groups(s,a),l.push(a)):/group/i.test(n)||(o=this.items(s,t),o&&(l=l.concat(o)));return l},groups:function(e,t){var i,n,s,r,a,o=[],l=e.childNodes.length;for(i=0;l>i;i++)s=e.childNodes[i],n=s.getAttribute&&s.getAttribute("role"),/group/i.test(n)?(r={el:s,parent:t},r.items=this.items(s,r),o.push(r)):/treeitem/i.test(n)||(a=this.groups(s,t),a&&(o=o.concat(a)));return o},select:function(t){if(t){var i=e(t).find(".mb-select-target");i.length>0&&i.eq(0).parents("[role=treeitem]")[0]===t&&(t=i[0]),this.setTabable(t),t.focus()}},selectNext:function(){var e,i,n,s=this.selected();return s?(e=s.parent.items,i=t.indexOf(e,s),n=i+1,e.length>n&&this.select(e[n].el),void 0):this.selectFirst()},selectPrevious:function(){var e,i,n,s=this.selected();return s?(e=s.parent.items,i=t.indexOf(e,s),n=i-1,0>n?this.selectParent():this.select(e[n].el),void 0):this.selectFirst()},selectParent:function(){var e=this.selected();return e?(e&&e.parent.parent&&this.select(e.parent.parent.el),void 0):this.selectFirst()},selectFirstChild:function(){var e,t=this.selected();return t?(t&&t.groups&&t.groups.length>0&&(e=t.groups[0].items,e&&e.length&&this.select(e[0].el)),void 0):this.selectFirst()},selectFirst:function(){var e=this.tree();e&&e.items&&e.items.length>0&&this.select(e.items[0].el)},selectLast:function(){for(var e,t=this.tree();t&&t.items&&t.items.length>0;)e=t.items[t.items.length-1],t=e.groups&&e.groups.length>0&&e.groups[e.groups.length-1];e&&this.select(e.el)},focusout:function(){this.$el.attr("tabindex","0")},focus:function(e){this.$el.attr("tabindex","-1");var t=e.target;this.$el.is(t)&&(t=this.treeitems(),t=t.size()>0?t[0]:null),t&&(this.setTabable(t),this.select(t))},changeselect:function(){this.selected()&&this.selectParent()},keyUp:function(e){var t;if(/(INPUT|TEXTAREA)/i.test(e.target.tagName)&&!/checkbox/i.test(e.target.type)&&e.which!==c&&e.which!==d)return!0;if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return!0;switch(e.which){case c:t=this.selectPrevious;break;case d:t=this.selectNext;break;case u:t=this.selectParent;break;case h:t=this.selectFirstChild;break;case p:t=this.selectFirst;break;case m:t=this.selectLast}t&&t.apply(this,[])},destroy:function(){this.$el.off(".mb-accessibility")}});var g=function(){this.initialize.apply(this,arguments)};return g.prototype={initialize:function(t){var i=this,u=this.instances=[];t=e(t),this.$el=t,this.patchAriaAttributes(),this.roles=new n(t,{selector:".mb-role[role]",handlers:{tablist:s,dialog:a,document:a,toolbar:r,menu:r}}),this.tooltips=new o(t,{selector:".mb-role[aria-describedby]"}),t.on("mousedown.mb-accessibility",function(){i.disableFocusHighlighting()}),t.on("keydown.mb-accessibility",function(e){e.which===l.tab&&i.enableFocusHighlighting()}),e(t).each(function(){var t=e(this).find("[role=tree]");t.each(function(){u.push(new f({el:this}))}),e(this).find('script[type="text/x-mustache-template"]').each(function(){this.setAttribute("aria-hidden","true")})})},patchAriaAttributes:function(){this.patchAriaAttribute("describedby"),this.patchAriaAttribute("labelledby")},patchAriaAttribute:function(t){e("[data-aria-"+t+"]").each(function(){this.setAttribute("aria-"+t,this.getAttribute("data-aria-"+t))})},disableFocusHighlighting:function(){this.$el.removeClass("mb-highlight-focus")},enableFocusHighlighting:function(){this.$el.addClass("mb-highlight-focus")},destroy:function(){this.$el.off(".mb-accessibility"),t.each(this.instances,function(e){e.destroy()}),this.instances=[],this.tooltips.destroy(),this.roles.destroy()}},{Container:g,highContrast:{DARK:"mb-high-contrast mb-white-on-black",LIGHT:"mb-high-contrast mb-black-on-white",detect:function(){var i;return this.testHelper(t.bind(function(t){t.style.background="#fff";var n=this.getValues(e(t).css("background-color"));"#FFFFFF"!==this.getHex(n)&&(i=this.isDark(n)?this.DARK:this.LIGHT)},this)),this.testHelper(t.bind(function(t){t.style.background="#000";var n=this.getValues(e(t).css("background-color"));"#000000"!==this.getHex(n)&&(i=this.isDark(n)?this.DARK:this.LIGHT)},this)),i},get:function(){var e=this.detect();return this.get=function(){return e},e},getValues:function(e,t){if("object"==typeof e){if(3==e.length)return e;if("undefined"!=e.B)return[e.R,e.G,e.B]}else if("string"==typeof e){if(e=e.toLowerCase(),"#"==e[0]){var i=e.length<7,n=parseInt(i?e.substr(1,1)+e.substr(1,1):e.substr(1,2),16),s=parseInt(i?e.substr(2,1)+e.substr(2,1):e.substr(3,2),16),r=parseInt(i?e.substr(3,1)+e.substr(3,1):e.substr(5,2),16);return[n,s,r]}if(!(e.indexOf("rgb")>=0))return"transparent"==e?null:this.getValues(parseInt(e));var a,o=e.indexOf("(")+1,l=e.indexOf(")")-o;if(e=e.substr(o,l),a=e.split(","),a.length>=3)return[parseInt(a[0]),parseInt(a[1]),parseInt(a[2])]}else if("number"==typeof e&&!isNaN(e)){var n,s,r;return t?(r=e>>16,s=(65280&e)>>8,n=255&e):(n=e>>16,s=(65280&e)>>8,r=255&e),[n,s,r]}},getHex:function(e,t){if(e=this.getValues(e,t)){for(var i,n="#",s=0;3>s;s++)i=e[s].toString(16),n+=2==i.length?i:"0"+i;return n.toUpperCase()}},isDark:function(e){return this.getBrightness(e)<125},getBrightness:function(e){return(e=this.getValues(e))?(299*e[0]+587*e[1]+114*e[2])/1e3:void 0},testHelper:function(e){var t,i=this.getHelper(!0),n=i.className;return t=e(i),i.className=n,t},getHelper:function(e){if(e)return this.maxhelperelem||(this.maxhelperelem=document.createElement("DIV"),document.body.appendChild(this.maxhelperelem)),this.maxhelperelem;if(!this.helperelem){var t=document.createElement("TABLE"),i=document.createElement("TBODY"),n=document.createElement("TR");this.helperelem=document.createElement("TD"),t.appendChild(i),i.appendChild(n),n.appendChild(this.helperelem),document.body.appendChild(t)}return this.helperelem}}}}),Mindbreeze.define("plugin-init",["underscore","plugin-config","jquery"],function(e,t,i){var n=Mindbreeze.require.toUrl("resource").replace(/\?.*/,""),s=Mindbreeze.require.toUrl("").replace(/\?.*/,""),r=n.replace(s,""),a={},o=[];e.each(t,function(e){a[e.id]=r+"/"+e.id,o.push(e.id+"/"+e.init)
});var l=i.Deferred();return Mindbreeze.require.config({paths:a}),Mindbreeze.require(o,function(){l.resolve()},function(){l.resolve()}),l.promise()}),Mindbreeze.define("utils/apptest",["client/resourceinfo","utils/browser"],function(e,t){if(t.getURLParameter("apptest.fabasoft.com")){var i=document.createElement("script");i.src=e.scriptLocation+"../lib/apptest.js",i.type="text/javascript",i.async=!0,i.charset="utf-8";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)}}),Mindbreeze.define("client/application",["underscore","moment","extensions","i18n/i18n","api/v2/api","api/v2/common","backbone","utils/backbone-utils","utils/dom","utils/keys","utils/string","utils/flexbox","client/extensions","client/resourceinfo","client/sourceinfo","client/template","client/templatetree","client/templateregistry","client/formqueryadapter","client/queryprofiler","jquery","service/channels","service/constrainedchannels","model/properties","model/tabs","model/templateinfo","model/tasks","bootstrap","utils/jsonpath","utils/browser","utils/clone","component!stack","component!preview","api/v2/applist","utils/mustache","utils/accessibility","require","utils/trace","plugins","plugin-init","utils/apptest"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,T,k,C,L,D,E,S,A,P,O,N,I,Y,F,z,R){var j=function(){var e=this,t=arguments;R.then(function(){e._initialize.apply(e,t)})};return j.extend=a.Model.extend,j.scriptLocation=p.scriptLocation,e.extend(j.prototype,a.Events,{scriptLocation:j.scriptLocation,api:s,destroyed:!1,_initialize:function(t){var i=this,n={},t=t||{};if(t.parentApplication&&(n=e.clone(t.parentApplication.options||{})),this.options=e.extend({editing:!1,locale:"en-US"},n,t),this.initializeTraceContextTokenCallback(),"undefined"!=typeof this.options.enableSourceInfo?this.options.enableSourceInfo!==!1&&(this.options.enableSourceInfo=!0):this.options.enableSourceInfo=!0,this.options.enableSourceInfo===!0?"undefined"!=typeof this.options.enableUserSourceInfo?this.options.enableUserSourceInfo!==!1&&(this.options.enableUserSourceInfo=!0):this.options.enableUserSourceInfo=!0:this.options.enableUserSourceInfo=!1,this.rootEls=this.options.rootEls||this.options.rootEl||document.body,this.rootElsClone=this.options.rootEls||this.options.rootEl||document.body.cloneNode(!0),this.resolveTemplateReferences(this.rootEls),this.options=e.extend({},this.getOptionsFromAttributes(this.rootEls),this.options),this.formqueryadapter=new _,this.jsonPath=D,this.models={},this.views=e.extend({},a.Events),this.options.parentApplication&&(this.parentApplication=this.options.parentApplication,this.parentApplication.on("destroy",function(){this.parentApplication.off(null,null,this),this.destroy()},this),delete this.options.parentApplication),!this.parentApplication||t.sources||t.channels){var s=[];s=this.options.sources?this.options.sources:this.options.channels?this.options.channels:m.builtinSources;var r={};window&&window.location&&(r.referer=window.location.toString()),this.options.loginAsError&&this.options.loginAsError===!0&&(r.loginAsError=!0),this.options.sessionDescription&&(r.sessionDescription=this.options.sessionDescription),this.options.apiRequestHeaders&&(r.headers=this.options.apiRequestHeaders),this.queryProfiler=new y({application:this,profilerSettings:t.profilerSettings}),r.requestTransformers=[this.queryProfiler.createRequestTransformer()],this.models.defaultChannels=new w(m.builtinSources,r),this.models.channels=new x(s,r);var o;this.models.applists=o=new O.Applists,o.each(this.listenToChannelChanges,this),this.models.applists.on("add",this.listenToChannelChanges,this),this.models.profile=this.api.getProfile.createModel(this.models.defaultChannels),this.models.sourceInfo=this.api.sourceInfo.createModel(this.models.channels),this.models.userSourceInfo=this.api.userSourceInfo.createModel(this.models.channels),this.models.topMenu=new a.Collection,this.models.topMenu.comparator="weight",this.initializeTopMenu(),this.models.stack=new A.Model,this.models.stack.set("application",this),this.models.tasks=new C}else this.models=e.extend({},this.parentApplication.models,this.models),this.models.tabs=null,this.queryProfiler=new y({application:this,parentProfiler:this.parentApplication.queryProfiler});this.channels=this.models.channels,this.channels.on("fail",function(){i.triggerAjaxError.apply(i,arguments)}),this.initialize(this.options.callback)},initialize:function(t){var i=this;this.initializeSourceInfo(),this.appid=this.options.appid||window.location.protocol.replace(/:/,"")+window.location.host+window.location.port+window.location.pathname,this.options.queryURLParameter=this.options.queryURLParameter||"query",this.options.searchURLParameter=this.options.searchURLParameter||"search","undefined"==typeof this.options.enableRemoteSources&&(this.options.enableRemoteSources="undefined"!=typeof this.options.loginAsError?!this.options.loginAsError:!0),this.options.enableAccessibilityHandlers=this.options.enableAccessibilityHandlers!==!1,this.initializeModels(),e.isFunction(this.options.initializeModels)&&this.options.initializeModels(this),this.detectBrowserFeatures(),this.addClassNames(this.rootEls);var s="true"===E.getURLParameter("relevance-info");s&&this.displayRelevanceInfo(),this.templateTree=new g(this.rootEls,"searchroot",this.options.templateString),this.templateTree.initialize(this,this.models.search,function(e){i.searchModelInitialized(e,t),i.options.enableAccessibilityHandlers&&(i.accessibilityContainer=new I.Container(i.rootEls)),n.patchI18nAttributes(),i.parentApplication||d.provide("after","Application.initialize",i)})},initializeTraceContextTokenCallback:function(){var t=this.options.traceContextTokenCallback;e.isFunction(t)&&(F.addSurroundingContextTokenCallback(t),this.listenTo(this,"destroy",function(){F.removeSurroundingContextTokenCallback(t)}))},initializeTopMenu:function(){function t(e){var i=e.get("help_url");if(i){var n=this.models.topMenu.where({name:"help"});n[0].set({href:i,className:""}),this.stopListening(this.models.profile,"change",t)}}var i=this.models.profile.get("help_url");if(!i){var s=this.models.profile;this.listenTo(s,"change",t)}var s=this.models.profile;this.listenTo(s,"change",t),this.models.topMenu.add({weight:1,name:"settings",title:"client_settings",translated_title:n("client_settings"),actionObject:'{"modal":{ "id": "preferences"}}'});var r=this.getMetaInformation("mes:loginstatus"),a=/^true$/i.test(this.getMetaInformation("mes:logoutdisabled")),o=this.getMetaInformation("display:mes:user"),l=this.getMetaInformation("mes:decrypted:user"),u=r&&r.length>0&&!e.isUndefined(r),c="logout"===r;if(u){var h={title:n(r),actionObject:'{"'+r+'": {}}'};if(c&&a&&(h=null),"true"===o&&l){var d;if(h&&(d=h),l.indexOf("@")>0){var p=l.match(/^([^@]*)@/);l=p?p[1]:null}d&&(h={title:n(l),subTitle:d.title,subActionObject:d.actionObject})}!h&&l&&(h={title:n(l)}),a&&"false"===o&&(h=null),h&&(h.weight=2,h.name="login",this.models.topMenu.add(h))}this.models.topMenu.add({weight:3,name:"help",title:"client_toolbar_help_label",translated_title:n("client_toolbar_help_label"),className:"hide",href:i}),this.models.topMenu.add({weight:4,name:"about",title:"About",translated_title:n("About"),actionObject:'{"showAbout": {}}',className:"mb-popover-trigger"})},getMetaInformation:function(e){return b('meta[name="'+e+'"]').attr("content")},displayRelevanceInfo:function(){var t=b(this.rootEls).find("[data-template=results]");b("body").addClass("mb-show-relevanceInfo"),t.before('<div class="relevanceInfoSwitchbox"><h2 data-i18n="show_relevance_infos"></h2><label class="switch relevanceInfo"><input type="checkbox" id="relevanceInfo" checked data-action-name="toggleRelevanceInfoTemplate"><span class="slider round"></span></label></div>'),this.toggleRelevanceInfoTemplate(),b('<div data-template="table" data-edittable="true" data-appendonscroll="true" data-allowExport="false" data-properties="icon,title,relevance_order,group,mes:relevanceinfo.recency,mes:relevanceinfo.tf,mes:relevanceinfo.tf_idf,mes:relevanceinfo.proximity,mes:relevanceinfo.percent_zone_boost,mes:relevanceinfo.percent_term_boost,mes:relevanceinfo.percent_document_boost,mes:relevanceinfo.percent_term_match,mes:relevanceinfo.percent_tf_idf,datasource/mes:key, extension" class="relevanceInfoTable"></div>').insertBefore(t),window.addEventListener("message",e.bind(function(e){e&&e.data&&"triggerSearch"==e.data.name&&this.models.search.input.set("user",this.models.search.input.get("user"))},this),!1)},toggleRelevanceInfoTemplate:function(){var e=b(this.rootEls).find("[data-template=results]"),t=b(this.rootEls).find("[data-template=table]"),i=b(this.rootEls).find(".span9"),n=b(this.rootEls).find(".span3"),s=b("#relevanceInfo");s.attr("checked")?(b(this.rootEls).addClass("mb-relevance-info"),e.hide(),t.show(),n.hide(),i.width("100%")):(b(this.rootEls).removeClass("mb-relevance-info"),e.show(),t.hide(),n.show(),i.width("74.35897435897436%"))},initializeDialog:function(){var e=this,t=window.parent!==window&&document.referrer.replace(/(https?:\/\/[^\/]*).*/,"$1");if(b(this.rootEls).addClass("mb-dialog"),t){var i=function(e){JSON.stringify(window.parent.postMessage(e,t))};this.closeDialog=function(){i({id:"closeDialog",call:{name:"closeDialog"}})},b(window).on("keydown",function(t){27==t.keyCode&&e.closeDialog()})}},resolveTemplateReferences:function(e){function t(e,i){if(i&&i.childNodes)for(var n=0;n<i.childNodes.length;n++){var s=i.childNodes[n],r=s.cloneNode(!1);"SCRIPT"==r.nodeName.toUpperCase()?r.text=s.text:t(r,s),e.appendChild(r)}}do{var i=b(e).find("[data-template-refid]:not([data-template='search']):not([data-template='searchcontainer']):not([data-replaced])");i.each(function(){var e=this.getAttribute("data-template-refid"),i=document.getElementById(e);i?t(this,i):this.innerHTML='Template with id "'+e+'" not found!',this.setAttribute("data-replaced","true")})}while(i.length>0)},getOptionsFromAttributes:function(t){var i=new f.Schema({attributes:{datasourcesGroupByCategory:{type:"boolean","default":!0,required:!1},datasourcesCategoryOrder:{type:"list",required:!1},datasourcesNameOrder:{type:"list",required:!1},enableImmediateDisplayOfFederatedResults:{type:"boolean","default":!1,required:!1}}});e.isArray(t)||(t=[t]);var n=e.extend.apply(e,e.map(t,function(e){return new l.AttributeModel(e,"data-").getCamelCase()}));return i.parseAttributes(n)},detectBrowserFeatures:function(){E.isMobileSafariPrivateMode()?this.models.channels.addAlert({id:"localStorage",level:"info",message:n("info_mobile_safari_private_mode")}):E.localStorageAvailable()||this.models.channels.addAlert({id:"localStorage",level:"info",message:n("info_local_storage_not_available")})},initializeModels:function(){this.createSearchModel(),this.models.search.deactivate(),this.queryProfiler&&this.queryProfiler.registerSearchModel(this.models.search),!this.parentApplication&&this.options.updateTitle&&(this.options.titleTemplate=this.options.titleTemplate||"{{#stackTitle}}{{{stackTitle}}} - {{/stackTitle}}{{^stackTitle}}{{#unparsedUserQuery?}}{{{unparsedUserQuery}}} - {{/unparsedUserQuery?}}{{/stackTitle}}"+document.title+"{{#computing?}} ...{{/computing?}}",this.listenTo(this.models.search,"computing",function(){this.updateTitle(!0)}),this.listenTo(this.models.search,"computed",function(){this.updateTitle(!1)}),this.listenTo(this.models.stack,"change",function(){this.updateTitle(!1)})),this.listenTo(this.models.search.input,"validated",function(e,t){this.updateValidityDependantEls("search",t)}),this.models.tabs=new T([],{constraintsModel:this.models.search.input.submodel("source_context.constraints"),application:this}),this.models.templateinfo=new k({appid:this.appid},{mainpartBinding:this.models.search.submodel("source_context.constraints.view.name").input})},getModel:function(e){return this.models[e]},updateValidityDependantEls:function(e,t){b(this.rootEls).find("[data-enable-if-model-valid='"+e+"']").attr("disabled",!t)},on:function(e,t,i){if("ajaxError"==e){var n={context:i,callback:t,channels:this.channels};return this._eventFilterMap||(this._eventFilterMap={}),this._eventFilterMap[e]||(this._eventFilterMap[e]=[]),this._eventFilterMap[e].push({context:n,callback:w.ignoreSuccessiveErrorsCallback}),a.Events.on.call(this,e,w.ignoreSuccessiveErrorsCallback,n)}return a.Events.on.apply(this,arguments)},off:function(e,t,i){if(e||(this._eventFilterMap={}),"ajaxError"!=e)return a.Events.off.apply(this,arguments);if(this._eventFilterMap&&(t||i)&&this._eventFilterMap[e]){for(var n=this._eventFilterMap[e],s=[],r=0;r<n.length;++r){var o=n[r];t&&t!=o.context.callback||i&&i!=o.context.context?s.push(o):a.Events.off.call(this,e,o.callback,o.context)}this._eventFilterMap[e]=s}return this},updateTitle:function(e){var t=new a.Model({i18n:n.string,unparsedUserQuery:this.getUnparsedUserQuery(),computing:e,stackTitle:c.stripHtml(this.models.stack.lastChild()&&this.models.stack.lastChild().get("title"))}),i=new N(this.options.titleTemplate);document.title=i.render(t)},initDatasourcesOrder:function(){var e,t;this.options.datasourcesGroupByCategory&&(t=r.getCompareFunction("PROPERTY",null,{criteriaPropertyName:"categories.id",subCriteria:{criteria:"PROPERTY",options:{criteriaPropertyName:"name"}},mapKeyPropertyName:"name"}),e=r.getOrderFunctionByList(this.options.datasourcesCategoryOrder,"categories.id")),this.options.datasourcesNameOrder&&this.options.datasourcesNameOrder.length>0&&(e=e?r.getOrderFunctionByList(this.options.datasourcesCategoryOrder,"categories.id",r.getOrderFunctionByList(this.options.datasourcesNameOrder,"name")):r.getOrderFunctionByList(this.options.datasourcesNameOrder,"name")),e&&(t&&(e=r.wrapOrderFunctionWithSort(e,t)),this.models.sourceInfo.applyCustomOrder=e,this.models.userSourceInfo.applyCustomOrder=e)},addClassNames:function(t){var i=[],n=I.highContrast.get();n&&i.push(n),h()&&i.push("mb-flexbox"),"true"===E.getURLParameter("embedded")&&i.push("mb-embedded"),E.isTouchDevice()&&i.push("mb-touch"),i.length&&(e.isArray(t)||(t=[t]),e.each(t,function(e){b(e).addClass(i.join(" "))}))},setLocale:function(e,t){var i=this;n.setLocale(e,function(e){i.options.locale=e.locale,t&&t(e)})},selectFirstTab:function(){var e,t=this.models.tabs&&this.models.tabs.at(0);t&&!this.options.retainViewSourceContextConstraints&&"emailalert"!==t.get("id")?this.changeView({model:t}):this.options.retainViewSourceContextConstraints||(e=this.models.search.submodel("source_context.constraints"),e.unset("view",{silent:!0}),e.dispose())},initializeSourceInfo:function(){this.initDatasourcesOrder();var t=this;!this.options.enableSourceInfo||this.parentApplication&&this.parentApplication.models.sourceinfo==this.models.sourceinfo||(this.models.sourceInfo.update(null,function(i){t.options.enableRemoteSources&&e.each(i&&i.remote_sources,function(e){t.models.channels.add(e.location+"api/v2/")}),t.options.enableUserSourceInfo&&t.models.userSourceInfo.update(null,function(){})}),this.models.channels.on("add change:enabled",function(e,i){var e=[e];i===!1&&(e=null),t.models.userSourceInfo.update(e,function(){})}),this.models.channels.on("remove",function(){t.models.userSourceInfo.update(null,function(){})}))},searchModelInitialized:function(t,i){var n=this;b("body").on("click.mb-application",function(){n.closeMenus(),b(".mb-popover-trigger").popover("destroy")}),b("body").on("keydown.mb-application",function(e){e.which===u.esc&&(n.closeMenus(),b(".mb-popover-trigger").popover("destroy"))}),this.selectFirstTab();var s=this.options.startSearch;e.isUndefined(s)&&(s=!0);var r=b('[data-template="results"][data-enable-voting=true]').length;r&&Mindbreeze.require(["component!voting"]);var a=E.getURLParameter(this.options.queryURLParameter),o=E.getURLParameter(this.options.searchURLParameter);this.onTemplateTreeInitialized&&this.onTemplateTreeInitialized(t),this.prepareModels&&this.prepareModels(t),this.models.search.activate(s?{}:{silent:!0}),a&&!o&&this.setUnparsedUserQuery(a,{forceUIUpdate:!0}),!this.options.enableProfile||this.parentApplication&&this.parentApplication.models.profile==this.models.profile||(this.listenTo(this.models.profile,"change",this._profileUpdated),this.models.profile.update()),this.initialized=!0,t&&(this.failed=!0,console&&console.warn&&console.warn.apply(console,"Failed to initialize application.",t)),n.updateValidityDependantEls("search",n.models.search.input.validate()),this.trigger("initialized",t),i&&i(this)},_profileUpdated:function(){var e=this.models.profile;F.setUserName(e.get("user_name")),this.models.applists.fetch({channels:e.get("app_list_urls")})},parseQueryExprToLabelMap:function(t){var i=t?t.and||[t]:[];return e.reduce(i,function(t,i){var n,s=e.keys(i),r=s.length<=2&&0==e.difference(s,["label","unparsed"]).length||i._name;return r&&(n=i._name||i.label||"query",t[n]=i),t},{})},serializeLabelMapToQueryExpr:function(t){return e.map(e.keys(t),function(e){return t[e]})},setConstraint:function(e){this.channels.setConstraint(e)},getConstraint:function(){return this.channels.getConstraint()},execute:function(e){if(this.destroyed)throw new Error("Application already destroyed.");this.initialized?e(this):this.once("initialized",function(){e(this)},this)},createSearchModel:function(){var e=s.search.createModel(this.models.channels,{enableImmediateDisplayOfFederatedResults:this.options.enableImmediateDisplayOfFederatedResults});e.set("content_sample_length",300,{silent:!0}),this.models.search=e},edit:function(){var t=this;Mindbreeze.require(["client/editor"],function(i){b("body").removeClass("mb-loading"),e.extend(t,i.applicationAdditions),new i(t,function(e){e.refresh(),t.editor=e}),t.editing=!0,t.trigger("edit"),b("#edit-button").addClass("active")})},exportResults:function(t){try{localStorage.mbLastExport=JSON.stringify({name:b(t.eventTarget).text(),properties:t.properties}),window.updateLastExport&&window.updateLastExport()}catch(i){}if(e.isString(t.properties)){var s=/\s*,\s*/;t.properties=t.properties.split(s)}if(e.isString(t.excludeFromTranslation)){var s=/\s*,\s*/;t.excludeFromTranslation=t.excludeFromTranslation.split(s)}this.pushStack({action:"exportView",content:"<div data-template='exportview'></div>",title:n("export_results"),applicationOptions:{appendOnTableScroll:t.appendonscroll,exportformat:t.exportformat,excludeFromTranslation:t.excludeFromTranslation,retainViewSourceContextConstraints:!0,initializeModels:function(i){var n=i.parentApplication.models.search.input.toJSON();delete n.max_page_count,delete n.facets,n.properties=e.reduce(t.properties,function(e,t){return e[t]={formats:["HTML","VALUE"]},e},{}),i.models.search.output.load({available_properties:i.parentApplication.models.search.get("available_properties")},{silent:!0}),i.models.search.set(n)}}})},exportView:function(){this.models.search.input.change()},getDefaultTemplateContentForAction:function(e){return e?"<div data-template='"+e.toLowerCase()+"' />":""},getPreviewView:function(e){var t=this,i=this.templateTree.getTemplateById("mb_preview");return i&&i.instances&&i.instances.length?e(i.instances.instances[0]):(this.parentApplication?this.parentApplication.getPreviewView(function(i){i?e.apply(this,arguments):t.createPreviewView(e)}):this.createPreviewView(e),void 0)},createPreviewView:function(e){this.createView("preview",e)},getOrCreateView:function(e,t){var i=this[e+"View"];i?t(i):this.createView(e,t)},createView:function(e,t){var i=this,n=document.createElement("div"),s=new g(n,e);s.initialize(this,new a.Model,function(){var n=s.rootNode.template.instances.instances[0];i[e+"View"]=n,t(n)})},removeConstraint:function(t){var i=t.id||t.model.id||t.model.get&&(t.model.get("description")||t.model.get("id")),n=this.models.search.input.submodel("user.constraints"),s=i;try{s=D.parsePath(i)}catch(r){}if(e.isArray(s)&&s.length>1){var a=s,o=a.pop();n.set(JSON.stringify(o),void 0,{path:a,unset:!0,silent:!0}),a.length>1&&b.isEmptyObject(n.get(a))&&n.set(a[0],void 0,{unset:!0,silent:!0}),n.change()}else n.unset(i);n.dispose()},subquery:function(t){delete t.eventTarget,delete t.model,delete t.sender,delete t.focused,delete t.event;var i=t.description||t.id||e.uniqueId("q"),n=this.models.search.input.submodel("user.constraints");i=this.sanitizePath(i),n.set(null,t,{path:[i]}),n.dispose()},query:function(t){delete t.eventTarget,delete t.model,delete t.sender,delete t.focused,delete t.event;var i=t.description||t.id||e.uniqueId("q");i=this.sanitizePath(i),i="__queryaction__"+i;var n={constraints:{}};n.constraints[i]=t,this.models.search.input.set("user",n)},emptyModel:function(e){var t=e.model.get(e.path);t.remove(t.models)},destroyModel:function(e){var t=e.model;t.trigger("destroy",t,t.collection,e)},extensionAction:function(e){var t=i.lookup(e.id);e.eventTarget,t&&t({invokeInContext:e.invokeInContext})},modal:function(e){b("#"+e.id).modal()},login:function(){window.open("/mashup-login?resource="+window.location.href,"_self")},logout:function(){var t=this.rootEls;e.isArray(t)||(t=[t]),e.each(t,function(e){b(e).addClass("mb-logout")});var i=this.models.defaultChannels.at(0).get("url"),n=0,s=this.models.channels.filter(function(e){return e.get("url")!==i});s&&s.length>0&&(this.api.logout.cast(s),n=3e3);var r=i+this.api.logout.getLogoutPath();setTimeout(function(){window.location=r},n)},toggleOpen:function(e){var t=e.enabledSelector;(!t||b(t).is(":visible"))&&b(e.eventTarget).toggleClass("mb-open")},closeMenus:function(e){var t=e&&e.eventTarget&&b(e.eventTarget.parentNode);b(".mb-dropdown-toggle.open").not(t).removeClass("open").find(".dropdown-menu").remove()},openMenu:function(t){var i=t.propertyId||b(t.eventTarget).parents("[data-id]").first().attr("data-id"),n=b(t.eventTarget.parentNode),s=t.position||0,r=t.model.get("mes:summary"),a=t.model.get(i)||e.find(e.isArray(r)||!r?r:[r],function(e){return e.id===i}),o=a&&a.data&&a.data.length>s&&a.data[s].actions;return n.hasClass("open")?(n.removeClass("open"),n.find(".dropdown-menu").remove(),void 0):(n.append('<ul class="dropdown-menu">'+e.map(o.data,function(e){return"<li>"+e.html+"</li>"}).join("")+"</ul>"),n.addClass("open"),void 0)},toggleDropdown:function(e){b(e.eventTarget).dropdown("toggle")},setDidYouMean:function(t){if(t){var i=t.query,n=t.model;if(n.input.get("query"))n.input.set("query",i);else{var s=this.formqueryadapter.queryField()||{path:[]},r=["user","query"].concat(s.path);n.input.set(null,i,e.extend({},t,{path:r}))}}},tabTransitionUserConstraints:function(e,t,i,n){return n},setView:function(t,i,n,s){var r;i&&(i.constraint&&(n=i.constraint),i=e.clone(i),delete i.constraint,this.models.search.set(i,{silent:!0}));try{this.trigger("changeUserQueryTab",t,n)}catch(a){console&&console.warn&&console.warn("Failed to trigger changeUserQueryTab",a)}if(t){var o=this.models.tabs.getByName(t),l=this.models.tabs.getSelectedTab();if(o){var u=o.get("user_constraints");s.tabTransitionUserConstraints&&e.isFunction(s.tabTransitionUserConstraints)&&(u=s.tabTransitionUserConstraints(l,o,this.models.search.get("user.constraints"),u)),u?this.models.search.set("user.constraints",S(u),{silent:!0}):this.models.search.unset("user.constraints",{silent:!0});var c=S(o.attributes.user_query)||{},h=this.formqueryadapter.queryField()||{path:[]},d=["user","query"].concat(h.path),p=this.models.search.input.get(d);h.path.length?p&&D.set(c,h.path,p):c=S(p),c&&!e.isEmpty(c)?this.models.search.set("user.query",c,{silent:!0}):this.models.search.unset("user.query",null,{silent:!0})}}n?(n.name=t,this.models.search.set("source_context.constraints.view",n,s)):this.options.retainViewSourceContextConstraints||(r=this.models.search.submodel("source_context.constraints"),r.unset("view",s),r.dispose()),b(this.rootEls).attr("data-enabled-view",t||"Everything"),this.models.stack.popToApplication(this);try{this.trigger("changeviewafter")}catch(a){console&&console.warn&&console.warn("Failed to trigger changeviewafter",a)}},showTab:function(e){this.changeView({name:e.name})},changeView:function(e){if(e=e||{},e.name=e.name||e.model&&e.model.get("name",{localize:!1})||b(e.eventTarget).text(),e.model=e.model||this.models.tabs.getByName(e.name),e.model)var t=e["constraints.view"]||e.model.get("constraint"),i=S(e.model.get("request"));this.setView(e.name,i,t,{tabTransitionUserConstraints:this.tabTransitionUserConstraints})},displayWarning:function(e){window.alert(e)},openHref:function(e){this.closeMenus();var t=e.eventTarget,i=e.href,n=t.getAttribute("data-disabled-selector");return n&&b(n).is(":visible")?!0:!i||"#"!==i&&/^(mailto:|javascript:|\#)/.test(i)||t.getAttribute("target")?/^(javascript:|\#)/.test(i)?(window.open(i,"_self"),!1):(e.event.enforceDefault=!0,!0):"#"!==i?(window.open(i,this.options.linkOpenTarget||"_blank"),!1):(e.event.enforceDefault=!0,!0)},pushStack:function(t,i){if(i=i&&i.willLeave(),t.useCloneElement)var n=this.rootElsClone.innerHTML;else if(t.useRootElement)var n=this.models.stack.get("application").rootElsClone.innerHTML;else var n=document.getElementById(t["template-ref"])&&document.getElementById(t["template-ref"]).innerHTML;var s=new A.Model({title:"<h2>"+(t.title||b(t.eventTarget).text())+"</h2>",content:t.content||t["template-ref"]&&n||"",actionOptions:t,previousFocus:t.focused,applicationOptions:e.extend({queryURLParameter:"unused"},t.applicationOptions||{},{enableAccessibilityHandlers:!1,parentApplication:this,callback:function(n){n.options.feedbackHTML5ScreenshotDisabled&&(n.feedbackHTML5ScreenshotWasEnabled=F.feedbackHTML5ScreenshotEnabled(),F.enableHTML5Screenshot(!1));try{t.action&&n[t.action](e.extend({},t,{titleModel:s,target:b(n.templateTree.rootEls[0]).find("> .mb-stack-content").get(0)}),i)}finally{i&&i.leave()}}})});this.models.stack.push(s)},preview:function(t,i){var n="innerPreview";t&&t.content_location&&(n="innerContentPreview"),this.pushStack(e.extend({},t,{action:n,applicationOptions:e.extend({feedbackHTML5ScreenshotDisabled:!0,queryURLParameter:"unused",startSearch:!1},t.applicationOptions)}),i)},innerPreview:function(t,i){i=i&&i.willLeave();var s=this;this.getPreviewView(e.bind(function(a){var o=t.model,l=o.channel,u=o.get("location"),c=(this.parentApplication||this).models.search.input,h=c.get("user.query")||c.get("query"),d=r.mergePropertyDefinitions({title:{format:"HTML"},"mes:summary":{format:"PROPERTY"},content:{format:"HTML"},extension:{format:"HTML"},"html/head":{format:"HTML"},categoryclass:{format:"HTML"},"@content":{format:"HTML"}},a.getDisplayedProperties()),p=this.api.preview.createInput({location:u,category:t.category||t.model.get("category"),categoryinstance:t.categoryinstance||t.model.get("categoryinstance"),key:t.key,query_expr:h,full_html:!0,properties:e.reduce(d,function(e,t,i){return e[i]={formats:[t.format]},e},{})});this.api.preview.call(l,p.toJSON(),function(e){if(e&&e.attributes&&e.attributes["mindbreeze.internal.databytes.content_type"]&&"text/html"==e.attributes["mindbreeze.internal.databytes.content_type"]&&e.attributes.data)a.setHtmlPreview(s,e.attributes.data,{traceContext:i,model:t.model});else{var r,o,l;e.get("result")&&(l=e.submodel("result"),r=new M(l.get("properties"),{propertyDefinitions:d}),o=r.get("title",{format:"HTML"}),l.dispose()),a.setPreview(s,r,{traceContext:i})}t.target&&t.target.appendChild(a.el),o&&t.titleModel&&t.titleModel.set("title","<h2><small>"+n("preview")+"</small> "+o+"</h2>"),i&&i.leave()},{traceContext:i})},this))},innerContentPreview:function(t,i){i=i&&i.willLeave();var s=this;this.getPreviewView(e.bind(function(r){var a=t.model,o=a.channel,l=(a.get("location"),a.get("title")),u=(this.parentApplication||this).models.search,c=u.get("user.query")||u.get("query");r.setContentPreview(s,e.extend({query_expr:c},t),{traceContext:i,channel:o}),t.target&&t.target.appendChild(r.el),r.resize(),l&&t.titleModel&&t.titleModel.set("title","<h2><small>"+n("preview")+"</small> "+l+"</h2>"),i&&i.leave()},this))},showAlertCenter:function(t){function i(){function e(t){var t=t.get("child");t&&("alertcenter_application"===t.get("application").name?i=!0:e(t))}var t=n,i=!1;return e(t),i?!0:!1}var n=t.sender.options.application.models.stack;i()||this.pushStack(e.extend({},t,{content:'          <div class="row-fluid">            <div class="span6">              <div data-template="emailalert" data-allow-edit="true"></div>            </div>            <div class="span6">              <div data-template="emailalert_preset"></div>            </div>          </div>',title:"<small data-i18n='client_notifications'></small>",applicationOptions:{startSearch:!1,queryURLParameter:"unused",initializeModels:function(e){e.name="alertcenter_application"}}}))},showAbout:function(e){l.focus(b(e.eventTarget).popover({template:'<div class="popover mb-role" role="document"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"></div></div></div>',placement:"mb-about-popover bottom mb-inverted",html:!0,trigger:"manual",content:'<div tabindex="0"><div class="background-container"><img class="background" src="'+p.scriptLocation+'../img/about_bg.png" lang="en" alt="Mindbreeze InSpire">'+"</div>"+"<h2>"+n("Version")+"</h2><p>18.1.4.491</p>"+"<h2>"+n("vendor")+"</h2><p>"+n("vendor_name")+"</p>"+"</div>"+'<button tabindex="-1" class="close btn-link mb-top-right pull-right mb-clickable">&times;<span class="mb-acc">'+n("Close")+"</span></button>"}).popover("toggle").data("popover").$tip.on("click",".close",function(){b(".mb-popover-trigger").popover("destroy")}))},triggerAjaxError:function(){this.trigger.apply(this,["ajaxError"].concat(e.toArray(arguments)))},listenToChannelChanges:function(e){e.get("channels").on("change:enabled",this.onChannelChanged,this),e.get("channels").on("add",this.onChannelChanged,this)},onChannelChanged:function(e){e=e.clone(),e.get("enabled")===!0?this.models.channels.add(e,{merge:!0}):this.models.channels.remove(e)},destroy:function(e){if(!this.destroying){this.destroying=!0,b("body").off(".mb-application"),this.options.feedbackHTML5ScreenshotDisabled&&this.feedbackHTML5ScreenshotWasEnabled&&F.enableHTML5Screenshot(!0);var t=this;this.models.search.deactivate(),this.models.tabs&&this.models.tabs.dispose(),this.templateTree.destroy(function(){t.destroying=!1,t.destroyed=!0,e&&e()}),this.accessibilityContainer&&this.accessibilityContainer.destroy(),this.trigger("destroy"),this.stopListening()}},sanitizePath:function(e){return e?e.replace(/\.|\[|\]|\"|\'/g,"_"):void 0},handleAction:function(t,i,n,s,r,a,o,l){var u,c=this[i],h=null!=c,d=!1,p=null;if(c){try{u=c.apply(this,[e.extend({event:l,eventTarget:n,sender:r,model:s,focused:a,id:s&&s.output&&s.output.id},t),o]),d=!0}catch(l){console&&console.error&&console.error("Failed to execute action",c,l.stack,l),p=l}this.trigger("actionHandled"),"undefined"==typeof u&&(u=!1)}try{this.trigger("actionperformed",i,{application:this,model:s,target:n,sender:r,args:t,traceContext:o,e:l,actionargs:arguments,handlerExists:h,returnValue:u,error:p})}catch(l){console&&console.warn&&console.warn("Failed to trigger actionperformed",l)}return u},resetUser:function(e){this.models.search.input.unset("user",{traceContext:e&&e.traceContext,silent:e&&e.silent})},resetFilters:function(e){var t=this.getUnparsedUserQueryPath(),i=e.model||this.models.search,n=i.get(t);i.deactivate(),i.input.unset("user",e),i.input.set(t,n,e),i.activate()},resetSearch:function(e){e={traceContext:e&&e.traceContext,silent:e&&e.silent},this.resetUser(e),this.models.search.output.reset(null,e);var t=this.models.tabs.getSelectedTabName();t&&this.changeView({name:t}),b("[autofocus]").focus()},setValue:function(e,t){var i=e.model.input||e.model;i.set(e.key,e.value,{traceContext:t})},unsetValue:function(e,t){var i=e.model.input||e.model;i.unset(e.key,{traceContext:t})},addValue:function(e,t){var i=e.model.input||e.model;i.add(e.key,e.value,{traceContext:t})},_recomputePersonalizationProfile:function(t){var i=[];t.each(function(e){i.push(e.get("key"))});var n=e.map(i,function(e){return{label:"mes:key",regex:"\\Q"+e+"\\E"}}),s=n.length>0?{factor:this._personalizeSearchBoost,query_expr:{or:n}}:null;return s
},_onModelecomputeProfile:function(e,t){this.models.search.input.set("boostings.userprofile",this._recomputePersonalizationProfile(t),{silent:!0})},personalizeSearch:function(e,t){var i,t=t||{};if(this._personalizeSearchBoost!=e)if(this._personalizeSearchBoost=e,e>0){if(!this.models.collected)return;this.models.search.input.set("boostings.userprofile",this._recomputePersonalizationProfile(this.models.collected),t),this.models.collected.on("add remove",this._onModelecomputeProfile,this)}else this.models.collected.off("add remove",this._onModelecomputeProfile,this),i=this.models.search.input.submodel("boostings"),i.unset("userprofile",{silent:!0}),i.dispose(),this.models.search.input.set("boostings.profiledboost",t)},changeOrderBy:function(e){this.models.search.set("orderby",e.eventTarget.value)},changeSummarizeBy:function(e){var t=e.value||e.eventTarget.value;if(t){var i=this.models.search.get("summarize_by")||{};i[e.key]=t,this.models.search.set("summarize_by",i)}else this.models.search.unset("summarize_by");e.event.stopPropagation()},changeGroupBy:function(e){var t=e.eventTarget.value;t?this.models.search.set("groupby.property",t):this.models.search.unset("groupby")},getUserConstraints:function(){return this.models.search.input.get("user.constraints")},setUserConstraints:function(e){e?this.models.search.set("user.constraints",e):this.models.search.unset("user.constraints")},getUnparsedUserQueryPath:function(){var e=this.formqueryadapter.queryField(),t=["user","query"].concat(e.path).concat("unparsed");return t},getUnparsedUserQuery:function(){return this.models.search.input.get(this.getUnparsedUserQueryPath())},setUnparsedUserQuery:function(t,i){var n=this.getUnparsedUserQueryPath();t?(i=e.extend({},i,{path:n}),this.models.search.set(null,t,i)):this.models.search.unset(n,i)},getUserContext:function(){var e={};return e.locale=n.locale,e},openSearch:function(e){var t,i,s=e.searchTerms||"{searchTerms}",r=e.href||e.eventTarget.getAttribute("data-href"),a=this.getUnparsedUserQuery();r&&(a?(t=s.replace(/\{searchTerms\}/g,a),i=r.replace(/\{searchTerms\}/g,encodeURIComponent(t)),i=i.replace(/\{language\}/g,n.locale),window.open(i)):this.displayWarning(n("missing_query")))},openExpandable:function(t){var i=this,n=e.uniqueId("event"),s=t.eventTarget.getAttribute("data-enabled-selector"),r=t.id||t.eventTarget.getAttribute("aria-controls"),a=document.getElementById(r);return s&&!b(s).is(":visible")?!0:(t.eventTarget.hasAttribute("aria-expanded")&&t.eventTarget.setAttribute("aria-expanded","true"),a.setAttribute("aria-expanded","true"),b("body").addClass(r+"-visible"),l.focus(a),t.closeOnFocusout&&b(a).on("focusout."+n,function(){window.setTimeout(function(){var e=l.isChild(document.activeElement,a);e||(b(a).off("focusout."+n),i.closeExpandable(t))},10)}),void 0)},closeExpandable:function(e){var t=e.id||e.eventTarget.getAttribute("aria-controls"),i=document.getElementById(t);e.eventTarget&&e.eventTarget.hasAttribute("aria-expanded")&&e.eventTarget.setAttribute("aria-expanded","false"),i.setAttribute("aria-expanded","false"),b("body").removeClass(t+"-visible")},toggleExpandable:function(e){var t=e.id||e.eventTarget.getAttribute("aria-controls"),i=document.getElementById(t),n=e.eventTarget.hasAttribute("aria-expanded")?e.eventTarget:i,s=n.hasAttribute("aria-expanded")?!("false"===n.getAttribute("aria-expanded")):b(n).is(":visible");s?this.closeExpandable(e):this.openExpandable(e)},changeLocale:function(e){this.setLocale(e.lang)},setPage:function(e){var t=e.page;0>t||e.model.loadPage&&e.model.loadPage(e)},previousPage:function(t){if(t&&t.model&&t.model.previousPage)t.model.previousPage(t);else{var i=t.model.get("pages"),n=e.find(i,function(e){return e.current_page});n&&this.setPage(e.extend({},t,{page:n.page_number-1}))}},nextPage:function(t){if(t&&t.model&&t.model.nextPage)t.model.nextPage(t);else{var i=t.model.get("pages"),n=e.find(i,function(e){return e.current_page});n&&this.setPage(e.extend({},t,{page:n.page_number+1}))}}}),j.VERSION="18.1.4.491",Mindbreeze.require(["client/export"]),j}),/**
 * @license Highcharts JS v4.1.5 (2015-04-13)
 *
 * (c) 2009-2014 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */
Mindbreeze.define("highcharts",["jquery"],function(e){!function(){function t(){var e,t,i=arguments,n={},s=function(e,t){var i,n;"object"!=typeof e&&(e={});for(n in t)t.hasOwnProperty(n)&&(i=t[n],e[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?s(e[n]||{},i):t[n]);return e};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),t=i.length,e=0;t>e;e++)n=s(n,i[e]);return n}function i(e,t){return parseInt(e,t||10)}function n(e){return"string"==typeof e}function s(e){return e&&"object"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e){return"number"==typeof e}function o(e){return dt.log(e)/dt.LN10}function l(e){return dt.pow(10,e)}function u(e,t){for(var i=e.length;i--;)if(e[i]===t){e.splice(i,1);break}}function c(e){return e!==Y&&null!==e}function h(e,t,i){var r,a;if(n(t))c(i)?e.setAttribute(t,i):e&&e.getAttribute&&(a=e.getAttribute(t));else if(c(t)&&s(t))for(r in t)e.setAttribute(r,t[r]);return a}function d(e){return r(e)?e:[e]}function p(e,t){kt&&!At&&t&&t.opacity!==Y&&(t.filter="alpha(opacity="+100*t.opacity+")"),si(e.style,t)}function m(e,t,i,n,s){var r=ct.createElement(e);return t&&si(r,t),s&&p(r,{padding:0,border:Gt,margin:0}),i&&p(r,i),n&&n.appendChild(r),r}function f(e,t){var i=function(){return Y};return i.prototype=new e,si(i.prototype,t),i}function g(e,t){return new Array((t||2)+1-String(e).length).join(0)+e}function v(e){return 6e4*(J&&J(e)||G||0)}function _(e,t){var i,n=/f$/,s=/\.([0-9])/,r=j.lang;return n.test(e)?(i=e.match(s),i=i?i[1]:-1,null!==t&&(t=ut.numberFormat(t,i,r.decimalPoint,e.indexOf(",")>-1?r.thousandsSep:""))):t=V(e,t),t}function y(e,t){for(var i,n,s,r,a,o,l,u="{",c=!1,h=[];-1!==(l=e.indexOf(u));){if(i=e.slice(0,l),c){for(n=i.split(":"),s=n.shift().split("."),a=s.length,o=t,r=0;a>r;r++)o=o[s[r]];n.length&&(o=_(n.join(":"),o)),h.push(o)}else h.push(i);e=e.slice(l+1),c=!c,u=c?"}":"{"}return h.push(e),h.join("")}function b(e){return dt.pow(10,mt(dt.log(e)/dt.LN10))}function w(e,t,i,n,s){var r,a,o=e;for(i=ri(i,1),r=e/i,t||(t=[1,2,2.5,5,10],n===!1&&(1===i?t=[1,2,5,10]:.1>=i&&(t=[1/i]))),a=0;a<t.length&&(o=t[a],!(s&&o*i>=e||!s&&r<=(t[a]+(t[a+1]||t[a]))/2));a++);return o*=i}function x(e,t){var i,n,s=e.length;for(n=0;s>n;n++)e[n].ss_i=n;for(e.sort(function(e,n){return i=t(e,n),0===i?e.ss_i-n.ss_i:i}),n=0;s>n;n++)delete e[n].ss_i}function M(e){for(var t=e.length,i=e[0];t--;)e[t]<i&&(i=e[t]);return i}function T(e){for(var t=e.length,i=e[0];t--;)e[t]>i&&(i=e[t]);return i}function k(e,t){var i;for(i in e)e[i]&&e[i]!==t&&e[i].destroy&&e[i].destroy(),delete e[i]}function C(e){R||(R=m(Vt)),e&&R.appendChild(e),R.innerHTML=""}function L(e,t){var i="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw i;ht.console&&console.log(i)}function D(e){return parseFloat(e.toPrecision(14))}function E(e,t){H=ri(e,t.animation)}function S(){var e=j.global,t=e.useUTC,i=t?"getUTC":"get",n=t?"setUTC":"set";W=e.Date||window.Date,G=t&&e.timezoneOffset,J=t&&e.getTimezoneOffset,$=function(e,i,n,s,r,a){var o;return t?(o=W.UTC.apply(0,arguments),o+=v(o)):o=new W(e,i,ri(n,1),ri(s,0),ri(r,0),ri(a,0)).getTime(),o},X=i+"Minutes",Z=i+"Hours",K=i+"Day",Q=i+"Date",et=i+"Month",tt=i+"FullYear",it=n+"Milliseconds",nt=n+"Seconds",st=n+"Minutes",rt=n+"Hours",at=n+"Date",ot=n+"Month",lt=n+"FullYear"}function A(e){return j=t(!0,j,e),S(),j}function P(){return j}function O(){}function N(e,t,i,n){this.axis=e,this.pos=t,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}function I(e,t,i,n,s){var r=e.chart.inverted;this.axis=e,this.isNegative=i,this.options=t,this.x=n,this.total=null,this.points={},this.stack=s,this.alignOptions={align:t.align||(r?i?"left":"right":"center"),verticalAlign:t.verticalAlign||(r?"middle":i?"bottom":"top"),y:ri(t.y,r?4:i?14:-6),x:ri(t.x,r?i?-6:6:0)},this.textAlign=t.textAlign||(r?i?"right":"left":"center")}var Y,F,z,R,j,V,H,q,B,U,W,$,G,J,X,Z,K,Q,et,tt,it,nt,st,rt,at,ot,lt,ut,ct=document,ht=window,dt=Math,pt=dt.round,mt=dt.floor,ft=dt.ceil,gt=dt.max,vt=dt.min,_t=dt.abs,yt=dt.cos,bt=dt.sin,wt=dt.PI,xt=2*wt/360,Mt=navigator.userAgent,Tt=ht.opera,kt=/(msie|trident)/i.test(Mt)&&!Tt,Ct=8===ct.documentMode,Lt=/AppleWebKit/.test(Mt),Dt=/Firefox/.test(Mt),Et=/(Mobile|Android|Windows Phone)/.test(Mt),St="http://www.w3.org/2000/svg",At=!!ct.createElementNS&&!!ct.createElementNS(St,"svg").createSVGRect,Pt=Dt&&parseInt(Mt.split("Firefox/")[1],10)<4,Ot=!At&&!kt&&!!ct.createElement("canvas").getContext,Nt={},It=0,Yt=function(){return Y},Ft=[],zt=0,Rt="Highcharts",jt="4.1.5",Vt="div",Ht="absolute",qt="relative",Bt="hidden",Ut="highcharts-",Wt="visible",$t="px",Gt="none",Jt="M",Xt="L",Zt=/^[0-9]+$/,Kt="",Qt="hover",ei="select",ti=["plotTop","marginRight","marginBottom","plotLeft"],ii="stroke-width",ni={};ut=ht.Highcharts=ht.Highcharts?L(16,!0):{},ut.seriesTypes=ni;var si=ut.extend=function(e,t){var i;e||(e={});for(i in t)e[i]=t[i];return e},ri=ut.pick=function(){var e,t,i=arguments,n=i.length;for(e=0;n>e;e++)if(t=i[e],t!==Y&&null!==t)return t},ai=ut.wrap=function(e,t,i){var n=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(n),i.apply(this,e)}};V=function(e,t,i){if(!c(t)||isNaN(t))return"Invalid date";e=ri(e,"%Y-%m-%d %H:%M:%S");var n,s=new W(t-v(t)),r=s[Z](),a=s[K](),o=s[Q](),l=s[et](),u=s[tt](),h=j.lang,d=h.weekdays,p=si({a:d[a].substr(0,3),A:d[a],d:g(o),e:o,w:a,b:h.shortMonths[l],B:h.months[l],m:g(l+1),y:u.toString().substr(2,2),Y:u,H:g(r),I:g(r%12||12),l:r%12||12,M:g(s[X]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:g(s.getSeconds()),L:g(pt(t%1e3),3)},ut.dateFormats);for(n in p)for(;-1!==e.indexOf("%"+n);)e=e.replace("%"+n,"function"==typeof p[n]?p[n](t):p[n]);return i?e.substr(0,1).toUpperCase()+e.substr(1):e},B={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ut.numberFormat=function(e,t,n,s){var r=j.lang,a=+e||0,o=-1===t?vt((a.toString().split(".")[1]||"").length,20):isNaN(t=_t(t))?2:t,l=void 0===n?r.decimalPoint:n,u=void 0===s?r.thousandsSep:s,c=0>a?"-":"",h=String(i(a=_t(a).toFixed(o))),d=h.length>3?h.length%3:0;return c+(d?h.substr(0,d)+u:"")+h.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+u)+(o?l+_t(a-h).toFixed(o).slice(2):"")},q={init:function(e,t,i){t=t||"";var n,s,r,a,o,l=e.shift,u=t.indexOf("C")>-1,c=u?7:3,h=t.split(" "),d=[].concat(i),p=function(e){for(r=e.length;r--;)e[r]===Jt&&e.splice(r+1,0,e[r+1],e[r+2],e[r+1],e[r+2])};if(u&&(p(h),p(d)),e.isArea&&(a=h.splice(h.length-6,6),o=d.splice(d.length-6,6)),l<=d.length/c&&h.length===d.length)for(;l--;)d=[].concat(d).splice(0,c).concat(d);if(e.shift=0,h.length)for(n=d.length;h.length<n;)s=[].concat(h).splice(h.length-c,c),u&&(s[c-6]=s[c-2],s[c-5]=s[c-1]),h=h.concat(s);return a&&(h=h.concat(a),d=d.concat(o)),[h,d]},step:function(e,t,i,n){var s,r=[],a=e.length;if(1===i)r=n;else if(a===t.length&&1>i)for(;a--;)s=parseFloat(e[a]),r[a]=isNaN(s)?e[a]:i*parseFloat(t[a]-s)+s;else r=t;return r}},function(e){ht.HighchartsAdapter=ht.HighchartsAdapter||e&&{init:function(t){var i=e.fx;e.extend(e.easing,{easeOutQuad:function(e,t,i,n,s){return-n*(t/=s)*(t-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,n){var s,r=i.step;"cur"===n?r=i.prototype:"_default"===n&&e.Tween&&(r=e.Tween.propHooks[n],n="set"),s=r[n],s&&(r[n]=function(e){var i;return e=t?e:this,"align"!==e.prop?(i=e.elem,i.attr?i.attr(e.prop,"cur"===n?Y:e.now):s.apply(this,arguments)):void 0})}),ai(e.cssHooks.opacity,"get",function(e,t,i){return t.attr?t.opacity||0:e.call(this,t,i)}),this.addAnimSetter("d",function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))}),this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var i,n=e.length;for(i=0;n>i;i++)if(t.call(e[i],e[i],i,e)===!1)return i},e.fn.highcharts=function(){var e,t,i,s="Chart",r=arguments;return this[0]&&(n(r[0])&&(s=r[0],r=Array.prototype.slice.call(r,1)),e=r[0],e!==Y&&(e.chart=e.chart||{},e.chart.renderTo=this[0],i=new ut[s](e,r[1]),t=this),e===Y&&(t=Ft[h(this[0],"data-highcharts-chart")])),t}},addAnimSetter:function(t,i){e.Tween?e.Tween.propHooks[t]={set:i}:e.fx.step[t]=i},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(e,t){for(var i=[],n=0,s=e.length;s>n;n++)i[n]=t.call(e[n],e[n],n,e);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var s=ct.removeEventListener?"removeEventListener":"detachEvent";ct[s]&&t&&!t[s]&&(t[s]=function(){}),e(t).unbind(i,n)},fireEvent:function(t,i,n,s){var r,a=e.Event(i),o="detached"+i;!kt&&n&&(delete n.layerX,delete n.layerY,delete n.returnValue),si(a,n),t[i]&&(t[o]=t[i],t[i]=null),e.each(["preventDefault","stopPropagation"],function(e,t){var i=a[t];a[t]=function(){try{i.call(a)}catch(e){"preventDefault"===t&&(r=!0)}}}),e(t).trigger(a),t[o]&&(t[i]=t[o],t[o]=null),!s||a.isDefaultPrevented()||r||s(a)},washMouseEvent:function(e){var t=e.originalEvent||e;return t.pageX===Y&&(t.pageX=e.pageX,t.pageY=e.pageY),t},animate:function(t,i,n){var s=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),s.stop(),i.opacity!==Y&&t.attr&&(i.opacity+="px"),t.hasAnim=1,s.animate(i,n)},stop:function(t){t.hasAnim&&e(t).stop()}}}(e);var oi=ht.HighchartsAdapter,li=oi||{};oi&&oi.init.call(oi,q);var ui=li.adapterRun,ci=li.getScript,hi=li.inArray,di=ut.each=li.each,pi=li.grep,mi=li.offset,fi=li.map,gi=li.addEvent,vi=li.removeEvent,_i=li.fireEvent,yi=li.washMouseEvent,bi=li.animate,wi=li.stop;j={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.1.5/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.1.5/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":ut.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:Ht,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:Ht,width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:qt,top:"45%"},style:{position:Ht,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:At,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">â</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Et?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var xi=j.plotOptions,Mi=xi.line;S();var Ti=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,ki=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Ci=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,Li=function(e){function n(e){e&&e.stops?u=fi(e.stops,function(e){return Li(e[1])}):(l=Ti.exec(e),l?c=[i(l[1]),i(l[2]),i(l[3]),parseFloat(l[4],10)]:(l=ki.exec(e),l?c=[i(l[1],16),i(l[2],16),i(l[3],16),1]:(l=Ci.exec(e),l&&(c=[i(l[1]),i(l[2]),i(l[3]),1]))))}function s(i){var n;return u?(n=t(e),n.stops=[].concat(n.stops),di(u,function(e,t){n.stops[t]=[n.stops[t][0],e.get(i)]})):n=c&&!isNaN(c[0])?"rgb"===i?"rgb("+c[0]+","+c[1]+","+c[2]+")":"a"===i?c[3]:"rgba("+c.join(",")+")":e,n}function r(e){if(u)di(u,function(t){t.brighten(e)});else if(a(e)&&0!==e){var t;for(t=0;3>t;t++)c[t]+=i(255*e),c[t]<0&&(c[t]=0),c[t]>255&&(c[t]=255)}return this}function o(e){return c[3]=e,this}var l,u,c=[];return n(e),{get:s,brighten:r,rgba:c,setOpacity:o,raw:e}};O.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textShadow"],init:function(e,t){var i=this;i.element="span"===t?m(t):ct.createElementNS(St,t),i.renderer=e},animate:function(e,i,n){var s=ri(i,H,!0);return wi(this),s?(s=t(s,{}),n&&(s.complete=n),bi(this,e,s)):(this.attr(e),n&&n()),this},colorGradient:function(e,i,n){var s,a,o,l,u,h,d,p,m,f,g,v=this.renderer,_=[];if(e.linearGradient?a="linearGradient":e.radialGradient&&(a="radialGradient"),a){o=e[a],l=v.gradients,h=e.stops,m=n.radialReference,r(o)&&(e[a]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===a&&m&&!c(o.gradientUnits)&&(o=t(o,{cx:m[0]-m[2]/2+o.cx*m[2],cy:m[1]-m[2]/2+o.cy*m[2],r:o.r*m[2],gradientUnits:"userSpaceOnUse"}));for(f in o)"id"!==f&&_.push(f,o[f]);for(f in h)_.push(h[f]);_=_.join(","),l[_]?g=l[_].attr("id"):(o.id=g=Ut+It++,l[_]=u=v.createElement(a).attr(o).add(v.defs),u.stops=[],di(h,function(e){var t;0===e[1].indexOf("rgba")?(s=Li(e[1]),d=s.get("rgb"),p=s.get("a")):(d=e[1],p=1),t=v.createElement("stop").attr({offset:e[0],"stop-color":d,"stop-opacity":p}).add(u),u.stops.push(t)})),n.setAttribute(i,"url("+v.url+"#"+g+")")}},applyTextShadow:function(e){var t,n=this.element,s=-1!==e.indexOf("contrast"),r=this.renderer.forExport||n.style.textShadow!==Y&&!kt;s&&(e=e.replace(/contrast/g,this.renderer.getContrast(n.style.fill))),r?s&&p(n,{textShadow:e}):(this.fakeTS=!0,this.ySetter=this.xSetter,t=[].slice.call(n.getElementsByTagName("tspan")),di(e.split(/\s?,\s?/g),function(e){var s,r,a=n.firstChild;e=e.split(" "),s=e[e.length-1],r=e[e.length-2],r&&di(t,function(e,t){var o;0===t&&(e.setAttribute("x",n.getAttribute("x")),t=n.getAttribute("y"),e.setAttribute("y",t||0),null===t&&n.setAttribute("y",0)),o=e.cloneNode(1),h(o,{"class":Ut+"text-shadow",fill:s,stroke:s,"stroke-opacity":1/gt(i(r),3),"stroke-width":r,"stroke-linejoin":"round"}),n.insertBefore(o,a)})}))},attr:function(e,t){var i,n,s,r,a=this.element,o=this;if("string"==typeof e&&t!==Y&&(i=e,e={},e[i]=t),"string"==typeof e)o=(this[e+"Getter"]||this._defaultGetter).call(this,e,a);else{for(i in e)n=e[i],r=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(s||(this.symbolAttr(e),s=!0),r=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),r||(this[i+"Setter"]||this._defaultSetter).call(this,n,i,a),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,n);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return o},updateShadows:function(e,t){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(e,"height"===e?gt(t-(i[n].cutHeight||0),0):"d"===e?this.d:t)},addClass:function(e){var t=this.element,i=h(t,"class")||"";return-1===i.indexOf(e)&&h(t,"class",i+" "+e),this},symbolAttr:function(e){var t=this;di(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){t[i]=ri(e[i],t[i])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":Gt)},crisp:function(e){var t,i,n=this,s={},r=e.strokeWidth||n.strokeWidth||0;i=pt(r)%2/2,e.x=mt(e.x||n.x||0)+i,e.y=mt(e.y||n.y||0)+i,e.width=mt((e.width||n.width||0)-2*i),e.height=mt((e.height||n.height||0)-2*i),e.strokeWidth=r;for(t in e)n[t]!==e[t]&&(n[t]=s[t]=e[t]);return s},css:function(e){var t,n,s,r=this,a=r.styles,o={},l=r.element,u="",c=!a;if(e&&e.color&&(e.fill=e.color),a)for(n in e)e[n]!==a[n]&&(o[n]=e[n],c=!0);if(c){if(t=r.textWidth=e&&e.width&&"text"===l.nodeName.toLowerCase()&&i(e.width)||r.textWidth,a&&(e=si(a,o)),r.styles=e,t&&(Ot||!At&&r.renderer.forExport)&&delete e.width,kt&&!At)p(r.element,e);else{s=function(e,t){return"-"+t.toLowerCase()};for(n in e)u+=n.replace(/([A-Z])/g,s)+":"+e[n]+";";h(l,"style",u)}t&&r.added&&r.renderer.buildText(r)}return r},on:function(e,t){var i=this,n=i.element;return z&&"click"===e?(n.ontouchstart=function(e){i.touchEventFired=W.now(),e.preventDefault(),t.call(n,e)},n.onclick=function(e){(-1===Mt.indexOf("Android")||W.now()-(i.touchEventFired||0)>1100)&&t.call(n,e)}):n["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},updateTransform:function(){var e,t=this,i=t.translateX||0,n=t.translateY||0,s=t.scaleX,r=t.scaleY,a=t.inverted,o=t.rotation,l=t.element;a&&(i+=t.attr("width"),n+=t.attr("height")),e=["translate("+i+","+n+")"],a?e.push("rotate(90) scale(-1,1)"):o&&e.push("rotate("+o+" "+(l.getAttribute("x")||0)+" "+(l.getAttribute("y")||0)+")"),(c(s)||c(r))&&e.push("scale("+ri(s,1)+" "+ri(r,1)+")"),e.length&&l.setAttribute("transform",e.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,i){var s,r,a,o,l,c={},h=this.renderer,d=h.alignedObjects;return e?(this.alignOptions=e,this.alignByTranslate=t,(!i||n(i))&&(this.alignTo=l=i||"renderer",u(d,this),d.push(this),i=null)):(e=this.alignOptions,t=this.alignByTranslate,l=this.alignTo),i=ri(i,h[l],h),s=e.align,r=e.verticalAlign,a=(i.x||0)+(e.x||0),o=(i.y||0)+(e.y||0),("right"===s||"center"===s)&&(a+=(i.width-(e.width||0))/{right:1,center:2}[s]),c[t?"translateX":"x"]=pt(a),("bottom"===r||"middle"===r)&&(o+=(i.height-(e.height||0))/({bottom:1,middle:2}[r]||1)),c[t?"translateY":"y"]=pt(o),this[this.placed?"animate":"attr"](c),this.placed=!0,this.alignAttr=c,this},getBBox:function(e){var t,i,n,s,r,a,o=this,l=o.renderer,u=o.rotation,c=o.element,h=o.styles,d=u*xt,p=o.textStr,m=c.style;if(p!==Y&&(a=["",u||0,h&&h.fontSize,c.style.width].join(","),a=""===p||Zt.test(p)?"num:"+p.toString().length+a:p+a),a&&!e&&(t=l.cache[a]),!t){if(c.namespaceURI===St||l.forExport){try{r=this.fakeTS&&function(e){di(c.querySelectorAll("."+Ut+"text-shadow"),function(t){t.style.display=e})},Dt&&m.textShadow?(s=m.textShadow,m.textShadow=""):r&&r(Gt),t=c.getBBox?si({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight},s?m.textShadow=s:r&&r("")}catch(f){}(!t||t.width<0)&&(t={width:0,height:0})}else t=o.htmlGetBBox();l.isSVG&&(i=t.width,n=t.height,kt&&h&&"11px"===h.fontSize&&"16.9"===n.toPrecision(3)&&(t.height=n=14),u&&(t.width=_t(n*bt(d))+_t(i*yt(d)),t.height=_t(n*yt(d))+_t(i*bt(d)))),l.cache[a]=t}return t},show:function(e){return e&&this.element.namespaceURI===St?this.element.removeAttribute("visibility"):this.attr({visibility:e?"inherit":Wt}),this},hide:function(){return this.attr({visibility:Bt})},fadeOut:function(e){var t=this;t.animate({opacity:0},{duration:e||150,complete:function(){t.attr({y:-9999})}})},add:function(e){var t,i=this.renderer,n=this.element;return e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!e||e.handleZ||this.zIndex)&&(t=this.zIndexSetter()),t||(e?e.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e,t,i,n=this,s=n.element||{},r=n.shadows,a=n.renderer.isSVG&&"SPAN"===s.nodeName&&n.parentGroup;if(s.onclick=s.onmouseout=s.onmouseover=s.onmousemove=s.point=null,wi(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(s),r&&di(r,function(e){n.safeRemoveChild(e)});a&&a.div&&0===a.div.childNodes.length;)e=a.parentGroup,n.safeRemoveChild(a.div),delete a.div,a=e;n.alignTo&&u(n.renderer.alignedObjects,n);for(t in n)delete n[t];return null},shadow:function(e,t,i){var n,s,r,a,o,l,u=[],c=this.element;if(e){for(a=ri(e.width,3),o=(e.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+ri(e.offsetX,1)+", "+ri(e.offsetY,1)+")",n=1;a>=n;n++)s=c.cloneNode(0),r=2*a+1-2*n,h(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":o*n,"stroke-width":r,transform:"translate"+l,fill:Gt}),i&&(h(s,"height",gt(h(s,"height")-r,0)),s.cutHeight=r),t?t.element.appendChild(s):c.parentNode.insertBefore(s,c),u.push(s);this.shadows=u}return this},xGetter:function(e){return"circle"===this.element.nodeName&&(e={x:"cx",y:"cy"}[e]||e),this._defaultGetter(e)},_defaultGetter:function(e){var t=ri(this[e],this.element?this.element.getAttribute(e):null,0);return/^[\-0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(e,t,i){e&&e.join&&(e=e.join(" ")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),i.setAttribute(t,e),this[t]=e},dashstyleSetter:function(e){var t;if(e=e&&e.toLowerCase()){for(e=e.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),t=e.length;t--;)e[t]=i(e[t])*this["stroke-width"];e=e.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",e)}},alignSetter:function(e){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[e])},opacitySetter:function(e,t,i){this[t]=e,i.setAttribute(t,e)},titleSetter:function(e){var t=this.element.getElementsByTagName("title")[0];t||(t=ct.createElementNS(St,"title"),this.element.appendChild(t)),t.textContent=String(ri(e),"").replace(/<[^>]*>/g,"")},textSetter:function(e){e!==this.textStr&&(delete this.bBox,this.textStr=e,this.added&&this.renderer.buildText(this))},fillSetter:function(e,t,i){"string"==typeof e?i.setAttribute(t,e):e&&this.colorGradient(e,t,i)},zIndexSetter:function(e,t){var n,s,r,a,o,l=this.renderer,u=this.parentGroup,d=u||l,p=d.element||l.box,m=this.element,f=this.added;if(c(e)&&(m.setAttribute(t,e),e=+e,this[t]===e&&(f=!1),this[t]=e),f){for(e=this.zIndex,e&&u&&(u.handleZ=!0),n=p.childNodes,o=0;o<n.length&&!a;o++)s=n[o],r=h(s,"zIndex"),s!==m&&(i(r)>e||!c(e)&&c(r))&&(p.insertBefore(m,s),a=!0);a||p.appendChild(m)}return a},_defaultSetter:function(e,t,i){i.setAttribute(t,e)}},O.prototype.yGetter=O.prototype.xGetter,O.prototype.translateXSetter=O.prototype.translateYSetter=O.prototype.rotationSetter=O.prototype.verticalAlignSetter=O.prototype.scaleXSetter=O.prototype.scaleYSetter=function(e,t){this[t]=e,this.doTransform=!0},O.prototype["stroke-widthSetter"]=O.prototype.strokeSetter=function(e,t,i){this[t]=e,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],O.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===t&&0===e&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)};var Di=function(){this.init.apply(this,arguments)};Di.prototype={Element:O,init:function(e,t,i,n,s){var r,a,o,l=this,u=location;r=l.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n)),a=r.element,e.appendChild(a),-1===e.innerHTML.indexOf("xmlns")&&h(a,"xmlns",St),l.isSVG=!0,l.box=a,l.boxWrapper=r,l.alignedObjects=[],l.url=(Dt||Lt)&&ct.getElementsByTagName("base").length?u.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",o=this.createElement("desc").add(),o.element.appendChild(ct.createTextNode("Created with "+Rt+" "+jt)),l.defs=this.createElement("defs").add(),l.forExport=s,l.gradients={},l.cache={},l.setSize(t,i,!1);var c,d;Dt&&e.getBoundingClientRect&&(l.subPixelFix=c=function(){p(e,{left:0,top:0}),d=e.getBoundingClientRect(),p(e,{left:ft(d.left)-d.left+$t,top:ft(d.top)-d.top+$t})},c(),gi(ht,"resize",c))},getStyle:function(e){return this.style=si({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),k(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&vi(ht,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){for(var t,n,s,r=e.element,a=this,o=a.forExport,l=ri(e.textStr,"").toString(),u=-1!==l.indexOf("<"),c=r.childNodes,d=h(r,"x"),m=e.styles,f=e.textWidth,g=m&&m.lineHeight,v=m&&m.textShadow,_=m&&"ellipsis"===m.textOverflow,y=c.length,b=f&&!e.added&&this.box,w=function(e){return g?i(g):a.fontMetrics(/(px|em)$/.test(e&&e.style.fontSize)?e.style.fontSize:m&&m.fontSize||a.style.fontSize||12,e).h},x=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")};y--;)r.removeChild(c[y]);return u||v||_||-1!==l.indexOf(" ")?(n=/<.*style="([^"]+)".*>/,s=/<.*href="(http[^"]+)".*>/,b&&b.appendChild(r),t=u?l.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[l],""===t[t.length-1]&&t.pop(),di(t,function(t,i){var l,u=0;t=t.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=t.split("|||"),di(l,function(t){if(""!==t||1===l.length){var c,g={},v=ct.createElementNS(St,"tspan");if(n.test(t)&&(c=t.match(n)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),h(v,"style",c)),s.test(t)&&!o&&(h(v,"onclick",'location.href="'+t.match(s)[1]+'"'),p(v,{cursor:"pointer"})),t=x(t.replace(/<(.|\n)*?>/g,"")||" ")," "!==t){if(v.appendChild(ct.createTextNode(t)),u?g.dx=0:i&&null!==d&&(g.x=d),h(v,g),r.appendChild(v),!u&&i&&(!At&&o&&p(v,{display:"block"}),h(v,"dy",w(v))),f){for(var y,b,M,T,k=t.replace(/([^\^])-/g,"$1- ").split(" "),C=l.length>1||i||k.length>1&&"nowrap"!==m.whiteSpace,L=[],D=w(v),E=1,S=e.rotation,A=t,P=A.length;(C||_)&&(k.length||L.length);)e.rotation=0,T=e.getBBox(!0),M=T.width,!At&&a.forExport&&(M=a.measureSpanWidth(v.firstChild.data,e.styles)),y=M>f,void 0===b&&(b=y),_&&b?(P/=2,""===A||!y&&.5>P?k=[]:(y&&(b=!0),A=t.substring(0,A.length+(y?-1:1)*ft(P)),k=[A+"â¦"],v.removeChild(v.firstChild))):y&&1!==k.length?(v.removeChild(v.firstChild),L.unshift(k.pop())):(k=L,L=[],k.length&&(E++,v=ct.createElementNS(St,"tspan"),h(v,{dy:D,x:d}),c&&h(v,"style",c),r.appendChild(v)),M>f&&(f=M)),k.length&&v.appendChild(ct.createTextNode(k.join(" ").replace(/- /g,"-")));b&&e.attr("title",e.textStr),e.rotation=S}u++}}})}),b&&b.removeChild(r),v&&e.applyTextShadow&&e.applyTextShadow(v),void 0):(r.appendChild(ct.createTextNode(x(l))),void 0)},getContrast:function(e){return e=Li(e).rgba,e[0]+e[1]+e[2]>384?"#000":"#FFF"},button:function(e,i,n,s,r,a,o,l,u){var c,h,d,p,m,f,g=this.label(e,i,n,u,null,null,null,null,"button"),v=0,_={x1:0,y1:0,x2:0,y2:1};return r=t({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:_,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),d=r.style,delete r.style,a=t(r,{stroke:"#68A",fill:{linearGradient:_,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),p=a.style,delete a.style,o=t(r,{stroke:"#68A",fill:{linearGradient:_,stops:[[0,"#9BD"],[1,"#CDF"]]}},o),m=o.style,delete o.style,l=t(r,{style:{color:"#CCC"}},l),f=l.style,delete l.style,gi(g.element,kt?"mouseover":"mouseenter",function(){3!==v&&g.attr(a).css(p)}),gi(g.element,kt?"mouseout":"mouseleave",function(){3!==v&&(c=[r,a,o][v],h=[d,p,m][v],g.attr(c).css(h))}),g.setState=function(e){g.state=v=e,e?2===e?g.attr(o).css(m):3===e&&g.attr(l).css(f):g.attr(r).css(d)},g.on("click",function(){3!==v&&s.call(g)}).attr(r).css(si({cursor:"default"},d))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=pt(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=pt(e[2])+t%2/2),e},path:function(e){var t={fill:Gt};return r(e)?t.d=e:s(e)&&si(t,e),this.createElement("path").attr(t)},circle:function(e,t,i){var n=s(e)?e:{x:e,y:t,r:i},r=this.createElement("circle");return r.xSetter=function(e){this.element.setAttribute("cx",e)},r.ySetter=function(e){this.element.setAttribute("cy",e)},r.attr(n)},arc:function(e,t,i,n,r,a){var o;return s(e)&&(t=e.y,i=e.r,n=e.innerR,r=e.start,a=e.end,e=e.x),o=this.symbol("arc",e||0,t||0,i||0,i||0,{innerR:n||0,start:r||0,end:a||0}),o.r=i,o},rect:function(e,t,i,n,r,a){r=s(e)?e.r:r;var o=this.createElement("rect"),l=s(e)?e:e===Y?{}:{x:e,y:t,width:gt(i,0),height:gt(n,0)};return a!==Y&&(l.strokeWidth=a,l=o.crisp(l)),r&&(l.r=r),o.rSetter=function(e){h(this.element,{rx:e,ry:e})},o.attr(l)},setSize:function(e,t,i){var n=this,s=n.alignedObjects,r=s.length;for(n.width=e,n.height=t,n.boxWrapper[ri(i,!0)?"animate":"attr"]({width:e,height:t});r--;)s[r].align()},g:function(e){var t=this.createElement("g");return c(e)?t.attr({"class":Ut+e}):t},image:function(e,t,i,n,s){var r,a={preserveAspectRatio:Gt};return arguments.length>1&&si(a,{x:t,y:i,width:n,height:s}),r=this.createElement("image").attr(a),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):r.element.setAttribute("hc-svg-href",e),r},symbol:function(e,t,i,n,s,r){var a,o,l,u,c,h=this.symbols[e],d=h&&h(pt(t),pt(i),n,s,r),p=/^url\((.*?)\)$/;return d?(a=this.path(d),si(a,{symbolName:e,x:t,y:i,width:n,height:s}),r&&si(a,r)):p.test(e)&&(c=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(pt((n-t[0])/2),pt((s-t[1])/2)))},l=e.match(p)[1],u=Nt[l]||r&&r.width&&r.height&&[r.width,r.height],a=this.image(l).attr({x:t,y:i}),a.isImg=!0,u?c(a,u):(a.attr({width:0,height:0}),o=m("img",{onload:function(){c(a,Nt[l]=[this.width,this.height])},src:l}))),a},symbols:{circle:function(e,t,i,n){var s=.166*i;return[Jt,e+i/2,t,"C",e+i+s,t,e+i+s,t+n,e+i/2,t+n,"C",e-s,t+n,e-s,t,e+i/2,t,"Z"]},square:function(e,t,i,n){return[Jt,e,t,Xt,e+i,t,e+i,t+n,e,t+n,"Z"]},triangle:function(e,t,i,n){return[Jt,e+i/2,t,Xt,e+i,t+n,e,t+n,"Z"]},"triangle-down":function(e,t,i,n){return[Jt,e,t,Xt,e+i,t,e+i/2,t+n,"Z"]},diamond:function(e,t,i,n){return[Jt,e+i/2,t,Xt,e+i,t+n/2,e+i/2,t+n,e,t+n/2,"Z"]},arc:function(e,t,i,n,s){var r=s.start,a=s.r||i||n,o=s.end-.001,l=s.innerR,u=s.open,c=yt(r),h=bt(r),d=yt(o),p=bt(o),m=s.end-r<wt?0:1;return[Jt,e+a*c,t+a*h,"A",a,a,0,m,1,e+a*d,t+a*p,u?Jt:Xt,e+l*d,t+l*p,"A",l,l,0,m,0,e+l*c,t+l*h,u?"":"Z"]},callout:function(e,t,i,n,s){var r,a=6,o=6,l=vt(s&&s.r||0,i,n),u=l+o,c=s&&s.anchorX,h=s&&s.anchorY,d=pt(s.strokeWidth||0)%2/2;return e+=d,t+=d,r=["M",e+l,t,"L",e+i-l,t,"C",e+i,t,e+i,t,e+i,t+l,"L",e+i,t+n-l,"C",e+i,t+n,e+i,t+n,e+i-l,t+n,"L",e+l,t+n,"C",e,t+n,e,t+n,e,t+n-l,"L",e,t+l,"C",e,t,e,t,e+l,t],c&&c>i&&h>t+u&&t+n-u>h?r.splice(13,3,"L",e+i,h-o,e+i+a,h,e+i,h+o,e+i,t+n-l):c&&0>c&&h>t+u&&t+n-u>h?r.splice(33,3,"L",e,h+o,e-a,h,e,h-o,e,t+l):h&&h>n&&c>e+u&&e+i-u>c?r.splice(23,3,"L",c+o,t+n,c,t+n+a,c-o,t+n,e+l,t+n):h&&0>h&&c>e+u&&e+i-u>c&&r.splice(3,3,"L",c-o,t,c,t-a,c+o,t,i-l,t),r
}},clipRect:function(e,t,i,n){var s,r=Ut+It++,a=this.createElement("clipPath").attr({id:r}).add(this.defs);return s=this.rect(e,t,i,n,0).add(a),s.id=r,s.clipPath=a,s.count=0,s},text:function(e,t,i,n){var s,r=this,a=Ot||!At&&r.forExport,o={};return n&&!r.forExport?r.html(e,t,i):(o.x=Math.round(t||0),i&&(o.y=Math.round(i)),(e||0===e)&&(o.text=e),s=r.createElement("text").attr(o),a&&s.css({position:Ht}),n||(s.xSetter=function(e,t,i){var n,s,r=i.getElementsByTagName("tspan"),a=i.getAttribute(t);for(s=0;s<r.length;s++)n=r[s],n.getAttribute(t)===a&&n.setAttribute(t,e);i.setAttribute(t,e)}),s)},fontMetrics:function(e,t){e=e||this.style.fontSize,t&&ht.getComputedStyle&&(t=t.element||t,e=ht.getComputedStyle(t,"").fontSize),e=/px/.test(e)?i(e):/em/.test(e)?12*parseFloat(e):12;var n=24>e?e+3:pt(1.2*e),s=pt(.8*n);return{h:n,b:s,f:e}},rotCorr:function(e,t,i){var n=e;return t&&i&&(n=gt(n*yt(t*xt),4)),{x:-e/3*bt(t*xt),y:n}},label:function(e,i,n,s,r,a,o,l,u){function h(){var e,t,i=T.element.style;f=(void 0===g||void 0===v||M.styles.textAlign)&&c(T.textStr)&&T.getBBox(),M.width=(g||f.width||0)+2*C+L,M.height=(v||f.height||0)+2*C,b=C+x.fontMetrics(i&&i.fontSize,T).b,w&&(m||(e=pt(-k*C),t=l?-b:0,M.box=m=s?x.symbol(s,e,t,M.width,M.height,E):x.rect(e,t,M.width,M.height,0,E[ii]),m.attr("fill",Gt).add(M)),m.isImg||m.attr(si({width:pt(M.width),height:pt(M.height)},E)),E=null)}function d(){var e,t=M.styles,i=t&&t.textAlign,n=L+C*(1-k);e=l?0:b,c(g)&&f&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(g-f.width)),(n!==T.x||e!==T.y)&&(T.attr("x",n),e!==Y&&T.attr("SPAN"===T.element.nodeName?"y":"translateY",e)),T.x=n,T.y=e}function p(e,t){m?m.attr(e,t):E[e]=t}var m,f,g,v,_,y,b,w,x=this,M=x.g(u),T=x.text("",0,0,o).attr({zIndex:1}),k=0,C=3,L=0,D=0,E={};M.onAdd=function(){T.add(M),M.attr({text:e||0===e?e:"",x:i,y:n}),m&&c(r)&&M.attr({anchorX:r,anchorY:a})},M.widthSetter=function(e){g=e},M.heightSetter=function(e){v=e},M.paddingSetter=function(e){c(e)&&e!==C&&(C=M.padding=e,d())},M.paddingLeftSetter=function(e){c(e)&&e!==L&&(L=e,d())},M.alignSetter=function(e){k={left:0,center:.5,right:1}[e]},M.textSetter=function(e){e!==Y&&T.textSetter(e),h(),d()},M["stroke-widthSetter"]=function(e,t){e&&(w=!0),D=e%2/2,p(t,e)},M.strokeSetter=M.fillSetter=M.rSetter=function(e,t){"fill"===t&&e&&(w=!0),p(t,e)},M.anchorXSetter=function(e,t){r=e,p(t,e+D-_)},M.anchorYSetter=function(e,t){a=e,p(t,e-y)},M.xSetter=function(e){M.x=e,k&&(e-=k*((g||f.width)+C)),_=pt(e),M.attr("translateX",_)},M.ySetter=function(e){y=M.y=pt(e),M.attr("translateY",y)};var S=M.css;return si(M,{css:function(e){if(e){var i={};e=t(e),di(M.textProps,function(t){e[t]!==Y&&(i[t]=e[t],delete e[t])}),T.css(i)}return S.call(M,e)},getBBox:function(){return{width:f.width+2*C,height:f.height+2*C,x:f.x-C,y:f.y-C}},shadow:function(e){return m&&m.shadow(e),M},destroy:function(){vi(M.element,"mouseenter"),vi(M.element,"mouseleave"),T&&(T=T.destroy()),m&&(m=m.destroy()),O.prototype.destroy.call(M),M=x=h=d=p=null}})}},F=Di,si(O.prototype,{htmlCss:function(e){var t=this,i=t.element,n=e&&"SPAN"===i.tagName&&e.width;return n&&(delete e.width,t.textWidth=n,t.updateTransform()),e&&"ellipsis"===e.textOverflow&&(e.whiteSpace="nowrap",e.overflow="hidden"),t.styles=si(t.styles,e),p(t.element,e),t},htmlGetBBox:function(){var e=this,t=e.element;return"text"===t.nodeName&&(t.style.position=Ht),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(!this.added)return this.alignOnAdd=!0,void 0;var e=this,t=e.renderer,n=e.element,s=e.translateX||0,r=e.translateY||0,a=e.x||0,o=e.y||0,l=e.textAlign||"left",u={left:0,center:.5,right:1}[l],h=e.shadows,d=e.styles;if(p(n,{marginLeft:s,marginTop:r}),h&&di(h,function(e){p(e,{marginLeft:s+1,marginTop:r+1})}),e.inverted&&di(n.childNodes,function(e){t.invertChild(e,n)}),"SPAN"===n.tagName){var m,f,g=e.rotation,v=i(e.textWidth),_=[g,l,n.innerHTML,e.textWidth].join(",");_!==e.cTT&&(f=t.fontMetrics(n.style.fontSize).b,c(g)&&e.setSpanRotation(g,u,f),m=ri(e.elemWidth,n.offsetWidth),m>v&&/[ \-]/.test(n.textContent||n.innerText)&&(p(n,{width:v+$t,display:"block",whiteSpace:d&&d.whiteSpace||"normal"}),m=v),e.getSpanCorrection(m,f,u,g,l)),p(n,{left:a+(e.xCorr||0)+$t,top:o+(e.yCorr||0)+$t}),Lt&&(f=n.offsetHeight),e.cTT=_}},setSpanRotation:function(e,t,i){var n={},s=kt?"-ms-transform":Lt?"-webkit-transform":Dt?"MozTransform":Tt?"-o-transform":"";n[s]=n.transform="rotate("+e+"deg)",n[s+(Dt?"Origin":"-origin")]=n.transformOrigin=100*t+"% "+i+"px",p(this.element,n)},getSpanCorrection:function(e,t,i){this.xCorr=-e*i,this.yCorr=-t}}),si(Di.prototype,{html:function(e,t,i){var n=this.createElement("span"),s=n.element,r=n.renderer;return n.textSetter=function(e){e!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=e},n.xSetter=n.ySetter=n.alignSetter=n.rotationSetter=function(e,t){"align"===t&&(t="textAlign"),n[t]=e,n.htmlUpdateTransform()},n.attr({text:e,x:pt(t),y:pt(i)}).css({position:Ht,fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),s.style.whiteSpace="nowrap",n.css=n.htmlCss,r.isSVG&&(n.add=function(e){var t,i,a=r.box.parentNode,o=[];if(this.parentGroup=e,e){if(t=e.div,!t){for(i=e;i;)o.push(i),i=i.parentGroup;di(o.reverse(),function(e){var i;t=e.div=e.div||m(Vt,{className:h(e.element,"class")},{position:Ht,left:(e.translateX||0)+$t,top:(e.translateY||0)+$t},t||a),i=t.style,si(e,{translateXSetter:function(t,n){i.left=t+$t,e[n]=t,e.doTransform=!0},translateYSetter:function(t,n){i.top=t+$t,e[n]=t,e.doTransform=!0},visibilitySetter:function(e,t){i[t]=e}})})}}else t=a;return t.appendChild(s),n.added=!0,n.alignOnAdd&&n.htmlUpdateTransform(),n}),n}});var Ei,Si;if(!At&&!Ot){Si={init:function(e,t){var i=this,n=["<",t,' filled="f" stroked="f"'],s=["position: ",Ht,";"],r=t===Vt;("shape"===t||r)&&s.push("left:0;top:0;width:1px;height:1px;"),s.push("visibility: ",r?Bt:Wt),n.push(' style="',s.join(""),'"/>'),t&&(n=r||"span"===t||"img"===t?n.join(""):e.prepVML(n),i.element=m(n)),i.renderer=e},add:function(e){var t=this,i=t.renderer,n=t.element,s=i.box,r=e&&e.inverted,a=e?e.element||e:s;return r&&i.invertChild(n,a),a.appendChild(n),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),t.onAdd&&t.onAdd(),t},updateTransform:O.prototype.htmlUpdateTransform,setSpanRotation:function(){var e=this.rotation,t=yt(e*xt),i=bt(e*xt);p(this.element,{filter:e?["progid:DXImageTransform.Microsoft.Matrix(M11=",t,", M12=",-i,", M21=",i,", M22=",t,", sizingMethod='auto expand')"].join(""):Gt})},getSpanCorrection:function(e,t,i,n,s){var r,a=n?yt(n*xt):1,o=n?bt(n*xt):0,l=ri(this.elemHeight,this.element.offsetHeight),u=s&&"left"!==s;this.xCorr=0>a&&-e,this.yCorr=0>o&&-l,r=0>a*o,this.xCorr+=o*t*(r?1-i:i),this.yCorr-=a*t*(n?r?i:1-i:1),u&&(this.xCorr-=e*i*(0>a?-1:1),n&&(this.yCorr-=l*i*(0>o?-1:1)),p(this.element,{textAlign:s}))},pathToVML:function(e){for(var t=e.length,i=[];t--;)a(e[t])?i[t]=pt(10*e[t])-5:"Z"===e[t]?i[t]="x":(i[t]=e[t],!e.isArc||"wa"!==e[t]&&"at"!==e[t]||(i[t+5]===i[t+7]&&(i[t+7]+=e[t+7]>e[t+5]?1:-1),i[t+6]===i[t+8]&&(i[t+8]+=e[t+8]>e[t+6]?1:-1)));return i.join(" ")||"x"},clip:function(e){var t,i,n=this;return e?(t=e.members,u(t,n),t.push(n),n.destroyClip=function(){u(t,n)},i=e.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:Ct?"inherit":"rect(auto)"}),n.css(i)},css:O.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&C(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),O.prototype.destroy.apply(this)},on:function(e,t){return this.element["on"+e]=function(){var e=ht.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;return e=e.split(/[ ,]/),n=e.length,(9===n||11===n)&&(e[n-4]=e[n-2]=i(e[n-2])-10*t),e.join(" ")},shadow:function(e,t,n){var s,r,a,o,l,u,c,h=[],d=this.element,p=this.renderer,f=d.style,g=d.path;if(g&&"string"!=typeof g.value&&(g="x"),l=g,e){for(u=ri(e.width,3),c=(e.opacity||.15)/u,s=1;3>=s;s++)o=2*u+1-2*s,n&&(l=this.cutOffPath(g.value,o+.5)),a=['<shape isShadow="true" strokeweight="',o,'" filled="false" path="',l,'" coordsize="10 10" style="',d.style.cssText,'" />'],r=m(p.prepVML(a),null,{left:i(f.left)+ri(e.offsetX,1),top:i(f.top)+ri(e.offsetY,1)}),n&&(r.cutOff=o+1),a=['<stroke color="',e.color||"black",'" opacity="',c*s,'"/>'],m(p.prepVML(a),null,null,r),t?t.element.appendChild(r):d.parentNode.insertBefore(r,d),h.push(r);this.shadows=h}return this},updateShadows:Yt,setAttr:function(e,t){Ct?this.element[e]=t:this.element.setAttribute(e,t)},classSetter:function(e){this.element.className=e},dashstyleSetter:function(e,t,i){var n=i.getElementsByTagName("stroke")[0]||m(this.renderer.prepVML(["<stroke/>"]),null,null,i);n[t]=e||"solid",this[t]=e},dSetter:function(e,t,i){var n,s=this.shadows;if(e=e||[],this.d=e.join&&e.join(" "),i.path=e=this.pathToVML(e),s)for(n=s.length;n--;)s[n].path=s[n].cutOff?this.cutOffPath(e,s[n].cutOff):e;this.setAttr(t,e)},fillSetter:function(e,t,i){var n=i.nodeName;"SPAN"===n?i.style.color=e:"IMG"!==n&&(i.filled=e!==Gt,this.setAttr("fillcolor",this.renderer.color(e,i,t,this)))},opacitySetter:Yt,rotationSetter:function(e,t,i){var n=i.style;this[t]=n[t]=e,n.left=-pt(bt(e*xt)+1)+$t,n.top=pt(yt(e*xt))+$t},strokeSetter:function(e,t,i){this.setAttr("strokecolor",this.renderer.color(e,i,t))},"stroke-widthSetter":function(e,t,i){i.stroked=!!e,this[t]=e,a(e)&&(e+=$t),this.setAttr("strokeweight",e)},titleSetter:function(e,t){this.setAttr(t,e)},visibilitySetter:function(e,t,i){"inherit"===e&&(e=Wt),this.shadows&&di(this.shadows,function(i){i.style[t]=e}),"DIV"===i.nodeName&&(e=e===Bt?"-999em":0,Ct||(i.style[t]=e?Wt:Bt),t="top"),i.style[t]=e},xSetter:function(e,t,i){this[t]=e,"x"===t?t="left":"y"===t&&(t="top"),this.updateClipping?(this[t]=e,this.updateClipping()):i.style[t]=e},zIndexSetter:function(e,t,i){i.style[t]=e}},ut.VMLElement=Si=f(O,Si),Si.prototype.ySetter=Si.prototype.widthSetter=Si.prototype.heightSetter=Si.prototype.xSetter;var Ai={Element:Si,isIE8:Mt.indexOf("MSIE 8.0")>-1,init:function(e,t,i,n){var s,r,a,o=this;if(o.alignedObjects=[],s=o.createElement(Vt).css(si(this.getStyle(n),{position:qt})),r=s.element,e.appendChild(s.element),o.isVML=!0,o.box=r,o.boxWrapper=s,o.cache={},o.setSize(t,i,!1),!ct.namespaces.hcv){ct.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{ct.createStyleSheet().cssText=a}catch(l){ct.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,i,n){var r=this.createElement(),a=s(e);return si(r,{members:[],count:0,left:(a?e.x:e)+1,top:(a?e.y:t)+1,width:(a?e.width:i)-1,height:(a?e.height:n)-1,getCSS:function(e){var t=e.element,i=t.nodeName,n="shape"===i,s=e.inverted,r=this,a=r.top-(n?t.offsetTop:0),o=r.left,l=o+r.width,u=a+r.height,c={clip:"rect("+pt(s?o:a)+"px,"+pt(s?u:l)+"px,"+pt(s?l:u)+"px,"+pt(s?a:o)+"px)"};return!s&&Ct&&"DIV"===i&&si(c,{width:l+$t,height:u+$t}),c},updateClipping:function(){di(r.members,function(e){e.element&&e.css(r.getCSS(e))})}})},color:function(e,t,i,n){var s,r,a,o=this,l=/^rgba/,u=Gt;if(e&&e.linearGradient?a="gradient":e&&e.radialGradient&&(a="pattern"),a){var c,h,d,p,f,g,v,_,y,b,w,x,M=e.linearGradient||e.radialGradient,T="",k=e.stops,C=[],L=function(){r=['<fill colors="'+C.join(",")+'" opacity="',_,'" o:opacity2="',v,'" type="',a,'" ',T,'focus="100%" method="any" />'],m(o.prepVML(r),null,null,t)};if(w=k[0],x=k[k.length-1],w[0]>0&&k.unshift([0,w[1]]),x[0]<1&&k.push([1,x[1]]),di(k,function(e,t){l.test(e[1])?(s=Li(e[1]),c=s.get("rgb"),h=s.get("a")):(c=e[1],h=1),C.push(100*e[0]+"% "+c),t?(_=h,y=c):(v=h,b=c)}),"fill"===i)if("gradient"===a)d=M.x1||M[0]||0,p=M.y1||M[1]||0,f=M.x2||M[2]||0,g=M.y2||M[3]||0,T='angle="'+(90-180*dt.atan((g-p)/(f-d))/wt)+'"',L();else{var D,E=M.r,S=2*E,A=2*E,P=M.cx,O=M.cy,N=t.radialReference,I=function(){N&&(D=n.getBBox(),P+=(N[0]-D.x)/D.width-.5,O+=(N[1]-D.y)/D.height-.5,S*=N[2]/D.width,A*=N[2]/D.height),T='src="'+j.global.VMLRadialGradientURL+'" '+'size="'+S+","+A+'" '+'origin="0.5,0.5" '+'position="'+P+","+O+'" '+'color2="'+b+'" ',L()};n.added?I():n.onAdd=I,u=y}else u=c}else if(l.test(e)&&"IMG"!==t.tagName)s=Li(e),r=["<",i,' opacity="',s.get("a"),'"/>'],m(this.prepVML(r),null,null,t),u=s.get("rgb");else{var Y=t.getElementsByTagName(i);Y.length&&(Y[0].opacity=1,Y[0].type="solid"),u=e}return u},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return e=e.join(""),i?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e=-1===e.indexOf('style="')?e.replace("/>",' style="'+t+'" />'):e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:Di.prototype.html,path:function(e){var t={coordsize:"10 10"};return r(e)?t.d=e:s(e)&&si(t,e),this.createElement("shape").attr(t)},circle:function(e,t,i){var n=this.symbol("circle");return s(e)&&(i=e.r,t=e.y,e=e.x),n.isCircle=!0,n.r=i,n.attr({x:e,y:t})},g:function(e){var t,i;return e&&(i={className:Ut+e,"class":Ut+e}),t=this.createElement(Vt).attr(i)},image:function(e,t,i,n,s){var r=this.createElement("img").attr({src:e});return arguments.length>1&&r.attr({x:t,y:i,width:n,height:s}),r},createElement:function(e){return"rect"===e?this.symbol(e):Di.prototype.createElement.call(this,e)},invertChild:function(e,t){var n=this,s=t.style,r="IMG"===e.tagName&&e.style;p(e,{flip:"x",left:i(s.width)-(r?i(r.top):1),top:i(s.height)-(r?i(r.left):1),rotation:-90}),di(e.childNodes,function(t){n.invertChild(t,e)})},symbols:{arc:function(e,t,i,n,s){var r,a=s.start,o=s.end,l=s.r||i||n,u=s.innerR,c=yt(a),h=bt(a),d=yt(o),p=bt(o);return 0===o-a?["x"]:(r=["wa",e-l,t-l,e+l,t+l,e+l*c,t+l*h,e+l*d,t+l*p],s.open&&!u&&r.push("e",Jt,e,t),r.push("at",e-u,t-u,e+u,t+u,e+u*d,t+u*p,e+u*c,t+u*h,"x","e"),r.isArc=!0,r)},circle:function(e,t,i,n,s){return s&&(i=n=2*s.r),s&&s.isCircle&&(e-=i/2,t-=n/2),["wa",e,t,e+i,t+n,e+i,t+n/2,e+i,t+n/2,"e"]},rect:function(e,t,i,n,s){return Di.prototype.symbols[c(s)&&s.r?"callout":"square"].call(0,e,t,i,n,s)}}};ut.VMLRenderer=Ei=function(){this.init.apply(this,arguments)},Ei.prototype=t(Di.prototype,Ai),F=Ei}Di.prototype.measureSpanWidth=function(e,t){var i,n=ct.createElement("span"),s=ct.createTextNode(e);return n.appendChild(s),p(n,t),this.box.appendChild(n),i=n.offsetWidth,C(n),i};var Pi,Oi;Ot&&(ut.CanVGRenderer=Pi=function(){St="http://www.w3.org/1999/xhtml"},Pi.prototype.symbols={},Oi=function(){function e(){var e,i=t.length;for(e=0;i>e;e++)t[e]();t=[]}var t=[];return{push:function(i,n){0===t.length&&ci(n,e),t.push(i)}}}(),F=Pi),N.prototype={addLabel:function(){var e,i,n=this,s=n.axis,r=s.options,a=s.chart,o=s.categories,u=s.names,h=n.pos,d=r.labels,p=s.tickPositions,m=h===p[0],f=h===p[p.length-1],g=o?ri(o[h],u[h],h):h,v=n.label,_=p.info;s.isDatetimeAxis&&_&&(i=r.dateTimeLabelFormats[_.higherRanks[h]||_.unitName]),n.isFirst=m,n.isLast=f,e=s.labelFormatter.call({axis:s,chart:a,isFirst:m,isLast:f,dateTimeLabelFormat:i,value:s.isLog?D(l(g)):g}),c(v)?v&&v.attr({text:e}):(n.label=v=c(e)&&d.enabled?a.renderer.text(e,0,0,d.useHTML).css(t(d.style)).add(s.labelGroup):null,n.labelLength=v&&v.getBBox().width,n.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(e){var t,i,n,s=this.axis,r=e.x,a=s.chart.chartWidth,o=s.chart.spacing,l=ri(s.labelLeft,o[3]),u=ri(s.labelRight,a-o[1]),c=this.label,h=this.rotation,d={left:0,center:.5,right:1}[s.labelAlign],p=c.getBBox().width,m=s.slotWidth;h?0>h&&l>r-d*p?n=pt(r/yt(h*xt)-l):h>0&&r+d*p>u&&(n=pt((a-r)/yt(h*xt))):(t=r-d*p,i=r+d*p,l>t?(m-=l-t,e.x=l,c.attr({align:"left"})):i>u&&(m-=i-u,e.x=u,c.attr({align:"right"})),(p>m||s.autoRotation&&c.styles.width)&&(n=m)),n&&c.css({width:n,textOverflow:"ellipsis"})},getPosition:function(e,t,i,n){var s=this.axis,r=s.chart,a=n&&r.oldChartHeight||r.chartHeight;return{x:e?s.translate(t+i,null,null,n)+s.transB:s.left+s.offset+(s.opposite?(n&&r.oldChartWidth||r.chartWidth)-s.right-s.left:0),y:e?a-s.bottom+s.offset-(s.opposite?s.height:0):a-s.translate(t+i,null,null,n)-s.transB}},getLabelPosition:function(e,t,i,n,s,r,a,o){var l,u=this.axis,c=u.transA,h=u.reversed,d=u.staggerLines,p=u.tickRotCorr||{x:0,y:0},m=ri(s.y,p.y+(2===u.side?8:-(i.getBBox().height/2)));return e=e+s.x+p.x-(r&&n?r*c*(h?-1:1):0),t=t+m-(r&&!n?r*c*(h?1:-1):0),d&&(l=a/(o||1)%d,t+=l*(u.labelOffset/d)),{x:e,y:pt(t)}},getMarkPath:function(e,t,i,n,s,r){return r.crispLine([Jt,e,t,Xt,e+(s?0:-i),t+(s?i:0)],n)},render:function(e,t,i){var n,s,r,a=this,o=a.axis,l=o.options,u=o.chart,c=u.renderer,h=o.horiz,d=a.type,p=a.label,m=a.pos,f=l.labels,g=a.gridLine,v=d?d+"Grid":"grid",_=d?d+"Tick":"tick",y=l[v+"LineWidth"],b=l[v+"LineColor"],w=l[v+"LineDashStyle"],x=l[_+"Length"],M=l[_+"Width"]||0,T=l[_+"Color"],k=l[_+"Position"],C=a.mark,L=f.step,D=!0,E=o.tickmarkOffset,S=a.getPosition(h,m,E,t),A=S.x,P=S.y,O=h&&A===o.pos+o.len||!h&&P===o.pos?-1:1;i=ri(i,1),this.isActive=!0,y&&(n=o.getPlotLinePath(m+E,y*O,t,!0),g===Y&&(r={stroke:b,"stroke-width":y},w&&(r.dashstyle=w),d||(r.zIndex=1),t&&(r.opacity=0),a.gridLine=g=y?c.path(n).attr(r).add(o.gridGroup):null),!t&&g&&n&&g[a.isNew?"attr":"animate"]({d:n,opacity:i})),M&&x&&("inside"===k&&(x=-x),o.opposite&&(x=-x),s=a.getMarkPath(A,P,x,M*O,h,c),C?C.animate({d:s,opacity:i}):a.mark=c.path(s).attr({stroke:T,"stroke-width":M,opacity:i}).add(o.axisGroup)),p&&!isNaN(A)&&(p.xy=S=a.getLabelPosition(A,P,p,h,f,E,e,L),a.isFirst&&!a.isLast&&!ri(l.showFirstLabel,1)||a.isLast&&!a.isFirst&&!ri(l.showLastLabel,1)?D=!1:!h||o.isRadial||f.step||f.rotation||t||0===i||a.handleOverflow(S),L&&e%L&&(D=!1),D&&!isNaN(S.y)?(S.opacity=i,p[a.isNew?"attr":"animate"](S),a.isNew=!1):p.attr("y",-9999))},destroy:function(){k(this,this.axis)}},ut.PlotLineOrBand=function(e,t){this.axis=e,t&&(this.options=t,this.id=t.id)},ut.PlotLineOrBand.prototype={render:function(){var e,i,n,s,r,a,l=this,u=l.axis,h=u.horiz,d=l.options,p=d.label,m=l.label,f=d.width,g=d.to,v=d.from,_=c(v)&&c(g),y=d.value,b=d.dashStyle,w=l.svgElem,x=[],k=d.color,C=d.zIndex,L=d.events,D={},E=u.chart.renderer;if(u.isLog&&(v=o(v),g=o(g),y=o(y)),f)x=u.getPlotLinePath(y,f),D={stroke:k,"stroke-width":f},b&&(D.dashstyle=b);else{if(!_)return;x=u.getPlotBandPath(v,g,d),k&&(D.fill=k),d.borderWidth&&(D.stroke=d.borderColor,D["stroke-width"]=d.borderWidth)}if(c(C)&&(D.zIndex=C),w)x?w.animate({d:x},null,w.onGetPath):(w.hide(),w.onGetPath=function(){w.show()},m&&(l.label=m=m.destroy()));else if(x&&x.length&&(l.svgElem=w=E.path(x).attr(D).add(),L)){e=function(e){w.on(e,function(t){L[e].apply(l,[t])})};for(i in L)e(i)}return p&&c(p.text)&&x&&x.length&&u.width>0&&u.height>0?(p=t({align:h&&_&&"center",x:h?!_&&4:10,verticalAlign:!h&&_&&"middle",y:h?_?16:10:_?6:-4,rotation:h&&!_&&90},p),m||(D={align:p.textAlign||p.align,rotation:p.rotation},c(C)&&(D.zIndex=C),l.label=m=E.text(p.text,0,0,p.useHTML).attr(D).css(p.style).add()),n=[x[1],x[4],_?x[6]:x[1]],s=[x[2],x[5],_?x[7]:x[2]],r=M(n),a=M(s),m.align(p,!1,{x:r,y:a,width:T(n)-r,height:T(s)-a}),m.show()):m&&m.hide(),l},destroy:function(){u(this.axis.plotLinesAndBands,this),delete this.axis,k(this)}},U={getPlotBandPath:function(e,t){var i=this.getPlotLinePath(t,null,null,!0),n=this.getPlotLinePath(e,null,null,!0);return n&&i&&n.toString()!==i.toString()?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(e){return this.addPlotBandOrLine(e,"plotBands")},addPlotLine:function(e){return this.addPlotBandOrLine(e,"plotLines")},addPlotBandOrLine:function(e,t){var i=new ut.PlotLineOrBand(this,e).render(),n=this.userOptions;return i&&(t&&(n[t]=n[t]||[],n[t].push(e)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(e){for(var t=this.plotLinesAndBands,i=this.options,n=this.userOptions,s=t.length;s--;)t[s].id===e&&t[s].destroy();di([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(t){for(s=t.length;s--;)t[s].id===e&&u(t,t[s])})}};var Ni=ut.Axis=function(){this.init.apply(this,arguments)};Ni.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return ut.numberFormat(this.total,-1)},style:t(xi.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(e,t){var i=t.isX,n=this;n.horiz=e.inverted?!i:i,n.isXAxis=i,n.coll=i?"xAxis":"yAxis",n.opposite=t.opposite,n.side=t.side||(n.horiz?n.opposite?0:2:n.opposite?1:3),n.setOptions(t);var s=this.options,r=s.type,a="datetime"===r;n.labelFormatter=s.labels.formatter||n.defaultLabelFormatter,n.userOptions=t,n.minPixelPadding=0,n.chart=e,n.reversed=s.reversed,n.zoomEnabled=s.zoomEnabled!==!1,n.categories=s.categories||"category"===r,n.names=n.names||[],n.isLog="logarithmic"===r,n.isDatetimeAxis=a,n.isLinked=c(s.linkedTo),n.ticks={},n.labelEdge=[],n.minorTicks={},n.plotLinesAndBands=[],n.alternateBands={},n.len=0,n.minRange=n.userMinRange=s.minRange||s.maxZoom,n.range=s.range,n.offset=s.offset||0,n.stacks={},n.oldStacks={},n.max=null,n.min=null,n.crosshair=ri(s.crosshair,d(e.options.tooltip.crosshairs)[i?0:1],!1);var u,h=n.options.events;-1===hi(n,e.axes)&&(i&&!this.isColorAxis?e.axes.splice(e.xAxis.length,0,n):e.axes.push(n),e[n.coll].push(n)),n.series=n.series||[],e.inverted&&i&&n.reversed===Y&&(n.reversed=!0),n.removePlotBand=n.removePlotBandOrLine,n.removePlotLine=n.removePlotBandOrLine;for(u in h)gi(n,u,h[u]);n.isLog&&(n.val2lin=o,n.lin2val=l)},setOptions:function(e){this.options=t(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],t(j[this.coll],e))},defaultLabelFormatter:function(){var e,t,i=this.axis,n=this.value,s=i.categories,r=this.dateTimeLabelFormat,a=j.lang.numericSymbols,o=a&&a.length,l=i.options.labels.format,u=i.isLog?n:i.tickInterval;if(l)t=y(l,this);else if(s)t=n;else if(r)t=V(r,n);else if(o&&u>=1e3)for(;o--&&t===Y;)e=Math.pow(1e3,o+1),u>=e&&null!==a[o]&&(t=ut.numberFormat(n/e,-1)+a[o]);return t===Y&&(t=_t(n)>=1e4?ut.numberFormat(n,0):ut.numberFormat(n,-1,Y,"")),t},getSeriesExtremes:function(){var e=this,t=e.chart;e.hasVisibleSeries=!1,e.dataMin=e.dataMax=e.ignoreMinPadding=e.ignoreMaxPadding=null,e.buildStacks&&e.buildStacks(),di(e.series,function(i){if(i.visible||!t.options.chart.ignoreHiddenSeries){var n,s,r,a=i.options,o=a.threshold;e.hasVisibleSeries=!0,e.isLog&&0>=o&&(o=null),e.isXAxis?(n=i.xData,n.length&&(e.dataMin=vt(ri(e.dataMin,n[0]),M(n)),e.dataMax=gt(ri(e.dataMax,n[0]),T(n)))):(i.getExtremes(),r=i.dataMax,s=i.dataMin,c(s)&&c(r)&&(e.dataMin=vt(ri(e.dataMin,s),s),e.dataMax=gt(ri(e.dataMax,r),r)),c(o)&&(e.dataMin>=o?(e.dataMin=o,e.ignoreMinPadding=!0):e.dataMax<o&&(e.dataMax=o,e.ignoreMaxPadding=!0)))}})},translate:function(e,t,i,n,s,r){var o,l=this,u=1,c=0,h=n?l.oldTransA:l.transA,d=n?l.oldMin:l.min,p=l.minPixelPadding,m=(l.doPostTranslate||l.isLog&&s)&&l.lin2val;return h||(h=l.transA),i&&(u*=-1,c=l.len),l.reversed&&(u*=-1,c-=u*(l.sector||l.len)),t?(e=e*u+c,e-=p,o=e/h+d,m&&(o=l.lin2val(o))):(m&&(e=l.val2lin(e)),"between"===r&&(r=.5),o=u*(e-d)*h+c+u*p+(a(r)?h*r*l.pointRange:0)),o},toPixels:function(e,t){return this.translate(e,!1,!this.horiz,null,!0)+(t?0:this.pos)},toValue:function(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(e,t,i,n,s){var r,a,o,l,u,c=this,h=c.chart,d=c.left,p=c.top,m=i&&h.oldChartHeight||h.chartHeight,f=i&&h.oldChartWidth||h.chartWidth,g=c.transB,v=function(e,t,i){return(t>e||e>i)&&(n?e=vt(gt(t,e),i):u=!0),e};return s=ri(s,c.translate(e,null,null,i)),r=o=pt(s+g),a=l=pt(m-s-g),isNaN(s)?u=!0:c.horiz?(a=p,l=m-c.bottom,r=o=v(r,d,d+c.width)):(r=d,o=f-c.right,a=l=v(a,p,p+c.height)),u&&!n?null:h.renderer.crispLine([Jt,r,a,Xt,o,l],t||1)},getLinearTickPositions:function(e,t,i){var n,s,r=D(mt(t/e)*e),o=D(ft(i/e)*e),l=[];if(t===i&&a(t))return[t];for(n=r;o>=n&&(l.push(n),n=D(n+e),n!==s);)s=n;return l},getMinorTickPositions:function(){var e,t,i,n=this,s=n.options,r=n.tickPositions,a=n.minorTickInterval,o=[],l=n.min,u=n.max,c=u-l;if(c&&c/a<n.len/3)if(n.isLog)for(i=r.length,t=1;i>t;t++)o=o.concat(n.getLogTickPositions(a,r[t-1],r[t],!0));else if(n.isDatetimeAxis&&"auto"===s.minorTickInterval)o=o.concat(n.getTimeTicks(n.normalizeTimeTickInterval(a),l,u,s.startOfWeek));else for(e=l+(r[0]-l)%a;u>=e;e+=a)o.push(e);return n.trimTicks(o),o},adjustForMinRange:function(){var e,t,i,n,s,r,a,o,l=this,u=l.options,h=l.min,d=l.max,p=l.dataMax-l.dataMin>=l.minRange;if(l.isXAxis&&l.minRange===Y&&!l.isLog&&(c(u.min)||c(u.max)?l.minRange=null:(di(l.series,function(e){for(s=e.xData,r=e.xIncrement?1:s.length-1,i=r;i>0;i--)n=s[i]-s[i-1],(t===Y||t>n)&&(t=n)}),l.minRange=vt(5*t,l.dataMax-l.dataMin))),d-h<l.minRange){var m=l.minRange;e=(m-d+h)/2,a=[h-e,ri(u.min,h-e)],p&&(a[2]=l.dataMin),h=T(a),o=[h+m,ri(u.max,h+m)],p&&(o[2]=l.dataMax),d=M(o),m>d-h&&(a[0]=d-m,a[1]=ri(u.min,d-m),h=T(a))}l.min=h,l.max=d},setAxisTranslation:function(e){var t,i,s=this,r=s.max-s.min,a=s.axisPointRange||0,o=0,l=0,u=s.linkedParent,h=!!s.categories,d=s.transA,p=s.isXAxis;(p||h||a)&&(u?(o=u.minPointOffset,l=u.pointRangePadding):di(s.series,function(e){var i=h?1:p?e.pointRange:s.axisPointRange||0,u=e.options.pointPlacement,d=e.closestPointRange;i>r&&(i=0),a=gt(a,i),s.single||(o=gt(o,n(u)?0:i/2),l=gt(l,"on"===u?0:i)),!e.noSharedTooltip&&c(d)&&(t=c(t)?vt(t,d):d)}),i=s.ordinalSlope&&t?s.ordinalSlope/t:1,s.minPointOffset=o*=i,s.pointRangePadding=l*=i,s.pointRange=vt(a,r),p&&(s.closestPointRange=t)),e&&(s.oldTransA=d),s.translationSlope=s.transA=d=s.len/(r+l||1),s.transB=s.horiz?s.left:s.bottom,s.minPixelPadding=d*o},setTickInterval:function(e){var t,i,n,s=this,r=s.chart,l=s.options,u=s.isLog,h=s.isDatetimeAxis,d=s.isXAxis,p=s.isLinked,m=l.maxPadding,f=l.minPadding,g=l.tickInterval,v=l.tickPixelInterval,_=s.categories;h||_||p||this.getTickAmount(),p?(s.linkedParent=r[s.coll][l.linkedTo],i=s.linkedParent.getExtremes(),s.min=ri(i.min,i.dataMin),s.max=ri(i.max,i.dataMax),l.type!==s.linkedParent.options.type&&L(11,1)):(s.min=ri(s.userMin,l.min,s.dataMin),s.max=ri(s.userMax,l.max,s.dataMax)),u&&(!e&&vt(s.min,ri(s.dataMin,s.min))<=0&&L(10,1),s.min=D(o(s.min)),s.max=D(o(s.max))),s.range&&c(s.max)&&(s.userMin=s.min=gt(s.min,s.max-s.range),s.userMax=s.max,s.range=null),s.beforePadding&&s.beforePadding(),s.adjustForMinRange(),_||s.axisPointRange||s.usePercentage||p||!c(s.min)||!c(s.max)||(t=s.max-s.min,t&&(c(l.min)||c(s.userMin)||!f||!(s.dataMin<0)&&s.ignoreMinPadding||(s.min-=t*f),c(l.max)||c(s.userMax)||!m||!(s.dataMax>0)&&s.ignoreMaxPadding||(s.max+=t*m))),a(l.floor)&&(s.min=gt(s.min,l.floor)),a(l.ceiling)&&(s.max=vt(s.max,l.ceiling)),s.tickInterval=s.min===s.max||void 0===s.min||void 0===s.max?1:p&&!g&&v===s.linkedParent.options.tickPixelInterval?s.linkedParent.tickInterval:ri(g,this.tickAmount?(s.max-s.min)/gt(this.tickAmount-1,1):void 0,_?1:(s.max-s.min)*v/gt(s.len,v)),d&&!e&&di(s.series,function(e){e.processData(s.min!==s.oldMin||s.max!==s.oldMax)}),s.setAxisTranslation(!0),s.beforeSetTickPositions&&s.beforeSetTickPositions(),s.postProcessTickInterval&&(s.tickInterval=s.postProcessTickInterval(s.tickInterval)),s.pointRange&&(s.tickInterval=gt(s.pointRange,s.tickInterval)),n=ri(l.minTickInterval,s.isDatetimeAxis&&s.closestPointRange),!g&&s.tickInterval<n&&(s.tickInterval=n),h||u||g||(s.tickInterval=w(s.tickInterval,null,b(s.tickInterval),ri(l.allowDecimals,!(s.tickInterval>.5&&s.tickInterval<5&&s.max>1e3&&s.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(s.tickInterval=s.unsquish()),this.setTickPositions()},setTickPositions:function(){var e,t,i=this.options,n=i.tickPositions,s=i.tickPositioner,r=i.startOnTick,a=i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===i.minorTickInterval&&this.tickInterval?this.tickInterval/5:i.minorTickInterval,this.tickPositions=e=i.tickPositions&&i.tickPositions.slice(),e||(e=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickPositions=e,s&&(s=s.apply(this,[this.min,this.max]),s&&(this.tickPositions=e=s))),this.isLinked||(this.trimTicks(e,r,a),this.min===this.max&&c(this.min)&&!this.tickAmount&&(t=!0,this.min-=.5,this.max+=.5),this.single=t,n||s||this.adjustTickAmount())},trimTicks:function(e,t,i){var n=e[0],s=e[e.length-1],r=this.minPointOffset||0;t?this.min=n:this.min-r>n&&e.shift(),i?this.max=s:this.max+r<s&&e.pop(),0===e.length&&c(n)&&e.push((s+n)/2)},getTickAmount:function(){var e,t={},i=this.options,n=i.tickAmount,s=i.tickPixelInterval;!c(i.tickInterval)&&this.len<s&&!this.isRadial&&!this.isLog&&i.startOnTick&&i.endOnTick&&(n=2),n||this.chart.options.chart.alignTicks===!1||i.alignTicks===!1||(di(this.chart[this.coll],function(i){var n=i.options,s=i.horiz,r=[s?n.left:n.top,s?n.width:n.height,n.pane].join(",");t[r]?e=!0:t[r]=1}),e&&(n=ft(this.len/s)+1)),4>n&&(this.finalTickAmt=n,n=5),this.tickAmount=n},adjustTickAmount:function(){var e,t,i=this.tickInterval,n=this.tickPositions,s=this.tickAmount,r=this.finalTickAmt,a=n&&n.length;if(s>a){for(;n.length<s;)n.push(D(n[n.length-1]+i));this.transA*=(a-1)/(s-1),this.max=n[n.length-1]}else a>s&&(this.tickInterval*=2,this.setTickPositions());if(c(r)){for(e=t=n.length;e--;)(3===r&&1===e%2||2>=r&&e>0&&t-1>e)&&n.splice(e,1);this.finalTickAmt=Y}},setScale:function(){var e,t,i,n,s=this,r=s.stacks;if(s.oldMin=s.min,s.oldMax=s.max,s.oldAxisLength=s.len,s.setAxisSize(),n=s.len!==s.oldAxisLength,di(s.series,function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(i=!0)}),n||i||s.isLinked||s.forceRedraw||s.userMin!==s.oldUserMin||s.userMax!==s.oldUserMax){if(!s.isXAxis)for(e in r)for(t in r[e])r[e][t].total=null,r[e][t].cum=0;s.forceRedraw=!1,s.getSeriesExtremes(),s.setTickInterval(),s.oldUserMin=s.userMin,s.oldUserMax=s.userMax,s.isDirty||(s.isDirty=n||s.min!==s.oldMin||s.max!==s.oldMax)}else if(!s.isXAxis){s.oldStacks&&(r=s.stacks=s.oldStacks);for(e in r)for(t in r[e])r[e][t].cum=r[e][t].total}},setExtremes:function(e,t,i,n,s){var r=this,a=r.chart;i=ri(i,!0),di(r.series,function(e){delete e.kdTree}),s=si(s,{min:e,max:t}),_i(r,"setExtremes",s,function(){r.userMin=e,r.userMax=t,r.eventArgs=s,r.isDirtyExtremes=!0,i&&a.redraw(n)})},zoom:function(e,t){var i=this.dataMin,n=this.dataMax,s=this.options;return this.allowZoomOutside||(c(i)&&e<=vt(i,ri(s.min,i))&&(e=Y),c(n)&&t>=gt(n,ri(s.max,n))&&(t=Y)),this.displayBtn=e!==Y||t!==Y,this.setExtremes(e,t,!1,Y,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this.chart,t=this.options,i=t.offsetLeft||0,n=t.offsetRight||0,s=this.horiz,r=ri(t.width,e.plotWidth-i+n),a=ri(t.height,e.plotHeight),o=ri(t.top,e.plotTop),l=ri(t.left,e.plotLeft+i),u=/%$/;u.test(a)&&(a=parseFloat(a)/100*e.plotHeight),u.test(o)&&(o=parseFloat(o)/100*e.plotHeight+e.plotTop),this.left=l,this.top=o,this.width=r,this.height=a,this.bottom=e.chartHeight-a-o,this.right=e.chartWidth-r-l,this.len=gt(s?r:a,0),this.pos=s?l:o
},getExtremes:function(){var e=this,t=e.isLog;return{min:t?D(l(e.min)):e.min,max:t?D(l(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,i=t.isLog,n=i?l(t.min):t.min,s=i?l(t.max):t.max;return n>e||null===e?e=n:e>s&&(e=s),t.translate(e,0,1,0,1)},autoLabelAlign:function(e){var t,i=(ri(e,0)-90*this.side+720)%360;return t=i>15&&165>i?"right":i>195&&345>i?"left":"center"},unsquish:function(){var e,t,i,n=this.chart,s=this.ticks,r=this.options.labels,a=this.horiz,o=this.tickInterval,l=o,u=this.len/(((this.categories?1:0)+this.max-this.min)/o),h=r.rotation,d=n.renderer.fontMetrics(r.style.fontSize,s[0]&&s[0].label),p=Number.MAX_VALUE,m=function(e){var t=e/(u||1);return t=t>1?ft(t):1,t*o};return a?(i=c(h)?[h]:u<ri(r.autoRotationLimit,80)&&!r.staggerLines&&!r.step&&r.autoRotation,i&&di(i,function(i){var n;(i===h||i&&i>=-90&&90>=i)&&(t=m(_t(d.h/bt(xt*i))),n=t+_t(i/360),p>n&&(p=n,e=i,l=t))})):l=m(d.h),this.autoRotation=i,this.labelRotation=e,l},renderUnsquish:function(){var e,i,s,r,a=this.chart,o=a.renderer,l=this.tickPositions,u=this.ticks,c=this.options.labels,h=this.horiz,d=a.margin,p=this.slotWidth=h&&!c.step&&!c.rotation&&(this.staggerLines||1)*a.plotWidth/l.length||!h&&(d[3]&&d[3]-a.spacing[3]||.33*a.chartWidth),m=gt(1,pt(p-2*(c.padding||5))),f={},g=o.fontMetrics(c.style.fontSize,u[0]&&u[0].label),v=0;if(n(c.rotation)||(f.rotation=c.rotation),this.autoRotation)di(l,function(e){e=u[e],e&&e.labelLength>v&&(v=e.labelLength)}),v>m&&v>g.h?f.rotation=this.labelRotation:this.labelRotation=0;else if(p)for(e={width:m+$t,textOverflow:"clip"},s=l.length;!h&&s--;)r=l[s],i=u[r].label,i&&("ellipsis"===i.styles.textOverflow&&i.css({textOverflow:"clip"}),i.getBBox().height>this.len/l.length-(g.h-g.f)&&(i.specCss={textOverflow:"ellipsis"}));f.rotation&&(e={width:(v>.5*a.chartHeight?.33*a.chartHeight:a.chartHeight)+$t,textOverflow:"ellipsis"}),this.labelAlign=f.align=c.align||this.autoLabelAlign(this.labelRotation),di(l,function(i){var n=u[i],s=n&&n.label;s&&(e&&s.css(t(e,s.specCss)),delete s.specCss,s.attr(f),n.rotation=f.rotation)}),this.tickRotCorr=o.rotCorr(g.b,this.labelRotation||0,2===this.side)},getOffset:function(){var e,t,i,n,s,r,a=this,o=a.chart,l=o.renderer,u=a.options,h=a.tickPositions,d=a.ticks,p=a.horiz,m=a.side,f=o.inverted?[1,0,3,2][m]:m,g=0,v=0,_=u.title,y=u.labels,b=0,w=o.axisOffset,x=o.clipOffset,M=[-1,1,1,-1][m];if(a.hasData=e=a.hasVisibleSeries||c(a.min)&&c(a.max)&&!!h,a.showAxis=t=e||ri(u.showEmpty,!0),a.staggerLines=a.horiz&&y.staggerLines,a.axisGroup||(a.gridGroup=l.g("grid").attr({zIndex:u.gridZIndex||1}).add(),a.axisGroup=l.g("axis").attr({zIndex:u.zIndex||2}).add(),a.labelGroup=l.g("axis-labels").attr({zIndex:y.zIndex||7}).addClass(Ut+a.coll.toLowerCase()+"-labels").add()),e||a.isLinked)di(h,function(e){d[e]?d[e].addLabel():d[e]=new N(a,e)}),a.renderUnsquish(),di(h,function(e){(0===m||2===m||{1:"left",3:"right"}[m]===a.labelAlign)&&(b=gt(d[e].getLabelSize(),b))}),a.staggerLines&&(b*=a.staggerLines,a.labelOffset=b);else for(s in d)d[s].destroy(),delete d[s];_&&_.text&&_.enabled!==!1&&(a.axisTitle||(a.axisTitle=l.text(_.text,0,0,_.useHTML).attr({zIndex:7,rotation:_.rotation||0,align:_.textAlign||{low:"left",middle:"center",high:"right"}[_.align]}).addClass(Ut+this.coll.toLowerCase()+"-title").css(_.style).add(a.axisGroup),a.axisTitle.isNew=!0),t&&(g=a.axisTitle.getBBox()[p?"height":"width"],i=_.offset,v=c(i)?0:ri(_.margin,p?5:10)),a.axisTitle[t?"show":"hide"]()),a.offset=M*ri(u.offset,w[m]),a.tickRotCorr=a.tickRotCorr||{x:0,y:0},r=2===m?a.tickRotCorr.y:0,n=b+v+(b&&M*(p?ri(y.y,a.tickRotCorr.y+8):y.x)-r),a.axisTitleMargin=ri(i,n),w[m]=gt(w[m],a.axisTitleMargin+g+M*a.offset,n),x[f]=gt(x[f],2*mt(u.lineWidth/2))},getLinePath:function(e){var t=this.chart,i=this.opposite,n=this.offset,s=this.horiz,r=this.left+(i?this.width:0)+n,a=t.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(e*=-1),t.renderer.crispLine([Jt,s?this.left:r,s?a:this.top,Xt,s?t.chartWidth-this.right:r,s?a:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,s=this.len,r=this.options.title,a=e?t:n,o=this.opposite,l=this.offset,u=i(r.style.fontSize||12),c={low:a+(e?0:s),middle:a+s/2,high:a+(e?s:0)}[r.align],h=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(2===this.side?u:0);return{x:e?c:h+(o?this.width:0)+l+(r.x||0),y:e?h-(o?this.height:0)+l:c+(r.y||0)}},render:function(){var e,t,i,n=this,s=n.chart,r=s.renderer,a=n.options,o=n.isLog,u=n.isLinked,h=n.tickPositions,d=n.axisTitle,p=n.ticks,m=n.minorTicks,f=n.alternateBands,g=a.stackLabels,v=a.alternateGridColor,_=n.tickmarkOffset,y=a.lineWidth,b=s.hasRendered,w=b&&c(n.oldMin)&&!isNaN(n.oldMin),x=n.hasData,M=n.showAxis;n.labelEdge.length=0,n.overlap=!1,di([p,m,f],function(e){var t;for(t in e)e[t].isActive=!1}),(x||u)&&(n.minorTickInterval&&!n.categories&&di(n.getMinorTickPositions(),function(e){m[e]||(m[e]=new N(n,e,"minor")),w&&m[e].isNew&&m[e].render(null,!0),m[e].render(null,!1,1)}),h.length&&(di(h,function(e,t){(!u||e>=n.min&&e<=n.max)&&(p[e]||(p[e]=new N(n,e)),w&&p[e].isNew&&p[e].render(t,!0,.1),p[e].render(t))}),_&&(0===n.min||n.single)&&(p[-1]||(p[-1]=new N(n,-1,null,!0)),p[-1].render(-1))),v&&di(h,function(e,s){0===s%2&&e<n.max&&(f[e]||(f[e]=new ut.PlotLineOrBand(n)),t=e+_,i=h[s+1]!==Y?h[s+1]+_:n.max,f[e].options={from:o?l(t):t,to:o?l(i):i,color:v},f[e].render(),f[e].isActive=!0)}),n._addedPlotLB||(di((a.plotLines||[]).concat(a.plotBands||[]),function(e){n.addPlotBandOrLine(e)}),n._addedPlotLB=!0)),di([p,m,f],function(e){var t,i,n=[],r=H?H.duration||500:0,a=function(){for(i=n.length;i--;)e[n[i]]&&!e[n[i]].isActive&&(e[n[i]].destroy(),delete e[n[i]])};for(t in e)e[t].isActive||(e[t].render(t,!1,0),e[t].isActive=!1,n.push(t));e!==f&&s.hasRendered&&r?r&&setTimeout(a,r):a()}),y&&(e=n.getLinePath(y),n.axisLine?n.axisLine.animate({d:e}):n.axisLine=r.path(e).attr({stroke:a.lineColor,"stroke-width":y,zIndex:7}).add(n.axisGroup),n.axisLine[M?"show":"hide"]()),d&&M&&(d[d.isNew?"attr":"animate"](n.getTitlePosition()),d.isNew=!1),g&&g.enabled&&n.renderStackTotals(),n.isDirty=!1},redraw:function(){this.render(),di(this.plotLinesAndBands,function(e){e.render()}),di(this.series,function(e){e.isDirty=!0})},destroy:function(e){var t,i,n=this,s=n.stacks,r=n.plotLinesAndBands;e||vi(n);for(t in s)k(s[t]),s[t]=null;for(di([n.ticks,n.minorTicks,n.alternateBands],function(e){k(e)}),i=r.length;i--;)r[i].destroy();di(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],function(e){n[e]&&(n[e]=n[e].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(e,t){var i,n,s,r,a=this.crosshair,o=a.animation;if(this.crosshair&&(c(t)||!ri(this.crosshair.snap,!0))!==!1){if(ri(a.snap,!0)?c(t)&&(n=this.isXAxis?t.plotX:this.len-t.plotY):n=this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?t.x:ri(t.stackY,t.y))||null:this.getPlotLinePath(null,null,null,null,n)||null,null===i)return this.hideCrosshair(),void 0;this.cross?this.cross.attr({visibility:Wt})[o?"animate":"attr"]({d:i},o):(r=this.categories&&!this.isRadial,s={"stroke-width":a.width||(r?this.transA:1),stroke:a.color||(r?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:a.zIndex||2},a.dashStyle&&(s.dashstyle=a.dashStyle),this.cross=this.chart.renderer.path(i).attr(s).add())}else this.hideCrosshair()},hideCrosshair:function(){this.cross&&this.cross.hide()}},si(Ni.prototype,U),Ni.prototype.getTimeTicks=function(e,t,i,n){var s,r,a=[],o={},l=j.global.useUTC,u=new W(t-v(t)),h=e.unitRange,d=e.count;if(c(t)){u[it](h>=B.second?0:d*mt(u.getMilliseconds()/d)),h>=B.second&&u[nt](h>=B.minute?0:d*mt(u.getSeconds()/d)),h>=B.minute&&u[st](h>=B.hour?0:d*mt(u[X]()/d)),h>=B.hour&&u[rt](h>=B.day?0:d*mt(u[Z]()/d)),h>=B.day&&u[at](h>=B.month?1:d*mt(u[Q]()/d)),h>=B.month&&(u[ot](h>=B.year?0:d*mt(u[et]()/d)),r=u[tt]()),h>=B.year&&(r-=r%d,u[lt](r)),h===B.week&&u[at](u[Q]()-u[K]()+ri(n,1)),s=1,(G||J)&&(u=u.getTime(),u=new W(u+v(u))),r=u[tt]();for(var p=u.getTime(),m=u[et](),f=u[Q](),g=(B.day+(l?v(u):1e3*60*u.getTimezoneOffset()))%B.day;i>p;)a.push(p),h===B.year?p=$(r+s*d,0):h===B.month?p=$(r,m+s*d):l||h!==B.day&&h!==B.week?p+=h*d:p=$(r,m,f+s*d*(h===B.day?1:7)),s++;a.push(p),di(pi(a,function(e){return h<=B.hour&&e%B.day===g}),function(e){o[e]="day"})}return a.info=si(e,{higherRanks:o,totalRange:h*d}),a},Ni.prototype.normalizeTimeTickInterval=function(e,t){var i,n,s=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=s[s.length-1],a=B[r[0]],o=r[1];for(n=0;n<s.length;n++)if(r=s[n],a=B[r[0]],o=r[1],s[n+1]){var l=(a*o[o.length-1]+B[s[n+1][0]])/2;if(l>=e)break}return a===B.year&&5*a>e&&(o=[1,2,5]),i=w(e/a,o,"year"===r[0]?gt(b(e/a),1):1),{unitRange:a,count:i,unitName:r[0]}},Ni.prototype.getLogTickPositions=function(e,t,i,n){var s=this,r=s.options,a=s.len,u=[];if(n||(s._minorAutoInterval=null),e>=.5)e=pt(e),u=s.getLinearTickPositions(e,t,i);else if(e>=.08){var c,h,d,p,m,f,g,v=mt(t);for(c=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],h=v;i+1>h&&!g;h++)for(p=c.length,d=0;p>d&&!g;d++)m=o(l(h)*c[d]),m>t&&(!n||i>=f)&&f!==Y&&u.push(f),f>i&&(g=!0),f=m}else{var _=l(t),y=l(i),x=r[n?"minorTickInterval":"tickInterval"],M="auto"===x?null:x,T=r.tickPixelInterval/(n?5:1),k=n?a/s.tickPositions.length:a;e=ri(M,s._minorAutoInterval,(y-_)*T/(k||1)),e=w(e,null,b(e)),u=fi(s.getLinearTickPositions(e,_,y),o),n||(s._minorAutoInterval=e/5)}return n||(s.tickInterval=e),u};var Ii=ut.Tooltip=function(){this.init.apply(this,arguments)};Ii.prototype={init:function(e,t){var n=t.borderWidth,s=t.style,r=i(s.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape||"callout",null,null,t.useHTML,null,"tooltip").attr({padding:r,fill:t.backgroundColor,"stroke-width":n,r:t.borderRadius,zIndex:8}).css(s).css({padding:0}).add().attr({y:-9999}),Ot||this.label.shadow(t.shadow),this.shared=t.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,t,i,n){var s=this,r=s.now,a=s.options.animation!==!1&&!s.isHidden&&(_t(e-r.x)>1||_t(t-r.y)>1),o=s.followPointer||s.len>1;si(r,{x:a?(2*r.x+e)/3:e,y:a?(r.y+t)/2:t,anchorX:o?Y:a?(2*r.anchorX+i)/3:i,anchorY:o?Y:a?(r.anchorY+n)/2:n}),s.label.attr(r),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(e,t,i,n)},32))},hide:function(e){var t,i=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){i.label.fadeOut(),i.isHidden=!0},ri(e,this.options.hideDelay,500)),t&&di(t,function(e){e.setState()}),this.chart.hoverPoints=null,this.chart.hoverSeries=null)},getAnchor:function(e,t){var i,n,s,r=this.chart,a=r.inverted,o=r.plotTop,l=r.plotLeft,u=0,c=0;return e=d(e),i=e[0].tooltipPos,this.followPointer&&t&&(t.chartX===Y&&(t=r.pointer.normalize(t)),i=[t.chartX-r.plotLeft,t.chartY-o]),i||(di(e,function(e){n=e.series.yAxis,s=e.series.xAxis,u+=e.plotX+(!a&&s?s.left-l:0),c+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!a&&n?n.top-o:0)}),u/=e.length,c/=e.length,i=[a?r.plotWidth-c:u,this.shared&&!a&&e.length>1&&t?t.chartY-o:a?r.plotHeight-u:c]),fi(i,pt)},getPosition:function(e,t,i){var n,s=this.chart,r=this.distance,a={},o=i.h,l=["y",s.chartHeight,t,i.plotY+s.plotTop],u=["x",s.chartWidth,e,i.plotX+s.plotLeft],c=ri(i.ttBelow,s.inverted&&!i.negative||!s.inverted&&i.negative),h=function(e,t,i,n){var s=n-r>i,l=t>n+r+i,u=n-r-i,h=n+r;if(c&&l)a[e]=h;else if(!c&&s)a[e]=u;else if(s)a[e]=0>u-o?u:u-o;else{if(!l)return!1;a[e]=h+o+i>t?h:h+o}},d=function(e,t,i,n){return r>n||n>t-r?!1:(a[e]=i/2>n?1:n>t-i/2?t-i-2:n-i/2,void 0)},p=function(e){var t=l;l=u,u=t,n=e},m=function(){h.apply(0,l)!==!1?d.apply(0,u)!==!1||n||(p(!0),m()):n?a.x=a.y=0:(p(!0),m())};return(s.inverted||this.len>1)&&p(),m(),a},defaultFormatter:function(e){var t,i=this.points||d(this);return t=[e.tooltipFooterHeaderFormatter(i[0])],t=t.concat(e.bodyFormatter(i)),t.push(e.tooltipFooterHeaderFormatter(i[0],!0)),t.join("")},refresh:function(e,t){var i,n,s,r,a,o,l=this,u=l.chart,c=l.label,h=l.options,p={},m=[],f=h.formatter||l.defaultFormatter,g=u.hoverPoints,v=l.shared;clearTimeout(this.hideTimer),l.followPointer=d(e)[0].series.tooltipOptions.followPointer,s=l.getAnchor(e,t),i=s[0],n=s[1],!v||e.series&&e.series.noSharedTooltip?p=e.getLabelConfig():(u.hoverPoints=e,g&&di(g,function(e){e.setState()}),di(e,function(e){e.setState(Qt),m.push(e.getLabelConfig())}),p={x:e[0].category,y:e[0].y},p.points=m,this.len=m.length,e=e[0]),r=f.call(p,l),o=e.series,this.distance=ri(o.tooltipOptions.distance,16),r===!1?this.hide():(l.isHidden&&(wi(c),c.attr("opacity",1).show()),c.attr({text:r}),a=h.borderColor||e.color||o.color||"#606060",c.attr({stroke:a}),l.updatePosition({plotX:i,plotY:n,negative:e.negative,ttBelow:e.ttBelow,h:e.shapeArgs&&e.shapeArgs.height||0}),this.isHidden=!1),_i(u,"tooltipRefresh",{text:r,x:i+u.plotLeft,y:n+u.plotTop,borderColor:a})},updatePosition:function(e){var t=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,e);this.move(pt(n.x),pt(n.y),e.plotX+t.plotLeft,e.plotY+t.plotTop)},getXDateFormat:function(e,t,i){var n,s,r,a,o=t.dateTimeLabelFormats,l=i&&i.closestPointRange,u="01-01 00:00:00.000",c={millisecond:15,second:12,minute:9,hour:6,day:3};if(l){r=V("%m-%d %H:%M:%S.%L",e.x);for(s in B){if(l===B.week&&+V("%w",e.x)===i.options.startOfWeek&&r.substr(6)===u.substr(6)){s="week";break}if(B[s]>l){s=a;break}if(c[s]&&r.substr(c[s])!==u.substr(c[s]))break;"week"!==s&&(a=s)}s&&(n=o[s])}else n=o.day;return n||o.year},tooltipFooterHeaderFormatter:function(e,t){var i=t?"footer":"header",n=e.series,s=n.tooltipOptions,r=s.xDateFormat,o=n.xAxis,l=o&&"datetime"===o.options.type&&a(e.key),u=s[i+"Format"];return l&&!r&&(r=this.getXDateFormat(e,s,o)),l&&r&&(u=u.replace("{point.key}","{point.key:"+r+"}")),y(u,{point:e,series:n})},bodyFormatter:function(e){return fi(e,function(e){var t=e.series.tooltipOptions;return(t.pointFormatter||e.point.tooltipFormatter).call(e.point,t.pointFormat)})}};var Yi;z=ct.documentElement.ontouchstart!==Y;var Fi=ut.Pointer=function(e,t){this.init(e,t)};if(Fi.prototype={init:function(e,t){var i,n,s=t.chart,r=s.events,a=Ot?"":s.zoomType,o=e.inverted;this.options=t,this.chart=e,this.zoomX=i=/x/.test(a),this.zoomY=n=/y/.test(a),this.zoomHor=i&&!o||n&&o,this.zoomVert=n&&!o||i&&o,this.hasZoom=i||n,this.runChartClick=r&&!!r.click,this.pinchDown=[],this.lastValidTouch={},ut.Tooltip&&t.tooltip.enabled&&(e.tooltip=new Ii(e,t.tooltip),this.followTouchMove=ri(t.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(e,t){var i,n,s;return e=e||window.event,e=yi(e),e.target||(e.target=e.srcElement),s=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,t||(this.chartPosition=t=mi(this.chart.container)),s.pageX===Y?(i=gt(e.x,e.clientX-t.left),n=e.y):(i=s.pageX-t.left,n=s.pageY-t.top),si(e,{chartX:pt(i),chartY:pt(n)})},getCoordinates:function(e){var t={xAxis:[],yAxis:[]};return di(this.chart.axes,function(i){t[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(e[i.horiz?"chartX":"chartY"])})}),t},runPointActions:function(e){var t,i,n,s,r,a,o=this,l=o.chart,u=l.series,h=l.tooltip,d=h?h.shared:!1,p=l.hoverPoint,m=l.hoverSeries,f=l.chartWidth,g=l.chartWidth,v=[];if(!d&&!m)for(i=0;i<u.length;i++)(u[i].directTouch||!u[i].options.stickyTracking)&&(u=[]);if(!d&&m&&m.directTouch&&p?r=p:(di(u,function(t){s=t.noSharedTooltip&&d,t.visible&&!s&&ri(t.options.enableMouseTracking,!0)&&(a=t.searchPoint(e),a&&v.push(a))}),di(v,function(e){e&&c(e.plotX)&&c(e.plotY)&&(e.dist.distX<f||(e.dist.distX===f||e.series.kdDimensions>1)&&e.dist.distR<g)&&(f=e.dist.distX,g=e.dist.distR,r=e)})),r&&(r!==p||h&&h.isHidden))if(d&&!r.series.noSharedTooltip){for(i=v.length;i--;)(v[i].clientX!==r.clientX||v[i].series.noSharedTooltip)&&v.splice(i,1);v.length&&h&&h.refresh(v,e),di(v,function(t){t!==r&&t.onMouseOver(e)}),(m&&m.directTouch&&p||r).onMouseOver(e)}else h&&h.refresh(r,e),r.onMouseOver(e);else t=m&&m.tooltipOptions.followPointer,h&&t&&!h.isHidden&&(n=h.getAnchor([{}],e),h.updatePosition({plotX:n[0],plotY:n[1]}));h&&!o._onDocumentMouseMove&&(o._onDocumentMouseMove=function(e){Ft[Yi]&&Ft[Yi].pointer.onDocumentMouseMove(e)},gi(ct,"mousemove",o._onDocumentMouseMove)),di(l.axes,function(t){t.drawCrosshair(e,ri(r,p))})},reset:function(e,t){var i=this,n=i.chart,s=n.hoverSeries,r=n.hoverPoint,a=n.tooltip,o=a&&a.shared?n.hoverPoints:r;e=e&&a&&o,e&&d(o)[0].plotX===Y&&(e=!1),e?(a.refresh(o),r&&(r.setState(r.state,!0),di(n.axes,function(t){ri(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,e):t.hideCrosshair()}))):(r&&r.onMouseOut(),s&&s.onMouseOut(),a&&a.hide(t),i._onDocumentMouseMove&&(vi(ct,"mousemove",i._onDocumentMouseMove),i._onDocumentMouseMove=null),di(n.axes,function(e){e.hideCrosshair()}),i.hoverX=null)},scaleGroups:function(e,t){var i,n=this.chart;di(n.series,function(s){i=e||s.getPlotBox(),s.xAxis&&s.xAxis.zoomEnabled&&(s.group.attr(i),s.markerGroup&&(s.markerGroup.attr(i),s.markerGroup.clip(t?n.clipRect:null)),s.dataLabelsGroup&&s.dataLabelsGroup.attr(i))}),n.clipRect.attr(t||n.clipBox)},dragStart:function(e){var t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=this.mouseDownX=e.chartX,t.mouseDownY=this.mouseDownY=e.chartY},drag:function(e){var t,i,n=this.chart,s=n.options.chart,r=e.chartX,a=e.chartY,o=this.zoomHor,l=this.zoomVert,u=n.plotLeft,c=n.plotTop,h=n.plotWidth,d=n.plotHeight,p=this.mouseDownX,m=this.mouseDownY,f=s.panKey&&e[s.panKey+"Key"];u>r?r=u:r>u+h&&(r=u+h),c>a?a=c:a>c+d&&(a=c+d),this.hasDragged=Math.sqrt(Math.pow(p-r,2)+Math.pow(m-a,2)),this.hasDragged>10&&(t=n.isInsidePlot(p-u,m-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&t&&!f&&(this.selectionMarker||(this.selectionMarker=n.renderer.rect(u,c,o?1:h,l?1:d,0).attr({fill:s.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),this.selectionMarker&&o&&(i=r-p,this.selectionMarker.attr({width:_t(i),x:(i>0?0:i)+p})),this.selectionMarker&&l&&(i=a-m,this.selectionMarker.attr({height:_t(i),y:(i>0?0:i)+m})),t&&!this.selectionMarker&&s.panning&&n.pan(e,s.panning))},drop:function(e){var t=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var s,r={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},a=this.selectionMarker,o=a.attr?a.attr("x"):a.x,l=a.attr?a.attr("y"):a.y,u=a.attr?a.attr("width"):a.width,h=a.attr?a.attr("height"):a.height;(this.hasDragged||n)&&(di(i.axes,function(i){if(i.zoomEnabled&&c(i.min)&&(n||t[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var a=i.horiz,d="touchend"===e.type?i.minPixelPadding:0,p=i.toValue((a?o:l)+d),m=i.toValue((a?o+u:l+h)-d);r[i.coll].push({axis:i,min:vt(p,m),max:gt(p,m)}),s=!0}}),s&&_i(i,"selection",r,function(e){i.zoom(si(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(p(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(e){e=this.normalize(e),e.preventDefault&&e.preventDefault(),this.dragStart(e)},onDocumentMouseUp:function(e){Ft[Yi]&&Ft[Yi].pointer.drop(e)},onDocumentMouseMove:function(e){var t=this.chart,i=this.chartPosition;e=this.normalize(e,i),!i||this.inClass(e.target,"highcharts-tracker")||t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||this.reset()},onContainerMouseLeave:function(){var e=Ft[Yi];e&&(e.pointer.reset(),e.pointer.chartPosition=null)},onContainerMouseMove:function(e){var t=this.chart;Yi=t.index,e=this.normalize(e),e.returnValue=!1,"mousedown"===t.mouseIsDown&&this.drag(e),!this.inClass(e.target,"highcharts-tracker")&&!t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)||t.openMenu||this.runPointActions(e)},inClass:function(e,t){for(var i;e;){if(i=h(e,"class")){if(-1!==i.indexOf(t))return!0;if(-1!==i.indexOf(Ut+"container"))return!1}e=e.parentNode}},onTrackerMouseOut:function(e){var t=this.chart.hoverSeries,i=e.relatedTarget||e.toElement,n=i&&i.point&&i.point.series;!t||t.options.stickyTracking||this.inClass(i,Ut+"tooltip")||n===t||t.onMouseOut()},onContainerClick:function(e){var t=this.chart,i=t.hoverPoint,n=t.plotLeft,s=t.plotTop;e=this.normalize(e),e.originalEvent=e,e.cancelBubble=!0,t.cancelClick||(i&&this.inClass(e.target,Ut+"tracker")?(_i(i.series,"click",si(e,{point:i})),t.hoverPoint&&i.firePointEvent("click",e)):(si(e,this.getCoordinates(e)),t.isInsidePlot(e.chartX-n,e.chartY-s)&&_i(t,"click",e)))},setDOMEvents:function(){var e=this,t=e.chart.container;t.onmousedown=function(t){e.onContainerMouseDown(t)},t.onmousemove=function(t){e.onContainerMouseMove(t)},t.onclick=function(t){e.onContainerClick(t)},gi(t,"mouseleave",e.onContainerMouseLeave),1===zt&&gi(ct,"mouseup",e.onDocumentMouseUp),z&&(t.ontouchstart=function(t){e.onContainerTouchStart(t)},t.ontouchmove=function(t){e.onContainerTouchMove(t)},1===zt&&gi(ct,"touchend",e.onDocumentTouchEnd))},destroy:function(){var e;vi(this.chart.container,"mouseleave",this.onContainerMouseLeave),zt||(vi(ct,"mouseup",this.onDocumentMouseUp),vi(ct,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(e in this)this[e]=null}},si(ut.Pointer.prototype,{pinchTranslate:function(e,t,i,n,s,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,e,t,i,n,s,r),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,e,t,i,n,s,r)},pinchTranslateDirection:function(e,t,i,n,s,r,a,o){var l,u,c,h,d,p,m=this.chart,f=e?"x":"y",g=e?"X":"Y",v="chart"+g,_=e?"width":"height",y=m["plot"+(e?"Left":"Top")],b=o||1,w=m.inverted,x=m.bounds[e?"h":"v"],M=1===t.length,T=t[0][v],k=i[0][v],C=!M&&t[1][v],L=!M&&i[1][v],D=function(){!M&&_t(T-C)>20&&(b=o||_t(k-L)/_t(T-C)),c=(y-k)/b+T,l=m["plot"+(e?"Width":"Height")]/b};D(),u=c,u<x.min?(u=x.min,h=!0):u+l>x.max&&(u=x.max-l,h=!0),h?(k-=.8*(k-a[f][0]),M||(L-=.8*(L-a[f][1])),D()):a[f]=[k,L],w||(r[f]=c-y,r[_]=l),p=w?e?"scaleY":"scaleX":"scale"+g,d=w?1/b:b,s[_]=l,s[f]=u,n[p]=b,n["translate"+g]=d*y+(k-d*T)},pinch:function(e){var t=this,i=t.chart,n=t.pinchDown,s=e.touches,r=s.length,a=t.lastValidTouch,o=t.hasZoom,l=t.selectionMarker,u={},c=1===r&&(t.inClass(e.target,Ut+"tracker")&&i.runTrackerClick||t.runChartClick),h={};o&&!c&&e.preventDefault(),fi(s,function(e){return t.normalize(e)}),"touchstart"===e.type?(di(s,function(e,t){n[t]={chartX:e.chartX,chartY:e.chartY}}),a.x=[n[0].chartX,n[1]&&n[1].chartX],a.y=[n[0].chartY,n[1]&&n[1].chartY],di(i.axes,function(e){if(e.zoomEnabled){var t=i.bounds[e.horiz?"h":"v"],n=e.minPixelPadding,s=e.toPixels(ri(e.options.min,e.dataMin)),r=e.toPixels(ri(e.options.max,e.dataMax)),a=vt(s,r),o=gt(s,r);t.min=vt(e.pos,a-n),t.max=gt(e.pos+e.len,o+n)}}),t.res=!0):n.length&&(l||(t.selectionMarker=l=si({destroy:Yt},i.plotBox)),t.pinchTranslate(n,s,u,l,h,a),t.hasPinched=o,t.scaleGroups(u,h),!o&&t.followTouchMove&&1===r?this.runPointActions(t.normalize(e)):t.res&&(t.res=!1,this.reset(!1,0)))},onContainerTouchStart:function(e){var t=this.chart;Yi=t.index,1===e.touches.length?(e=this.normalize(e),t.isInsidePlot(e.chartX-t.plotLeft,e.chartY-t.plotTop)&&!t.openMenu?(this.runPointActions(e),this.pinch(e)):this.reset()):2===e.touches.length&&this.pinch(e)},onContainerTouchMove:function(e){(1===e.touches.length||2===e.touches.length)&&this.pinch(e)},onDocumentTouchEnd:function(e){Ft[Yi]&&Ft[Yi].pointer.drop(e)}}),ht.PointerEvent||ht.MSPointerEvent){var zi={},Ri=!!ht.PointerEvent,ji=function(){var e,t=[];t.item=function(e){return this[e]};for(e in zi)zi.hasOwnProperty(e)&&t.push({pageX:zi[e].pageX,pageY:zi[e].pageY,target:zi[e].target});return t},Vi=function(e,t,i,n){var s;e=e.originalEvent||e,"touch"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_TOUCH||!Ft[Yi]||(n(e),s=Ft[Yi].pointer,s[t]({type:i,target:e.currentTarget,preventDefault:Yt,touches:ji()}))};si(Fi.prototype,{onContainerPointerDown:function(e){Vi(e,"onContainerTouchStart","touchstart",function(e){zi[e.pointerId]={pageX:e.pageX,pageY:e.pageY,target:e.currentTarget}})},onContainerPointerMove:function(e){Vi(e,"onContainerTouchMove","touchmove",function(e){zi[e.pointerId]={pageX:e.pageX,pageY:e.pageY},zi[e.pointerId].target||(zi[e.pointerId].target=e.currentTarget)})},onDocumentPointerUp:function(e){Vi(e,"onDocumentTouchEnd","touchend",function(e){delete zi[e.pointerId]})},batchMSEvents:function(e){e(this.chart.container,Ri?"pointerdown":"MSPointerDown",this.onContainerPointerDown),e(this.chart.container,Ri?"pointermove":"MSPointerMove",this.onContainerPointerMove),e(ct,Ri?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),ai(Fi.prototype,"init",function(e,t,i){e.call(this,t,i),this.hasZoom&&p(t.container,{"-ms-touch-action":Gt,"touch-action":Gt})}),ai(Fi.prototype,"setDOMEvents",function(e){e.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(gi)}),ai(Fi.prototype,"destroy",function(e){this.batchMSEvents(vi),e.call(this)})}var Hi=ut.Legend=function(e,t){this.init(e,t)};Hi.prototype={init:function(e,i){var n,s=this,r=i.itemStyle,a=i.itemMarginTop||0;this.options=i,i.enabled&&(s.itemStyle=r,s.itemHiddenStyle=t(r,i.itemHiddenStyle),s.itemMarginTop=a,s.padding=n=ri(i.padding,8),s.initialItemX=n,s.initialItemY=n-5,s.maxItemWidth=0,s.chart=e,s.itemHeight=0,s.symbolWidth=ri(i.symbolWidth,16),s.pages=[],s.render(),gi(s.chart,"endResize",function(){s.positionCheckboxes()}))},colorizeItem:function(e,t){var i,n,s=this,r=s.options,a=e.legendItem,o=e.legendLine,l=e.legendSymbol,u=s.itemHiddenStyle.color,c=t?r.itemStyle.color:u,h=t?e.legendColor||e.color||"#CCC":u,d=e.options&&e.options.marker,p={fill:h};if(a&&a.css({fill:c,color:c}),o&&o.attr({stroke:h}),l){if(d&&l.isMarker){p.stroke=h,d=e.convertAttribs(d);for(i in d)n=d[i],n!==Y&&(p[i]=n)}l.attr(p)}},positionItem:function(e){var t=this,i=t.options,n=i.symbolPadding,s=!i.rtl,r=e._legendItemPos,a=r[0],o=r[1],l=e.checkbox;e.legendGroup&&e.legendGroup.translate(s?a:t.legendWidth-a-2*n-4,o),l&&(l.x=a,l.y=o)},destroyItem:function(e){var t=e.checkbox;di(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&(e[t]=e[t].destroy())}),t&&C(e.checkbox)},clearItems:function(){var e=this;di(e.getAllItems(),function(t){e.destroyItem(t)})},destroy:function(){var e=this,t=e.group,i=e.box;i&&(e.box=i.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(t=i.translateY,di(this.allItems,function(s){var r,a=s.checkbox;a&&(r=t+a.y+(e||0)+3,p(a,{left:i.translateX+s.checkboxOffset+a.x-20+$t,top:r+$t,display:r>t-6&&t+n-6>r?"":Gt}))}))},renderTitle:function(){var e,t=this.options,i=this.padding,n=t.title,s=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),e=this.title.getBBox(),s=e.height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:s})),this.titleHeight=s},renderItem:function(e){var i,n,s,r=this,a=r.chart,o=a.renderer,l=r.options,u="horizontal"===l.layout,c=r.symbolWidth,h=l.symbolPadding,d=r.itemStyle,p=r.itemHiddenStyle,m=r.padding,f=u?ri(l.itemDistance,20):0,g=!l.rtl,v=l.width,_=l.itemMarginBottom||0,b=r.itemMarginTop,w=r.initialItemX,x=e.legendItem,M=e.series&&e.series.drawLegendSymbol?e.series:e,T=M.options,k=r.createCheckboxForItem&&T&&T.showCheckbox,C=l.useHTML;x||(e.legendGroup=o.g("legend-item").attr({zIndex:1}).add(r.scrollGroup),e.legendItem=x=o.text(l.labelFormat?y(l.labelFormat,e):l.labelFormatter.call(e),g?c+h:-h,r.baseline||0,C).css(t(e.visible?d:p)).attr({align:g?"left":"right",zIndex:2}).add(e.legendGroup),r.baseline||(r.fontMetrics=o.fontMetrics(d.fontSize,x),r.baseline=r.fontMetrics.f+3+b,x.attr("y",r.baseline)),M.drawLegendSymbol(r,e),r.setItemEvents&&r.setItemEvents(e,x,C,d,p),r.colorizeItem(e,e.visible),k&&r.createCheckboxForItem(e)),n=x.getBBox(),s=e.checkboxOffset=l.itemWidth||e.legendItemWidth||c+h+n.width+f+(k?20:0),r.itemHeight=i=pt(e.legendItemHeight||n.height),u&&r.itemX-w+s>(v||a.chartWidth-2*m-w-l.x)&&(r.itemX=w,r.itemY+=b+r.lastLineHeight+_,r.lastLineHeight=0),r.maxItemWidth=gt(r.maxItemWidth,s),r.lastItemY=b+r.itemY+_,r.lastLineHeight=gt(i,r.lastLineHeight),e._legendItemPos=[r.itemX,r.itemY],u?r.itemX+=s:(r.itemY+=b+i+_,r.lastLineHeight=i),r.offsetWidth=v||gt((u?r.itemX-w-f:s)+m,r.offsetWidth)},getAllItems:function(){var e=[];return di(this.chart.series,function(t){var i=t.options;ri(i.showInLegend,c(i.linkedTo)?!1:Y,!0)&&(e=e.concat(t.legendItems||("point"===i.legendType?t.data:t)))}),e},adjustMargins:function(e,t){var i=this.chart,n=this.options,s=n.align[0]+n.verticalAlign[0]+n.layout[0];this.display&&!n.floating&&di([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],function(r,a){r.test(s)&&!c(e[a])&&(i[ti[a]]=gt(i[ti[a]],i.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*n[a%2?"x":"y"]+ri(n.margin,12)+t[a]))})},render:function(){var e,t,i,n,s=this,r=s.chart,a=r.renderer,o=s.group,l=s.box,u=s.options,c=s.padding,h=u.borderWidth,d=u.backgroundColor;s.itemX=s.initialItemX,s.itemY=s.initialItemY,s.offsetWidth=0,s.lastItemY=0,o||(s.group=o=a.g("legend").attr({zIndex:7}).add(),s.contentGroup=a.g().attr({zIndex:1}).add(o),s.scrollGroup=a.g().add(s.contentGroup)),s.renderTitle(),e=s.getAllItems(),x(e,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),u.reversed&&e.reverse(),s.allItems=e,s.display=t=!!e.length,s.lastLineHeight=0,di(e,function(e){s.renderItem(e)}),i=(u.width||s.offsetWidth)+c,n=s.lastItemY+s.lastLineHeight+s.titleHeight,n=s.handleOverflow(n),n+=c,(h||d)&&(l?i>0&&n>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:i,height:n})),l.isNew=!1):(s.box=l=a.rect(0,0,i,n,u.borderRadius,h||0).attr({stroke:u.borderColor,"stroke-width":h||0,fill:d||Gt}).add(o).shadow(u.shadow),l.isNew=!0),l[t?"show":"hide"]()),s.legendWidth=i,s.legendHeight=n,di(e,function(e){s.positionItem(e)}),t&&o.align(si({width:i,height:n},u),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t,i,n=this,s=this.chart,r=s.renderer,a=this.options,o=a.y,l="top"===a.verticalAlign,u=s.spacingBox.height+(l?-o:o)-this.padding,c=a.maxHeight,h=this.clipRect,d=a.navigation,p=ri(d.animation,!0),m=d.arrowSize||12,f=this.nav,g=this.pages,v=this.allItems;return"horizontal"===a.layout&&(u/=2),c&&(u=vt(u,c)),g.length=0,e>u&&!a.useHTML?(this.clipHeight=t=gt(u-20-this.titleHeight-this.padding,0),this.currentPage=ri(this.currentPage,1),this.fullHeight=e,di(v,function(e,n){var s=e._legendItemPos[1],r=pt(e.legendItem.getBBox().height),a=g.length;(!a||s-g[a-1]>t&&(i||s)!==g[a-1])&&(g.push(i||s),a++),n===v.length-1&&s+r-g[a-1]>t&&g.push(s),s!==i&&(i=s)}),h||(h=n.clipRect=r.clipRect(0,this.padding,9999,0),n.contentGroup.clip(h)),h.attr({height:t}),f||(this.nav=f=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,m,m).on("click",function(){n.scroll(-1,p)}).add(f),this.pager=r.text("",15,10).css(d.style).add(f),this.down=r.symbol("triangle-down",0,0,m,m).on("click",function(){n.scroll(1,p)}).add(f)),n.scroll(0),e=u):f&&(h.attr({height:s.chartHeight}),f.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(e,t){var i,n=this.pages,s=n.length,r=this.currentPage+e,a=this.clipHeight,o=this.options.navigation,l=o.activeColor,u=o.inactiveColor,c=this.pager,h=this.padding;r>s&&(r=s),r>0&&(t!==Y&&E(t,this.chart),this.nav.attr({translateX:h,translateY:a+this.padding+7+this.titleHeight,visibility:Wt}),this.up.attr({fill:1===r?u:l}).css({cursor:1===r?"default":"pointer"}),c.attr({text:r+"/"+s}),this.down.attr({x:18+this.pager.getBBox().width,fill:r===s?u:l}).css({cursor:r===s?"default":"pointer"}),i=-n[r-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=r,this.positionCheckboxes(i))}};var qi=ut.LegendSymbolMixin={drawRectangle:function(e,t){var i=e.options.symbolHeight||e.fontMetrics.f;
t.legendSymbol=this.chart.renderer.rect(0,e.baseline-i+1,e.symbolWidth,i,e.options.symbolRadius||0).attr({zIndex:3}).add(t.legendGroup)},drawLineMarker:function(e){var t,i,n,s=this.options,r=s.marker,a=e.symbolWidth,o=this.chart.renderer,l=this.legendGroup,u=e.baseline-pt(.3*e.fontMetrics.b);s.lineWidth&&(n={"stroke-width":s.lineWidth},s.dashStyle&&(n.dashstyle=s.dashStyle),this.legendLine=o.path([Jt,0,u,Xt,a,u]).attr(n).add(l)),r&&r.enabled!==!1&&(t=r.radius,this.legendSymbol=i=o.symbol(this.symbol,a/2-t,u-t,2*t,2*t).add(l),i.isMarker=!0)}};(/Trident\/7\.0/.test(Mt)||Dt)&&ai(Hi.prototype,"positionItem",function(e,t){var i=this,n=function(){t._legendItemPos&&e.call(i,t)};n(),setTimeout(n)});var Bi=ut.Chart=function(){this.init.apply(this,arguments)};Bi.prototype={callbacks:[],init:function(e,i){var n,s=e.series;e.series=null,n=t(j,e),n.series=e.series=s,this.userOptions=e;var r=n.chart;this.margin=this.splashArray("margin",r),this.spacing=this.splashArray("spacing",r);var a=r.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=r.showAxes;var o,l=this;if(l.index=Ft.length,Ft.push(l),zt++,r.reflow!==!1&&gi(l,"load",function(){l.initReflow()}),a)for(o in a)gi(l,o,a[o]);l.xAxis=[],l.yAxis=[],l.animation=Ot?!1:ri(r.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(e){var t,i=this,n=i.options.chart,s=e.type||n.type||n.defaultSeriesType,r=ni[s];return r||L(17,!0),t=new r,t.init(this,e),t},isInsidePlot:function(e,t,i){var n=i?t:e,s=i?e:t;return n>=0&&n<=this.plotWidth&&s>=0&&s<=this.plotHeight},redraw:function(e){var t,i,n,s=this,r=s.axes,a=s.series,o=s.pointer,l=s.legend,u=s.isDirtyLegend,c=s.hasCartesianSeries,h=s.isDirtyBox,d=a.length,p=d,m=s.renderer,f=m.isHidden(),g=[];for(E(e,s),f&&s.cloneRenderTo(),s.layOutTitles();p--;)if(n=a[p],n.options.stacking&&(t=!0,n.isDirty)){i=!0;break}if(i)for(p=d;p--;)n=a[p],n.options.stacking&&(n.isDirty=!0);di(a,function(e){e.isDirty&&"point"===e.options.legendType&&(u=!0)}),u&&l.options.enabled&&(l.render(),s.isDirtyLegend=!1),t&&s.getStacks(),c&&(s.isResizing||(s.maxTicks=null,di(r,function(e){e.setScale()}))),s.getMargins(),c&&(di(r,function(e){e.isDirty&&(h=!0)}),di(r,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,g.push(function(){_i(e,"afterSetExtremes",si(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(h||t)&&e.redraw()})),h&&s.drawChartBox(),di(a,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),o&&o.reset(!0),m.draw(),_i(s,"redraw"),f&&s.cloneRenderTo(!0),di(g,function(e){e.call()})},get:function(e){var t,i,n,s=this,r=s.axes,a=s.series;for(t=0;t<r.length;t++)if(r[t].options.id===e)return r[t];for(t=0;t<a.length;t++)if(a[t].options.id===e)return a[t];for(t=0;t<a.length;t++)for(n=a[t].points||[],i=0;i<n.length;i++)if(n[i].id===e)return n[i];return null},getAxes:function(){var e,t,i=this,n=this.options,s=n.xAxis=d(n.xAxis||{}),r=n.yAxis=d(n.yAxis||{});di(s,function(e,t){e.index=t,e.isX=!0}),di(r,function(e,t){e.index=t}),e=s.concat(r),di(e,function(e){t=new Ni(i,e)})},getSelectedPoints:function(){var e=[];return di(this.series,function(t){e=e.concat(pi(t.points||[],function(e){return e.selected}))}),e},getSelectedSeries:function(){return pi(this.series,function(e){return e.selected})},getStacks:function(){var e=this;di(e.yAxis,function(e){e.stacks&&e.hasVisibleSeries&&(e.oldStacks=e.stacks)}),di(e.series,function(t){!t.options.stacking||t.visible!==!0&&e.options.chart.ignoreHiddenSeries!==!1||(t.stackKey=t.type+ri(t.options.stack,""))})},setTitle:function(e,i,n){var s,r,a=this,o=a.options;s=o.title=t(o.title,e),r=o.subtitle=t(o.subtitle,i),di([["title",e,s],["subtitle",i,r]],function(e){var t=e[0],i=a[t],n=e[1],s=e[2];i&&n&&(a[t]=i=i.destroy()),s&&s.text&&!i&&(a[t]=a.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":Ut+t,zIndex:s.zIndex||4}).css(s.style).add())}),a.layOutTitles(n)},layOutTitles:function(e){var t,i=0,n=this.title,s=this.subtitle,r=this.options,a=r.title,o=r.subtitle,l=this.renderer,u=this.spacingBox.width-44;n&&(n.css({width:(a.width||u)+$t}).align(si({y:l.fontMetrics(a.style.fontSize,n).b-3},a),!1,"spacingBox"),a.floating||a.verticalAlign||(i=n.getBBox().height)),s&&(s.css({width:(o.width||u)+$t}).align(si({y:i+(a.margin-13)+l.fontMetrics(a.style.fontSize,s).b},o),!1,"spacingBox"),o.floating||o.verticalAlign||(i=ft(i+s.getBBox().height))),t=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&t&&(this.isDirtyBox=t,this.hasRendered&&ri(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var e=this,t=e.options.chart,i=t.width,n=t.height,s=e.renderToClone||e.renderTo;c(i)||(e.containerWidth=ui(s,"width")),c(n)||(e.containerHeight=ui(s,"height")),e.chartWidth=gt(0,i||e.containerWidth||600),e.chartHeight=gt(0,ri(n,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var t=this.renderToClone,i=this.container;e?t&&(this.renderTo.appendChild(i),C(t),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=t=this.renderTo.cloneNode(0),p(t,{position:Ht,top:"-9999px",display:"block"}),t.style.setProperty&&t.style.setProperty("display","block","important"),ct.body.appendChild(t),i&&t.appendChild(i))},getContainer:function(){var e,t,s,r,a,o,l=this,u=l.options.chart,c="data-highcharts-chart";l.renderTo=r=u.renderTo,o=Ut+It++,n(r)&&(l.renderTo=r=ct.getElementById(r)),r||L(13,!0),a=i(h(r,c)),!isNaN(a)&&Ft[a]&&Ft[a].hasRendered&&Ft[a].destroy(),h(r,c,l.index),r.innerHTML="",u.skipClone||r.offsetWidth||l.cloneRenderTo(),l.getChartSize(),t=l.chartWidth,s=l.chartHeight,l.container=e=m(Vt,{className:Ut+"container"+(u.className?" "+u.className:""),id:o},si({position:qt,overflow:Bt,width:t+$t,height:s+$t,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},u.style),l.renderToClone||r),l._cursor=e.style.cursor,l.renderer=u.forExport?new Di(e,t,s,u.style,!0):new F(e,t,s,u.style),Ot&&l.renderer.create(l,e,t,s),l.renderer.chartIndex=l.index},getMargins:function(e){var t=this,i=t.spacing,n=t.margin,s=t.titleOffset;t.resetMargins(),s&&!c(n[0])&&(t.plotTop=gt(t.plotTop,s+t.options.title.margin+i[0])),t.legend.adjustMargins(n,i),t.extraBottomMargin&&(t.marginBottom+=t.extraBottomMargin),t.extraTopMargin&&(t.plotTop+=t.extraTopMargin),e||this.getAxisMargins()},getAxisMargins:function(){var e=this,t=e.axisOffset=[0,0,0,0],i=e.margin;e.hasCartesianSeries&&di(e.axes,function(e){e.getOffset()}),di(ti,function(n,s){c(i[s])||(e[n]+=t[s])}),e.setChartSize()},reflow:function(e){var t=this,i=t.options.chart,n=t.renderTo,s=i.width||ui(n,"width"),r=i.height||ui(n,"height"),a=e?e.target:ht,o=function(){t.container&&(t.setSize(s,r,!1),t.hasUserSize=null)};t.hasUserSize||t.isPrinting||!s||!r||a!==ht&&a!==ct||((s!==t.containerWidth||r!==t.containerHeight)&&(clearTimeout(t.reflowTimeout),e?t.reflowTimeout=setTimeout(o,100):o()),t.containerWidth=s,t.containerHeight=r)},initReflow:function(){var e=this,t=function(t){e.reflow(t)};gi(ht,"resize",t),gi(e,"destroy",function(){vi(ht,"resize",t)})},setSize:function(e,t,i){var n,s,r,a=this;a.isResizing+=1,r=function(){a&&_i(a,"endResize",null,function(){a.isResizing-=1})},E(i,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,c(e)&&(a.chartWidth=n=gt(0,pt(e)),a.hasUserSize=!!n),c(t)&&(a.chartHeight=s=gt(0,pt(t))),(H?bi:p)(a.container,{width:n+$t,height:s+$t},H),a.setChartSize(!0),a.renderer.setSize(n,s,i),a.maxTicks=null,di(a.axes,function(e){e.isDirty=!0,e.setScale()}),di(a.series,function(e){e.isDirty=!0}),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.layOutTitles(),a.getMargins(),a.redraw(i),a.oldChartHeight=null,_i(a,"resize"),H===!1?r():setTimeout(r,H&&H.duration||500)},setChartSize:function(e){var t,i,n,s,r,a,o,l=this,u=l.inverted,c=l.renderer,h=l.chartWidth,d=l.chartHeight,p=l.options.chart,m=l.spacing,f=l.clipOffset;l.plotLeft=n=pt(l.plotLeft),l.plotTop=s=pt(l.plotTop),l.plotWidth=r=gt(0,pt(h-n-l.marginRight)),l.plotHeight=a=gt(0,pt(d-s-l.marginBottom)),l.plotSizeX=u?a:r,l.plotSizeY=u?r:a,l.plotBorderWidth=p.plotBorderWidth||0,l.spacingBox=c.spacingBox={x:m[3],y:m[0],width:h-m[3]-m[1],height:d-m[0]-m[2]},l.plotBox=c.plotBox={x:n,y:s,width:r,height:a},o=2*mt(l.plotBorderWidth/2),t=ft(gt(o,f[3])/2),i=ft(gt(o,f[0])/2),l.clipBox={x:t,y:i,width:mt(l.plotSizeX-gt(o,f[1])/2-t),height:gt(0,mt(l.plotSizeY-gt(o,f[2])/2-i))},e||di(l.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this;di(ti,function(t,i){e[t]=ri(e.margin[i],e.spacing[i])}),e.axisOffset=[0,0,0,0],e.clipOffset=[0,0,0,0]},drawChartBox:function(){var e,t,i=this,n=i.options.chart,s=i.renderer,r=i.chartWidth,a=i.chartHeight,o=i.chartBackground,l=i.plotBackground,u=i.plotBorder,c=i.plotBGImage,h=n.borderWidth||0,d=n.backgroundColor,p=n.plotBackgroundColor,m=n.plotBackgroundImage,f=n.plotBorderWidth||0,g=i.plotLeft,v=i.plotTop,_=i.plotWidth,y=i.plotHeight,b=i.plotBox,w=i.clipRect,x=i.clipBox;e=h+(n.shadow?8:0),(h||d)&&(o?o.animate(o.crisp({width:r-e,height:a-e})):(t={fill:d||Gt},h&&(t.stroke=n.borderColor,t["stroke-width"]=h),i.chartBackground=s.rect(e/2,e/2,r-e,a-e,n.borderRadius,h).attr(t).addClass(Ut+"background").add().shadow(n.shadow))),p&&(l?l.animate(b):i.plotBackground=s.rect(g,v,_,y,0).attr({fill:p}).add().shadow(n.plotShadow)),m&&(c?c.animate(b):i.plotBGImage=s.image(m,g,v,_,y).add()),w?w.animate({width:x.width,height:x.height}):i.clipRect=s.clipRect(x),f&&(u?u.animate(u.crisp({x:g,y:v,width:_,height:y,strokeWidth:-f})):i.plotBorder=s.rect(g,v,_,y,0,-f).attr({stroke:n.plotBorderColor,"stroke-width":f,fill:Gt,zIndex:1}).add()),i.isDirtyBox=!1},propFromSeries:function(){var e,t,i,n=this,s=n.options.chart,r=n.options.series;di(["inverted","angular","polar"],function(a){for(e=ni[s.type||s.defaultSeriesType],i=n[a]||s[a]||e&&e.prototype[a],t=r&&r.length;!i&&t--;)e=ni[r[t].type],e&&e.prototype[a]&&(i=!0);n[a]=i})},linkSeries:function(){var e=this,t=e.series;di(t,function(e){e.linkedSeries.length=0}),di(t,function(t){var i=t.options.linkedTo;n(i)&&(i=":previous"===i?e.series[t.index-1]:e.get(i),i&&(i.linkedSeries.push(t),t.linkedParent=i))})},renderSeries:function(){di(this.series,function(e){e.translate(),e.render()})},renderLabels:function(){var e=this,t=e.options.labels;t.items&&di(t.items,function(n){var s=si(t.style,n.style),r=i(s.left)+e.plotLeft,a=i(s.top)+e.plotTop+12;delete s.left,delete s.top,e.renderer.text(n.html,r,a).attr({zIndex:2}).css(s).add()})},render:function(){var e,t,i,n,s=this,r=s.axes,a=s.renderer,o=s.options;s.setTitle(),s.legend=new Hi(s,o.legend),s.getStacks(),s.getMargins(!0),s.setChartSize(),e=s.plotWidth,t=s.plotHeight=s.plotHeight-13,di(r,function(e){e.setScale()}),s.getAxisMargins(),i=e/s.plotWidth>1.1,n=t/s.plotHeight>1.1,(i||n)&&(s.maxTicks=null,di(r,function(e){(e.horiz&&i||!e.horiz&&n)&&e.setTickInterval(!0)}),s.getMargins()),s.drawChartBox(),s.hasCartesianSeries&&di(r,function(e){e.render()}),s.seriesGroup||(s.seriesGroup=a.g("series-group").attr({zIndex:3}).add()),s.renderSeries(),s.renderLabels(),s.showCredits(o.credits),s.hasRendered=!0},showCredits:function(e){e.enabled&&!this.credits&&(this.credits=this.renderer.text(e.text,0,0).on("click",function(){e.href&&(location.href=e.href)}).attr({align:e.position.align,zIndex:8}).css(e.style).add().align(e.position))},destroy:function(){var e,t=this,i=t.axes,n=t.series,s=t.container,r=s&&s.parentNode;for(_i(t,"destroy"),Ft[t.index]=Y,zt--,t.renderTo.removeAttribute("data-highcharts-chart"),vi(t),e=i.length;e--;)i[e]=i[e].destroy();for(e=n.length;e--;)n[e]=n[e].destroy();di(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var i=t[e];i&&i.destroy&&(t[e]=i.destroy())}),s&&(s.innerHTML="",vi(s),r&&C(s));for(e in t)delete t[e]},isReadyToRender:function(){var e=this;return!At&&ht==ht.top&&"complete"!==ct.readyState||Ot&&!ht.canvg?(Ot?Oi.push(function(){e.firstRender()},e.options.global.canvasToolsURL):ct.attachEvent("onreadystatechange",function(){ct.detachEvent("onreadystatechange",e.firstRender),"complete"===ct.readyState&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,i=e.callback;e.isReadyToRender()&&(e.getContainer(),_i(e,"init"),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),di(t.series||[],function(t){e.initSeries(t)}),e.linkSeries(),_i(e,"beforeRender"),ut.Pointer&&(e.pointer=new Fi(e,t)),e.render(),e.renderer.draw(),i&&i.apply(e,[e]),di(e.callbacks,function(t){e.index!==Y&&t.apply(e,[e])}),_i(e,"load"),e.cloneRenderTo(!0))},splashArray:function(e,t){var i=t[e],n=s(i)?i:[i,i,i,i];return[ri(t[e+"Top"],n[0]),ri(t[e+"Right"],n[1]),ri(t[e+"Bottom"],n[2]),ri(t[e+"Left"],n[3])]}};var Ui=ut.CenteredSeriesMixin={getCenter:function(){var e,t,n,s,r=this.options,a=this.chart,o=2*(r.slicedOffset||0),l=a.plotWidth-2*o,u=a.plotHeight-2*o,c=r.center,h=[ri(c[0],"50%"),ri(c[1],"50%"),r.size||"100%",r.innerSize||0],d=vt(l,u);for(n=0;4>n;++n)s=h[n],t=/%$/.test(s),e=2>n||2===n&&t,h[n]=(t?[l,u,d,h[2]][n]*i(s)/100:i(s))+(e?o:0);return h}},Wi=function(){};Wi.prototype={init:function(e,t,i){var n,s=this;return s.series=e,s.color=e.color,s.applyOptions(t,i),s.pointAttr={},e.options.colorByPoint&&(n=e.options.colors||e.chart.options.colors,s.color=s.color||n[e.colorCounter++],e.colorCounter===n.length&&(e.colorCounter=0)),e.chart.pointCount++,s},applyOptions:function(e,t){var i=this,n=i.series,s=n.options.pointValKey||n.pointValKey;return e=Wi.prototype.optionsToObject.call(this,e),si(i,e),i.options=i.options?si(i.options,e):e,s&&(i.y=i[s]),i.x===Y&&n&&(i.x=t===Y?n.autoIncrement():t),i},optionsToObject:function(e){var t,i={},n=this.series,s=n.options.keys,a=s||n.pointArrayMap||["y"],o=a.length,l=0,u=0;if("number"==typeof e||null===e)i[a[0]]=e;else if(r(e))for(!s&&e.length>o&&(t=typeof e[0],"string"===t?i.name=e[0]:"number"===t&&(i.x=e[0]),l++);o>u;)i[a[u++]]=e[l++];else"object"==typeof e&&(i=e,e.dataLabels&&(n._hasPointLabels=!0),e.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var e,t=this,i=t.series,n=i.chart,s=n.hoverPoints;n.pointCount--,s&&(t.setState(),u(s,t),s.length||(n.hoverPoints=null)),t===n.hoverPoint&&t.onMouseOut(),(t.graphic||t.dataLabel)&&(vi(t),t.destroyElements()),t.legendItem&&n.legend.destroyItem(t);for(e in t)t[e]=null},destroyElements:function(){for(var e,t=this,i=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n=6;n--;)e=i[n],t[e]&&(t[e]=t[e].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},tooltipFormatter:function(e){var t=this.series,i=t.tooltipOptions,n=ri(i.valueDecimals,""),s=i.valuePrefix||"",r=i.valueSuffix||"";return di(t.pointArrayMap||["y"],function(t){t="{point."+t,(s||r)&&(e=e.replace(t+"}",s+t+"}"+r)),e=e.replace(t+"}",t+":,."+n+"f}")}),y(e,{point:this,series:this.series})},firePointEvent:function(e,t,i){var n=this,s=this.series,r=s.options;(r.point.events[e]||n.options&&n.options.events&&n.options.events[e])&&this.importEvents(),"click"===e&&r.allowPointSelect&&(i=function(e){n.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),_i(this,e,t,i)}};var $i=ut.Series=function(){};$i.prototype={isCartesian:!0,type:"line",pointClass:Wi,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,t){var i,n,s=this,r=e.series,a=function(e,t){return ri(e.options.index,e._i)-ri(t.options.index,t._i)};s.chart=e,s.options=t=s.setOptions(t),s.linkedSeries=[],s.bindAxes(),si(s,{name:t.name,state:Kt,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),Ot&&(t.animation=!1),n=t.events;for(i in n)gi(s,i,n[i]);(n&&n.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)&&(e.runTrackerClick=!0),s.getColor(),s.getSymbol(),di(s.parallelArrays,function(e){s[e+"Data"]=[]}),s.setData(t.data,!1),s.isCartesian&&(e.hasCartesianSeries=!0),r.push(s),s._i=r.length-1,x(r,a),this.yAxis&&x(this.yAxis.series,a),di(r,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var e,t=this,i=t.options,n=t.chart;di(t.axisTypes||[],function(s){di(n[s],function(n){e=n.options,(i[s]===e.index||i[s]!==Y&&i[s]===e.id||i[s]===Y&&0===e.index)&&(n.series.push(t),t[s]=n,n.isDirty=!0)}),t[s]||t.optionalAxis===s||L(18,!0)})},updateParallelArrays:function(e,t){var i=e.series,n=arguments,s="number"==typeof t?function(n){var s="y"===n&&i.toYData?i.toYData(e):e[n];i[n+"Data"][t]=s}:function(e){Array.prototype[t].apply(i[e+"Data"],Array.prototype.slice.call(n,2))};di(i.parallelArrays,s)},autoIncrement:function(){var e,t,i=this.options,n=this.xIncrement,s=i.pointIntervalUnit;return n=ri(n,i.pointStart,0),this.pointInterval=t=ri(this.pointInterval,i.pointInterval,1),("month"===s||"year"===s)&&(e=new W(n),e="month"===s?+e[ot](e[et]()+t):+e[lt](e[tt]()+t),t=e-n),this.xIncrement=n+t,n},getSegments:function(){var e,t=this,i=-1,n=[],s=t.points,r=s.length;if(r)if(t.options.connectNulls){for(e=r;e--;)null===s[e].y&&s.splice(e,1);s.length&&(n=[s])}else di(s,function(e,t){null===e.y?(t>i+1&&n.push(s.slice(i+1,t)),i=t):t===r-1&&n.push(s.slice(i+1,t+1))});t.segments=n},setOptions:function(e){var i,n,s=this.chart,r=s.options,a=r.plotOptions,o=s.userOptions||{},l=o.plotOptions||{},u=a[this.type];return this.userOptions=e,i=t(u,a.series,e),this.tooltipOptions=t(j.tooltip,j.plotOptions[this.type].tooltip,o.tooltip,l.series&&l.series.tooltip,l[this.type]&&l[this.type].tooltip,e.tooltip),null===u.marker&&delete i.marker,this.zoneAxis=i.zoneAxis,n=this.zones=(i.zones||[]).slice(),!i.negativeColor&&!i.negativeFillColor||i.zones||n.push({value:i[this.zoneAxis+"Threshold"]||i.threshold||0,color:i.negativeColor,fillColor:i.negativeFillColor}),n.length&&c(n[n.length-1].value)&&n.push({color:this.color,fillColor:this.fillColor}),i},getCyclic:function(e,t,i){var n,s=this.userOptions,r="_"+e+"Index",a=e+"Counter";t||(c(s[r])?n=s[r]:(s[r]=n=this.chart[a]%i.length,this.chart[a]+=1),t=i[n]),this[e]=t},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||xi[this.type].color,this.chart.options.colors)},getSymbol:function(){var e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(e.radius=0)},drawLegendSymbol:qi.drawLineMarker,setData:function(e,t,i,s){var o,l,u,c=this,h=c.points,d=h&&h.length||0,p=c.options,m=c.chart,f=null,g=c.xAxis,v=g&&!!g.categories,_=p.turboThreshold,y=this.xData,b=this.yData,w=c.pointArrayMap,x=w&&w.length;if(e=e||[],o=e.length,t=ri(t,!0),s!==!1&&o&&d===o&&!c.cropped&&!c.hasGroupedData&&c.visible)di(e,function(e,t){h[t].update(e,!1,null,!1)});else{if(c.xIncrement=null,c.pointRange=v?1:p.pointRange,c.colorCounter=0,di(this.parallelArrays,function(e){c[e+"Data"].length=0}),_&&o>_){for(l=0;null===f&&o>l;)f=e[l],l++;if(a(f)){var M=ri(p.pointStart,0),T=ri(p.pointInterval,1);for(l=0;o>l;l++)y[l]=M,b[l]=e[l],M+=T;c.xIncrement=M}else if(r(f))if(x)for(l=0;o>l;l++)u=e[l],y[l]=u[0],b[l]=u.slice(1,x+1);else for(l=0;o>l;l++)u=e[l],y[l]=u[0],b[l]=u[1];else L(12)}else for(l=0;o>l;l++)e[l]!==Y&&(u={series:c},c.pointClass.prototype.applyOptions.apply(u,[e[l]]),c.updateParallelArrays(u,l),v&&u.name&&(g.names[u.x]=u.name));for(n(b[0])&&L(14,!0),c.data=[],c.options.data=e,l=d;l--;)h[l]&&h[l].destroy&&h[l].destroy();g&&(g.minRange=g.userMinRange),c.isDirty=c.isDirtyData=m.isDirtyBox=!0,i=!1}t&&m.redraw(i)},processData:function(e){var t,i,n,s,r,a,o,l,u=this,c=u.xData,h=u.yData,d=c.length,p=0,m=u.xAxis,f=u.options,g=f.cropThreshold,v=u.isCartesian;if(v&&!u.isDirty&&!m.isDirty&&!u.yAxis.isDirty&&!e)return!1;for(m&&(a=m.getExtremes(),o=a.min,l=a.max),v&&u.sorted&&(!g||d>g||u.forceCrop)&&(c[d-1]<o||c[0]>l?(c=[],h=[]):(c[0]<o||c[d-1]>l)&&(t=this.cropData(u.xData,u.yData,o,l),c=t.xData,h=t.yData,p=t.start,i=!0)),r=c.length-1;r>=0;r--)n=c[r]-c[r-1],n>0&&(s===Y||s>n)?s=n:0>n&&u.requireSorting&&L(15);u.cropped=i,u.cropStart=p,u.processedXData=c,u.processedYData=h,null===f.pointRange&&(u.pointRange=s||1),u.closestPointRange=s},cropData:function(e,t,i,n){var s,r=e.length,a=0,o=r,l=ri(this.cropShoulder,1);for(s=0;r>s;s++)if(e[s]>=i){a=gt(0,s-l);break}for(;r>s;s++)if(e[s]>n){o=s+l;break}return{xData:e.slice(a,o),yData:t.slice(a,o),start:a,end:o}},generatePoints:function(){var e,t,i,n,s=this,r=s.options,a=r.data,o=s.data,l=s.processedXData,u=s.processedYData,c=s.pointClass,h=l.length,p=s.cropStart||0,m=s.hasGroupedData,f=[];if(!o&&!m){var g=[];g.length=a.length,o=s.data=g}for(n=0;h>n;n++)t=p+n,m?f[n]=(new c).init(s,[l[n]].concat(d(u[n]))):(o[t]?i=o[t]:a[t]!==Y&&(o[t]=i=(new c).init(s,a[t],l[n])),f[n]=i),f[n].index=t;if(o&&(h!==(e=o.length)||m))for(n=0;e>n;n++)n!==p||m||(n+=h),o[n]&&(o[n].destroyElements(),o[n].plotX=Y);s.data=o,s.points=f},getExtremes:function(e){var t,i,n,s,r,a,o,l=this.xAxis,u=this.yAxis,c=this.processedXData,h=[],d=0,p=l.getExtremes(),m=p.min,f=p.max;for(e=e||this.stackedYData||this.processedYData,t=e.length,a=0;t>a;a++)if(s=c[a],r=e[a],i=null!==r&&r!==Y&&(!u.isLog||r.length||r>0),n=this.getExtremesFromAll||this.cropped||(c[a+1]||s)>=m&&(c[a-1]||s)<=f,i&&n)if(o=r.length)for(;o--;)null!==r[o]&&(h[d++]=r[o]);else h[d++]=r;this.dataMin=M(h),this.dataMax=T(h)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var e,t,i,n,s=this,r=s.options,o=r.stacking,l=s.xAxis,u=l.categories,h=s.yAxis,d=s.points,p=d.length,m=!!s.modifyValue,f=r.pointPlacement,g="between"===f||a(f),v=r.threshold,_=Number.MAX_VALUE;for(e=0;p>e;e++){var y,b,w=d[e],x=w.x,M=w.y,T=w.low,k=o&&h.stacks[(s.negStacks&&v>M?"-":"")+s.stackKey];h.isLog&&null!==M&&0>=M&&(w.y=M=null,L(10)),w.plotX=t=l.translate(x,0,0,0,1,f,"flags"===this.type),o&&s.visible&&k&&k[x]&&(y=k[x],b=y.points[s.index+","+e],T=b[0],M=b[1],0===T&&(T=ri(v,h.min)),h.isLog&&0>=T&&(T=null),w.total=w.stackTotal=y.total,w.percentage=y.total&&100*(w.y/y.total),w.stackY=M,y.setOffset(s.pointXOffset||0,s.barW||0)),w.yBottom=c(T)?h.translate(T,0,1,0,1):null,m&&(M=s.modifyValue(M,w)),w.plotY=i="number"==typeof M&&1/0!==M?vt(gt(-1e5,h.translate(M,0,1,0,1)),1e5):Y,w.isInside=i!==Y&&i>=0&&i<=h.len&&t>=0&&t<=l.len,w.clientX=g?l.translate(x,0,0,0,1):t,w.negative=w.y<(v||0),w.category=u&&u[w.x]!==Y?u[w.x]:w.x,e&&(_=vt(_,_t(t-n))),n=t}s.closestPointRangePx=_,s.getSegments()},setClip:function(e){var t=this.chart,i=t.renderer,n=t.inverted,s=this.clipBox,r=s||t.clipBox,a=this.sharedClipKey||["_sharedClip",e&&e.duration,e&&e.easing,r.height].join(","),o=t[a],l=t[a+"m"];o||(e&&(r.width=0,t[a+"m"]=l=i.clipRect(-99,n?-t.plotLeft:-t.plotTop,99,n?t.chartWidth:t.chartHeight)),t[a]=o=i.clipRect(r)),e&&(o.count+=1),this.options.clip!==!1&&(this.group.clip(e||s?o:t.clipRect),this.markerGroup.clip(l),this.sharedClipKey=a),e||(o.count-=1,o.count<=0&&a&&t[a]&&(s||(t[a]=t[a].destroy()),t[a+"m"]&&(t[a+"m"]=t[a+"m"].destroy())))},animate:function(e){var t,i,n=this,r=n.chart,a=n.options.animation;a&&!s(a)&&(a=xi[n.type].animation),e?n.setClip(a):(i=this.sharedClipKey,t=r[i],t&&t.animate({width:r.plotSizeX},a),r[i+"m"]&&r[i+"m"].animate({width:r.plotSizeX+99},a),n.animate=null)},afterAnimate:function(){this.setClip(),_i(this,"afterAnimate")},drawPoints:function(){var e,t,i,n,s,r,a,o,l,u,c,h,d,p=this,m=p.points,f=p.chart,g=p.options,v=g.marker,_=p.pointAttr[""],y=p.markerGroup,b=p.xAxis,w=ri(v.enabled,b.isRadial,p.closestPointRangePx>2*v.radius);if(v.enabled!==!1||p._hasPointMarkers)for(n=m.length;n--;)s=m[n],t=mt(s.plotX),i=s.plotY,l=s.graphic,u=s.marker||{},c=!!s.marker,h=w&&u.enabled===Y||u.enabled,d=s.isInside,h&&i!==Y&&!isNaN(i)&&null!==s.y?(e=s.pointAttr[s.selected?ei:Kt]||_,r=e.r,a=ri(u.symbol,p.symbol),o=0===a.indexOf("url"),l?l[d?"show":"hide"](!0).animate(si({x:t-r,y:i-r},l.symbolName?{width:2*r,height:2*r}:{})):d&&(r>0||o)&&(s.graphic=l=f.renderer.symbol(a,t-r,i-r,2*r,2*r,c?u:v).attr(e).add(y))):l&&(s.graphic=l.destroy())},convertAttribs:function(e,t,i,n){var s,r,a=this.pointAttrToOptions,o={};e=e||{},t=t||{},i=i||{},n=n||{};for(s in a)r=a[s],o[s]=ri(e[r],t[s],i[s],n[s]);return o},getAttribs:function(){var e,t,i,n,s,r,a=this,o=a.options,l=xi[a.type].marker?o.marker:o,u=l.states,h=u[Qt],d=a.color,p=a.options.negativeColor,m={stroke:d,fill:d},f=a.points||[],g=[],v=a.pointAttrToOptions,_=a.hasPointSpecificOptions,y=l.lineColor,b=l.fillColor,w=o.turboThreshold,x=a.zones,M=a.zoneAxis||"y";if(o.marker?(h.radius=h.radius||l.radius+h.radiusPlus,h.lineWidth=h.lineWidth||l.lineWidth+h.lineWidthPlus):(h.color=h.color||Li(h.color||d).brighten(h.brightness).get(),h.negativeColor=h.negativeColor||Li(h.negativeColor||p).brighten(h.brightness).get()),g[Kt]=a.convertAttribs(l,m),di([Qt,ei],function(e){g[e]=a.convertAttribs(u[e],g[Kt])}),a.pointAttr=g,t=f.length,!w||w>t||_)for(;t--;){if(i=f[t],l=i.options&&i.options.marker||i.options,l&&l.enabled===!1&&(l.radius=0),x.length){for(var T=0,k=x[T];i[M]>=k.value;)k=x[++T];i.color=i.fillColor=k.color}if(_=o.colorByPoint||i.color,i.options)for(r in v)c(l[v[r]])&&(_=!0);_?(l=l||{},n=[],u=l.states||{},e=u[Qt]=u[Qt]||{},o.marker||(e.color=e.color||!i.options.color&&h[i.negative&&p?"negativeColor":"color"]||Li(i.color).brighten(e.brightness||h.brightness).get()),s={color:i.color},b||(s.fillColor=i.color),y||(s.lineColor=i.color),l.hasOwnProperty("color")&&!l.color&&delete l.color,n[Kt]=a.convertAttribs(si(s,l),g[Kt]),n[Qt]=a.convertAttribs(u[Qt],g[Qt],n[Kt]),n[ei]=a.convertAttribs(u[ei],g[ei],n[Kt])):n=g,i.pointAttr=n}},destroy:function(){var e,t,i,n,s,r=this,a=r.chart,o=/AppleWebKit\/533/.test(Mt),l=r.data||[];for(_i(r,"destroy"),vi(r),di(r.axisTypes||[],function(e){s=r[e],s&&(u(s.series,r),s.isDirty=s.forceRedraw=!0)}),r.legendItem&&r.chart.legend.destroyItem(r),t=l.length;t--;)i=l[t],i&&i.destroy&&i.destroy();r.points=null,clearTimeout(r.animationTimeout);for(n in r)r[n]instanceof O&&!r[n].survive&&(e=o&&"group"===n?"hide":"destroy",r[n][e]());a.hoverSeries===r&&(a.hoverSeries=null),u(a.series,r);for(n in r)delete r[n]},getSegmentPath:function(e){var t=this,i=[],n=t.options.step;return di(e,function(s,r){var a,o=s.plotX,l=s.plotY;t.getPointSpline?i.push.apply(i,t.getPointSpline(e,s,r)):(i.push(r?Xt:Jt),n&&r&&(a=e[r-1],"right"===n?i.push(a.plotX,l):"center"===n?i.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,l):i.push(o,a.plotY)),i.push(s.plotX,s.plotY))}),i},getGraphPath:function(){var e,t=this,i=[],n=[];return di(t.segments,function(s){e=t.getSegmentPath(s),s.length>1?i=i.concat(e):n.push(s[0])}),t.singlePoints=n,t.graphPath=i,i},drawGraph:function(){var e=this,t=this.options,i=[["graph",t.lineColor||this.color,t.dashStyle]],n=t.lineWidth,s="square"!==t.linecap,r=this.getGraphPath(),a=this.fillGraph&&this.color||Gt,o=this.zones;di(o,function(n,s){i.push(["zoneGraph"+s,n.color||e.color,n.dashStyle||t.dashStyle])}),di(i,function(i,o){var l,u=i[0],c=e[u];c?(wi(c),c.animate({d:r})):(n||a)&&r.length&&(l={stroke:i[1],"stroke-width":n,fill:a,zIndex:1},i[2]?l.dashstyle=i[2]:s&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),e[u]=e.chart.renderer.path(r).attr(l).add(e.group).shadow(2>o&&t.shadow))})},applyZones:function(){var e,t,i,n=this,s=this.chart,r=s.renderer,a=this.zones,o=this.clips||[],l=this.graph,u=this.area,c=gt(s.chartWidth,s.chartHeight),h=this.zoneAxis||"y",d=this[h+"Axis"],p=d.reversed,m=d.horiz,f=!1;a.length&&(l||u)&&(l&&l.hide(),u&&u.hide(),di(a,function(a,h){e=ri(t,p?m?s.plotWidth:0:m?0:d.toPixels(d.min)),t=pt(d.toPixels(ri(a.value,d.max),!0)),e=d.isXAxis?e>t?t:e:t>e?t:e,f&&(e=t=d.toPixels(d.max)),d.isXAxis?(i={x:p?t:e,y:0,width:Math.abs(e-t),height:c},m||(i.x=s.plotHeight-i.x)):(i={x:0,y:p?e:t,width:c,height:Math.abs(e-t)},m&&(i.y=s.plotWidth-i.y)),s.inverted&&r.isVML&&(i=d.isXAxis?{x:0,y:p?e:t,height:i.width,width:s.chartWidth}:{x:i.y-s.plotLeft-s.spacingBox.x,y:0,width:i.height,height:s.chartHeight}),o[h]?o[h].animate(i):(o[h]=r.clipRect(i),l&&n["zoneGraph"+h].clip(o[h]),u&&n["zoneArea"+h].clip(o[h])),f=a.value>d.max}),this.clips=o)},invertGroups:function(){function e(){var e={width:t.yAxis.len,height:t.xAxis.len};di(["group","markerGroup"],function(i){t[i]&&t[i].attr(e).invert()})}var t=this,i=t.chart;t.xAxis&&(gi(i,"resize",e),gi(t,"destroy",function(){vi(i,"resize",e)}),e(),t.invertGroups=e)},plotGroup:function(e,t,i,n,s){var r=this[e],a=!r;return a&&(this[e]=r=this.chart.renderer.g(t).attr({visibility:i,zIndex:n||.1}).add(s)),r[a?"attr":"animate"](this.getPlotBox()),r},getPlotBox:function(){var e=this.chart,t=this.xAxis,i=this.yAxis;return e.inverted&&(t=i,i=this.xAxis),{translateX:t?t.left:e.plotLeft,translateY:i?i.top:e.plotTop,scaleX:1,scaleY:1}},render:function(){var e,t=this,i=t.chart,n=t.options,s=n.animation,r=s&&!!t.animate&&i.renderer.isSVG&&ri(s.duration,500)||0,a=t.visible?Wt:Bt,o=n.zIndex,l=t.hasRendered,u=i.seriesGroup;e=t.plotGroup("group","series",a,o,u),t.markerGroup=t.plotGroup("markerGroup","markers",a,o,u),r&&t.animate(!0),t.getAttribs(),e.inverted=t.isCartesian?i.inverted:!1,t.drawGraph&&(t.drawGraph(),t.applyZones()),di(t.points,function(e){e.redraw&&e.redraw()}),t.drawDataLabels&&t.drawDataLabels(),t.visible&&t.drawPoints(),t.drawTracker&&t.options.enableMouseTracking!==!1&&t.drawTracker(),i.inverted&&t.invertGroups(),n.clip===!1||t.sharedClipKey||l||e.clip(i.clipRect),r&&t.animate(),l||(r?t.animationTimeout=setTimeout(function(){t.afterAnimate()},r):t.afterAnimate()),t.isDirty=t.isDirtyData=!1,t.hasRendered=!0},redraw:function(){var e=this,t=e.chart,i=e.isDirtyData,n=e.isDirty,s=e.group,r=e.xAxis,a=e.yAxis;s&&(t.inverted&&s.attr({width:t.plotWidth,height:t.plotHeight}),s.animate({translateX:ri(r&&r.left,t.plotLeft),translateY:ri(a&&a.top,t.plotTop)})),e.translate(),e.render(),i&&_i(e,"updatedData"),(n||i)&&delete this.kdTree},kdDimensions:1,kdTree:null,kdAxisArray:["clientX","plotY"],kdComparer:"distX",searchPoint:function(e){var t=this,i=t.xAxis,n=t.yAxis,s=t.chart.inverted;return this.searchKDTree({clientX:s?i.len-e.chartY+i.pos:e.chartX-i.pos,plotY:s?n.len-e.chartX+n.pos:e.chartY-n.pos})},buildKDTree:function(){function e(t,n,s){var r,a,o=t&&t.length;return o?(r=i.kdAxisArray[n%s],t.sort(function(e,t){return e[r]-t[r]}),a=Math.floor(o/2),{point:t[a],left:e(t.slice(0,a),n+1,s),right:e(t.slice(a+1),n+1,s)}):void 0}function t(){var t=pi(i.points,function(e){return null!==e.y});i.kdTree=e(t,n,n)}var i=this,n=i.kdDimensions;delete i.kdTree,i.options.kdSync?t():setTimeout(t)},searchKDTree:function(e){function t(e,t){var i=c(e[r])&&c(t[r])?Math.pow(e[r]-t[r],2):null,n=c(e[a])&&c(t[a])?Math.pow(e[a]-t[a],2):null,s=(i||0)+(n||0);return{distX:c(i)?Math.sqrt(i):Number.MAX_VALUE,distY:c(n)?Math.sqrt(n):Number.MAX_VALUE,distR:c(s)?Math.sqrt(s):Number.MAX_VALUE}}function i(e,r,a,o){var l,u,c,h,d,p=r.point,m=n.kdAxisArray[a%o],f=p;return p.dist=t(e,p),l=e[m]-p[m],u=0>l?"left":"right",r[u]&&(h=i(e,r[u],a+1,o),f=h.dist[s]<f.dist[s]?h:p,c=0>l?"right":"left",r[c]&&Math.sqrt(l*l)<f.dist[s]&&(d=i(e,r[c],a+1,o),f=d.dist[s]<f.dist[s]?d:f)),f}var n=this,s=this.kdComparer,r=this.kdAxisArray[0],a=this.kdAxisArray[1];return this.kdTree||this.buildKDTree(),this.kdTree?i(e,this.kdTree,this.kdDimensions,this.kdDimensions):void 0}},I.prototype={destroy:function(){k(this,this.axis)},render:function(e){var t=this.options,i=t.format,n=i?y(i,this):t.formatter.call(this);this.label?this.label.attr({text:n,visibility:Bt}):this.label=this.axis.chart.renderer.text(n,null,null,t.useHTML).css(t.style).attr({align:this.textAlign,rotation:t.rotation,visibility:Bt}).add(e)},setOffset:function(e,t){var i,n=this,s=n.axis,r=s.chart,a=r.inverted,o=s.reversed,l=this.isNegative&&!o||!this.isNegative&&o,u=s.translate(s.usePercentage?100:this.total,0,0,0,1),c=s.translate(0),h=_t(u-c),d=r.xAxis[0].translate(this.x)+e,p=r.plotHeight,m={x:a?l?u:u-h:d,y:a?p-d-t:l?p-u-h:p-u,width:a?h:t,height:a?t:h},f=this.label;f&&(f.align(this.alignOptions,null,m),i=f.alignAttr,f[this.options.crop===!1||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))
}},Ni.prototype.buildStacks=function(){var e=this.series,t=ri(this.options.reversedStacks,!0),i=e.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)e[t?i:e.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<e.length;i++)e[i].setPercentStacks()}},Ni.prototype.renderStackTotals=function(){var e,t,i,n=this,s=n.chart,r=s.renderer,a=n.stacks,o=n.stackTotalGroup;o||(n.stackTotalGroup=o=r.g("stack-labels").attr({visibility:Wt,zIndex:6}).add()),o.translate(s.plotLeft,s.plotTop);for(e in a){t=a[e];for(i in t)t[i].render(o)}},$i.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var e,t,i,n,s,r,a,o,l=this,u=l.processedXData,c=l.processedYData,h=[],d=c.length,p=l.options,m=p.threshold,f=p.stack,g=p.stacking,v=l.stackKey,_="-"+v,y=l.negStacks,b=l.yAxis,w=b.stacks,x=b.oldStacks;for(r=0;d>r;r++)a=u[r],o=c[r],s=l.index+","+r,e=y&&m>o,n=e?_:v,w[n]||(w[n]={}),w[n][a]||(x[n]&&x[n][a]?(w[n][a]=x[n][a],w[n][a].total=null):w[n][a]=new I(b,b.options.stackLabels,e,a,f)),t=w[n][a],t.points[s]=[t.cum||0],"percent"===g?(i=e?v:_,y&&w[i]&&w[i][a]?(i=w[i][a],t.total=i.total=gt(i.total,t.total)+_t(o)||0):t.total=D(t.total+(_t(o)||0))):t.total=D(t.total+(o||0)),t.cum=(t.cum||0)+(o||0),t.points[s].push(t.cum),h[r]=t.cum;"percent"===g&&(b.usePercentage=!0),this.stackedYData=h,b.oldStacks={}}},$i.prototype.setPercentStacks=function(){var e=this,t=e.stackKey,i=e.yAxis.stacks,n=e.processedXData;di([t,"-"+t],function(t){for(var s,r,a,o,l=n.length;l--;)s=n[l],r=i[t]&&i[t][s],a=r&&r.points[e.index+","+l],a&&(o=r.total?100/r.total:0,a[0]=D(a[0]*o),a[1]=D(a[1]*o),e.stackedYData[l]=a[1])})},si(Bi.prototype,{addSeries:function(e,t,i){var n,s=this;return e&&(t=ri(t,!0),_i(s,"addSeries",{options:e},function(){n=s.initSeries(e),s.isDirtyLegend=!0,s.linkSeries(),t&&s.redraw(i)})),n},addAxis:function(e,i,n,s){var r,a=i?"xAxis":"yAxis",o=this.options;r=new Ni(this,t(e,{index:this[a].length,isX:i})),o[a]=d(o[a]||{}),o[a].push(e),ri(n,!0)&&this.redraw(s)},showLoading:function(e){var t=this,i=t.options,n=t.loadingDiv,s=i.loading,r=function(){n&&p(n,{left:t.plotLeft+$t,top:t.plotTop+$t,width:t.plotWidth+$t,height:t.plotHeight+$t})};n||(t.loadingDiv=n=m(Vt,{className:Ut+"loading"},si(s.style,{zIndex:10,display:Gt}),t.container),t.loadingSpan=m("span",null,s.labelStyle,n),gi(t,"redraw",r)),t.loadingSpan.innerHTML=e||i.lang.loading,t.loadingShown||(p(n,{opacity:0,display:""}),bi(n,{opacity:s.style.opacity},{duration:s.showDuration||0}),t.loadingShown=!0),r()},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&bi(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){p(t,{display:Gt})}}),this.loadingShown=!1}}),si(Wi.prototype,{update:function(e,t,i,n){function a(){l.applyOptions(e),s(e)&&!r(e)&&(l.redraw=function(){c&&(e&&e.marker&&e.marker.symbol?l.graphic=c.destroy():c.attr(l.pointAttr[l.state||""])),e&&e.dataLabels&&l.dataLabel&&(l.dataLabel=l.dataLabel.destroy()),l.redraw=null}),o=l.index,u.updateParallelArrays(l,o),p&&l.name&&(p[l.x]=l.name),d.data[o]=l.options,u.isDirty=u.isDirtyData=!0,!u.fixedBox&&u.hasCartesianSeries&&(h.isDirtyBox=!0),h.legend.display&&"point"===d.legendType&&(u.updateTotals(),h.legend.clearItems()),t&&h.redraw(i)}var o,l=this,u=l.series,c=l.graphic,h=u.chart,d=u.options,p=u.xAxis&&u.xAxis.names;t=ri(t,!0),n===!1?a():l.firePointEvent("update",{options:e},a)},remove:function(e,t){this.series.removePoint(hi(this,this.series.data),e,t)}}),si($i.prototype,{addPoint:function(e,t,i,n){var s,r,a,o,l=this,u=l.options,c=l.data,h=l.graph,d=l.area,p=l.chart,m=l.xAxis&&l.xAxis.names,f=h&&h.shift||0,g=["graph","area"],v=u.data,_=l.xData;if(E(n,p),i){for(a=l.zones.length;a--;)g.push("zoneGraph"+a,"zoneArea"+a);di(g,function(e){l[e]&&(l[e].shift=f+1)})}if(d&&(d.isArea=!0),t=ri(t,!0),s={series:l},l.pointClass.prototype.applyOptions.apply(s,[e]),o=s.x,a=_.length,l.requireSorting&&o<_[a-1])for(r=!0;a&&_[a-1]>o;)a--;l.updateParallelArrays(s,"splice",a,0,0),l.updateParallelArrays(s,a),m&&s.name&&(m[o]=s.name),v.splice(a,0,e),r&&(l.data.splice(a,0,null),l.processData()),"point"===u.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(s,"shift"),v.shift())),l.isDirty=!0,l.isDirtyData=!0,t&&(l.getAttribs(),p.redraw())},removePoint:function(e,t,i){var n=this,s=n.data,r=s[e],a=n.points,o=n.chart,l=function(){s.length===a.length&&a.splice(e,1),s.splice(e,1),n.options.data.splice(e,1),n.updateParallelArrays(r||{series:n},"splice",e,1),r&&r.destroy(),n.isDirty=!0,n.isDirtyData=!0,t&&o.redraw()};E(i,o),t=ri(t,!0),r?r.firePointEvent("remove",null,l):l()},remove:function(e,t){var i=this,n=i.chart;e=ri(e,!0),i.isRemoving||(i.isRemoving=!0,_i(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),e&&n.redraw(t)})),i.isRemoving=!1},update:function(e,i){var n,s=this,r=this.chart,a=this.userOptions,o=this.type,l=ni[o].prototype,u=["group","markerGroup","dataLabelsGroup"];(e.type&&e.type!==o||void 0!==e.zIndex)&&(u.length=0),di(u,function(e){u[e]=s[e],delete s[e]}),e=t(a,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},e),this.remove(!1);for(n in l)this[n]=Y;si(this,ni[e.type||o].prototype),di(u,function(e){s[e]=u[e]}),this.init(r,e),r.linkSeries(),ri(i,!0)&&r.redraw(!1)}}),si(Ni.prototype,{update:function(e,i){var n=this.chart;e=n.options[this.coll][this.options.index]=t(this.userOptions,e),this.destroy(!0),this._addedPlotLB=Y,this.init(n,si(e,{events:Y})),n.isDirtyBox=!0,ri(i,!0)&&n.redraw()},remove:function(e){for(var t=this.chart,i=this.coll,n=this.series,s=n.length;s--;)n[s]&&n[s].remove(!1);u(t.axes,this),u(t[i],this),t.options[i].splice(this.options.index,1),di(t[i],function(e,t){e.options.index=t}),this.destroy(),t.isDirtyBox=!0,ri(e,!0)&&t.redraw()},setTitle:function(e,t){this.update({title:e},t)},setCategories:function(e,t){this.update({categories:e},t)}});var Gi=f($i);ni.line=Gi,xi.area=t(Mi,{threshold:0});var Ji=f($i,{type:"area",getSegments:function(){var e,t,i,n,s=this,r=[],a=[],o=[],l=this.xAxis,u=this.yAxis,c=u.stacks[this.stackKey],h={},d=this.points,p=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<d.length;i++)h[d[i].x]=d[i];for(n in c)null!==c[n].total&&o.push(+n);o.sort(function(e,t){return e-t}),di(o,function(n){var r,o=0;if(!p||h[n]&&null!==h[n].y)if(h[n])a.push(h[n]);else{for(i=s.index;i<=u.series.length;i++)if(r=c[n].points[i+","+n]){o=r[1];break}e=l.translate(n),t=u.toPixels(o,!0),a.push({y:null,plotX:e,clientX:e,plotY:t,yBottom:t,onMouseOver:Yt})}}),a.length&&r.push(a)}else $i.prototype.getSegments.call(this),r=this.segments;this.segments=r},getSegmentPath:function(e){var t,i,n=$i.prototype.getSegmentPath.call(this,e),s=[].concat(n),r=this.options,a=n.length,o=this.yAxis.getThreshold(r.threshold);if(3===a&&s.push(Xt,n[1],n[2]),r.stacking&&!this.closedStacks)for(t=e.length-1;t>=0;t--)i=ri(e[t].yBottom,o),t<e.length-1&&r.step&&s.push(e[t+1].plotX,i),s.push(e[t].plotX,i);else this.closeSegment(s,e,o);return this.areaPath=this.areaPath.concat(s),n},closeSegment:function(e,t,i){e.push(Xt,t[t.length-1].plotX,i,Xt,t[0].plotX,i)},drawGraph:function(){this.areaPath=[],$i.prototype.drawGraph.apply(this);var e=this,t=this.areaPath,i=this.options,n=this.zones,s=[["area",this.color,i.fillColor]];di(n,function(t,n){s.push(["zoneArea"+n,t.color||e.color,t.fillColor||i.fillColor])}),di(s,function(n){var s=n[0],r=e[s];r?r.animate({d:t}):e[s]=e.chart.renderer.path(t).attr({fill:ri(n[2],Li(n[1]).setOpacity(ri(i.fillOpacity,.75)).get()),zIndex:0}).add(e.group)})},drawLegendSymbol:qi.drawRectangle});ni.area=Ji,xi.spline=t(Mi);var Xi=f($i,{type:"spline",getPointSpline:function(e,t,i){var n,s,r,a,o,l=1.5,u=l+1,c=t.plotX,h=t.plotY,d=e[i-1],p=e[i+1];if(d&&p){var m,f=d.plotX,g=d.plotY,v=p.plotX,_=p.plotY;n=(l*c+f)/u,s=(l*h+g)/u,r=(l*c+v)/u,a=(l*h+_)/u,m=(a-s)*(r-c)/(r-n)+h-a,s+=m,a+=m,s>g&&s>h?(s=gt(g,h),a=2*h-s):g>s&&h>s&&(s=vt(g,h),a=2*h-s),a>_&&a>h?(a=gt(_,h),s=2*h-a):_>a&&h>a&&(a=vt(_,h),s=2*h-a),t.rightContX=r,t.rightContY=a}return i?(o=["C",d.rightContX||d.plotX,d.rightContY||d.plotY,n||c,s||h,c,h],d.rightContX=d.rightContY=null):o=[Jt,c,h],o}});ni.spline=Xi,xi.areaspline=t(xi.area);var Zi=Ji.prototype,Ki=f(Xi,{type:"areaspline",closedStacks:!0,getSegmentPath:Zi.getSegmentPath,closeSegment:Zi.closeSegment,drawGraph:Zi.drawGraph,drawLegendSymbol:qi.drawRectangle});ni.areaspline=Ki,xi.column=t(Mi,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});var Qi=f($i,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){$i.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&di(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},getColumnMetrics:function(){var e,t,i=this,n=i.options,s=i.xAxis,r=i.yAxis,a=s.reversed,o={},l=0;n.grouping===!1?l=1:di(i.chart.series,function(n){var s=n.options,a=n.yAxis;n.type===i.type&&n.visible&&r.len===a.len&&r.pos===a.pos&&(s.stacking?(e=n.stackKey,o[e]===Y&&(o[e]=l++),t=o[e]):s.grouping!==!1&&(t=l++),n.columnIndex=t)});var u=vt(_t(s.transA)*(s.ordinalSlope||n.pointRange||s.closestPointRange||s.tickInterval||1),s.len),h=u*n.groupPadding,d=u-2*h,p=d/l,m=n.pointWidth,f=c(m)?(p-m)/2:p*n.pointPadding,g=ri(m,p-2*f),v=(a?l-(i.columnIndex||0):i.columnIndex)||0,_=f+(h+v*p-u/2)*(a?-1:1);return i.columnMetrics={width:g,offset:_}},translate:function(){var e=this,t=e.chart,i=e.options,n=e.borderWidth=ri(i.borderWidth,e.closestPointRange*e.xAxis.transA<2?0:1),s=e.yAxis,r=i.threshold,a=e.translatedThreshold=s.getThreshold(r),o=ri(i.minPointLength,5),l=e.getColumnMetrics(),u=l.width,c=e.barW=gt(u,1+2*n),h=e.pointXOffset=l.offset,d=-(n%2?.5:0),p=n%2?.5:1;t.inverted&&(a-=.5,t.renderer.isVML&&(p+=1)),i.pointPadding&&(c=ft(c)),$i.prototype.translate.apply(e),di(e.points,function(i){var n,r,l,m,f=ri(i.yBottom,a),g=vt(gt(-999-f,i.plotY),s.len+999+f),v=i.plotX+h,_=c,y=vt(g,f),b=gt(g,f)-y;_t(b)<o&&o&&(b=o,m=!s.reversed&&!i.negative||s.reversed&&i.negative,y=pt(_t(y-a)>o?f-o:a-(m?o:0))),i.barX=v,i.pointWidth=u,i.tooltipPos=t.inverted?[s.len+s.pos-t.plotLeft-g,e.xAxis.len-v-_/2]:[v+_/2,g+s.pos-t.plotTop],n=pt(v+_)+d,v=pt(v)+d,_=n-v,l=_t(y)<.5,r=vt(pt(y+b)+p,9e4),y=pt(y)+p,b=r-y,l&&(y-=1,b+=1),i.shapeType="rect",i.shapeArgs={x:v,y:y,width:_,height:b}})},getSymbol:Yt,drawLegendSymbol:qi.drawRectangle,drawGraph:Yt,drawPoints:function(){var e,i,n=this,s=this.chart,r=n.options,a=s.renderer,o=r.animationLimit||250;di(n.points,function(l){var u,h=l.plotY,d=l.graphic;h===Y||isNaN(h)||null===l.y?d&&(l.graphic=d.destroy()):(e=l.shapeArgs,u=c(n.borderWidth)?{"stroke-width":n.borderWidth}:{},i=l.pointAttr[l.selected?ei:Kt]||n.pointAttr[Kt],d?(wi(d),d.attr(u)[s.pointCount<o?"animate":"attr"](t(e))):l.graphic=d=a[l.shapeType](e).attr(u).attr(i).add(n.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(e){var t,i=this,n=this.yAxis,s=i.options,r=this.chart.inverted,a={};At&&(e?(a.scaleY=.001,t=vt(n.pos+n.len,gt(n.pos,n.toPixels(s.threshold))),r?a.translateX=t-n.len:a.translateY=t,i.group.attr(a)):(a.scaleY=1,a[r?"translateX":"translateY"]=n.pos,i.group.animate(a,i.options.animation),i.animate=null))},remove:function(){var e=this,t=e.chart;t.hasRendered&&di(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),$i.prototype.remove.apply(e,arguments)}});ni.column=Qi,xi.bar=t(xi.column);var en=f(Qi,{type:"bar",inverted:!0});ni.bar=en,xi.scatter=t(Mi,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{series.color}">â</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var tn=f($i,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,kdComparer:"distR",drawGraph:function(){this.options.lineWidth&&$i.prototype.drawGraph.call(this)}});ni.scatter=tn,xi.pie=t(Mi,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var nn=f(Wi,{init:function(){Wi.prototype.init.apply(this,arguments);var e,t=this;return si(t,{visible:t.visible!==!1,name:ri(t.name,"Slice")}),e=function(e){t.slice("select"===e.type)},gi(t,"select",e),gi(t,"unselect",e),t},setVisible:function(e,t){var i=this,n=i.series,s=n.chart,r=!n.isDirty&&n.options.ignoreHiddenPoint;(e!==i.visible||t)&&(i.visible=i.options.visible=e=e===Y?!i.visible:e,n.options.data[hi(i,n.data)]=i.options,di(["graphic","dataLabel","connector","shadowGroup"],function(t){i[t]&&i[t][e?"show":"hide"](!0)}),i.legendItem&&(s.hasRendered&&(n.updateTotals(),s.legend.clearItems(),r||s.legend.render()),s.legend.colorizeItem(i,e)),r&&(n.isDirty=!0,s.redraw()))},slice:function(e,t,i){var n,s=this,r=s.series,a=r.chart;E(i,a),t=ri(t,!0),s.sliced=s.options.sliced=e=c(e)?e:!s.sliced,r.options.data[hi(s,r.data)]=s.options,n=e?s.slicedTranslation:{translateX:0,translateY:0},s.graphic.animate(n),s.shadowGroup&&s.shadowGroup.animate(n)},haloPath:function(e){var t=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+t.x,i.plotTop+t.y,t.r+e,t.r+e,{innerR:this.shapeArgs.r,start:t.start,end:t.end})}}),sn={type:"pie",isCartesian:!1,pointClass:nn,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:Yt,animate:function(e){var t=this,i=t.points,n=t.startAngleRad;e||(di(i,function(e){var i=e.graphic,s=e.shapeArgs;i&&(i.attr({r:e.startR||t.center[3]/2,start:n,end:n}),i.animate({r:s.r,start:s.start,end:s.end},t.options.animation))}),t.animate=null)},setData:function(e,t,i,n){$i.prototype.setData.call(this,e,!1,i,n),this.processData(),this.generatePoints(),ri(t,!0)&&this.chart.redraw(i)},updateTotals:function(){var e,t,i,n,s=0,r=this.options.ignoreHiddenPoint;for(t=this.points,i=t.length,e=0;i>e;e++)n=t[e],n.y<0&&(n.y=null),s+=r&&!n.visible?0:n.y;for(this.total=s,e=0;i>e;e++)n=t[e],n.percentage=s>0&&(n.visible||!r)?100*(n.y/s):0,n.total=s},generatePoints:function(){$i.prototype.generatePoints.call(this),this.updateTotals()},translate:function(e){this.generatePoints();var t,i,n,s,r,a,o,l=this,u=0,c=1e3,h=l.options,d=h.slicedOffset,p=d+h.borderWidth,m=h.startAngle||0,f=l.startAngleRad=wt/180*(m-90),g=l.endAngleRad=wt/180*(ri(h.endAngle,m+360)-90),v=g-f,_=l.points,y=h.dataLabels.distance,b=h.ignoreHiddenPoint,w=_.length;for(e||(l.center=e=l.getCenter()),l.getX=function(t,i){return n=dt.asin(vt((t-e[1])/(e[2]/2+y),1)),e[0]+(i?-1:1)*yt(n)*(e[2]/2+y)},a=0;w>a;a++)o=_[a],t=f+u*v,(!b||o.visible)&&(u+=o.percentage/100),i=f+u*v,o.shapeType="arc",o.shapeArgs={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:pt(t*c)/c,end:pt(i*c)/c},n=(i+t)/2,n>1.5*wt?n-=2*wt:-wt/2>n&&(n+=2*wt),o.slicedTranslation={translateX:pt(yt(n)*d),translateY:pt(bt(n)*d)},s=yt(n)*e[2]/2,r=bt(n)*e[2]/2,o.tooltipPos=[e[0]+.7*s,e[1]+.7*r],o.half=-wt/2>n||n>wt/2?1:0,o.angle=n,p=vt(p,y/2),o.labelPos=[e[0]+s+yt(n)*y,e[1]+r+bt(n)*y,e[0]+s+yt(n)*p,e[1]+r+bt(n)*p,e[0]+s,e[1]+r,0>y?"center":o.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var e,t,i,n,s=this,r=s.chart,a=r.renderer,o=s.options.shadow;o&&!s.shadowGroup&&(s.shadowGroup=a.g("shadow").add(s.group)),di(s.points,function(r){var l=r.options.visible;t=r.graphic,n=r.shapeArgs,i=r.shadowGroup,o&&!i&&(i=r.shadowGroup=a.g("shadow").add(s.shadowGroup)),e=r.sliced?r.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(e),t?t.animate(si(n,e)):r.graphic=t=a[r.shapeType](n).setRadialReference(s.center).attr(r.pointAttr[r.selected?ei:Kt]).attr({"stroke-linejoin":"round"}).attr(e).add(s.group).shadow(o,i),void 0!==l&&r.setVisible(l,!0)})},searchPoint:Yt,sortByAngle:function(e,t){e.sort(function(e,i){return void 0!==e.angle&&(i.angle-e.angle)*t})},drawLegendSymbol:qi.drawRectangle,getCenter:Ui.getCenter,getSymbol:Yt};sn=f($i,sn),ni.pie=sn,$i.prototype.drawDataLabels=function(){var e,i,n,s,r=this,a=r.options,o=a.cursor,l=a.dataLabels,u=r.points,h=r.hasRendered||0,d=r.chart.renderer;(l.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(l),s=r.plotGroup("dataLabelsGroup","data-labels",l.defer?Bt:Wt,l.zIndex||6),ri(l.defer,!0)&&(s.attr({opacity:+h}),h||gi(r,"afterAnimate",function(){r.visible&&s.show(),s[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),i=l,di(u,function(u){var h,p,m,f,g,v,_=u.dataLabel,b=u.connector,w=!0,x={};if(e=u.dlOptions||u.options&&u.options.dataLabels,h=ri(e&&e.enabled,i.enabled),_&&!h)u.dataLabel=_.destroy();else if(h){if(l=t(i,e),v=l.style,g=l.rotation,p=u.getLabelConfig(),n=l.format?y(l.format,p):l.formatter.call(p,l),v.color=ri(l.color,v.color,r.color,"black"),_)c(n)?(_.attr({text:n}),w=!1):(u.dataLabel=_=_.destroy(),b&&(u.connector=b.destroy()));else if(c(n)){m={fill:l.backgroundColor,stroke:l.borderColor,"stroke-width":l.borderWidth,r:l.borderRadius||0,rotation:g,padding:l.padding,zIndex:1},"contrast"===v.color&&(x.color=l.inside||l.distance<0||a.stacking?d.getContrast(u.color||r.color):"#000000"),o&&(x.cursor=o);for(f in m)m[f]===Y&&delete m[f];_=u.dataLabel=d[g?"text":"label"](n,0,-999,l.shape,null,null,l.useHTML).attr(m).css(si(v,x)).add(s).shadow(l.shadow)}_&&r.alignDataLabel(u,_,l,null,w)}}))},$i.prototype.alignDataLabel=function(e,t,i,n,s){var r,a,o=this.chart,l=o.inverted,u=ri(e.plotX,-999),c=ri(e.plotY,-999),h=t.getBBox(),d=o.renderer.fontMetrics(i.style.fontSize).b,p=this.visible&&(e.series.forceDL||o.isInsidePlot(u,pt(c),l)||n&&o.isInsidePlot(u,l?n.x+1:n.y+n.height-1,l));p&&(n=si({x:l?o.plotWidth-c:u,y:pt(l?o.plotHeight-u:c),width:0,height:0},n),si(i,{width:h.width,height:h.height}),i.rotation?(r=o.renderer.rotCorr(d,i.rotation),t[s?"attr":"animate"]({x:n.x+i.x+n.width/2+r.x,y:n.y+i.y+n.height/2}).attr({align:i.align})):(t.align(i,null,n),a=t.alignAttr,"justify"===ri(i.overflow,"justify")?this.justifyDataLabel(t,i,a,h,n,s):ri(i.crop,!0)&&(p=o.isInsidePlot(a.x,a.y)&&o.isInsidePlot(a.x+h.width,a.y+h.height)),i.shape&&t.attr({anchorX:e.plotX,anchorY:e.plotY}))),p||(t.attr({y:-999}),t.placed=!1)},$i.prototype.justifyDataLabel=function(e,t,i,n,s,r){var a,o,l=this.chart,u=t.align,c=t.verticalAlign,h=e.box?0:e.padding||0;a=i.x+h,0>a&&("right"===u?t.align="left":t.x=-a,o=!0),a=i.x+n.width-h,a>l.plotWidth&&("left"===u?t.align="right":t.x=l.plotWidth-a,o=!0),a=i.y+h,0>a&&("bottom"===c?t.verticalAlign="top":t.y=-a,o=!0),a=i.y+n.height-h,a>l.plotHeight&&("top"===c?t.verticalAlign="bottom":t.y=l.plotHeight-a,o=!0),o&&(e.placed=!r,e.align(t,null,s))},ni.pie&&(ni.pie.prototype.drawDataLabels=function(){var e,t,i,n,s,r,a,o,l,u,c,h,d,p=this,m=p.data,f=p.chart,g=p.options.dataLabels,v=ri(g.connectorPadding,10),_=ri(g.connectorWidth,1),y=f.plotWidth,b=f.plotHeight,w=ri(g.softConnector,!0),x=g.distance,M=p.center,k=M[2]/2,C=M[1],L=x>0,D=[[],[]],E=[0,0,0,0],S=function(e,t){return t.y-e.y};if(p.visible&&(g.enabled||p._hasPointLabels)){for($i.prototype.drawDataLabels.apply(p),di(m,function(e){e.dataLabel&&e.visible&&D[e.half].push(e)}),h=2;h--;){var A,P,O,N,I=[],Y=[],F=D[h],z=F.length;if(z){for(p.sortByAngle(F,h-.5),d=a=0;!a&&F[d];)a=F[d]&&F[d].dataLabel&&(F[d].dataLabel.getBBox().height||21),d++;if(x>0){for(O=vt(C+k+x,f.plotHeight),P=gt(0,C-k-x);O>=P;P+=a)I.push(P);if(A=I.length,z>A){for(c=[].concat(F),c.sort(S),d=z;d--;)c[d].rank=d;for(d=z;d--;)F[d].rank>=A&&F.splice(d,1);z=F.length}for(d=0;z>d;d++){e=F[d],r=e.labelPos;var R,j,V=9999;for(j=0;A>j;j++)R=_t(I[j]-r[1]),V>R&&(V=R,N=j);if(d>N&&null!==I[d])N=d;else if(z-d+N>A&&null!==I[d])for(N=A-z+d;null===I[N];)N++;else for(;null===I[N];)N++;Y.push({i:N,y:I[N]}),I[N]=null}Y.sort(S)}for(d=0;z>d;d++){var H,q;e=F[d],r=e.labelPos,n=e.dataLabel,u=e.visible===!1?Bt:"inherit",q=r[1],x>0?(H=Y.pop(),N=H.i,l=H.y,(q>l&&null!==I[N+1]||l>q&&null!==I[N-1])&&(l=vt(gt(0,q),f.plotHeight))):l=q,o=g.justify?M[0]+(h?-1:1)*(k+x):p.getX(l===C-k-x||l===C+k+x?q:l,h),n._attr={visibility:u,align:r[6]},n._pos={x:o+g.x+({left:v,right:-v}[r[6]]||0),y:l+g.y-10},n.connX=o,n.connY=l,null===this.options.size&&(s=n.width,v>o-s?E[3]=gt(pt(s-o+v),E[3]):o+s>y-v&&(E[1]=gt(pt(o+s-y+v),E[1])),0>l-a/2?E[0]=gt(pt(-l+a/2),E[0]):l+a/2>b&&(E[2]=gt(pt(l+a/2-b),E[2])))}}}(0===T(E)||this.verifyDataLabelOverflow(E))&&(this.placeDataLabels(),L&&_&&di(this.points,function(e){t=e.connector,r=e.labelPos,n=e.dataLabel,n&&n._pos?(u=n._attr.visibility,o=n.connX,l=n.connY,i=w?[Jt,o+("left"===r[6]?5:-5),l,"C",o,l,2*r[2]-r[4],2*r[3]-r[5],r[2],r[3],Xt,r[4],r[5]]:[Jt,o+("left"===r[6]?5:-5),l,Xt,r[2],r[3],Xt,r[4],r[5]],t?(t.animate({d:i}),t.attr("visibility",u)):e.connector=t=p.chart.renderer.path(i).attr({"stroke-width":_,stroke:g.connectorColor||e.color||"#606060",visibility:u}).add(p.dataLabelsGroup)):t&&(e.connector=t.destroy())}))}},ni.pie.prototype.placeDataLabels=function(){di(this.points,function(e){var t,i=e.dataLabel;i&&(t=i._pos,t?(i.attr(i._attr),i[i.moved?"animate":"attr"](t),i.moved=!0):i&&i.attr({y:-999}))})},ni.pie.prototype.alignDataLabel=Yt,ni.pie.prototype.verifyDataLabelOverflow=function(e){var t,i=this.center,n=this.options,s=n.center,r=n.minSize||80,a=r;return null!==s[0]?a=gt(i[2]-gt(e[1],e[3]),r):(a=gt(i[2]-e[1]-e[3],r),i[0]+=(e[3]-e[1])/2),null!==s[1]?a=gt(vt(a,i[2]-gt(e[0],e[2])),r):(a=gt(vt(a,i[2]-e[0]-e[2]),r),i[1]+=(e[0]-e[2])/2),a<i[2]?(i[2]=a,this.translate(i),di(this.points,function(e){e.dataLabel&&(e.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):t=!0,t}),ni.column&&(ni.column.prototype.alignDataLabel=function(e,i,n,s,r){var a=this.chart.inverted,o=e.series,l=e.dlBox||e.shapeArgs,u=e.below||e.plotY>ri(this.translatedThreshold,o.yAxis.len),c=ri(n.inside,!!this.options.stacking);l&&(s=t(l),a&&(s={x:o.yAxis.len-s.y-s.height,y:o.xAxis.len-s.x-s.width,width:s.height,height:s.width}),c||(a?(s.x+=u?0:s.width,s.width=0):(s.y+=u?s.height:0,s.height=0))),n.align=ri(n.align,!a||c?"center":u?"right":"left"),n.verticalAlign=ri(n.verticalAlign,a||c?"middle":u?"top":"bottom"),$i.prototype.alignDataLabel.call(this,e,i,n,s,r)}),function(e){var t=e.Chart,i=e.each,n=HighchartsAdapter.addEvent;t.prototype.callbacks.push(function(e){function t(){var t=[];i(e.series,function(e){var n=e.options.dataLabels;(n.enabled||e._hasPointLabels)&&!n.allowOverlap&&e.visible&&i(e.points,function(e){e.dataLabel&&(e.dataLabel.labelrank=e.labelrank,t.push(e.dataLabel))})}),e.hideOverlappingLabels(t)}t(),n(e,"redraw",t)}),t.prototype.hideOverlappingLabels=function(e){var t,i,n,s,r,a=e.length,o=function(e,t,i,n){return!(t.x>e.x+i.width||t.x+n.width<e.x||t.y>e.y+i.height||t.y+n.height<e.y)};for(i=0;a>i;i++)t=e[i],t&&(t.oldOpacity=t.opacity,t.newOpacity=1);for(i=0;a>i;i++)for(s=e[i],n=i+1;a>n;++n)r=e[n],s&&r&&s.placed&&r.placed&&0!==s.newOpacity&&0!==r.newOpacity&&o(s.alignAttr,r.alignAttr,s,r)&&((s.labelrank<r.labelrank?s:r).newOpacity=0);for(i=0;a>i;i++)t=e[i],t&&(t.oldOpacity!==t.newOpacity&&t.placed&&(t.alignAttr.opacity=t.newOpacity,t[t.isOld&&t.newOpacity?"animate":"attr"](t.alignAttr)),t.isOld=!0)}}(ut);var rn=ut.TrackerMixin={drawTrackerPoint:function(){var e=this,t=e.chart,i=t.pointer,n=e.options.cursor,s=n&&{cursor:n},r=function(e){for(var i,n=e.target;n&&!i;)i=n.point,n=n.parentNode;i!==Y&&i!==t.hoverPoint&&i.onMouseOver(e)};di(e.points,function(e){e.graphic&&(e.graphic.element.point=e),e.dataLabel&&(e.dataLabel.element.point=e)}),e._hasTracking||(di(e.trackerGroups,function(t){e[t]&&(e[t].addClass(Ut+"tracker").on("mouseover",r).on("mouseout",function(e){i.onTrackerMouseOut(e)}).css(s),z&&e[t].on("touchstart",r))}),e._hasTracking=!0)},drawTrackerGraph:function(){var e,t,i=this,n=i.options,s=n.trackByArea,r=[].concat(s?i.areaPath:i.graphPath),a=r.length,o=i.chart,l=o.pointer,u=o.renderer,c=o.options.tooltip.snap,h=i.tracker,d=n.cursor,p=d&&{cursor:d},m=i.singlePoints,f=function(){o.hoverSeries!==i&&i.onMouseOver()},g="rgba(192,192,192,"+(At?1e-4:.002)+")";if(a&&!s)for(t=a+1;t--;)r[t]===Jt&&r.splice(t+1,0,r[t+1]-c,r[t+2],Xt),(t&&r[t]===Jt||t===a)&&r.splice(t,0,Xt,r[t-2]+c,r[t-1]);for(t=0;t<m.length;t++)e=m[t],r.push(Jt,e.plotX-c,e.plotY,Xt,e.plotX+c,e.plotY);h?h.attr({d:r}):(i.tracker=u.path(r).attr({"stroke-linejoin":"round",visibility:i.visible?Wt:Bt,stroke:g,fill:s?g:Gt,"stroke-width":n.lineWidth+(s?0:2*c),zIndex:2}).add(i.group),di([i.tracker,i.markerGroup],function(e){e.addClass(Ut+"tracker").on("mouseover",f).on("mouseout",function(e){l.onTrackerMouseOut(e)}).css(p),z&&e.on("touchstart",f)}))}};ni.column&&(Qi.prototype.drawTracker=rn.drawTrackerPoint),ni.pie&&(ni.pie.prototype.drawTracker=rn.drawTrackerPoint),ni.scatter&&(tn.prototype.drawTracker=rn.drawTrackerPoint),si(Hi.prototype,{setItemEvents:function(e,t,i,n,s){var r=this;(i?t:e.legendGroup).on("mouseover",function(){e.setState(Qt),t.css(r.options.itemHoverStyle)}).on("mouseout",function(){t.css(e.visible?n:s),e.setState()}).on("click",function(t){var i="legendItemClick",n=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(i,t,n):_i(e,i,t,n)})},createCheckboxForItem:function(e){var t=this;e.checkbox=m("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},t.options.itemCheckboxStyle,t.chart.container),gi(e.checkbox,"click",function(t){var i=t.target;_i(e.series||e,"checkboxClick",{checked:i.checked,item:e},function(){e.select()})})}}),j.legend.itemStyle.cursor="pointer",si(Bi.prototype,{showResetZoom:function(){var e=this,t=j.lang,i=e.options.chart.resetZoomButton,n=i.theme,s=n.states,r="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},n,s&&s.hover).attr({align:i.position.align,title:t.resetZoomTitle}).add().align(i.position,!1,r)},zoomOut:function(){var e=this;_i(e,"selection",{resetSelection:!0},function(){e.zoom()})},zoom:function(e){var t,i,n=this,r=n.pointer,a=!1;!e||e.resetSelection?di(n.axes,function(e){t=e.zoom()}):di(e.xAxis.concat(e.yAxis),function(e){var i=e.axis,n=i.isXAxis;(r[n?"zoomX":"zoomY"]||r[n?"pinchX":"pinchY"])&&(t=i.zoom(e.min,e.max),i.displayBtn&&(a=!0))}),i=n.resetZoomButton,a&&!i?n.showResetZoom():!a&&s(i)&&(n.resetZoomButton=i.destroy()),t&&n.redraw(ri(n.options.chart.animation,e&&e.animation,n.pointCount<100))},pan:function(e,t){var i,n=this,s=n.hoverPoints;s&&di(s,function(e){e.setState()}),di("xy"===t?[1,0]:[1],function(t){var s=e[t?"chartX":"chartY"],r=n[t?"xAxis":"yAxis"][0],a=n[t?"mouseDownX":"mouseDownY"],o=(r.pointRange||0)/2,l=r.getExtremes(),u=r.toValue(a-s,!0)+o,c=r.toValue(a+n[t?"plotWidth":"plotHeight"]-s,!0)-o,h=a>s;r.series.length&&(h||u>vt(l.dataMin,l.min))&&(!h||c<gt(l.dataMax,l.max))&&(r.setExtremes(u,c,!1,!1,{trigger:"pan"}),i=!0),n[t?"mouseDownX":"mouseDownY"]=s}),i&&n.redraw(!1),p(n.container,{cursor:"move"})}}),si(Wi.prototype,{select:function(e,t){var i=this,n=i.series,s=n.chart;e=ri(e,!i.selected),i.firePointEvent(e?"select":"unselect",{accumulate:t},function(){i.selected=i.options.selected=e,n.options.data[hi(i,n.data)]=i.options,i.setState(e&&ei),t||di(s.getSelectedPoints(),function(e){e.selected&&e!==i&&(e.selected=e.options.selected=!1,n.options.data[hi(e,n.data)]=e.options,e.setState(Kt),e.firePointEvent("unselect"))})})},onMouseOver:function(e){var t=this,i=t.series,n=i.chart,s=n.tooltip,r=n.hoverPoint;n.hoverSeries!==i&&i.onMouseOver(),r&&r!==t&&r.onMouseOut(),t.firePointEvent("mouseOver"),!s||s.shared&&!i.noSharedTooltip||s.refresh(t,e),t.setState(Qt),n.hoverPoint=t},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;this.firePointEvent("mouseOut"),t&&-1!==hi(this,t)||(this.setState(),e.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var e,i=this,n=t(i.series.options.point,i.options),s=n.events;i.events=s;for(e in s)gi(i,e,s[e]);this.hasImportedEvents=!0}},setState:function(e,i){var n,s,r,a,o=this,l=o.plotX,u=o.plotY,c=o.series,h=c.options.states,d=xi[c.type].marker&&c.options.marker,p=d&&!d.enabled,m=d&&d.states[e],f=m&&m.enabled===!1,g=c.stateMarkerGraphic,v=o.marker||{},_=c.chart,y=c.halo;e=e||Kt,a=o.pointAttr[e]||c.pointAttr[e],e===o.state&&!i||o.selected&&e!==ei||h[e]&&h[e].enabled===!1||e&&(f||p&&m.enabled===!1)||e&&v.states&&v.states[e]&&v.states[e].enabled===!1||(o.graphic?(n=d&&o.graphic.symbolName&&a.r,o.graphic.attr(t(a,n?{x:l-n,y:u-n,width:2*n,height:2*n}:{})),g&&g.hide()):(e&&m&&(n=m.radius,r=v.symbol||c.symbol,g&&g.currentSymbol!==r&&(g=g.destroy()),g?g[i?"animate":"attr"]({x:l-n,y:u-n}):r&&(c.stateMarkerGraphic=g=_.renderer.symbol(r,l-n,u-n,2*n,2*n).attr(a).add(c.markerGroup),g.currentSymbol=r)),g&&g[e&&_.isInsidePlot(l,u,_.inverted)?"show":"hide"]()),s=h[e]&&h[e].halo,s&&s.size?(y||(c.halo=y=_.renderer.path().add(_.seriesGroup)),y.attr(si({fill:Li(o.color||c.color).setOpacity(s.opacity).get()},s.attributes))[i?"animate":"attr"]({d:o.haloPath(s.size)})):y&&y.attr({d:[]}),o.state=e)},haloPath:function(e){var t=this.series,i=t.chart,n=t.getPlotBox(),s=i.inverted;return i.renderer.symbols.circle(n.translateX+(s?t.yAxis.len-this.plotY:this.plotX)-e,n.translateY+(s?t.xAxis.len-this.plotX:this.plotY)-e,2*e,2*e)}}),si($i.prototype,{onMouseOver:function(){var e=this,t=e.chart,i=t.hoverSeries;i&&i!==e&&i.onMouseOut(),e.options.events.mouseOver&&_i(e,"mouseOver"),e.setState(Qt),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,i=e.chart,n=i.tooltip,s=i.hoverPoint;s&&s.onMouseOut(),e&&t.events.mouseOut&&_i(e,"mouseOut"),!n||t.stickyTracking||n.shared&&!e.noSharedTooltip||n.hide(),e.setState(),i.hoverSeries=null},setState:function(e){var t,i=this,n=i.options,s=i.graph,r=n.states,a=n.lineWidth,o=0;if(e=e||Kt,i.state!==e){if(i.state=e,r[e]&&r[e].enabled===!1)return;if(e&&(a=r[e].lineWidth||a+(r[e].lineWidthPlus||0)),s&&!s.dashstyle)for(t={"stroke-width":a},s.attr(t);i["zoneGraph"+o];)i["zoneGraph"+o].attr(t),o+=1}},setVisible:function(e,t){var i,n=this,s=n.chart,r=n.legendItem,a=s.options.chart.ignoreHiddenSeries,o=n.visible;n.visible=e=n.userOptions.visible=e===Y?!o:e,i=e?"show":"hide",di(["group","dataLabelsGroup","markerGroup","tracker"],function(e){n[e]&&n[e][i]()}),(s.hoverSeries===n||(s.hoverPoint&&s.hoverPoint.series)===n)&&n.onMouseOut(),r&&s.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&di(s.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),di(n.linkedSeries,function(t){t.setVisible(e,!1)}),a&&(s.isDirtyBox=!0),t!==!1&&s.redraw(),_i(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(e){var t=this;t.selected=e=e===Y?!t.selected:e,t.checkbox&&(t.checkbox.checked=e),_i(t,e?"select":"unselect")},drawTracker:rn.drawTrackerGraph}),si(ut,{Color:Li,Point:Wi,Tick:N,Renderer:F,SVGElement:O,SVGRenderer:Di,arrayMin:M,arrayMax:T,charts:Ft,dateFormat:V,error:L,format:y,pathAnim:q,getOptions:P,hasBidiBug:Pt,isTouchDevice:Et,setOptions:A,addEvent:gi,removeEvent:vi,createElement:m,discardElement:C,css:p,each:di,map:fi,merge:t,splat:d,extendClass:f,pInt:i,svg:At,canvas:Ot,vml:!At&&!Ot,product:Rt,version:jt})}()}),Mindbreeze.define("jsoneditor",[],function(){return function(){var e;!function(){var t=!1,i=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return e=function(){},e.extend=function n(e){function s(){!t&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;t=!0;var a=new this;t=!1;for(var o in e)a[o]="function"==typeof e[o]&&"function"==typeof r[o]&&i.test(e[o])?function(e,t){return function(){var i=this._super;
this._super=r[e];var n=t.apply(this,arguments);return this._super=i,n}}(o,e[o]):e[o];return s.prototype=a,s.prototype.constructor=s,s.extend=n,s},e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),s=window.setTimeout(function(){t(i+n)},n);return e=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}();var t=function(e){return"object"!=typeof e||e.nodeType||null!==e&&e===e.window?!1:e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},i=function(e){var n,s,r;for(s=1;s<arguments.length;s++){n=arguments[s];for(r in n)n.hasOwnProperty(r)&&(n[r]&&t(n[r])?(e.hasOwnProperty(r)||(e[r]={}),i(e[r],n[r])):e[r]=n[r])}return e},n=function(e,t){if(e&&"object"==typeof e){var i;if(Array.isArray(e)||"number"==typeof e.length&&e.length>0&&e.length-1 in e){for(i=0;i<e.length;i++)if(t(i,e[i])===!1)return}else if(Object.keys){var n=Object.keys(e);for(i=0;i<n.length;i++)if(t(n[i],e[n[i]])===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&t(i,e[i])===!1)return}},s=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)},r=function(e,t){if(!(e instanceof Element))throw new Error("element should be an instance of Element");t=i({},r.defaults.options,t||{}),this.element=e,this.options=t,this.init()};r.prototype={constructor:r,init:function(){var e=this;this.ready=!1;var t=r.defaults.themes[this.options.theme||r.defaults.theme];if(!t)throw"Unknown theme "+(this.options.theme||r.defaults.theme);this.schema=this.options.schema,this.theme=new t,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var i=r.defaults.iconlibs[this.options.iconlib||r.defaults.iconlib];i&&(this.iconlib=new i),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||r.defaults.translate,this._loadExternalRefs(this.schema,function(){e._getDefinitions(e.schema);var t={};e.options.custom_validators&&(t.custom_validators=e.options.custom_validators),e.validator=new r.Validator(e,null,t);var i=e.getEditorClass(e.schema);e.root=e.createEditor(i,{jsoneditor:e,schema:e.schema,required:!0,container:e.root_container}),e.root.preBuild(),e.root.build(),e.root.postBuild(),e.options.startval&&e.root.setValue(e.options.startval),e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.ready=!0,window.requestAnimationFrame(function(){e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.trigger("ready"),e.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(e),this},validate:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";return 1===arguments.length?this.validator.validate(e):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},off:function(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];for(var i=[],n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n]!==t&&i.push(this.callbacks[e][n]);this.callbacks[e]=i}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this},trigger:function(e){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(var t=0;t<this.callbacks[e].length;t++)this.callbacks[e][t]();return this},setOption:function(e,t){if("show_errors"!==e)throw"Option "+e+" must be set during instantiation and cannot be changed later";return this.options.show_errors=t,this.onChange(),this},getEditorClass:function(e){var t;if(e=this.expandSchema(e),n(r.defaults.resolvers,function(i,n){var s=n(e);return s&&r.defaults.editors[s]?(t=s,!1):void 0}),!t)throw"Unknown editor for schema "+JSON.stringify(e);if(!r.defaults.editors[t])throw"Unknown editor "+t;return r.defaults.editors[t]},createEditor:function(e,t){return t=i({},e.options||{},t),new e(t)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var e=this;return window.requestAnimationFrame(function(){e.firing_change=!1,e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),"never"!==e.options.show_errors?e.root.showValidationErrors(e.validation_results):e.root.showValidationErrors([]),e.trigger("change"))}),this}},compileTemplate:function(e,t){t=t||r.defaults.template;var i;if("string"==typeof t){if(!r.defaults.templates[t])throw"Unknown template engine "+t;if(i=r.defaults.templates[t](),!i)throw"Template engine "+t+" missing required library."}else i=t;if(!i)throw"No template engine set";if(!i.compile)throw"Invalid template engine set";return i.compile(e)},_data:function(e,t,i){if(3!==arguments.length)return e.hasAttribute("data-jsoneditor-"+t)?this.__data[e.getAttribute("data-jsoneditor-"+t)]:null;var n;e.hasAttribute("data-jsoneditor-"+t)?n=e.getAttribute("data-jsoneditor-"+t):(n=this.uuid++,e.setAttribute("data-jsoneditor-"+t,n)),this.__data[n]=i},registerEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=e,this},unregisterEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=null,this},getEditor:function(e){return this.editors?this.editors[e]:void 0},watch:function(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this},unwatch:function(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;for(var i=[],n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]!==t&&i.push(this.watchlist[e][n]);return this.watchlist[e]=i.length?i:null,this},notifyWatchers:function(e){if(!this.watchlist||!this.watchlist[e])return this;for(var t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(e,t){if(t=t||"#/definitions/",e.definitions)for(var i in e.definitions)e.definitions.hasOwnProperty(i)&&(this.refs[t+i]=e.definitions[i],e.definitions[i].definitions&&this._getDefinitions(e.definitions[i],t+i+"/definitions/"))},_getExternalRefs:function(e){var t={},i=function(e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=!0)};e.$ref&&"object"!=typeof e.$ref&&"#"!==e.$ref.substr(0,1)&&!this.refs[e.$ref]&&(t[e.$ref]=!0);for(var n in e)if(e.hasOwnProperty(n))if(e[n]&&"object"==typeof e[n]&&Array.isArray(e[n]))for(var s=0;s<e[n].length;s++)"object"==typeof e[n][s]&&i(this._getExternalRefs(e[n][s]));else e[n]&&"object"==typeof e[n]&&i(this._getExternalRefs(e[n]));return t},_loadExternalRefs:function(e,t){var i=this,s=this._getExternalRefs(e),r=0,a=0,o=!1;n(s,function(e){if(!i.refs[e]){if(!i.options.ajax)throw"Must set ajax option to true to load external ref "+e;i.refs[e]="loading",a++;var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(4==n.readyState){if(200!==n.status)throw window.console.log(n),"Failed to fetch ref via ajax- "+e;var s;try{s=JSON.parse(n.responseText)}catch(l){throw window.console.log(l),"Failed to parse external ref "+e}if(!s||"object"!=typeof s)throw"External ref does not contain a valid schema - "+e;i.refs[e]=s,i._loadExternalRefs(s,function(){r++,r>=a&&!o&&(o=!0,t())})}},n.send()}}),a||t()},expandRefs:function(e){for(e=i({},e);e.$ref;){var t=e.$ref;delete e.$ref,this.refs[t]||(t=decodeURIComponent(t)),e=this.extendSchemas(e,this.refs[t])}return e},expandSchema:function(e){var t,s=this,r=i({},e);if("object"==typeof e.type&&(Array.isArray(e.type)?n(e.type,function(t,i){"object"==typeof i&&(e.type[t]=s.expandSchema(i))}):e.type=s.expandSchema(e.type)),"object"==typeof e.disallow&&(Array.isArray(e.disallow)?n(e.disallow,function(t,i){"object"==typeof i&&(e.disallow[t]=s.expandSchema(i))}):e.disallow=s.expandSchema(e.disallow)),e.anyOf&&n(e.anyOf,function(t,i){e.anyOf[t]=s.expandSchema(i)}),e.dependencies&&n(e.dependencies,function(t,i){"object"!=typeof i||Array.isArray(i)||(e.dependencies[t]=s.expandSchema(i))}),e.not&&(e.not=this.expandSchema(e.not)),e.allOf){for(t=0;t<e.allOf.length;t++)r=this.extendSchemas(r,this.expandSchema(e.allOf[t]));delete r.allOf}if(e["extends"]){if(Array.isArray(e["extends"]))for(t=0;t<e["extends"].length;t++)r=this.extendSchemas(r,this.expandSchema(e["extends"][t]));else r=this.extendSchemas(r,this.expandSchema(e["extends"]));delete r["extends"]}if(e.oneOf){var a=i({},r);for(delete a.oneOf,t=0;t<e.oneOf.length;t++)r.oneOf[t]=this.extendSchemas(this.expandSchema(e.oneOf[t]),a)}return this.expandRefs(r)},extendSchemas:function(e,t){e=i({},e),t=i({},t);var s=this,r={};return n(e,function(e,i){"undefined"!=typeof t[e]?"required"!==e&&"defaultProperties"!==e||"object"!=typeof i||!Array.isArray(i)?"type"!==e||"string"!=typeof i&&!Array.isArray(i)?r[e]="object"==typeof i&&Array.isArray(i)?i.filter(function(i){return-1!==t[e].indexOf(i)}):"object"==typeof i&&null!==i?s.extendSchemas(i,t[e]):i:("string"==typeof i&&(i=[i]),"string"==typeof t.type&&(t.type=[t.type]),r.type=t.type&&t.type.length?i.filter(function(e){return-1!==t.type.indexOf(e)}):i,1===r.type.length&&"string"==typeof r.type[0]?r.type=r.type[0]:0===r.type.length&&delete r.type):r[e]=i.concat(t[e]).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]):r[e]=i}),n(t,function(t,i){"undefined"==typeof e[t]&&(r[t]=i)}),r}},r.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},r.Validator=e.extend({init:function(e,t,i){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=i||{},this.translate=this.jsoneditor.translate||r.defaults.translate},validate:function(e){return this._validateSchema(this.schema,e)},_validateSchema:function(e,t,s){var a,o,l,u=this,c=[],h=JSON.stringify(t);if(s=s||"root",e=i({},this.jsoneditor.expandRefs(e)),e.required&&e.required===!0){if("undefined"==typeof t)return c.push({path:s,property:"required",message:this.translate("error_notset")}),c}else if("undefined"==typeof t){if(!this.jsoneditor.options.required_by_default)return c;c.push({path:s,property:"required",message:this.translate("error_notset")})}if(e["enum"]){for(a=!1,o=0;o<e["enum"].length;o++)h===JSON.stringify(e["enum"][o])&&(a=!0);a||c.push({path:s,property:"enum",message:this.translate("error_enum")})}if(e["extends"])for(o=0;o<e["extends"].length;o++)c=c.concat(this._validateSchema(e["extends"][o],t,s));if(e.allOf)for(o=0;o<e.allOf.length;o++)c=c.concat(this._validateSchema(e.allOf[o],t,s));if(e.anyOf){for(a=!1,o=0;o<e.anyOf.length;o++)if(!this._validateSchema(e.anyOf[o],t,s).length){a=!0;break}a||c.push({path:s,property:"anyOf",message:this.translate("error_anyOf")})}if(e.oneOf){a=0;var d=[];for(o=0;o<e.oneOf.length;o++){var p=this._validateSchema(e.oneOf[o],t,s);for(p.length||a++,l=0;l<p.length;l++)p[l].path=s+".oneOf["+o+"]"+p[l].path.substr(s.length);d=d.concat(p)}1!==a&&(c.push({path:s,property:"oneOf",message:this.translate("error_oneOf",[a])}),c=c.concat(d))}if(e.not&&(this._validateSchema(e.not,t,s).length||c.push({path:s,property:"not",message:this.translate("error_not")})),e.type)if(Array.isArray(e.type)){for(a=!1,o=0;o<e.type.length;o++)if(this._checkType(e.type[o],t)){a=!0;break}a||c.push({path:s,property:"type",message:this.translate("error_type_union")})}else this._checkType(e.type,t)||c.push({path:s,property:"type",message:this.translate("error_type",[e.type])});if(e.disallow)if(Array.isArray(e.disallow)){for(a=!0,o=0;o<e.disallow.length;o++)if(this._checkType(e.disallow[o],t)){a=!1;break}a||c.push({path:s,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(e.disallow,t)&&c.push({path:s,property:"disallow",message:this.translate("error_disallow",[e.disallow])});if("number"==typeof t){if(e.multipleOf||e.divisibleBy){var m=e.multipleOf||e.divisibleBy;a=t/m===Math.floor(t/m),window.math?a=window.math.mod(window.math.bignumber(t),window.math.bignumber(m)).equals(0):window.Decimal&&(a=new window.Decimal(t).mod(new window.Decimal(m)).equals(0)),a||c.push({path:s,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[m])})}e.hasOwnProperty("maximum")&&(a=e.exclusiveMaximum?t<e.maximum:t<=e.maximum,window.math?a=window.math[e.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(t),window.math.bignumber(e.maximum)):window.Decimal&&(a=new window.Decimal(t)[e.exclusiveMaximum?"lt":"lte"](new window.Decimal(e.maximum))),a||c.push({path:s,property:"maximum",message:this.translate(e.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[e.maximum])})),e.hasOwnProperty("minimum")&&(a=e.exclusiveMinimum?t>e.minimum:t>=e.minimum,window.math?a=window.math[e.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(t),window.math.bignumber(e.minimum)):window.Decimal&&(a=new window.Decimal(t)[e.exclusiveMinimum?"gt":"gte"](new window.Decimal(e.minimum))),a||c.push({path:s,property:"minimum",message:this.translate(e.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[e.minimum])}))}else if("string"==typeof t)e.maxLength&&(t+"").length>e.maxLength&&c.push({path:s,property:"maxLength",message:this.translate("error_maxLength",[e.maxLength])}),e.minLength&&(t+"").length<e.minLength&&c.push({path:s,property:"minLength",message:this.translate(1===e.minLength?"error_notempty":"error_minLength",[e.minLength])}),e.pattern&&(new RegExp(e.pattern).test(t)||c.push({path:s,property:"pattern",message:this.translate("error_pattern",[e.pattern])}));else if("object"==typeof t&&null!==t&&Array.isArray(t)){if(e.items)if(Array.isArray(e.items))for(o=0;o<t.length;o++)if(e.items[o])c=c.concat(this._validateSchema(e.items[o],t[o],s+"."+o));else{if(e.additionalItems===!0)break;if(!e.additionalItems){if(e.additionalItems===!1){c.push({path:s,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}c=c.concat(this._validateSchema(e.additionalItems,t[o],s+"."+o))}else for(o=0;o<t.length;o++)c=c.concat(this._validateSchema(e.items,t[o],s+"."+o));if(e.maxItems&&t.length>e.maxItems&&c.push({path:s,property:"maxItems",message:this.translate("error_maxItems",[e.maxItems])}),e.minItems&&t.length<e.minItems&&c.push({path:s,property:"minItems",message:this.translate("error_minItems",[e.minItems])}),e.uniqueItems){var f={};for(o=0;o<t.length;o++){if(a=JSON.stringify(t[o]),f[a]){c.push({path:s,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}f[a]=!0}}}else if("object"==typeof t&&null!==t){if(e.maxProperties){a=0;for(o in t)t.hasOwnProperty(o)&&a++;a>e.maxProperties&&c.push({path:s,property:"maxProperties",message:this.translate("error_maxProperties",[e.maxProperties])})}if(e.minProperties){a=0;for(o in t)t.hasOwnProperty(o)&&a++;a<e.minProperties&&c.push({path:s,property:"minProperties",message:this.translate("error_minProperties",[e.minProperties])})}if(e.required&&Array.isArray(e.required))for(o=0;o<e.required.length;o++)"undefined"==typeof t[e.required[o]]&&c.push({path:s,property:"required",message:this.translate("error_required",[e.required[o]])});var g={};if(e.properties)for(o in e.properties)e.properties.hasOwnProperty(o)&&(g[o]=!0,c=c.concat(this._validateSchema(e.properties[o],t[o],s+"."+o)));if(e.patternProperties)for(o in e.patternProperties)if(e.patternProperties.hasOwnProperty(o)){var v=new RegExp(o);for(l in t)t.hasOwnProperty(l)&&v.test(l)&&(g[l]=!0,c=c.concat(this._validateSchema(e.patternProperties[o],t[l],s+"."+l)))}if("undefined"!=typeof e.additionalProperties||!this.jsoneditor.options.no_additional_properties||e.oneOf||e.anyOf||(e.additionalProperties=!1),"undefined"!=typeof e.additionalProperties)for(o in t)if(t.hasOwnProperty(o)&&!g[o]){if(!e.additionalProperties){c.push({path:s,property:"additionalProperties",message:this.translate("error_additional_properties",[o])});break}if(e.additionalProperties===!0)break;c=c.concat(this._validateSchema(e.additionalProperties,t[o],s+"."+o))}if(e.dependencies)for(o in e.dependencies)if(e.dependencies.hasOwnProperty(o)&&"undefined"!=typeof t[o])if(Array.isArray(e.dependencies[o]))for(l=0;l<e.dependencies[o].length;l++)"undefined"==typeof t[e.dependencies[o][l]]&&c.push({path:s,property:"dependencies",message:this.translate("error_dependency",[e.dependencies[o][l]])});else c=c.concat(this._validateSchema(e.dependencies[o],t,s))}return n(r.defaults.custom_validators,function(i,n){c=c.concat(n.call(u,e,t,s))}),this.options.custom_validators&&n(this.options.custom_validators,function(i,n){c=c.concat(n.call(u,e,t,s))}),c},_checkType:function(e,t){return"string"==typeof e?"string"===e?"string"==typeof t:"number"===e?"number"==typeof t:"integer"===e?"number"==typeof t&&t===Math.floor(t):"boolean"===e?"boolean"==typeof t:"array"===e?Array.isArray(t):"object"===e?null!==t&&!Array.isArray(t)&&"object"==typeof t:"null"===e?null===t:!0:!this._validateSchema(e,t).length}}),r.AbstractEditor=e.extend({onChildEditorChange:function(){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(e){this.notify(),this.watch_listener&&this.watch_listener(),e&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(e){this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||r.defaults.translate,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=i({},this.options||{},e.schema.options||{},e),e.path||this.schema.id||(this.schema.id="root"),this.path=e.path||"root",this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.key=this.path.split(".").pop(),this.parent=e.parent,this.link_watchers=[],e.container&&this.setContainer(e.container)},setContainer:function(e){this.container=e,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var e=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var t,i,n,s,r;for(var a in this.schema.watch)if(this.schema.watch.hasOwnProperty(a)){if(t=this.schema.watch[a],Array.isArray(t)){if(t.length<2)continue;i=[t[0]].concat(t[1].split("."))}else i=t.split("."),e.theme.closest(e.container,'[data-schemaid="'+i[0]+'"]')||i.unshift("#");if(n=i.shift(),"#"===n&&(n=e.jsoneditor.schema.id||"root"),s=e.theme.closest(e.container,'[data-schemaid="'+n+'"]'),!s)throw"Could not find ancestor node with id "+n;r=s.getAttribute("data-schemapath")+"."+i.join("."),e.jsoneditor.watch(r,e.watch_listener),e.watched[a]=r}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))},getButton:function(e,t,i){var n="json-editor-btn-"+t;t=this.iconlib?this.iconlib.getIcon(t):null,!t&&i&&(e=i,i=null);var s=this.theme.getButton(e,t,i);return s.className+=" "+n+" ",s},setButtonText:function(e,t,i,n){return i=this.iconlib?this.iconlib.getIcon(i):null,!i&&n&&(t=n,n=null),this.theme.setButtonText(e,t,i,n)},addLink:function(e){this.link_holder&&this.link_holder.appendChild(e)},getLink:function(e){var t,i,n=e.mediaType||"application/javascript",s=n.split("/")[0],r=this.jsoneditor.compileTemplate(e.href,this.template_engine),a=null;if(e.download&&(a=e.download),a&&a!==!0&&(a=this.jsoneditor.compileTemplate(a,this.template_engine)),"image"===s){t=this.theme.getBlockLinkHolder(),i=document.createElement("a"),i.setAttribute("target","_blank");var o=document.createElement("img");this.theme.createImageLink(t,i,o),this.link_watchers.push(function(t){var n=r(t);i.setAttribute("href",n),i.setAttribute("title",e.rel||n),o.setAttribute("src",n)})}else if(["audio","video"].indexOf(s)>=0){t=this.theme.getBlockLinkHolder(),i=this.theme.getBlockLink(),i.setAttribute("target","_blank");var l=document.createElement(s);l.setAttribute("controls","controls"),this.theme.createMediaLink(t,i,l),this.link_watchers.push(function(t){var n=r(t);i.setAttribute("href",n),i.textContent=e.rel||n,l.setAttribute("src",n)})}else i=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,this.link_watchers.push(function(i){var n=r(i);t.setAttribute("href",n),t.textContent=e.rel||n});return a&&i&&(a===!0?i.setAttribute("download",""):this.link_watchers.push(function(e){i.setAttribute("download",a(e))})),e["class"]&&(i.className=i.className+" "+e["class"]),t},refreshWatchedFieldValues:function(){if(this.watched_values){var e={},t=!1,i=this;if(this.watched){var n,s;for(var r in this.watched)this.watched.hasOwnProperty(r)&&(s=i.jsoneditor.getEditor(this.watched[r]),n=s?s.getValue():null,i.watched_values[r]!==n&&(t=!0),e[r]=n)}return e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var e=0;e<this.header.childNodes.length;e++)if(3===this.header.childNodes[e].nodeType){this.header.childNodes[e].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(e){return this.header_text?this.header_text:e?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var e;if(this.header_template){e=i(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var n=0;n<this.link_watchers.length;n++)this.link_watchers[n](e)}},setValue:function(e){this.value=e},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var e=this;this.unregister(this),n(this.watched,function(t,i){e.jsoneditor.unwatch(i,e.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&"object"==typeof e&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),"string"==typeof e){if("number"===e)return 0;if("boolean"===e)return!1;if("integer"===e)return 0;if("string"===e)return"";if("object"===e)return{};if("array"===e)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return"boolean"==typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},getDisplayText:function(e){var t=[],i={};n(e,function(e,t){t.title&&(i[t.title]=i[t.title]||0,i[t.title]++),t.description&&(i[t.description]=i[t.description]||0,i[t.description]++),t.format&&(i[t.format]=i[t.format]||0,i[t.format]++),t.type&&(i[t.type]=i[t.type]||0,i[t.type]++)}),n(e,function(e,n){var s;s="string"==typeof n?n:n.title&&i[n.title]<=1?n.title:n.format&&i[n.format]<=1?n.format:n.type&&i[n.type]<=1?n.type:n.description&&i[n.description]<=1?n.descripton:n.title?n.title:n.format?n.format:n.type?n.type:n.description?n.description:JSON.stringify(n).length<50?JSON.stringify(n):"type",t.push(s)});var s={};return n(t,function(e,n){s[n]=s[n]||0,s[n]++,i[n]>1&&(t[e]=n+" "+s[n])}),t},getOption:function(e){try{throw"getOption is deprecated"}catch(t){window.console.error(t)}return this.options[e]},showValidationErrors:function(){}}),r.defaults.editors["null"]=r.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),r.defaults.editors.string=r.AbstractEditor.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(e,t,i){if((!this.template||i)&&(null===e||"undefined"==typeof e?e="":"object"==typeof e?e=JSON.stringify(e):"string"!=typeof e&&(e=""+e),e!==this.serialized)){var n=this.sanitize(e);if(this.input.value!==n){this.input.value=n,this.sceditor_instance?this.sceditor_instance.val(n):this.epiceditor?this.epiceditor.importFile(null,n):this.ace_editor&&this.ace_editor.setValue(n);var s=i||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(s)}}},getNumColumns:function(){var e,t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return e="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(t,e))},build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var t=this.schema.minimum||0,i=this.schema.maximum||Math.max(100,t+1),n=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),i%this.schema.multipleOf&&(i=Math.floor(i/this.schema.multipleOf)*this.schema.multipleOf),n=this.schema.multipleOf),this.input=this.theme.getRangeInput(t,i,n)}else["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),e.schema.template)return this.value=e.value,void 0;var i=this.value,n=e.sanitize(i);i!==n&&(this.value=n),e.is_dirty=!0,e.refreshValue(),e.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(e){if(e){var t,i=e.offsetHeight;if(e.offsetHeight<e.scrollHeight)for(t=0;e.offsetHeight<e.scrollHeight+3&&!(t>100);)t++,i++,e.style.height=i+"px";else{for(t=0;e.offsetHeight>=e.scrollHeight+3&&!(t>100);)t++,i--,e.style.height=i+"px";e.style.height=i+1+"px"}}},this.input.addEventListener("keyup",function(){e.adjust_height(this)}),this.input.addEventListener("change",function(){e.adjust_height(this)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){e.input.parentNode&&e.afterInputReady(),e.adjust_height&&e.adjust_height(e.input)}),this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var e,t=this;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)e=i({},{plugins:"html"===t.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},r.plugins.sceditor,t.options.sceditor_options||{}),window.jQuery(t.input).sceditor(e),t.sceditor_instance=window.jQuery(t.input).sceditor("instance"),t.sceditor_instance.blur(function(){var e=window.jQuery("<div>"+t.sceditor_instance.val()+"</div>");
window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",e).remove(),t.input.value=e.html(),t.value=t.input.value,t.is_dirty=!0,t.onChange(!0)});else if("markdown"===this.input_type&&window.EpicEditor)this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",e=i({},r.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(e).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var e=t.epiceditor.exportFile();t.input.value=e,t.value=e,t.is_dirty=!0,t.onChange(!0)});else if(window.ace){var n=this.input_type;("cpp"===n||"c++"===n||"c"===n)&&(n="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),r.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+r.plugins.ace.theme),n=window.ace.require("ace/mode/"+n),n&&this.ace_editor.getSession().setMode(new n.Mode),this.ace_editor.on("change",function(){var e=t.ace_editor.getValue();t.input.value=e,t.refreshValue(),t.is_dirty=!0,t.onChange(!0)})}t.theme.afterInputReady(t.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var i=[];n(e,function(e,n){n.path===t.path&&i.push(n.message)}),i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input)}}),r.defaults.editors.number=r.defaults.editors.string.extend({sanitize:function(e){return(e+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}}),r.defaults.editors.integer=r.defaults.editors.number.extend({sanitize:function(e){return e+="",e.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),r.defaults.editors.object=r.AbstractEditor.extend({getDefault:function(){return i({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].register()},unregister:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].enable()},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].disable()},layoutEditors:function(){var e,t,i=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(e,t){var n=i.editors[e].schema.propertyOrder,s=i.editors[t].schema.propertyOrder;return"number"!=typeof n&&(n=1e3),"number"!=typeof s&&(s=1e3),n-s});var s;if("grid"===this.format){var r=[];for(n(this.property_order,function(e,t){var n=i.editors[t];if(!n.property_removed){for(var s=!1,a=n.options.hidden?0:n.options.grid_columns||n.getNumColumns(),o=n.options.hidden?0:n.container.offsetHeight,l=0;l<r.length;l++)r[l].width+a<=12&&(!o||.5*r[l].minh<o&&2*r[l].maxh>o)&&(s=l);s===!1&&(r.push({width:0,minh:999999,maxh:0,editors:[]}),s=r.length-1),r[s].editors.push({key:t,width:a,height:o}),r[s].width+=a,r[s].minh=Math.min(r[s].minh,o),r[s].maxh=Math.max(r[s].maxh,o)}}),e=0;e<r.length;e++)if(r[e].width<12){var a=!1,o=0;for(t=0;t<r[e].editors.length;t++)a===!1?a=t:r[e].editors[t].width>r[e].editors[a].width&&(a=t),r[e].editors[t].width*=12/r[e].width,r[e].editors[t].width=Math.floor(r[e].editors[t].width),o+=r[e].editors[t].width;12>o&&(r[e].editors[a].width+=12-o),r[e].width=12}if(this.layout===JSON.stringify(r))return!1;for(this.layout=JSON.stringify(r),s=document.createElement("div"),e=0;e<r.length;e++){var l=this.theme.getGridRow();for(s.appendChild(l),t=0;t<r[e].editors.length;t++){var u=r[e].editors[t].key,c=this.editors[u];c.options.hidden?c.container.style.display="none":this.theme.setGridColumnSize(c.container,r[e].editors[t].width),l.appendChild(c.container)}}}else s=document.createElement("div"),n(this.property_order,function(e,t){var n=i.editors[t];if(!n.property_removed){var r=i.theme.getGridRow();s.appendChild(r),n.options.hidden?n.container.style.display="none":i.theme.setGridColumnSize(n.container,12),r.appendChild(n.container)}});this.row_container.innerHTML="",this.row_container.appendChild(s)}},getPropertySchema:function(e){var t=this.schema.properties[e]||{};t=i({},t);var n=this.schema.properties[e]?!0:!1;if(this.schema.patternProperties)for(var s in this.schema.patternProperties)if(this.schema.patternProperties.hasOwnProperty(s)){var r=new RegExp(s);r.test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[s]),n=!0)}return!n&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(t=i({},this.schema.additionalProperties)),t},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var e=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)n(this.schema.properties,function(t,i){var n=e.jsoneditor.getEditorClass(i);e.editors[t]=e.jsoneditor.createEditor(n,{jsoneditor:e.jsoneditor,schema:i,path:e.path+"."+t,parent:e,compact:!0,required:!0}),e.editors[t].preBuild();var s=e.editors[t].options.hidden?0:e.editors[t].options.grid_columns||e.editors[t].getNumColumns();e.minwidth+=s,e.maxwidth+=s}),this.no_link_holder=!0;else{if(this.options.table)throw"Not supported yet";this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],n(this.schema.properties,function(t,i){e.isRequired({key:t,schema:i})&&e.schema.defaultProperties.push(t)})):e.schema.defaultProperties=Object.keys(e.schema.properties)),e.maxwidth+=1,n(this.schema.defaultProperties,function(t,i){e.addObjectProperty(i,!0),e.editors[i]&&(e.minwidth=Math.max(e.minwidth,e.editors[i].options.grid_columns||e.editors[i].getNumColumns()),e.maxwidth+=e.editors[i].options.grid_columns||e.editors[i].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(t,i){var n=e.editors[t].schema.propertyOrder,s=e.editors[i].schema.propertyOrder;return"number"!=typeof n&&(n=1e3),"number"!=typeof s&&(s=1e3),n-s})},build:function(){var e=this;if(this.options.table_row)this.editor_holder=this.container,n(this.editors,function(t,i){var n=e.theme.getTableCell();e.editor_holder.appendChild(n),i.setContainer(n),i.build(),i.postBuild(),e.editors[t].options.hidden&&(n.style.display="none"),e.editors[t].options.input_width&&(n.style.width=e.editors[t].options.input_width)});else{if(this.options.table)throw"Not supported yet";this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.addproperty_input.value){if(e.editors[e.addproperty_input.value])return window.alert("there is already a property with that name"),void 0;e.addObjectProperty(e.addproperty_input.value),e.editors[e.addproperty_input.value]&&e.editors[e.addproperty_input.value].disable(),e.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),n(this.editors,function(t,i){var n=e.theme.getGridColumn();e.row_container.appendChild(n),i.setContainer(n),i.build(),i.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.editor_holder.style.display="",e.collapsed=!1,e.setButtonText(e.toggle_button,"","collapse",e.translate("button_collapse"))):(e.editor_holder.style.display="none",e.collapsed=!0,e.setButtonText(e.toggle_button,"","expand",e.translate("button_expand")))}),this.options.collapsed&&s(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,n(this.property_order,function(t,i){e.editor_holder.appendChild(e.editors[i].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON()}catch(t){throw window.alert("invalid JSON"),t}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(e,t,i){var n;this.schema.properties[e]&&(n=this.schema.properties[e].propertyOrder),"number"!=typeof n&&(n=1e3),t.propertyOrder=n;for(var s=0;s<i.childNodes.length;s++){var r=i.childNodes[s];if(t.propertyOrder<r.propertyOrder){this.addproperty_list.insertBefore(t,r),t=null;break}}t&&this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(e){var t,i,n,s,r=this;return t=r.theme.getCheckbox(),t.style.width="auto",n=this.schema.properties[e]&&this.schema.properties[e].title?this.schema.properties[e].title:e,i=r.theme.getCheckboxLabel(n),s=r.theme.getFormControl(i,t),s.style.paddingBottom=s.style.marginBottom=s.style.paddingTop=s.style.marginTop=0,s.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,s,this.addproperty_list),t.checked=e in this.editors,t.addEventListener("change",function(){t.checked?r.addObjectProperty(e):r.removeObjectProperty(e),r.onChange(!0)}),r.addproperty_checkboxes[e]=t,t},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(e){this.editors[e]&&(this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(e,t){var i=this;if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[e]))return;var n=i.getPropertySchema(e),s=i.jsoneditor.getEditorClass(n);if(i.editors[e]=i.jsoneditor.createEditor(s,{jsoneditor:i.jsoneditor,schema:n,path:i.path+"."+e,parent:i}),i.editors[e].preBuild(),!t){var r=i.theme.getChildEditorHolder();i.editor_holder.appendChild(r),i.editors[e].setContainer(r),i.editors[e].build(),i.editors[e].postBuild()}i.cached_editors[e]=i.editors[e]}t||(i.refreshValue(),i.layoutEditors())}},onChildEditorChange:function(e){this.refreshValue(),this._super(e)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){n(this.cached_editors,function(e,t){t.destroy()}),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},getValue:function(){var e=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var t in e)e.hasOwnProperty(t)&&(e[t]||delete e[t]);return e},refreshValue:function(){this.value={};for(var e in this.editors)this.editors.hasOwnProperty(e)&&(this.value[e]=this.editors[e].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties)return this.addproperty_controls.style.display="none",void 0;var e,t=!1,i=!1,n=0,s=!1;for(e in this.editors)this.editors.hasOwnProperty(e)&&n++;t=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&n>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={};for(e in this.cached_editors)this.cached_editors.hasOwnProperty(e)&&(this.addPropertyCheckbox(e),this.isRequired(this.cached_editors[e])&&e in this.editors&&(this.addproperty_checkboxes[e].disabled=!0),"undefined"!=typeof this.schema.minProperties&&n<=this.schema.minProperties?(this.addproperty_checkboxes[e].disabled=this.addproperty_checkboxes[e].checked,this.addproperty_checkboxes[e].checked||(s=!0)):e in this.editors?(s=!0,i=!0):t||this.schema.properties.hasOwnProperty(e)?(this.addproperty_checkboxes[e].disabled=!1,s=!0):this.addproperty_checkboxes[e].disabled=!0);this.canHaveAdditionalProperties()&&(s=!0);for(e in this.schema.properties)this.schema.properties.hasOwnProperty(e)&&(this.cached_editors[e]||(s=!0,this.addPropertyCheckbox(e)));s?this.canHaveAdditionalProperties()?this.addproperty_add.disabled=t?!1:!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(e){return"boolean"==typeof e.schema.required?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(e.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},setValue:function(e,t){var i=this;e=e||{},("object"!=typeof e||Array.isArray(e))&&(e={}),n(this.cached_editors,function(n,s){"undefined"!=typeof e[n]?(i.addObjectProperty(n),s.setValue(e[n],t)):t||i.isRequired(s)?s.setValue(s.getDefault(),t):i.removeObjectProperty(n)}),n(e,function(e,n){i.cached_editors[e]||(i.addObjectProperty(e),i.editors[e]&&i.editors[e].setValue(n,t))}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(e){var t=this,i=[],s=[];n(e,function(e,n){n.path===t.path?i.push(n):s.push(n)}),this.error_holder&&(i.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})):this.error_holder.style.display="none"),this.options.table_row&&(i.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),n(this.editors,function(e,t){t.showValidationErrors(s)})}}),r.defaults.editors.array=r.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){var e=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,e.width+2),4):e.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].enable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!1),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!1),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!1);this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].disable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!0),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!0),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!0);this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this.refreshTabs(!0),this._super(e)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=e.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(e){return Array.isArray(this.schema.items)?e>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?i({},this.schema.additionalItems):void 0:i({},this.schema.items[e]):this.schema.items?i({},this.schema.items):{}},getItemInfo:function(e){var t=this.getItemSchema(e);this.item_info=this.item_info||{};var i=JSON.stringify(t);return"undefined"!=typeof this.item_info[i]?this.item_info[i]:(t=this.jsoneditor.expandRefs(t),this.item_info[i]={title:t.title||"item","default":t["default"],width:12,child_editors:t.properties||t.items},this.item_info[i])},getElementEditor:function(e){var t=this.getItemInfo(e),i=this.getItemSchema(e);i=this.jsoneditor.expandRefs(i),i.title=t.title+" "+(e+1);var n,s=this.jsoneditor.getEditorClass(i);n=this.tabs_holder?this.theme.getTabContent():t.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(n);var r=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:i,container:n,path:this.path+"."+e,parent:this,required:!0});return r.preBuild(),r.build(),r.postBuild(),r.title_controls||(r.array_controls=this.theme.getButtonHolder(),n.appendChild(r.array_controls)),r},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(e){if(this.rows){var t=this;n(this.rows,function(i,n){e&&(n.tab&&n.tab.parentNode&&n.tab.parentNode.removeChild(n.tab),t.destroyRow(n,!0),t.row_cache[i]=null),t.rows[i]=null}),t.rows=[],e&&(t.row_cache=[])}},destroyRow:function(e,t){var i=e.container;t?(e.destroy(),i.parentNode&&i.parentNode.removeChild(i),e.tab&&e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),i.style.display="none",e.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(e){var t=this;n(this.rows,function(i,n){n.tab&&(e?n.tab_text.textContent=n.getHeaderText():n.tab===t.active_tab?(t.theme.markTabActive(n.tab),n.container.style.display=""):(t.theme.markTabInactive(n.tab),n.container.style.display="none"))})},setValue:function(e,t){e=e||[],Array.isArray(e)||(e=[e]);var i=JSON.stringify(e);if(i!==this.serialized){if(this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length)["default"]);this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax()));var s=this;n(e,function(e,i){s.rows[e]?s.rows[e].setValue(i,t):s.row_cache[e]?(s.rows[e]=s.row_cache[e],s.rows[e].setValue(i,t),s.rows[e].container.style.display="",s.rows[e].tab&&(s.rows[e].tab.style.display=""),s.rows[e].register()):s.addRow(i,t)});for(var r=e.length;r<s.rows.length;r++)s.destroyRow(s.rows[r]),s.rows[r]=null;s.rows=s.rows.slice(0,e.length);var a=null;n(s.rows,function(e,t){return t.tab===s.active_tab?(a=t.tab,!1):void 0}),!a&&s.rows.length&&(a=s.rows[0].tab),s.active_tab=a,s.refreshValue(t),s.refreshTabs(!0),s.refreshTabs(),s.onChange()}},refreshValue:function(e){var t=this,i=this.value?this.value.length:0;if(this.value=[],n(this.rows,function(e,i){t.value[e]=i.getValue()}),i!==this.value.length||e){var s=this.schema.minItems&&this.schema.minItems>=this.rows.length;n(this.rows,function(e,i){i.movedown_button&&(i.movedown_button.style.display=e===t.rows.length-1?"none":""),i.delete_button&&(i.delete_button.style.display=s?"none":""),t.value[e]=i.getValue()});var r=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",s||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",r=!0)):(s||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",r=!0),s||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",r=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",r=!0),this.controls.style.display=!this.collapsed&&r?"inline-block":"none"}},addRow:function(e,t){var i=this,s=this.rows.length;i.rows[s]=this.getElementEditor(s),i.row_cache[s]=i.rows[s],i.tabs_holder&&(i.rows[s].tab_text=document.createElement("span"),i.rows[s].tab_text.textContent=i.rows[s].getHeaderText(),i.rows[s].tab=i.theme.getTab(i.rows[s].tab_text),i.rows[s].tab.addEventListener("click",function(e){i.active_tab=i.rows[s].tab,i.refreshTabs(),e.preventDefault(),e.stopPropagation()}),i.theme.addTab(i.tabs_holder,i.rows[s].tab));var r=i.rows[s].title_controls||i.rows[s].array_controls;i.hide_delete_buttons||(i.rows[s].delete_button=this.getButton(i.getItemTitle(),"delete",this.translate("button_delete_row_title",[i.getItemTitle()])),i.rows[s].delete_button.className+=" delete",i.rows[s].delete_button.setAttribute("data-i",s),i.rows[s].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),s=i.getValue(),r=[],a=null;n(s,function(e,n){return e===t?(i.rows[e].tab===i.active_tab&&(i.rows[e+1]?a=i.rows[e].tab:e&&(a=i.rows[e-1].tab)),void 0):(r.push(n),void 0)}),i.setValue(r),a&&(i.active_tab=a,i.refreshTabs()),i.onChange(!0)}),r&&r.appendChild(i.rows[s].delete_button)),s&&!i.hide_move_buttons&&(i.rows[s].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),i.rows[s].moveup_button.className+=" moveup",i.rows[s].moveup_button.setAttribute("data-i",s),i.rows[s].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i");if(!(0>=t)){var n=i.getValue(),s=n[t-1];n[t-1]=n[t],n[t]=s,i.setValue(n),i.active_tab=i.rows[t-1].tab,i.refreshTabs(),i.onChange(!0)}}),r&&r.appendChild(i.rows[s].moveup_button)),i.hide_move_buttons||(i.rows[s].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),i.rows[s].movedown_button.className+=" movedown",i.rows[s].movedown_button.setAttribute("data-i",s),i.rows[s].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),n=i.getValue();if(!(t>=n.length-1)){var s=n[t+1];n[t+1]=n[t],n[t]=s,i.setValue(n),i.active_tab=i.rows[t+1].tab,i.refreshTabs(),i.onChange(!0)}}),r&&r.appendChild(i.rows[s].movedown_button)),e&&i.rows[s].setValue(e,t),i.refreshTabs()},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button);var t=e.row_holder.style.display,i=e.controls.style.display;this.toggle_button.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel&&(e.panel.style.display=""),e.row_holder.style.display=t,e.tabs_holder&&(e.tabs_holder.style.display=""),e.controls.style.display=i,e.setButtonText(this,"","collapse",e.translate("button_collapse"))):(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder&&(e.tabs_holder.style.display="none"),e.controls.style.display="none",e.panel&&(e.panel.style.display="none"),e.setButtonText(this,"","expand",e.translate("button_expand")))
}),this.options.collapsed&&s(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.rows.length;e.row_cache[i]?(e.rows[i]=e.row_cache[i],e.rows[i].setValue(e.rows[i].getDefault(),!0),e.rows[i].container.style.display="",e.rows[i].tab&&(e.rows[i].tab.style.display=""),e.rows[i].register()):e.addRow(),e.active_tab=e.rows[i].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue(),n=null;e.rows.length>1&&e.rows[e.rows.length-1].tab===e.active_tab&&(n=e.rows[e.rows.length-2].tab),i.pop(),e.setValue(i),n&&(e.active_tab=n,e.refreshTabs()),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button),e.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(e){var t=this,i=[],s=[];n(e,function(e,n){n.path===t.path?i.push(n):s.push(n)}),this.error_holder&&(i.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})):this.error_holder.style.display="none"),n(this.rows,function(e,t){t.showValidationErrors(s)})}}),r.defaults.editors.table=r.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e["default"]||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this._super()},build:function(){var e=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var t=this.getElementEditor(0,!0);if(this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var i=t.getChildEditors(),n=t.property_order||Object.keys(i),s=0;s<n.length;s++){var r=e.theme.getTableHeaderCell(i[n[s]].getTitle());i[n[s]].options.hidden&&(r.style.display="none"),e.header_row.appendChild(r)}else e.header_row.appendChild(e.theme.getTableHeaderCell(this.item_title));t.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=e.theme.getTableHeaderCell(" "),e.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(){this.refreshValue(),this._super()},getItemDefault:function(){return i({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(e,t){var n=i({},this.schema.items),s=this.jsoneditor.getEditorClass(n,this.jsoneditor),r=this.row_holder.appendChild(this.theme.getTableRow()),a=r;this.item_has_child_editors||(a=this.theme.getTableCell(),r.appendChild(a));var o=this.jsoneditor.createEditor(s,{jsoneditor:this.jsoneditor,schema:n,container:a,path:this.path+"."+e,parent:this,compact:!0,table_row:!0});return o.preBuild(),t||(o.build(),o.postBuild(),o.controls_cell=r.appendChild(this.theme.getTableCell()),o.row=r,o.table_controls=this.theme.getButtonHolder(),o.controls_cell.appendChild(o.table_controls),o.table_controls.style.margin=0,o.table_controls.style.padding=0),o},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(e,t){if(e=e||[],this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems));var i=JSON.stringify(e);if(i!==this.serialized){var s=!1,r=this;n(e,function(e,t){r.rows[e]?r.rows[e].setValue(t):(r.addRow(t),s=!0)});for(var a=e.length;a<r.rows.length;a++){var o=r.rows[a].container;r.item_has_child_editors||r.rows[a].row.parentNode.removeChild(r.rows[a].row),r.rows[a].destroy(),o.parentNode&&o.parentNode.removeChild(o),r.rows[a]=null,s=!0}r.rows=r.rows.slice(0,e.length),r.refreshValue(),(s||t)&&r.refreshRowButtons(),r.onChange()}},refreshRowButtons:function(){var e=this,t=this.schema.minItems&&this.schema.minItems>=this.rows.length,i=!1;n(this.rows,function(n,s){s.movedown_button&&(n===e.rows.length-1?s.movedown_button.style.display="none":(i=!0,s.movedown_button.style.display="")),s.delete_button&&(t?s.delete_button.style.display="none":(i=!0,s.delete_button.style.display="")),s.moveup_button&&(i=!0)}),n(this.rows,function(e,t){t.controls_cell.style.display=i?"":"none"}),this.controls_header_cell.style.display=i?"":"none";var s=!1;this.value.length?1===this.value.length?(this.table.style.display="",this.remove_all_rows_button.style.display="none",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",s=!0)):(this.table.style.display="",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",s=!0),t||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",s=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",s=!0),this.controls.style.display=s?"":"none"},refreshValue:function(){var e=this;this.value=[],n(this.rows,function(t,i){e.value[t]=i.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(e){var t=this,i=this.rows.length;t.rows[i]=this.getElementEditor(i);var s=t.rows[i].table_controls;this.hide_delete_buttons||(t.rows[i].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),t.rows[i].delete_button.className+=" delete",t.rows[i].delete_button.setAttribute("data-i",i),t.rows[i].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),s=t.getValue(),r=[];n(s,function(e,t){e!==i&&r.push(t)}),t.setValue(r),t.onChange(!0)}),s.appendChild(t.rows[i].delete_button)),i&&!this.hide_move_buttons&&(t.rows[i].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),t.rows[i].moveup_button.className+=" moveup",t.rows[i].moveup_button.setAttribute("data-i",i),t.rows[i].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(0>=i)){var n=t.getValue(),s=n[i-1];n[i-1]=n[i],n[i]=s,t.setValue(n),t.onChange(!0)}}),s.appendChild(t.rows[i].moveup_button)),this.hide_move_buttons||(t.rows[i].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),t.rows[i].movedown_button.className+=" movedown",t.rows[i].movedown_button.setAttribute("data-i",i),t.rows[i].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),n=t.getValue();if(!(i>=n.length-1)){var s=n[i+1];n[i+1]=n[i],n[i]=s,t.setValue(n),t.onChange(!0)}}),s.appendChild(t.rows[i].movedown_button)),e&&t.rows[i].setValue(e)},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel.style.display="",e.setButtonText(this,"","collapse",e.translate("button_collapse"))):(e.collapsed=!0,e.panel.style.display="none",e.setButtonText(this,"","expand",e.translate("button_expand")))}),this.options.collapsed&&s(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.addRow(),e.refreshValue(),e.refreshRowButtons(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue();i.pop(),e.setValue(i),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button)}}),r.defaults.editors.multiple=r.AbstractEditor.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();this.switcher.disabled=!0,this._super()},switchEditor:function(e){var t=this;this.editors[e]||this.buildChildEditor(e);var i=t.getValue();t.type=e,t.register(),n(t.editors,function(e,n){n&&(t.type===e?(t.keep_values&&n.setValue(i,!0),n.container.style.display=""):n.container.style.display="none")}),t.refreshValue(),t.refreshHeaderText()},buildChildEditor:function(e){var t=this,n=this.types[e],s=t.theme.getChildEditorHolder();t.editor_holder.appendChild(s);var r;"string"==typeof n?(r=i({},t.schema),r.type=n):(r=i({},t.schema,n),r=t.jsoneditor.expandRefs(r),n.required&&Array.isArray(n.required)&&t.schema.required&&Array.isArray(t.schema.required)&&(r.required=t.schema.required.concat(n.required)));var a=t.jsoneditor.getEditorClass(r);t.editors[e]=t.jsoneditor.createEditor(a,{jsoneditor:t.jsoneditor,schema:r,container:s,path:t.path,parent:t,required:!0}),t.editors[e].preBuild(),t.editors[e].build(),t.editors[e].postBuild(),t.editors[e].header&&(t.editors[e].header.style.display="none"),t.editors[e].option=t.switcher_options[e],s.addEventListener("change_header_text",function(){t.refreshHeaderText()}),e!==t.type&&(s.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!=typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(this.schema.type&&"any"!==this.schema.type)this.types=Array.isArray(this.schema.type)?this.schema.type:[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=this.schema.disallow;"object"==typeof e&&Array.isArray(e)||(e=[e]);var t=[];n(this.types,function(i,n){-1===e.indexOf(n)&&t.push(n)}),this.types=t}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var e=this,t=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),t.appendChild(this.switcher),this.switcher.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.switchEditor(e.display_text.indexOf(this.value)),e.onChange(!0)}),this.editor_holder=document.createElement("div"),t.appendChild(this.editor_holder);var s={};e.jsoneditor.options.custom_validators&&(s.custom_validators=e.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),n(this.types,function(t,n){e.editors[t]=!1;var a;"string"==typeof n?(a=i({},e.schema),a.type=n):(a=i({},e.schema,n),n.required&&Array.isArray(n.required)&&e.schema.required&&Array.isArray(e.schema.required)&&(a.required=e.schema.required.concat(n.required))),e.validators[t]=new r.Validator(e.jsoneditor,a,s)}),this.switchEditor(0)},onChildEditorChange:function(){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var e=this.getDisplayText(this.types);n(this.switcher_options,function(t,i){i.textContent=e[t]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(e,t){var i=this;n(this.validators,function(t,n){return n.validate(e).length?void 0:(i.type=t,i.switcher.value=i.display_text[t],!1)}),this.switchEditor(this.type),this.editors[this.type].setValue(e,t),this.refreshValue(),i.onChange()},destroy:function(){n(this.editors,function(e,t){t&&t.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(e){var t=this;if(this.oneOf||this.anyOf){var s=this.oneOf?"oneOf":"anyOf";n(this.editors,function(r,a){if(a){var o=t.path+"."+s+"["+r+"]",l=[];n(e,function(e,n){if(n.path.substr(0,o.length)===o){var s=i({},n);s.path=t.path+s.path.substr(o.length),l.push(s)}}),a.showValidationErrors(l)}})}else n(this.editors,function(t,i){i&&i.showValidationErrors(e)})}}),r.defaults.editors["enum"]=r.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container,this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[];for(var e=this,t=0;t<this["enum"].length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this["enum"][t]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",function(){e.selected=e.select_options.indexOf(this.value),e.value=e["enum"][e.selected],e.refreshValue(),e.onChange(!0)}),this.value=this["enum"][0],this.refreshValue(),1===this["enum"].length&&(this.switcher.style.display="none")},refreshValue:function(){var e=this;e.selected=-1;var t=JSON.stringify(this.value);return n(this["enum"],function(i,n){return t===JSON.stringify(n)?(e.selected=i,!1):void 0}),e.selected<0?(e.setValue(e["enum"][0]),void 0):(this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected],void 0)},enable:function(){this.always_disabled||(this.switcher.disabled=!1),this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(e){var t=this;if(null===e)return"<em>null</em>";if("object"==typeof e){var i="";return n(e,function(n,s){var r=t.getHTML(s);Array.isArray(e)||(r="<div><em>"+n+"</em>: "+r+"</div>"),i+="<li>"+r+"</li>"}),i=Array.isArray(e)?"<ol>"+i+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+i+"</ul>"}return"boolean"==typeof e?e?"true":"false":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},setValue:function(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),r.defaults.editors.select=r.AbstractEditor.extend({setValue:function(e){e=this.typecast(e||"");var t=e;this.enum_values.indexOf(t)<0&&(t=this.enum_values[0]),this.value!==t&&(this.input.value=this.enum_options[this.enum_values.indexOf(t)],this.select2&&this.select2.select2("val",this.input.value),this.value=t,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?!!e:"number"===this.schema.type?1*e:"integer"===this.schema.type?Math.floor(1*e):""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var s=this.schema.options&&this.schema.options.enum_titles||[];n(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(s[t]||i),e.enum_values[t]=e.typecast(i)}),this.isRequired()||(e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0))}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1",""],e.enum_values=[!0,!1],this.isRequired()||(e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0));else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(t=0;t<this.schema.enumSource.length;t++)this.enumSource[t]="string"==typeof this.schema.enumSource[t]?{source:this.schema.enumSource[t]}:Array.isArray(this.schema.enumSource[t])?this.schema.enumSource[t]:i({},this.schema.enumSource[t]);else this.enumSource=this.schema.enumValue?[{source:this.schema.enumSource,value:this.schema.enumValue}]:[{source:this.schema.enumSource}];for(t=0;t<this.enumSource.length;t++)this.enumSource[t].value&&(this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine)),this.enumSource[t].title&&(this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine)),this.enumSource[t].filter&&(this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e,t=this.input.value;e=-1===this.enum_options.indexOf(t)?this.enum_values[0]:this.enum_values[this.enum_options.indexOf(t)],e!==this.value&&(this.value=e,this.onChange(!0))},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var e=i({},r.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=i(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){t.input.value=t.select2.select2("val"),t.onInputChange()}),this.select2.on("change",function(){t.input.value=t.select2.select2("val"),t.onInputChange()})}else this.select2=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],s=0;s<this.enumSource.length;s++)if(Array.isArray(this.enumSource[s]))i=i.concat(this.enumSource[s]),n=n.concat(this.enumSource[s]);else{var r=[];if(r=Array.isArray(this.enumSource[s].source)?this.enumSource[s].source:e[this.enumSource[s].source]){if(this.enumSource[s].slice&&(r=Array.prototype.slice.apply(r,this.enumSource[s].slice)),this.enumSource[s].filter){var a=[];for(t=0;t<r.length;t++)this.enumSource[s].filter({i:t,item:r[t],watched:e})&&a.push(r[t]);r=a}var o=[],l=[];for(t=0;t<r.length;t++){var u=r[t];l[t]=this.enumSource[s].value?this.enumSource[s].value({i:t,item:u}):r[t],o[t]=this.enumSource[s].title?this.enumSource[s].title({i:t,item:u}):l[t]}i=i.concat(l),n=n.concat(o)}}var c=this.value;this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,this.select2&&this.select2.select2("destroy"),-1!==i.indexOf(c)?(this.input.value=c,this.value=c):(this.input.value=i[0],this.value=i[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0)),this._super()},disable:function(){this.input.disabled=!0,this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),r.defaults.editors.selectize=r.AbstractEditor.extend({setValue:function(e){e=this.typecast(e||"");var t=e;this.enum_values.indexOf(t)<0&&(t=this.enum_values[0]),this.value!==t&&(this.input.value=this.enum_options[this.enum_values.indexOf(t)],this.selectize&&this.selectize[0].selectize.addItem(t),this.value=t,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?!!e:"number"===this.schema.type?1*e:"integer"===this.schema.type?Math.floor(1*e):""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var s=this.schema.options&&this.schema.options.enum_titles||[];n(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(s[t]||i),e.enum_values[t]=e.typecast(i)})}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1","0"],e.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(t=0;t<this.schema.enumSource.length;t++)this.enumSource[t]="string"==typeof this.schema.enumSource[t]?{source:this.schema.enumSource[t]}:Array.isArray(this.schema.enumSource[t])?this.schema.enumSource[t]:i({},this.schema.enumSource[t]);else this.enumSource=this.schema.enumValue?[{source:this.schema.enumSource,value:this.schema.enumValue}]:[{source:this.schema.enumSource}];for(t=0;t<this.enumSource.length;t++)this.enumSource[t].value&&(this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine)),this.enumSource[t].title&&(this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine)),this.enumSource[t].filter&&(this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e=this.input.value,t=e;-1===this.enum_options.indexOf(e)&&(t=this.enum_options[0]),this.value=this.enum_values[this.enum_options.indexOf(e)],this.onChange(!0)},setupSelectize:function(){var e=this;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(this.enum_options.length>=2||this.enum_options.length&&this.enumSource)){var t=i({},r.plugins.selectize);this.schema.options&&this.schema.options.selectize_options&&(t=i(t,this.schema.options.selectize_options)),this.selectize=window.jQuery(this.input).selectize(i(t,{create:!0,onChange:function(){e.onInputChange()}}))}else this.selectize=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelectize()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],s=0;s<this.enumSource.length;s++)if(Array.isArray(this.enumSource[s]))i=i.concat(this.enumSource[s]),n=n.concat(this.enumSource[s]);else if(e[this.enumSource[s].source]){var r=e[this.enumSource[s].source];if(this.enumSource[s].slice&&(r=Array.prototype.slice.apply(r,this.enumSource[s].slice)),this.enumSource[s].filter){var a=[];for(t=0;t<r.length;t++)this.enumSource[s].filter({i:t,item:r[t]})&&a.push(r[t]);r=a}var o=[],l=[];for(t=0;t<r.length;t++){var u=r[t];l[t]=this.enumSource[s].value?this.enumSource[s].value({i:t,item:u}):r[t],o[t]=this.enumSource[s].title?this.enumSource[s].title({i:t,item:u}):l[t]}i=i.concat(l),n=n.concat(o)}var c=this.value;this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,-1!==i.indexOf(c)?(this.input.value=c,this.value=c):(this.input.value=i[0],this.value=i[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.selectize?this.updateSelectizeOptions(i):this.setupSelectize(),this._super()}},updateSelectizeOptions:function(e){var t=this.selectize[0].selectize,i=this;t.off(),t.clearOptions();for(var n in e)t.addOption({value:e[n],text:e[n]});t.addItem(this.value),t.on("change",function(){i.onInputChange()})},enable:function(){this.always_disabled||(this.input.disabled=!1,this.selectize&&this.selectize[0].selectize.unlock()),this._super()},disable:function(){this.input.disabled=!0,this.selectize&&this.selectize[0].selectize.lock(),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.selectize&&(this.selectize[0].selectize.destroy(),this.selectize=null),this._super()}}),r.defaults.editors.multiselect=r.AbstractEditor.extend({preBuild:function(){this._super();var e;this.select_options={},this.select_values={};var t=this.jsoneditor.expandRefs(this.schema.items||{}),i=t["enum"]||[],n=t.options?t.options.enum_titles||[]:[];for(this.option_keys=[],this.option_titles=[],e=0;e<i.length;e++)this.sanitize(i[e])===i[e]&&(this.option_keys.push(i[e]+""),this.option_titles.push((n[e]||i[e])+""),this.select_values[i[e]+""]=i[e])},build:function(){var e,t=this;
if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var i=this.theme.getCheckboxLabel(this.option_titles[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(i,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(i){i.preventDefault(),i.stopPropagation();var n=[];for(e=0;e<t.option_keys.length;e++)(t.select_options[t.option_keys[e]].selected||t.select_options[t.option_keys[e]].checked)&&n.push(t.select_values[t.option_keys[e]]);t.updateValue(n),t.onChange(!0)})},setValue:function(e){var t;for(e=e||[],"object"!=typeof e?e=[e]:Array.isArray(e)||(e=[]),t=0;t<e.length;t++)"string"!=typeof e[t]&&(e[t]+="");for(t in this.select_options)this.select_options.hasOwnProperty(t)&&(this.select_options[t]["select"===this.input_type?"selected":"checked"]=-1!==e.indexOf(t));this.updateValue(e),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var e=window.jQuery.extend({},r.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=i(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){var e=t.select2.select2("val");t.value=e,t.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var e=this.getTitle().length;for(var t in this.select_values)this.select_values.hasOwnProperty(t)&&(e=Math.max(e,(this.select_values[t]+"").length+4));return Math.min(12,Math.max(e/7,2))},updateValue:function(e){for(var t=!1,i=[],n=0;n<e.length;n++)if(this.select_options[e[n]+""]){var s=this.sanitize(this.select_values[e[n]]);i.push(s),s!==e[n]&&(t=!0)}else t=!0;return this.value=i,this.select2&&this.select2.select2("val",this.value),t},sanitize:function(e){return"number"===this.schema.items.type?1*e:"integer"===this.schema.items.type?Math.floor(1*e):""+e},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!1);this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=!0;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!0);this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),r.defaults.editors.base64=r.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),e){if(this.preview.innerHTML="<strong>Type:</strong> "+e+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===e.substr(0,5)){this.preview.innerHTML+="<br>";var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),r.defaults.editors.upload=r.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.preview_value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}var t=this.schema.description;t||(t=""),this.preview=this.theme.getFormInputDescription(t),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var e=this,t=this.preview_value.match(/^data:([^;,]+)[;,]/);t&&(t=t[1]),t||(t="unknown");var i=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+t+", <strong>Size:</strong> "+i.size+" bytes","image"===t.substr(0,5)){this.preview.innerHTML+="<br>";var n=document.createElement("img");n.style.maxWidth="100%",n.style.maxHeight="100px",n.src=this.preview_value,this.preview.appendChild(n)}this.preview.innerHTML+="<br>";var s=this.getButton("Upload","upload","Upload");this.preview.appendChild(s),s.addEventListener("click",function(t){t.preventDefault(),s.setAttribute("disabled","disabled"),e.theme.removeInputError(e.uploader),e.theme.getProgressBar&&(e.progressBar=e.theme.getProgressBar(),e.preview.appendChild(e.progressBar)),e.jsoneditor.options.upload(e.path,i,{success:function(t){e.setValue(t),e.parent?e.parent.onChildEditorChange(e):e.jsoneditor.onChange(),e.progressBar&&e.preview.removeChild(e.progressBar),s.removeAttribute("disabled")},failure:function(t){e.theme.addInputError(e.uploader,t),e.progressBar&&e.preview.removeChild(e.progressBar),s.removeAttribute("disabled")},updateProgress:function(t){e.progressBar&&(t?e.theme.updateProgressBar(e.progressBar,t):e.theme.updateProgressBarUnknown(e.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),r.defaults.editors.checkbox=r.AbstractEditor.extend({setValue:function(e){this.value=!!e,this.input.checked=this.value,this.onChange()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var e=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.value=this.checked,e.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()}}),r.defaults.editors.arraySelectize=r.AbstractEditor.extend({build:function(){this.title=this.theme.getFormInputLabel(this.getTitle()),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.error_holder=document.createElement("div"),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description)),this.input=document.createElement("select"),this.input.setAttribute("multiple","multiple");var e=this.theme.getFormControl(this.title,this.input,this.description);this.container.appendChild(e),this.container.appendChild(this.error_holder),window.jQuery(this.input).selectize({delimiter:!1,createOnBlur:!0,create:!0})},postBuild:function(){var e=this;this.input.selectize.on("change",function(){e.refreshValue(),e.onChange(!0)})},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},empty:function(){},setValue:function(e,t){var i=this;e=e||[],Array.isArray(e)||(e=[e]),this.input.selectize.clearOptions(),this.input.selectize.clear(!0),e.forEach(function(e){i.input.selectize.addOption({text:e,value:e})}),this.input.selectize.setValue(e),this.refreshValue(t)},refreshValue:function(){this.value=this.input.selectize.getValue()},showValidationErrors:function(e){var t=this,i=[],s=[];n(e,function(e,n){n.path===t.path?i.push(n):s.push(n)}),this.error_holder&&(i.length?(this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})):this.error_holder.style.display="none")}});var a=function(){var e=document.documentElement;return e.matches?"matches":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":void 0}();r.AbstractTheme=e.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.cssFloat="right",e.style.marginLeft="10px",e},getModal:function(){var e=document.createElement("div");return e.style.backgroundColor="white",e.style.border="1px solid black",e.style.boxShadow="3px 3px black",e.style.position="absolute",e.style.zIndex="10",e.style.display="none",e},getGridContainer:function(){var e=document.createElement("div");return e},getGridRow:function(){var e=document.createElement("div");return e.className="row",e},getGridColumn:function(){var e=document.createElement("div");return e},setGridColumnSize:function(){},getLink:function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t},disableHeader:function(e){e.style.color="#ccc"},disableLabel:function(e){e.style.color="#ccc"},enableHeader:function(e){e.style.color=""},enableLabel:function(e){e.style.color=""},getFormInputLabel:function(e){var t=document.createElement("label");return t.appendChild(document.createTextNode(e)),t},getCheckboxLabel:function(e){var t=this.getFormInputLabel(e);return t.style.fontWeight="normal",t},getHeader:function(e){var t=document.createElement("h3");return"string"==typeof e?t.textContent=e:t.appendChild(e),t},getCheckbox:function(){var e=this.getFormInputField("checkbox");return e.style.display="inline-block",e.style.width="auto",e},getMultiCheckboxHolder:function(e,t,i){var n=document.createElement("div");t&&(t.style.display="block",n.appendChild(t));for(var s in e)e.hasOwnProperty(s)&&(e[s].style.display="inline-block",e[s].style.marginRight="20px",n.appendChild(e[s]));return i&&n.appendChild(i),n},getSelectInput:function(e){var t=document.createElement("select");return e&&this.setSelectOptions(t,e),t},getSwitcher:function(e){var t=this.getSelectInput(e);return t.style.backgroundColor="transparent",t.style.display="inline-block",t.style.fontStyle="italic",t.style.fontWeight="normal",t.style.height="auto",t.style.marginBottom=0,t.style.marginLeft="5px",t.style.padding="0 0 0 3px",t.style.width="auto",t},getSwitcherOptions:function(e){return e.getElementsByTagName("option")},setSwitcherOptions:function(e,t,i){this.setSelectOptions(e,t,i)},setSelectOptions:function(e,t,i){i=i||[],e.innerHTML="";for(var n=0;n<t.length;n++){var s=document.createElement("option");s.setAttribute("value",t[n]),s.textContent=i[n]||t[n],e.appendChild(s)}},getTextareaInput:function(){var e=document.createElement("textarea");return e.style=e.style||{},e.style.width="100%",e.style.height="300px",e.style.boxSizing="border-box",e},getRangeInput:function(e,t,i){var n=this.getFormInputField("range");return n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",i),n},getFormInputField:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t},afterInputReady:function(){},getFormControl:function(e,t,i){var n=document.createElement("div");return n.className="form-control",e&&n.appendChild(e),"checkbox"===t.type?e.insertBefore(t,e.firstChild):n.appendChild(t),i&&n.appendChild(i),n},getIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e.style.borderLeft="1px solid #ccc",e},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(e){var t=document.createElement("p");return t.innerHTML=e,t},getCheckboxDescription:function(e){return this.getDescription(e)},getFormInputDescription:function(e){return this.getDescription(e)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(e,t,i){var n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,i),n},setButtonText:function(e,t,i,n){e.innerHTML="",i&&(e.appendChild(i),e.innerHTML+=" "),e.appendChild(document.createTextNode(t)),n&&e.setAttribute("title",n)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(e){var t=document.createElement("th");return t.textContent=e,t},getTableCell:function(){var e=document.createElement("td");return e},getErrorMessage:function(e){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t},addInputError:function(){},removeInputError:function(){},addTableRowError:function(){},removeTableRowError:function(){},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",e},applyStyles:function(e,t){e.style=e.style||{};for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},closest:function(e,t){for(;e&&e!==document;){if(!e[a])return!1;if(e[a](t))return e;e=e.parentNode}return!1},getTab:function(e){var t=document.createElement("div");return t.appendChild(e),t.style=t.style||{},this.applyStyles(t,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(e){this.applyStyles(e,{opacity:1,background:"white"})},markTabInactive:function(e){this.applyStyles(e,{opacity:.5,background:""})},addTab:function(e,t){e.children[0].appendChild(t)},getBlockLink:function(){var e=document.createElement("a");return e.style.display="block",e},getBlockLinkHolder:function(){var e=document.createElement("div");return e},getLinksHolder:function(){var e=document.createElement("div");return e},createMediaLink:function(e,t,i){e.appendChild(t),i.style.width="100%",e.appendChild(i)},createImageLink:function(e,t,i){e.appendChild(t),t.appendChild(i)}}),r.defaults.themes.bootstrap2=r.AbstractTheme.extend({getRangeInput:function(e,t,i){return this._super(e,t,i)},getGridContainer:function(){var e=document.createElement("div");return e.className="container-fluid",e},getGridRow:function(){var e=document.createElement("div");return e.className="row-fluid",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t.style.fontWeight="bold",t},setGridColumnSize:function(e,t){e.className="span"+t},getSelectInput:function(e){var t=this._super(e);return t.style.width="auto",t.style.maxWidth="98%",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="98%",t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".control-group"),e.controls=this.closest(e,".controls"),this.closest(e,".compact")&&(e.controlgroup.className=e.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),e.controls.className=e.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),e.style.marginBottom=0))},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-small",e.style.paddingBottom=0,e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-inline",t.textContent=e,t},getFormControl:function(e,t,i){var n=document.createElement("div");n.className="control-group";var s=document.createElement("div");return s.className="controls",e&&"checkbox"===t.getAttribute("type")?(n.appendChild(s),e.className+=" checkbox",e.appendChild(t),s.appendChild(e),s.style.height="30px"):(e&&(e.className+=" control-label",n.appendChild(e)),s.appendChild(t),n.appendChild(s)),i&&s.appendChild(i),n},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+=" btn btn-default",n},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&e.controls&&(e.controlgroup.className+=" error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.className="tabbable tabs-left",e.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",e},getTab:function(e){var t=document.createElement("li"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="tab-pane active",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("div");return t.className="bar",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.className="progress progress-striped active",e.firstChild.style.width="100%")}}),r.defaults.themes.bootstrap3=r.AbstractTheme.extend({getSelectInput:function(e){var t=this._super(e);return t.className+="form-control",t},setGridColumnSize:function(e,t){e.className="col-md-"+t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var e=document.createElement("textarea");return e.className="form-control",e},getRangeInput:function(e,t,i){return this._super(e,t,i)},getFormInputField:function(e){var t=this._super(e);return"checkbox"!==e&&(t.className+="form-control"),t},getFormControl:function(e,t,i){var n=document.createElement("div");return e&&"checkbox"===t.type?(n.className+=" checkbox",e.appendChild(t),e.style.fontSize="14px",n.style.marginTop="0",n.appendChild(e),t.style.position="relative",t.style.cssFloat="left"):(n.className+=" form-group",e&&(e.className+=" control-label",n.appendChild(e)),n.appendChild(t)),i&&n.appendChild(i),n},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-sm",e.style.paddingBottom=0,e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-block",t.innerHTML=e,t},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+="btn btn-default",n},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&(e.controlgroup.className+=" has-error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",e.className="rows",e},getTab:function(e){var t=document.createElement("a");return t.className="list-group-item",t.setAttribute("href","#"),t.appendChild(e),t},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},getProgressBar:function(){var e=0,t=100,i=0,n=document.createElement("div");n.className="progress";var s=document.createElement("div");return s.className="progress-bar",s.setAttribute("role","progressbar"),s.setAttribute("aria-valuenow",i),s.setAttribute("aria-valuemin",e),s.setAttribute("aria-valuenax",t),s.innerHTML=i+"%",n.appendChild(s),n},updateProgressBar:function(e,t){if(e){var i=e.firstChild,n=t+"%";i.setAttribute("aria-valuenow",t),i.style.width=n,i.innerHTML=n}},updateProgressBarUnknown:function(e){if(e){var t=e.firstChild;e.className="progress progress-striped active",t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}}}),r.defaults.themes.foundation=r.AbstractTheme.extend({getChildEditorHolder:function(){var e=document.createElement("div");return e.style.marginBottom="15px",e},getSelectInput:function(e){var t=this._super(e);return t.style.minWidth="none",t.style.padding="5px",t.style.marginTop="3px",t},getSwitcher:function(e){var t=this._super(e);return t.style.paddingRight="8px",t},afterInputReady:function(e){this.closest(e,".compact")&&(e.style.marginBottom=0),e.group=this.closest(e,".form-control")},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="100%",t.style.marginBottom="checkbox"===e?"0":"12px",t},getFormInputDescription:function(e){var t=document.createElement("p");return t.textContent=e,t.style.marginTop="-10px",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=document.createElement("div");return e.className="panel",e.style.paddingBottom=0,e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.verticalAlign="middle",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="button-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+=" small button",n},addInputError:function(e,t){e.group&&(e.group.className+=" error",e.errmsg?e.errmsg.style.display="":(e.insertAdjacentHTML("afterend",'<small class="error"></small>'),e.errmsg=e.parentNode.getElementsByClassName("error")[0]),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.group.className=e.group.className.replace(/ error/g,""),e.errmsg.style.display="none")},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("span");return t.className="meter",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.firstChild.style.width="100%")}}),r.defaults.themes.foundation3=r.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t},getTabHolder:function(){var e=document.createElement("div");return e.className="row",e.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",e},setGridColumnSize:function(e,t){var i=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];e.className="columns "+i[t]},getTab:function(e){var t=document.createElement("dd"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),r.defaults.themes.foundation4=r.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},setGridColumnSize:function(e,t){e.className="columns large-"+t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t}}),r.defaults.themes.foundation5=r.defaults.themes.foundation.extend({getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},setGridColumnSize:function(e,t){e.className="columns medium-"+t},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className=n.className.replace(/\s*small/g,"")+" tiny",n},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",e},getTab:function(e){var t=document.createElement("dd"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),r.defaults.themes.foundation6=r.defaults.themes.foundation5.extend({getIndentedPanel:function(){var e=document.createElement("div");return e.className="callout secondary",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="button-group tiny",e.style.marginBottom=0,e},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t},getFormControl:function(e,t,i){var n=document.createElement("div");return n.className="form-control",e&&n.appendChild(e),"checkbox"===t.type?e.insertBefore(t,e.firstChild):e?e.appendChild(t):n.appendChild(t),i&&e.appendChild(i),n},addInputError:function(e,t){if(e.group){if(e.group.className+=" error",e.errmsg)e.errmsg.style.display="",e.className="";else{var i=document.createElement("span");i.className="form-error is-visible",e.group.getElementsByTagName("label")[0].appendChild(i),e.className=e.className+" is-invalid-input",e.errmsg=i}e.errmsg.textContent=t}},removeInputError:function(e){e.errmsg&&(e.className=e.className.replace(/ is-invalid-input/g,""),e.errmsg.parentNode&&e.errmsg.parentNode.removeChild(e.errmsg))}}),r.defaults.themes.html=r.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t.style.marginBottom="3px",t.style.fontWeight="bold",t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8em",t.style.margin=0,t.style.display="inline-block",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=this._super();return e.style.border="1px solid #ddd",e.style.padding="5px",e.style.margin="5px",e.style.borderRadius="3px",e},getChildEditorHolder:function(){var e=this._super();return e.style.marginBottom="8px",e
},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.fontSize=".8em",e.style.verticalAlign="middle",e},getTable:function(){var e=this._super();return e.style.borderBottom="1px solid #ccc",e.style.marginBottom="5px",e},addInputError:function(e,t){if(e.style.borderColor="red",e.errmsg)e.errmsg.style.display="block";else{var i=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",i.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){e.style.borderColor="",e.errmsg&&(e.errmsg.style.display="none")},getProgressBar:function(){var e=100,t=0,i=document.createElement("progress");return i.setAttribute("max",e),i.setAttribute("value",t),i},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),r.defaults.themes.jqueryui=r.AbstractTheme.extend({getTable:function(){var e=this._super();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e},getTableHeaderCell:function(e){var t=this._super(e);return t.className="ui-state-active",t.style.fontWeight="bold",t},getTableCell:function(){var e=this._super();return e.className="ui-widget-content",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e},getFormInputDescription:function(e){var t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t},getFormControl:function(e,t,i){var n=this._super(e,t,i);return"checkbox"===t.type?(n.style.lineHeight="25px",n.style.padding="3px 0"):n.style.padding="4px 0 8px 0",n},getDescription:function(e){var t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",t.textContent=e,t},getButtonHolder:function(){var e=document.createElement("div");return e.className="ui-buttonset",e.style.fontSize=".7em",e},getFormInputLabel:function(e){var t=document.createElement("label");return t.style.fontWeight="bold",t.style.display="block",t.textContent=e,t},getButton:function(e,t,i){var n=document.createElement("button");n.className="ui-button ui-widget ui-state-default ui-corner-all",t&&!e?(n.className+=" ui-button-icon-only",t.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(t)):t?(n.className+=" ui-button-text-icon-primary",t.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(t)):n.className+=" ui-button-text-only";var s=document.createElement("span");return s.className="ui-button-text",s.textContent=e||i||".",n.appendChild(s),n.setAttribute("title",i),n},setButtonText:function(e,t,i,n){e.innerHTML="",e.className="ui-button ui-widget ui-state-default ui-corner-all",i&&!t?(e.className+=" ui-button-icon-only",i.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(i)):i?(e.className+=" ui-button-text-icon-primary",i.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(i)):e.className+=" ui-button-text-only";var s=document.createElement("span");s.className="ui-button-text",s.textContent=t||n||".",e.appendChild(s),e.setAttribute("title",n)},getIndentedPanel:function(){var e=document.createElement("div");return e.className="ui-widget-content ui-corner-all",e.style.padding="1em 1.4em",e.style.marginBottom="20px",e},afterInputReady:function(e){e.controls||(e.controls=this.closest(e,".form-control"))},addInputError:function(e,t){e.controls&&(e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.className="ui-state-error",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none")},markTabActive:function(e){e.className=e.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(e){e.className=e.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}}),r.defaults.themes.barebones=r.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t},getFormInputDescription:function(e){var t=this._super(e);return t},getIndentedPanel:function(){var e=this._super();return e},getChildEditorHolder:function(){var e=this._super();return e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e},getTable:function(){var e=this._super();return e},addInputError:function(e,t){if(e.errmsg)e.errmsg.style.display="block";else{var i=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),i.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){e.style.borderColor="",e.errmsg&&(e.errmsg.style.display="none")},getProgressBar:function(){var e=100,t=0,i=document.createElement("progress");return i.setAttribute("max",e),i.setAttribute("value",t),i},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),r.AbstractIconLib=e.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:null},getIcon:function(e){var t=this.getIconClass(e);if(!t)return null;var i=document.createElement("i");return i.className=t,i}}),r.defaults.iconlibs.bootstrap2=r.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),r.defaults.iconlibs.bootstrap3=r.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),r.defaults.iconlibs.fontawesome3=r.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),r.defaults.iconlibs.fontawesome4=r.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),r.defaults.iconlibs.foundation2=r.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),r.defaults.iconlibs.foundation3=r.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),r.defaults.iconlibs.jqueryui=r.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),r.defaults.templates["default"]=function(){return{compile:function(e){var t=e.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),i=t&&t.length;if(!i)return function(){return e};for(var n=[],s=function(e){var i,s=t[e].replace(/[{}]+/g,"").trim().split("."),r=s.length;if(r>1){var a;i=function(t){for(a=t,e=0;r>e&&(a=a[s[e]],a);e++);return a}}else s=s[0],i=function(e){return e[s]};n.push({s:t[e],r:i})},r=0;i>r;r++)s(r);return function(t){var s,a=e+"";for(r=0;i>r;r++)s=n[r],a=a.replace(s.s,s.r(t));return a}}}},r.defaults.templates.ejs=function(){return window.EJS?{compile:function(e){var t=new window.EJS({text:e});return function(e){return t.render(e)}}}:!1},r.defaults.templates.handlebars=function(){return window.Handlebars},r.defaults.templates.hogan=function(){return window.Hogan?{compile:function(e){var t=window.Hogan.compile(e);return function(e){return t.render(e)}}}:!1},r.defaults.templates.markup=function(){return window.Mark&&window.Mark.up?{compile:function(e){return function(t){return window.Mark.up(e,t)}}}:!1},r.defaults.templates.mustache=function(){return window.Mustache?{compile:function(e){return function(t){return window.Mustache.render(e,t)}}}:!1},r.defaults.templates.swig=function(){return window.swig},r.defaults.templates.underscore=function(){return window._?{compile:function(e){return function(t){return window._.template(e,t)}}}:!1},r.defaults.theme="html",r.defaults.template="default",r.defaults.options={},r.defaults.translate=function(e,t){var i=r.defaults.languages[r.defaults.language];if(!i)throw"Unknown language "+r.defaults.language;var n=i[e]||r.defaults.languages[r.defaults.default_language][e];if("undefined"==typeof n)throw"Unknown translate string "+e;if(t)for(var s=0;s<t.length;s++)n=n.replace(new RegExp("\\{\\{"+s+"}}","g"),t[s]);return n},r.defaults.default_language="en",r.defaults.language=r.defaults.default_language,r.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand"},r.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{},selectize:{}},n(r.defaults.editors,function(e,t){r.defaults.editors[e].options=t.options||{}}),r.defaults.resolvers.unshift(function(e){return"string"!=typeof e.type?"multiple":void 0}),r.defaults.resolvers.unshift(function(e){return!e.type&&e.properties?"object":void 0}),r.defaults.resolvers.unshift(function(e){return"string"==typeof e.type?e.type:void 0}),r.defaults.resolvers.unshift(function(e){return"boolean"===e.type?"checkbox"===e.format||e.options&&e.options.checkbox?"checkbox":r.plugins.selectize.enable?"selectize":"select":void 0}),r.defaults.resolvers.unshift(function(e){return"any"===e.type?"multiple":void 0}),r.defaults.resolvers.unshift(function(e){return"string"===e.type&&e.media&&"base64"===e.media.binaryEncoding?"base64":void 0}),r.defaults.resolvers.unshift(function(e){return"string"===e.type&&"url"===e.format&&e.options&&e.options.upload===!0&&window.FileReader?"upload":void 0}),r.defaults.resolvers.unshift(function(e){return"array"==e.type&&"table"==e.format?"table":void 0}),r.defaults.resolvers.unshift(function(e){return e.enumSource?r.plugins.selectize.enable?"selectize":"select":void 0}),r.defaults.resolvers.unshift(function(e){if(e["enum"]){if("array"===e.type||"object"===e.type)return"enum";if("number"===e.type||"integer"===e.type||"string"===e.type)return r.plugins.selectize.enable?"selectize":"select"}}),r.defaults.resolvers.unshift(function(e){if("array"===e.type&&e.items&&!Array.isArray(e.items)&&e.uniqueItems&&["string","number","integer"].indexOf(e.items.type)>=0){if(e.items["enum"])return"multiselect";if(r.plugins.selectize.enable&&"string"===e.items.type)return"arraySelectize"}}),r.defaults.resolvers.unshift(function(e){return e.oneOf||e.anyOf?"multiple":void 0}),function(){if(window.jQuery||window.Zepto){var e=window.jQuery||window.Zepto;e.jsoneditor=r.defaults,e.fn.jsoneditor=function(e){var t=this,i=this.data("jsoneditor");if("value"===e){if(!i)throw"Must initialize jsoneditor before getting/setting the value";if(!(arguments.length>1))return i.getValue();i.setValue(arguments[1])}else{if("validate"===e){if(!i)throw"Must initialize jsoneditor before validating";return arguments.length>1?i.validate(arguments[1]):i.validate()}"destroy"===e?i&&(i.destroy(),this.data("jsoneditor",null)):(i&&i.destroy(),i=new r(this.get(0),e),this.data("jsoneditor",i),i.on("change",function(){t.trigger("change")}),i.on("ready",function(){t.trigger("ready")}))}return this}}}(),window.JSONEditor=r}(),JSONEditor}),Mindbreeze.define("client/templates",["client/template","client/templateregistry","component!base","utils/dom","utils/jsonpath","underscore"],function(e,t,i,n,s,r){function a(e,i){var s=e.designer_menu,a=s[0].group;t.add({id:e.name,name:a.name,description:a.description,getAdders:function(){return s},create:function(t){t=t||{},t.template=t.template||e.name;var s=document.createElement("div");return r.forEach(t,function(e,t){s.setAttribute("data-"+n.AttributeModel.camelCaseToSeparated(t),i.serializeAttribute(e,t))}),s}})}var o=function(){};return o.prototype={add:function(t){r.forEach(t.attributes,function(e){e.hasOwnProperty("defaultValue")&&(e["default"]=e.defaultValue)});var i=new e.Schema({attributes:t.attributes});i.useCamelCaseNames=!0;var n=e.extend({schema:i,hasContent:function(){return!!t.content},getContentSchema:function(){return t.content},localPath:function(){var e=this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase();return e.path?s.parsePath(e.path):[]},model:function(e){var t,i,n=e.model,s=this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase();return s.model&&(t=s.model,n=this.application.getModel(t)),i=this.localPath(),n&&n.submodel&&i&&i.length&&(n=n.submodel(i)),n},getOptions:function(e){return e},createView:function(e){var t=this.model(e),e=this.getOptions(e),i=new this.constructor.View(r.extend({},this.attributeModel.get(),this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase(),e,{model:t,el:this.createEl(),template:this}));return this.instances.push(i),e.node&&!this.hasContent()&&r.each(e.node.children,function(i){this.createSubView(i,e,t)},this),i}});return n.DEFAULT_TEMPLATE=t.default_template,n.View=t.view,t.designer_menu&&a(t,i),Mindbreeze.define("component!"+t.name,function(){return n}),n},View:i},new o}),Mindbreeze.define("client/loader",["client/application","service/channels","api/v2/resources","utils/browser","jquery","underscore"],function(e,t,i,n,s,r){function a(e){return e&&e.replace(/[^"]*:8443\/editor\/[^\/]*\//g,"").replace(/<script[^>*]src="[^"]*client.js[^"]*"[^>]*>[^<]*<\/script>/,"")}var o={};return o.loadAppFromResource=function(n,o){var n=n||{},l=n.appid,u=n.target,c=n.sourceURL,h=null!=c,d=[(c||e.scriptLocation+"../..")+"/api/v2/"],p="../../../resource/app_"+l+"_snippet.html",m=n.startApp!==!1,f={};h&&(f.sources=d),f=r.extend(f,o);var g=new t(d,{trace:!1}),v=new i.ServiceFactory;v.get(p,function(t){if(t){var i=a(t);s(u).replaceWith(i),m&&new e(f)}},g)},o}),Mindbreeze.define("utils/csv",[],function(){return{csvFromArrays:function(e,t,i){var t=void 0!==t?t:{},n={};n.callback=void 0!==i&&"function"==typeof i?i:!1,n.separator="separator"in t?t.separator:";",n.delimiter="delimiter"in t?t.delimiter:'"';var s,r,a,o,l="";for(a=0;a<e.length;a++){for(s=e[a],r=[],o=0;o<s.length;o++){var u=void 0===s[o]||null===s[o]?"":s[o].toString();u.indexOf(n.delimiter)>-1&&(u=u.replace(n.delimiter,n.delimiter+n.delimiter));var c="\n|\r|S|D";c=c.replace("S",n.separator),c=c.replace("D",n.delimiter),u.search(c)>-1&&(u=n.delimiter+u+n.delimiter),r.push(u)}l+=r.join(n.separator)+"\r\n"}return n.callback?(n.callback("",l),void 0):l},CSVToArray:function(e,t){t=t||",";for(var i=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],s=null;s=i.exec(e);){var r=s[1];if(r.length&&r!=t&&n.push([]),s[2])var a=s[2].replace(new RegExp('""',"g"),'"');else var a=s[3];n[n.length-1].push(a)}return n}}}),Mindbreeze.define("text!components/results/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-attr-role="group" data-attr-aria-labelledby="result_{{id}}" data-class-name="media mb-clickable-phone" data-attr-data-action-object="{ &quot;toggleOpen&quot;: { &quot;enabledSelector&quot;: &quot;.visible-phone&quot; }}">\n  <span class="pull-left media-object" aria-hidden="true">\n    {{#actions.data[0].value.href?}}<a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" tabindex="-1" target="_blank">{{/actions.data[0].value.href?}}\n      {{{icon}}}\n    {{#actions.data[0].value.href?}}</a>{{/actions.data[0].value.href?}}\n  </span>\n  <div class="media-body">\n    <h3 class="media-heading" id="result_{{id}}">\n      {{#actions.data[0].value.href?}}<a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" target="_blank">{{/actions.data[0].value.href?}}\n      {{{title}}}\n      {{#actions.data[0].value.href?}}</a>{{/actions.data[0].value.href?}}\n    </h3>\n    <ul class="mb-actions mb-separated hidden-phone mb-visible-open mb-no-print">\n      {{#actions.data}} <li class="nowrap">{{{html}}}</li>{{/actions.data}}\n      <li class="nowrap"><a role="button" class="action collect" tabindex="0" data-action-object="{&quot;collectResult&quot;:{}}">{{{i18n.Collect}}}</a></li>\n    </ul>\n    <dl class="mb-metadata mb-comma-separated-values mb-horizontal mb-separated hidden-phone mb-visible-open mb-small">\n      <dt class="mb-acc">{{i18n.date}}</dt><dd>{{{mes:date}}}</dd>\n      {{#mes:summary}}\n        <dt>{{name}}</dt>{{#data}}<dd>{{#actions?}}<span class="mb-dropdown-toggle"><a data-action-object="{&quot;openMenu&quot;: {&quot;propertyId&quot;: &quot;{{property:id}}&quot;, &quot;position&quot;: {{data:position}} }}" class="nowrap">{{/actions?}}{{{html}}}{{#actions?}} <span class="caret"></span></a></span> {{/actions?}}</span></dd>{{/data}}\n      {{/mes:summary}}\n    </dl>\n    {{#content}}\n      <p class="mb-content">{{{.}}}</p>\n    {{/content}}\n    {{#mes:nested.data?}}\n      <ul class="mb-nested">\n        {{#mes:nested}}\n          <div class="media mb-nested" data-action-object="{ &quot;toggleOpen&quot;: { &quot;enabledSelector&quot;: &quot;.visible-phone&quot; }}">\n            {{#actions.data[0].value.href?}}\n              <a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" target="_blank">\n            {{/actions.data[0].value.href?}}\n              <b>{{{title}}}</b>\n            {{#actions.data[0].value.href?}}\n              </a>\n            {{/actions.data[0].value.href?}}\n            <ul class="mb-actions mb-separated hidden-phone mb-visible-submenu-open mb-no-print">\n              {{#actions.data}} <li class="nowrap"><small>{{{html}}}</small></li>{{/actions.data}}\n            </ul>\n            <dl class="mb-comma-separated-values mb-separated mb-summarized-description-list mb-small"><dd>{{{mes:date}}}</dd></dl>\n          </div>\n        {{/mes:nested}}\n      </ul>\n    {{/mes:nested.data?}}\n    <span class="clearfix"></span>\n  </div>\n</script>\n'}),Mindbreeze.define("jquery-ui-autocomplete",["jquery"],function(e){return function(e,t){function i(t,i){var s,r,a,o=t.nodeName.toLowerCase();return"area"===o?(s=t.parentNode,r=s.name,t.href&&r&&"map"===s.nodeName.toLowerCase()?(a=e("img[usemap=#"+r+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(r,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var r="Width"===n?["Left","Right"]:["Top","Bottom"],a=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?o["inner"+n].call(this):this.each(function(){e(this).css(a,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,r=e.ui[t].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})}(e),function(e,t){var i=0,n=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(r){}s(t)},e.widget=function(t,i,n){var s,r,a,o,l={},u=t.split(".")[0];t=t.split(".")[1],s=u+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[u]=e[u]||{},r=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new a(e,t)},e.extend(a,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),o=new i,o.options=e.widget.extend({},o.options),e.each(n,function(t,n){return e.isFunction(n)?(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},s=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,r=this._superApply;return this._super=e,this._superApply=s,t=n.apply(this,arguments),this._super=i,this._superApply=r,t}}(),void 0):(l[t]=n,void 0)}),a.prototype=e.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:s}),r?(e.each(r._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete r._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(i){for(var s,r,a=n.call(arguments,1),o=0,l=a.length;l>o;o++)for(s in a[o])r=a[o][s],a[o].hasOwnProperty(s)&&r!==t&&(i[s]=e.isPlainObject(r)?e.isPlainObject(i[s])?e.widget.extend({},i[s],r):e.widget.extend({},r):r);return i},e.widget.bridge=function(i,s){var r=s.prototype.widgetFullName||i;e.fn[i]=function(a){var o="string"==typeof a,l=n.call(arguments,1),u=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,o?this.each(function(){var n,s=e.data(this,r);return s?e.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,l),n!==s&&n!==t?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new s(a,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var s,r,a,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},s=i.split("."),i=s.shift(),s.length){for(r=o[i]=e.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)r[s[a]]=r[s[a]]||{},r=r[s[a]];if(i=s.pop(),n===t)return r[i]===t?null:r[i];r[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];o[i]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,r=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function o(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?r[a]:a).apply(r,arguments):void 0}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?s.delegate(c,u,o):i.bind(u,o)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,r,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,r){"string"==typeof s&&(s={effect:s});var a,o=s?s===!0||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),a&&e.effects&&e.effects.effect[o]?n[t](s):o!==t&&n[o]?n[o](s.duration,s.easing,r):n.queue(function(i){e(this)[t](),r&&r.call(n[0]),i()})}})}(e),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,r="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0
},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var r,a=Math.max,o=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,m=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var i,n,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),i=a.offsetWidth,s.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),r=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,r="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return m.apply(this,arguments);t=e.extend({},t);var r,p,f,g,v,_,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),x=(t.collision||"flip").split(" "),M={};return _=s(y),y[0].preventDefault&&(t.at="left top"),p=_.width,f=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=h.exec(n[0]),i=h.exec(n[1]),M[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=f:"center"===t.at[1]&&(v.top+=f/2),r=i(M.at,p,f),v.left+=r[0],v.top+=r[1],this.each(function(){var s,u,c=e(this),h=c.outerWidth(),d=c.outerHeight(),m=n(this,"marginLeft"),_=n(this,"marginTop"),T=h+m+n(this,"marginRight")+w.width,k=d+_+n(this,"marginBottom")+w.height,C=e.extend({},v),L=i(M.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?C.left-=h:"center"===t.my[0]&&(C.left-=h/2),"bottom"===t.my[1]?C.top-=d:"center"===t.my[1]&&(C.top-=d/2),C.left+=L[0],C.top+=L[1],e.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),s={marginLeft:m,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[x[i]]&&e.ui.position[x[i]][n](C,{targetWidth:p,targetHeight:f,elemWidth:h,elemHeight:d,collisionPosition:s,collisionWidth:T,collisionHeight:k,offset:[r[0]+L[0],r[1]+L[1]],my:t.my,at:t.at,within:b,elem:c})}),t.using&&(u=function(e){var i=g.left-C.left,n=i+p-h,s=g.top-C.top,r=s+f-d,l={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:c,left:C.left,top:C.top,width:h,height:d},horizontal:0>n?"left":i>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>p&&o(i+n)<p&&(l.horizontal="center"),d>f&&o(s+r)<f&&(l.vertical="middle"),l.important=a(o(i),o(n))>a(o(s),o(r))?"horizontal":"vertical",t.using.call(this,e,l)}),c.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,o=e.left-t.collisionPosition.marginLeft,l=s-o,u=o+t.collisionWidth-r-s;t.collisionWidth>r?l>0&&0>=u?(i=e.left+l+t.collisionWidth-r-s,e.left+=l-i):e.left=u>0&&0>=l?s:l>u?s+r-t.collisionWidth:s:l>0?e.left+=l:u>0?e.left-=u:e.left=a(e.left-o,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,o=e.top-t.collisionPosition.marginTop,l=s-o,u=o+t.collisionHeight-r-s;t.collisionHeight>r?l>0&&0>=u?(i=e.top+l+t.collisionHeight-r-s,e.top+=l-i):e.top=u>0&&0>=l?s:l>u?s+r-t.collisionHeight:s:l>0?e.top+=l:u>0?e.top-=u:e.top=a(e.top-o,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,r=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,h=u+t.collisionWidth-a-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];0>c?(i=e.left+d+p+m+t.collisionWidth-a-r,(0>i||i<o(c))&&(e.left+=d+p+m)):h>0&&(n=e.left-t.collisionPosition.marginLeft+d+p+m-l,(n>0||o(n)<h)&&(e.left+=d+p+m))},top:function(e,t){var i,n,s=t.within,r=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,h=u+t.collisionHeight-a-l,d="top"===t.my[1],p=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>c?(n=e.top+p+m+f+t.collisionHeight-a-r,e.top+p+m+f>c&&(0>n||n<o(c))&&(e.top+=p+m+f)):h>0&&(i=e.top-t.collisionPosition.marginTop+p+m+f-l,e.top+p+m+f>h&&(i>0||o(i)<h)&&(e.top+=p+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,r,a=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)t.style[r]=n[r];t.appendChild(o),i=a||document.documentElement,i.insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",s=e(o).offset().left,e.support.offsetFractions=s>10&&11>s,t.innerHTML="",i.removeChild(t)}()}(e),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===s.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):s.containment.constructor===Array?(this.containment=s.containment,void 0):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,r,a=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,u=t.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),a.grid&&(s=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-a.grid[1]:s+a.grid[1]:s,r=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-a.grid[0]:r+a.grid[0]:r)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,r=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,r))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var r=!1,a=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,r,a,o,l,u,c,h,d,p=e(this).data("ui-draggable"),m=p.options,f=m.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,y=_+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)o=p.snapElements[h].left,l=o+p.snapElements[h].width,u=p.snapElements[h].top,c=u+p.snapElements[h].height,o-f>v||g>l+f||u-f>y||_>c+f||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(u-y)<=f,s=Math.abs(c-_)<=f,r=Math.abs(o-v)<=f,a=Math.abs(l-g)<=f,n&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=n||s||r||a,"outer"!==m.snapMode&&(n=Math.abs(u-_)<=f,s=Math.abs(c-y)<=f,r=Math.abs(o-g)<=f,a=Math.abs(l-v)<=f,n&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(n||s||r||a||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=n||s||r||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(e),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,s=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(s+1)%n];break;case i.LEFT:case i.UP:r=this.headers[(s-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[n-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,s=n.heightStyle,r=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),s=i.next(),r=s.attr("id");n||(n=a+"-header-"+t,i.attr("id",n)),r||(r=a+"-panel-"+t,s.attr("id",r)),i.attr("aria-controls",r),s.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===s?(i=r.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)
},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),r=s[0]===n[0],a=r&&i.collapsible,o=a?e():s.next(),l=n.next(),u={oldHeader:n,oldPanel:l,newHeader:a?e():s,newPanel:o};t.preventDefault(),r&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=a?!1:this.headers.index(s),this.active=r?e():s,this._toggle(u),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),r||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,s){var r,a,o,l=this,u=0,c=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},d=c&&h.down||h,p=function(){l._toggleComplete(s)};return"number"==typeof d&&(o=d),"string"==typeof d&&(a=d),a=a||d.easing||h.easing,o=o||d.duration||h.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(i,{duration:o,easing:a,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(n,{duration:o,easing:a,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?u+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(r-t.outerHeight()-u),u=0)}}),void 0):t.animate(i,o,a,p):e.animate(n,o,a,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(e),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n,s=this.element[0].nodeName.toLowerCase(),r="textarea"===s,a="input"===s;this.isMultiLine=r?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[r||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,n=!0,i=!0,void 0;t=!1,n=!1,i=!1;var r=e.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",s);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case r.UP:t=!0,this._keyEvent("previous",s);break;case r.DOWN:t=!0,this._keyEvent("next",s);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case r.TAB:this.menu.active&&this.menu.select(s);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault(),void 0;if(!i){var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(n){i===t&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(e),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(r.inline?t.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var r,a="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,s,r;n=t.nodeName.toLowerCase(),s="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),r=this._newInst(e(t),s),r.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,r):s&&this._inlineDatepicker(t,r)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,a,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,s,r,a=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(s=this._get(i,"buttonText"),r=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:r,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(r?e("<img/>").attr({src:r,alt:s,title:s}):s)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,s,r=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(i=0,n=0,s=0;s<e.length;s++)e[s].length>i&&(i=e[s].length,n=s);return n},r.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),e.input.attr("size",this._formatDate(e,r).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,a,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,r,o){var l,u,c,h,d,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],a,p)),s(p.settings,r||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+h,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],a,p),this},_destroyDatepicker:function(t){var i,n=e(t),s=e.data(t,a);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,a),"input"===i?(s.append.remove(),s.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,s=e(t),r=e.data(t,a);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,s=e(t),r=e.data(t,a);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=s.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,a)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,r){var a,o,l,u,c=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null:(a=n||{},"string"==typeof n&&(a={},a[n]=r),c&&(this._curInst===c&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(c,"min"),u=this._getMinMaxDate(c,"max"),s(c.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(c.settings.minDate=this._formatDate(c,l)),null!==u&&a.dateFormat!==t&&a.maxDate===t&&(c.settings.maxDate=this._formatDate(c,u)),"disabled"in a&&(a.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),c),this._autoSize(c),this._setDate(c,o),this._updateAlternate(c),this._updateDatepicker(c)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,s,r=e.datepicker._getInst(t.target),a=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",r.dpDiv),s[0]&&e.datepicker._selectDay(t.target,r.selectedMonth,r.selectedYear,s[0]),i=e.datepicker._get(r,"onSelect"),i?(n=e.datepicker._formatDate(r),i.apply(r.input?r.input[0]:null,[n,r])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(r,"stepBigMonths"):-e.datepicker._get(r,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(r,"stepBigMonths"):+e.datepicker._get(r,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,s=e.datepicker._getInst(t.target);return e.datepicker._get(s,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(s,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,r,a,o,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),r=n?n.apply(t,[t,i]):{},r!==!1&&(s(i.settings,r),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,a),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),s=n[1],a=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",a*s+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var s=t.dpDiv.outerWidth(),r=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),u=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-a:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>l&&l>s?Math.abs(i.left+s-l):0),i.top-=Math.min(i.top,i.top+r>u&&u>r?Math.abs(r+o):0),i},_findPos:function(t){for(var i,n=this._getInst(t),s=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,s,r,o=this._curInst;!o||t&&o!==e.data(t,a)||this._datepickerShowing&&(i=this._get(o,"showAnim"),n=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),n,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,s),i||s(),this._datepickerShowing=!1,r=this._get(o,"onClose"),r&&r.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var s=e(t),r=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(r,i+("M"===n?this._get(r,"showCurrentAtPos"):0),n),this._updateDatepicker(r))},_gotoToday:function(t){var i,n=e(t),s=this._getInst(n[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var s=e(t),r=this._getInst(s[0]);r["selected"+("M"===n?"Month":"Year")]=r["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(s)},_selectDay:function(t,i,n,s){var r,a=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(r=this._getInst(a[0]),r.selectedDay=r.currentDay=e("a",s).html(),r.selectedMonth=r.currentMonth=i,r.selectedYear=r.currentYear=n,this._selectDate(t,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,s=e(t),r=this._getInst(s[0]);i=null!=i?i:this._formatDate(r),r.input&&r.input.val(i),this._updateAlternate(r),n=this._get(r,"onSelect"),n?n.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,s,r=this._get(t,"altField");r&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),s=this.formatDate(i,n,this._getFormatConfig(t)),e(r).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var s,r,a,o,l=0,u=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),h=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,d=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,v=-1,_=-1,y=!1,b=function(e){var i=s+1<t.length&&t.charAt(s+1)===e;return i&&s++,i},w=function(e){var t=b(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=new RegExp("^\\d{1,"+n+"}"),r=i.substring(l).match(s);if(!r)throw"Missing number at position "+l;return l+=r[0].length,parseInt(r[0],10)},x=function(t,n,s){var r=-1,a=e.map(b(t)?s:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(r=t[0],l+=n.length,!1):void 0}),-1!==r)return r+1;throw"Unknown name at position "+l},M=function(){if(i.charAt(l)!==t.charAt(s))throw"Unexpected literal at position "+l;l++};for(s=0;s<t.length;s++)if(y)"'"!==t.charAt(s)||b("'")?M():y=!1;else switch(t.charAt(s)){case"d":v=w("d");break;case"D":x("D",h,d);break;case"o":_=w("o");break;case"m":g=w("m");break;case"M":g=x("M",p,m);break;case"y":f=w("y");break;case"@":o=new Date(w("@")),f=o.getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"!":o=new Date((w("!")-this._ticksTo1970)/1e4),f=o.getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"'":b("'")?M():y=!0;break;default:M()}if(l<i.length&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=f?0:-100)),_>-1)for(g=1,v=_;;){if(r=this._getDaysInMonth(f,g-1),r>=v)break;g++,v-=r}if(o=this._daylightSavingAdjust(new Date(f,g-1,v)),o.getFullYear()!==f||o.getMonth()+1!==g||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},u=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return l(e)?n[t]:i[t]},h="",d=!1;if(t)for(n=0;n<e.length;n++)if(d)"'"!==e.charAt(n)||l("'")?h+=e.charAt(n):d=!1;else switch(e.charAt(n)){case"d":h+=u("d",t.getDate(),2);break;case"D":h+=c("D",t.getDay(),s,r);break;case"o":h+=u("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=u("m",t.getMonth()+1,2);break;case"M":h+=c("M",t.getMonth(),a,o);
break;case"y":h+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?h+="'":d=!0;break;default:h+=e.charAt(n)}return h},_possibleChars:function(e){var t,i="",n=!1,s=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),r=s,a=this._getFormatConfig(e);try{r=this.parseDate(i,n,a)||s}catch(o){n=t?"":n}e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),e.currentDay=n?r.getDate():0,e.currentMonth=n?r.getMonth():0,e.currentYear=n?r.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},r=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=s.getFullYear(),a=s.getMonth(),o=s.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=l.exec(i);u;){switch(u[2]||"d"){case"d":case"D":o+=parseInt(u[1],10);break;case"w":case"W":o+=7*parseInt(u[1],10);break;case"m":case"M":a+=parseInt(u[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(u[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(r,a))}u=l.exec(i)}return new Date(r,a,o)},a=null==i||""===i?n:"string"==typeof i?r(i):"number"==typeof i?isNaN(i)?n:s(i):new Date(i.getTime());return a=a&&"Invalid Date"===a.toString()?n:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,s=e.selectedMonth,r=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),s===e.selectedMonth&&r===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,T,k,C,L,D,E,S,A,P,O,N,I,Y,F,z,R,j=new Date,V=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),H=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),J=1!==W[0]||1!==W[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),K=this._getMinMaxDate(e,"max"),Q=e.drawMonth-$,et=e.drawYear;if(0>Q&&(Q+=12,et--),K)for(t=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-W[0]*W[1]+1,K.getDate())),t=Z&&Z>t?Z:t;this._daylightSavingAdjust(new Date(et,Q,1))>t;)Q--,0>Q&&(Q=11,et--);for(e.drawMonth=Q,e.drawYear=et,i=this._get(e,"prevText"),i=U?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Q-G,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Q)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=U?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Q+G,1)),this._getFormatConfig(e)):s,r=this._canAdjustMonth(e,1,et,Q)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+s+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(H?"w":"e")+"'>"+s+"</span></a>",a=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?X:V,a=U?this.formatDate(a,o,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(H?l:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(H?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,h=this._get(e,"showWeek"),d=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),b="",x=0;x<W[0];x++){for(M="",this.maxRows=4,T=0;T<W[1];T++){if(k=this._daylightSavingAdjust(new Date(et,Q,e.selectedDay)),C=" ui-corner-all",L="",J){if(L+="<div class='ui-datepicker-group",W[1]>1)switch(T){case 0:L+=" ui-datepicker-group-first",C=" ui-corner-"+(H?"right":"left");break;case W[1]-1:L+=" ui-datepicker-group-last",C=" ui-corner-"+(H?"left":"right");break;default:L+=" ui-datepicker-group-middle",C=""}L+="'>"}for(L+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===x?H?r:n:"")+(/all|right/.test(C)&&0===x?H?n:r:"")+this._generateMonthYearHeader(e,Q,et,Z,K,x>0||T>0,m,f)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)E=(w+c)%7,D+="<th"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[E]+"'>"+p[E]+"</span></th>";for(L+=D+"</tr></thead><tbody>",S=this._getDaysInMonth(et,Q),et===e.selectedYear&&Q===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,S)),A=(this._getFirstDayOfMonth(et,Q)-c+7)%7,P=Math.ceil((A+S)/7),O=J?this.maxRows>P?this.maxRows:P:P,this.maxRows=O,N=this._daylightSavingAdjust(new Date(et,Q,1-A)),I=0;O>I;I++){for(L+="<tr>",Y=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;7>w;w++)F=g?g.apply(e.input?e.input[0]:null,[N]):[!0,""],z=N.getMonth()!==Q,R=z&&!_||!F[0]||Z&&Z>N||K&&N>K,Y+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(N.getTime()===k.getTime()&&Q===e.selectedMonth&&e._keyEvent||y.getTime()===N.getTime()&&y.getTime()===k.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+F[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===V.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===V.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);L+=Y+"</tr>"}Q++,Q>11&&(Q=0,et++),L+="</tbody></table>"+(J?"</div>"+(W[0]>0&&T===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),M+=L}b+=M}return b+=u,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,s,r,a,o){var l,u,c,h,d,p,m,f,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(r||!g)b+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=n&&n.getFullYear()===i,u=s&&s.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=n.getMonth())&&(!u||c<=s.getMonth())&&(b+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+o[c]+"</option>");b+="</select>"}if(_||(y+=b+(!r&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},m=p(h[0]),f=Math.max(m,p(h[1]||"")),m=n?Math.max(m,n.getFullYear()):m,f=s?Math.min(f,s.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f>=m;m++)e.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),_&&(y+=(!r&&g&&v?"":"&#xa0;")+b),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(n,s))+("D"===i?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,s,r)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return n&&s>n?n:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var s=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(i,n+(0>t?t:s[0]*s[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var i,n,s=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),a=null,o=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),a=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=n),i[1].match(/[+\-].*/)&&(o+=n)),(!s||t.getTime()>=s.getTime())&&(!r||t.getTime()<=r.getTime())&&(!a||t.getFullYear()>=a)&&(!o||t.getFullYear()<=o)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(e),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,r,a,o,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,s=this.previousFilter||"",r=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),r===s?a=!0:r=s+r,o=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),o=new RegExp("^"+i(r),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),s=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,s,r,a,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,s=t.offset().top-this.activeMenu.offset().top-i-n,r=this.activeMenu.scrollTop(),a=this.activeMenu.height(),o=t.height(),0>s?this.activeMenu.scrollTop(r+s):s+o>a&&this.activeMenu.scrollTop(r+s-a+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,s;return this.active?(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-s<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,n,s;return this.active?(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+s>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(e),function(e,t){e.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(e),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(i=n.values&&n.values.length||1,s.length>i&&(s.slice(i).remove(),s=s.slice(0,i)),t=s.length;i>t;t++)a.push(r);this.handles=s.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,r,a,o,l,u,c=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(s>i||s===i&&(t===c._lastChangedValue||c.values(t)===h.min))&&(s=i,r=e(this),a=t)}),o=this._start(t,a),o===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,r.addClass("ui-state-active").focus(),l=r.offset(),u=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,r;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),r=this._valueMin()+n*s,this._trimAlignValue(r)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),r!==!1&&this.values(t,i,!0))):i!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:i}),r!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var n,s,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;
return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,r,a=this.options.range,o=this.options,l=this,u=this._animateOff?!1:o.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=100*((l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[u?"animate":"css"](c,o.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[u?"animate":"css"]({left:i+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:o.animate})):(0===n&&l.range.stop(1,1)[u?"animate":"css"]({bottom:i+"%"},o.animate),1===n&&l.range[u?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:o.animate}))),t=i}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),i=r!==s?100*((n-s)/(r-s)):0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[u?"animate":"css"](c,o.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:i+"%"},o.animate),"max"===a&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:o.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:i+"%"},o.animate),"max"===a&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:o.animate}))},_handleEvents:{keydown:function(i){var n,s,r,a,o=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,o),n===!1))return}switch(a=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-a)}this._slide(i,o,r)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(e),function(e,t){function i(){return++s}function n(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var s=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,s){return e(s).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),s=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:s=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(n),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,s),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>s&&(t=0),0>t&&(t=s),t}for(var s=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var r,a,o,l=e(s).uniqueId().attr("id"),u=e(s).closest("li"),c=u.attr("aria-controls");n(s)?(r=s.hash,a=t.element.find(t._sanitizeSelector(r))):(o=t._tabId(u),r="#"+o,a=t.element.find(r),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),c&&u.data("ui-tabs-aria-controls",c),u.attr({"aria-controls":r.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,s=e(t.currentTarget),r=s.closest("li"),a=r[0]===n[0],o=a&&i.collapsible,l=o?e():this._getPanelForTab(r),u=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:u,newTab:o?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=o?!1:this.tabs.index(r),this.active=a?e():r,this.xhr&&this.xhr.abort(),u.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,i){function n(){r.running=!1,r._trigger("activate",t,i)}function s(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&r.options.show?r._show(a,r.options.show,n):(a.show(),n())}var r=this,a=i.newPanel,o=i.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),s()),o.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),a.length&&o.length?i.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var s=this,r=this.tabs.eq(t),a=r.find(".ui-tabs-anchor"),o=this._getPanelForTab(r),l={tab:r,panel:o};n(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),s._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr},1)})))},_ajaxSettings:function(t,i,n){var s=this;return{url:t.attr("href"),beforeSend:function(t,r){return s._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:r},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(e),e}),Mindbreeze.define("components/results/js/results",["i18n/i18n","api/v2/search","client/template","component!base","client/templateregistry","utils/dom","utils/trace","jquery","text!../mustache/template.mustache","underscore","backbone","utils/browser","jquery-ui-autocomplete"],function(e,t,i,n,s,r,a,o,l,u,c){var h=function(e,t){var i=this;(e.get(0)===document||e.is("body"))&&(e=window),this.$scrollTarget=o(t),this.$scrollTarget.on("focus",function(){i.activate(i.$scrollTarget)});var n=u.bind(this.process,this);this.$scrollContainer=o(e).on("scroll.mb.scroll-spy-mini",n),o(window).on("resize.mb.scroll-spy-mini",n),this.process()};u.extend(h.prototype,{pageY:function(e){return e.offsetParent?e.offsetTop+this.pageY(e.offsetParent):e.offsetTop},process:function(){if(this.$scrollTarget.is(":visible")){var e=this.$scrollContainer.scrollTop(),t=this.$scrollTarget,i=this.$scrollContainer[0]==window?"offset":"position",n=t[i]().top;if(!o.isWindow(this.$scrollContainer.get(0))){var s=this.pageY(this.$scrollContainer.get(0)),r=this.pageY(t.get(0));n=r-s}var a=n-this.$scrollContainer.outerHeight();return e>=a?(this.activate(t),void 0):void 0}},activate:function(e){e.trigger("activate")},destroy:function(){this.$scrollContainer.off("scroll.mb.scroll-spy-mini"),o(window).off("resize.mb.scroll-spy-mini")}}),e("preview"),s.add({id:"result",name:"editor_result_title",weight:3,getAdders:function(){return[{name:"editor_result_template_list_title",icon:"../img/imglist.png",options:{template:l}},{name:"editor_result_template_imagegallery_title",icon:"../img/imggallery.png",options:{template:'<script type="text/x-mustache-template" data-tag-name="span"><a href="{{action}}" title="{{title}}">{{{icon}}}</a></script>'}},{name:"editor_result_template_table_title",icon:"../img/imgtable.png",options:{"data-template":"table","data-properties":"mes:size,title","no-default-template":!0}},{name:"editor_result_template_map_title",icon:"../img/imgmap.png",options:{"data-template":"map",template:'<script type="text/x-mustache-template" data-tag-name="span"><a target="_blank" href="{{actions[0].href}}">{{{title}}}</a></script>'}},{name:"editor_result_template_timeline_title",icon:"../img/imgtimeline.png",options:{"data-template":"timeline","no-default-template":!0}},{name:"editor_result_template_suggestlist_title",icon:"../img/imgsuggestlist.png",options:{"data-template":"suggestlist","no-default-template":!0}}]},create:function(e){var t=u.extend({"data-template":"results"},u.reduce(e,function(e,t,i){return/^data-/.test(i)&&(e[i]=t),e},{}));return c.View.prototype.make("div",t,e.template||(e["no-default-template"]===!0?"":l))}});var d=i.extend({editableName:"editor_result_title",initialize:function(){i.prototype.initialize.apply(this,u.toArray(arguments)),this.$el=o(this.el)},schema:new i.Schema({inputAttributes:{view:{type:"reference",reference:"view"},appendonscroll:{title:"editor_result_append_on_scroll",type:"boolean",defaultValue:!1},grouped:{title:"editor_result_grouped",type:"boolean",defaultValue:!1,visible:!1}}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},getDefaultTemplateAsEl:function(){var e=this.getDefaultTemplate();return e?r.instantiate(e):void 0},getContent:function(){return this.children[0].template},createView:function(e){var t=new p(u.extend({},e,{application:e.application,template:this,el:this.el,resultTemplate:e.node.children[0].template,appendonscroll:"true"===this.el.getAttribute("data-appendonscroll"),grouped:"true"===this.el.getAttribute("data-grouped"),appendInBackground:"true"===this.el.getAttribute("data-appendinbackground")}));return this.instances.push(t),t}}),p=n.extend({setModel:function(){this.collection&&this.collection.off("add"),n.prototype.setModel.apply(this,arguments),this.model&&(this.collection=new t.ResultCollection(this.getDisplayedProperties(),{limitToPageSize:!this.options.appendonscroll}),this.collection.on("add",this.addOne,this),this.collection.on("remove",this.removeOne,this),this.collection.on("updated",this.computed,this),this.model.options&&this.model.options.enableImmediateDisplayOfFederatedResults&&this.collection.on("reset",this.computed,this),this.model.addResultCollection(this.collection))},computing:function(){this.pagingAllowed=!1,n.prototype.computing.apply(this,arguments)},computed:function(){this.removeScrollPlaceholder(),this.pagingAllowed=!0,this.options.appendonscroll===!0&&this.model&&this.model.get("resultset.next_avail")&&u.defer(u.bind(this.appendScrollPlaceholder,this)),this.appendInBackgroundIfNeeded(),n.prototype.computed.apply(this,arguments)},appendInBackgroundIfNeeded:function(){this.options.appendInBackground===!0&&this.model&&this.model.get("resultset.next_avail")&&u.defer(u.bind(this.appendInBackground,this))},removeScrollPlaceholder:function(){o(this.scrollPlaceholder).off("activate"),this.removeOwnedNode(this.scrollPlaceholder),delete this.scrollPlaceholder,this.scrollspy&&(this.scrollspy.destroy(),delete this.scrollspy)},getDisplayedProperties:function(){return this.options.resultTemplate.properties},_registerCollect:function(e,t){if(this.options.application.models.collected){var i=this.options.application.models.collected.get(e.get("location"));i&&t.$el.addClass("mb-collected"),t.listenTo(this.options.application.models.collected,"remove",function(e){e.id==t.model.get("location")&&t.$el.removeClass("mb-collected")},t),t.listenTo(this.options.application.models.collected,"add",function(e){e.id==t.model.get("location")&&t.$el.addClass("mb-collected")},t)}},addOne:function(e,t,i){var n=document.activeElement===this.scrollPlaceholder||r.isChild(document.activeElement,this.scrollPlaceholder);i=i||{};var s=a.events.uiRender.enter(i.traceContext&&i.traceContext.context,"results");try{var o=e.get&&e.get("mes:group")||"",l=i.at+(this.positionOffset||0),u=this.options.resultTemplate.createView({model:e,application:this.options.application,parent:this,modelType:"Result"}),c=u.render().el;this.options.grouped?this.insertGrouped(c,l,o):this.insertAt(c,l),n&&r.focus(c,!0),this._registerCollect(e,u)}finally{s.leave()}this.options.application&&this.options.application.views&&this.options.application.views.trigger("afterRender:Result",this.options.application,u,e),this.removeScrollPlaceholder()},removeOne:function(){var e=this;window.setTimeout(function(){u.each(e.groupEls,function(e){!e.el.innerHTML&&e.parent.parentNode&&e.parent.parentNode.removeChild(e.parent)})},0)},insertGrouped:function(e,t,i){this.groupEls||(this.groupEls={}),i&&u.isString(i.str)&&(i=i.str);var n=i.toLowerCase();if(!this.groupEls[n]){var s=this.make("div",{"data-group-id":n,"class":"mb-result-group-container "+(n.length>0?n.replace(/\s+/,"-"):"mb-empty-group")}),t=-1;if(n)for(var r=0;r<this.el.childNodes.length;r++)try{var a=this.el.childNodes[r].getAttribute("data-group-id");if(!a)continue;if(a>n)break}catch(o){}if(-1==t?this.appendChild(s,!0):this.insertAt(s,t,!0),i){var l=s.appendChild(this.make("h2",{"class":"mb-group-title"}));l.innerHTML=i}var c=s.appendChild(this.make("div",{"class":"mb-group"}));this.groupEls[n]={parent:s,el:c}}var c=this.groupEls[n].el;return c.childNodes.length>t?c.insertBefore(e,c.childNodes[t]):c.appendChild(e),this.groupEls[n].parent.parentNode||this.appendChild(this.groupEls[n].parent,!0),this.groupEls[n]},scrollPlaceholderAvailable:function(){return!0},appendScrollPlaceholderAndCreateScrollSpy:function(){var e=this;this.appendScrollPlaceholderEl(),o(this.scrollPlaceholder).on("activate",function(){o(this.scrollPlaceholder).off("activate"),e.page()}),this.scrollspy=new h(o(this.scrollPlaceholder).scrollParent(),this.scrollPlaceholder)},appendScrollPlaceholder:function(){this._removed||this.scrollPlaceholder||(this.scrollPlaceholder=this.make("h3",{tabindex:"0","class":"mb-scroll-placeholder mb-center mb-no-print"},'<div role="button" class="mb-pulse">'+e("loading_more_results")+"</div>"),this.scrollPlaceholderAvailable()?this.appendScrollPlaceholderAndCreateScrollSpy():this.once("scrollplaceholderavailable",this.appendScrollPlaceholderAndCreateScrollSpy,this))},appendScrollPlaceholderEl:function(){this.appendChild(this.scrollPlaceholder,!0)},appendInBackground:function(){if(!this._removed&&!this.isComputing()){var e=this;this.handleActionObjectCall({disablePropagateComputing:!0,append:!0,model:this.model,sender:this,computedCallback:function(){e.appendInBackgroundIfNeeded()}},"nextPage")}},page:function(){this.isComputing()||this.pagingAllowed&&(this.pagingAllowed=!1,this.handleActionObjectCall({append:!0,model:this.model,sender:this},"nextPage"))},render:function(){var e;return e},remove:function(){return this.removeScrollPlaceholder(),n.prototype.remove.apply(this,arguments),this.dispose(),this},dispose:function(){this.collection.dispose()}});return d.DEFAULT_TEMPLATE=l,d.View=p,d}),Mindbreeze.define("components/searchform/js/searchform",["require","component!base","client/template","client/templateregistry","utils/browser","utils/dom","jquery","model/tree","underscore","backbone"],function(e,t,i,n,s,r,a,o,l,u){n.add({id:"searchform",name:"editor_queryfield_title",description:"editor_queryfield_description",weight:1,getAdders:function(e){return"view"===e.type?[{name:"editor_queryfield_title",icon:"../img/imginput.png"}]:void 0},create:function(){return u.View.prototype.make("form",{role:"search","data-template":"searchform","class":"mb-center"},'<input aria-label="search" data-template="suggest" data-property="title" data-grouped="true" data-source-id-pattern="document_property|tabs" data-initial-source-id-pattern="recent_query" class="mb-query" name="query" type="search" placeholder="Search">')}});var c=i.extend({editableName:"editor_queryfield_title",hasContent:function(){return this.children&&this.children.length>0},getContentSchema:function(){return{type:"template"}},schema:new i.Schema({attributes:{}}),getContent:function(){return this.children[0].template},createView:function(e){var t=e.model,i=this.attributeModel.get("id")||"main";i&&(t=t.submodel("user.query"));var n=!1,s=new h(l.extend({application:e.application,template:this,el:this.el},e,{model:t,outerModel:e.model,validatorRegistry:e.model.input,queryid:this.attributeModel.get("id"),requiresUserInput:"true"===this.attributeModel.get("requires-user-input"),filterAsUserInput:this.attributeModel.get("filter-as-user-input")&&this.attributeModel.get("filter-as-user-input").split(/\s*,\s*/)||[],enableSearchReset:n}));return l.forEach(e.node.children,function(t){var i=t.template.createView({application:e.application,model:e.model,node:t,parentView:s,addQueryConstraints:!n,useConstraintsOnly:!0});i&&t.template&&i.el!==t.template.el&&i.el!==t.template.el.parentNode&&a(t.template.el).after(i.el)}),this.instances.push(s),s}}),h=t.extend({initialize:function(){t.prototype.initialize.apply(this,l.toArray(arguments)),this.options.application.formqueryadapter.addForm(this.el),this.elements=this.options.application.formqueryadapter.findElements(this.el)},remove:function(){t.prototype.remove.apply(this,arguments),this.options.application.formqueryadapter.removeForm(this.el),this.elements=null},events:function(){return l.extend({},t.prototype.events,{keypress:"handleKeyPress",submit:"submit","click button, click input":"handleClick","blur input, blur select, blur textarea":"handleBlur",changedata:"handleChangeData"})},doInstrument:function(e){return/handleKeyPress|handleClick/i.test(e)?!1:t.prototype.doInstrument.apply(this,arguments)},handleClick:function(e,t){this.el.submit||"BUTTON"!==e.target.tagName&&"submit"!==e.target.type||(e.preventDefault(),this.submit(e,t))},handleBlur:function(e,t){this.updateModel(!0,t)},handleKeyPress:function(e,t){13===e.keyCode&&(e.preventDefault(),this.submit(e,t))},handleChangeData:function(e){var t=a(e.target),i=t.data("queryexpr");l.isFunction(i)&&(i=i());var n=i&&i.description||null;(t.is(this.$el)||t.is(this.$el.find("input, select, textarea")))&&t.val(n)},setModel:function(){this.validator&&this.options.validatorRegistry&&(this.options.validatorRegistry.removeValidator(this.validator),delete this.validator),t.prototype.setModel.apply(this,arguments),this.model&&(this.listenTo(this.model,"changeinput",this.changeInput),this.options.requiresUserInput&&this.model&&this.model.input&&this.options.validatorRegistry&&(this.validator=l.bind(this.validate,this),this.options.validatorRegistry.addValidator(this.validator)))},validate:function(){var e;if(e=this.options.outerModel?this.options.outerModel.input.get("user.query"):this.model.input.get(),this.options.outerModel){var t=this.options.outerModel.get("user.constraints");if(t)for(var i=/__queryaction__.*/,n=l.filter(l.keys(t),function(e){return e&&e.match(i)}),s=0;s<n.length;++s){var r=n[s],a=this.options.outerModel.get("user.constraints["+JSON.stringify(r)+"]");if(a&&!l.isEmpty(a))return!0}}if(this.options.outerModel&&this.options.filterAsUserInput&&this.options.filterAsUserInput.length)for(var s=0;s<this.options.filterAsUserInput.length;++s){var r=this.options.filterAsUserInput[s],o=this.options.outerModel.get("user.constraints["+JSON.stringify("filter_"+r)+"].filter_base");if(o&&!l.isEmpty(o))return!0}return!(!e||l.isEmpty(e)||e.and&&l.isEmpty(e.and))},changeInput:function(e,t){var t=t||{},i=this;l.forEach(this.elements,function(n){var s=n.name||"query",r=a(n),o=!r.is(":focus")||t.forceUIUpdate,u=i.options.application.formqueryadapter.field(s);if(u&&u.path&&o){var c=e.get(u.path),h=u.queryType||"unparsed",d=c&&c[h]||null;if(a.data(n,"queryexpr")||!d&&c)if(!d&&c){var p=r.data("queryexpr");p&&l.isFunction(p)?p(c):r.data("queryexpr",c).trigger("changedata")}else{var p=r.data("queryexpr");l.isFunction(p)||r.data("queryexpr",null),r.val(d)}else r.val(d)}})},change:function(){},query:function(){return this.computeModel()},setQuery:function(e){if(e){var t=l.isString(e)?e:e.unparsed||e.get&&e.get("unparsed");t&&this.el.query&&(this.el.query.value=t)}},submit:function(e,t,i,n,r){t=t&&t.willLeave(),r=r||{};try{e&&e.preventDefault();var a=this.el.getAttribute("data-submit-action");if(a){var o=new Function("application","view","options",a);try{return o.apply(this.model,[this.options.application,this,r])}catch(e){console&&console.error&&console.error("Failed to execute action",JSON.stringify(a),e)}}s.isTouchDevice()&&this.$el.find(":focus").blur(),this.options.application.models.stack.popToApplication(this.options.application),r.changeViewValue?(this.options.application.models.search.deactivate(),this.options.application.changeView({name:r.changeViewValue}),i&&i.length>0?(this.options.application.models.search.activate({silent:!0}),this.updateModel(r.silent,t)):this.options.application.models.search.activate({silent:!1})):this.updateModel(r.silent,t),this.el.getAttribute("aria-controls")&&this.focusAfterNextComputed("#"+this.el.getAttribute("aria-controls"))}finally{t&&t.leave()}},focusAfterNextComputed:function(e){var t=!0;a(document.body).on("focusin.mb-searchform",function(){t=!1}),this.model.once("computed",function(){l.defer(function(){a(document.body).off(".mb-searchform"),t&&r.focus(a(e))})})},_updateInput:function(e,t,i,n){var s=0,r=this;return l.forEach(this.elements,function(i){var o=i.name,u=a(i);if(o){var c=r.options.application.formqueryadapter.field(o),h=c.queryType||"unparsed",d=a.data(i,"queryexpr"),p=u.val();!d&&p&&(d={},d[h]=p),l.isFunction(d)&&(d=d());var m=t.exprAndPath(o,d);if(m&&m.path){var f={path:m.path,traceContext:n,silent:!0};m.expr?(e.unset(null,f),e.set(m.expr,f)):e.unset(null,f),s++}}}),s},clearModel:function(e){var t=this.model.input,i=0,n=this.options.application.formqueryadapter,e=e||{};return l.forEach(this.elements,function(e){var s=e.name;if(a(e),s){var r=n.exprAndPath(s,null);if(r&&r.path){var o=l.extend({},o,{path:r.path});t.unset(null,o),i++}}}),i},updateModel:function(e,t){var i=0;!e&&this.options.enableSearchReset&&this.options.application.resetSearch({silent:!0}),i=this._updateInput(this.model.input,this.options.application.formqueryadapter,e,t),i>0&&!e&&this.model.input.change({traceContext:t,force:!0})},computeModel:function(){var e=new o;return this._updateInput(e,this.options.application.formqueryadapter),e.get()},computing:function(){}}),d=t.extend({initialize:function(){var e=this;if(t.prototype.initialize.apply(this,arguments),null==this.el.form){this.options.property&&(this.el.name=this.options.property);var i=this.options.model;i=i.submodel("user.query");var n=l.extend({},this.options,{model:i,outerModel:this.options.model,el:this.el});this.searchform=new h(n),this.options.parentView=this.searchform,this.searchform.undelegateEvents(),l.defer(function(){e.searchform.delegateEvents()})}},remove:function(){this.searchform&&this.searchform.remove()}});return c.View=h,c.ComponentView=d,c}),Mindbreeze.define("components/view/js/view",["i18n/i18n","component!base","component!results","component!searchform","client/template","utils/jsonpath","jquery","underscore"],function(e,t,i,n,s,r,a,o){var l=s.extend({type:"view",editableName:"editor_result_group_searchsettings",schema:new s.Schema({inputAttributes:{constraint:{path:"source_context.constraints.view_base",type:"QueryExpr",title:"editor_result_constraint"},count:{type:"int",title:"editor_result_count",values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],defaultValue:5},orderby:{type:"string",title:"client_toolbar_sortingalgorithm_label",values:{bind:{options:"orderable",value:"name",text:"localized_name"}}},order_direction:{type:"string",title:"order_direction",values:[{value:"ASCENDING",text:e("sort_ascending")},{value:"DESCENDING",text:e("sort_descending")}]},"queryspelling-upto-results":{path:"alternatives_query_spelling_max_estimated_count",type:"int",title:"editor_alternatives_query_spelling_max_estimated_count",defaultValue:0,visible:!1},count_filtered_facet_values:{type:"boolean",title:"editor_count_filtered_facet_values","default":!0,selector:"filter"}}}),hasContent:function(){return!1
},createView:function(e){var t=e.model,i=e.node.template.getInput(),n=this.application&&this.application.models.profileSettings;n&&n.at(0)&&n.at(0).get("data").settings.results_per_page&&delete i.count,this.setInput(t,i),e=o.extend({},e,{template:this,model:t,el:this.el}),o.forEach(e.node.children,function(i){var n=i.template.createView({application:e.application,model:t,node:i});n&&n.el!==i.template.el&&a(i.template.el).after(n.el)});var s=new u(e);return this.instances.push(s),s},setInput:function(e,t){o.each(t,function(t,i){var n=r.parsePath(i),s=e;n.length>1&&(s=e.submodel(n.slice(0,-1).join(".")),i=n[n.length-1]),s.set(i,t)})}}),u=t.extend({setEditable:function(){},remove:function(){return this.stopListening(),this.undelegateEvents(),this}});return l}),Mindbreeze.define("components/searchroot/js/searchroot",["underscore","api/v2/search","utils/dom","component!view","client/template","component!base","jquery"],function(e,t,i,n,s,r,a){var o=s.extend({});return o.View=r.extend({events:function(){return e.extend({},r.prototype.events,{keydown:"handleShortcut","focusin [data-shortcut]":"updateActivedescendant"})},updateActivedescendant:function(e){if(!e.activedescendantUpdated){var t=e.target,i=e.currentTarget;i.hasAttribute("data-track-activedescendant")&&this.setActivedescendant(i.getAttribute("data-shortcut"),t),e.activedescendantUpdated=!0}},setActivedescendant:function(e,t){this.activedescendants=this.activedescendants||{},this.activedescendants[e]=t},getActivedescendant:function(e,t){var n=this.activedescendants&&this.activedescendants[e];return n&&i.isChild(n,t)?n:null},handleShortcut:function(e){var t,n,s,r=[],o=e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90?String.fromCharCode(e.keyCode>=96&&e.keyCode<=105?e.keyCode-48:e.keyCode).replace(/\W/g,""):void 0,l=!0;if(e.altKey&&r.push("alt"),e.ctrlKey&&r.push("ctrl"),e.metaKey&&r.push("meta"),o&&r.length>0){if(e.shiftKey&&r.push("shift"),r.push(o),JSON.stringify(r)===this.lastKeys)return;t=('[data-shortcut="'+r.join("+")+'"]').toLowerCase(),n=this.$el.find(t),n.length>0&&(this.options.application.accessibilityContainer.enableFocusHighlighting(),e.preventDefault(),e.stopPropagation(),document.activeElement&&document.activeElement.blur(),s=this.getActivedescendant(n.attr("data-shortcut"),n[0]),s&&(l=!1,n=a(s)),i.focus(n),n[0]&&n[0].select?n[0].select():l&&n.trigger("click"))}this.lastKeys=JSON.stringify(r)},getEditControls:function(){}}),o}),Mindbreeze.define("text!components/search/mustache/template.default.mustache",[],function(){return'<h3>\n  <span>{{templateoptions.title}}</span>\n  <script type="text/x-mustache-template" data-attr-role="status" data-attr-class="estimated_count_container{{^estimated_count?}}hide{{/estimated_count?}}" data-attr-tabindex="-1">\n  {{^status_messages.no_results?}}\n    <span class="estimated_count">\n      {{#estimated_count?}}\n        ({{estimated_count}} \n        {{^singular}}{{i18n.editor_result_title}}){{/singular}}\n        {{#singular}}{{i18n.editor_singular_result_title}}){{/singular}}\n      {{/estimated_count?}}\n    </span>\n  {{/status_messages.no_results?}}\n</script>\n<div data-template="searchinfo"></div>\n</h3>\n<div data-template="results" class="default-results-container">\n  <script type="text/x-mustache-template" data-tag-name="div" data-class-name="defaultResultElement sb-result">\n    <div>\n      {{#mes:thumbnail?}}\n      <a href="{{actions.data[0].value.href}}" class="defaultResultImage">\n        <img class="pull-left mb-thumbnail mb-default-thumbnail" src="{{mes:thumbnail.data.value.href}}">\n      </a>\n      {{/mes:thumbnail?}}\n      <div class="ResultEl">\n        <a href="{{actions.data[0].value.href}}">{{{title}}}</a><br>\n        {{{mes:date}}}\n      </div>\n    </div>\n  </script>\n</div>\n'}),Mindbreeze.define("text!components/search/mustache/template.gallery.mustache",[],function(){return'<h3>\n  <span>{{templateoptions.title}}</span>\n  <script type="text/x-mustache-template" data-attr-role="status" data-attr-class="estimated_count_container{{^estimated_count?}}hide{{/estimated_count?}}" data-attr-tabindex="-1">\n  {{^status_messages.no_results?}}\n    <span class="estimated_count">\n      {{#estimated_count?}}\n        ({{estimated_count}} \n        {{^singular}}{{i18n.editor_result_title}}){{/singular}}\n        {{#singular}}{{i18n.editor_singular_result_title}}){{/singular}}\n      {{/estimated_count?}}\n    </span>\n  {{/status_messages.no_results?}}\n</script>\n<div data-template="searchinfo"></div>\n</h3>\n<div data-template="results" class="gallery-results-container">\n<script type="text/x-mustache-template" data-tag-name="div" data-class-name="galleryTemplateResult sb-result" data-attr-data-src="{{icon.data.value.href}}" data-attr-data-sub-html="&lt;h3&gt;{{{title}}}&lt;/h3&gt;" aria-hidden="true">\n  <a href="#">\n      <img src="{{icon.data.value.href}}"/>\n  </a>\n</script>\n</div>\n\n\n\n\n\n'}),Mindbreeze.define("text!components/search/mustache/template.person.mustache",[],function(){return'<h3>\n  <span>{{templateoptions.title}}</span>\n  <script type="text/x-mustache-template" data-attr-role="status" data-attr-class="estimated_count_container{{^estimated_count?}}hide{{/estimated_count?}}" data-attr-tabindex="-1">\n  {{^status_messages.no_results?}}\n    <span class="estimated_count">\n      {{#estimated_count?}}\n        ({{estimated_count}} \n        {{^singular}}{{i18n.editor_result_title}}){{/singular}}\n        {{#singular}}{{i18n.editor_singular_result_title}}){{/singular}}\n      {{/estimated_count?}}\n    </span>\n  {{/status_messages.no_results?}}\n</script>\n<div data-template="searchinfo"></div>\n</h3>\n<div data-template="results" class="person-results-container">\n  <script type="text/x-mustache-template" data-tag-name="div" data-class-name="personResultElement sb-result">\n    <div>\n      {{#mes:thumbnail?}}\n      <a href="{{actions.data[0].value.href}}" class="personResultImage">\n        <img class="pull-left mb-thumbnail mb-default-thumbnail" src="{{mes:thumbnail.data.value.href}}">\n      </a>\n      {{/mes:thumbnail?}}\n      <div class="ResultEl">\n        <a href="{{actions.data[0].value.href}}"><span class="personDefaultOutput personTitle">{{{title}}}</span></a>\n        <span class="personMail personDefaultOutput"><i class="icon-envelope-alt"></i> <a title="{{{mail}}}" href="mailto:{{{mail}}}">{{i18n.client_send_email}}</a></span>\n        <span class="personTelNr personDefaultOutput"><i class="icon-phone"></i> {{{telephonenumber}}}</span>\n        <span class="personJobtitle personDefaultOutput"><i class="icon-suitcase"></i> {{{jobtitle}}}</span>\n      </div>\n    </div>\n  </script>\n</div>\n'}),Mindbreeze.define("components/search/js/search",["component!base","component!searchroot","client/template","client/templatetree","api/v2/api","i18n/i18n","utils/clone","utils/accessibility","underscore","jquery","text!../mustache/template.default.mustache","text!../mustache/template.gallery.mustache","text!../mustache/template.person.mustache"],function(e,t,i,n,s,r,a,o,l,u,c,h,d){var p=i.extend({schema:new i.Schema({attributes:{"template-preset":{type:"string",values:["default-results","gallery-results","person-results"]},"template-refid":{type:"string"},constraint:{path:"source_context.constraints.view_base",type:"QueryExpr",title:"editor_result_constraint"},count:{type:"int",title:"editor_result_count",values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],defaultValue:1},enabledViews:{type:"list",title:"editor_search_enabled_views"},disabledViews:{type:"list",title:"editor_search_disabled_views"},propagateToParent:{type:"boolean",defaultValue:!1,"default":!1},model:{title:"editor_search_model"},"hide-on-no-results":{type:"boolean",defaultValue:!1},"requires-user-input":{type:"boolean",defaultValue:!1}}}),hasContent:function(){return!1},createView:function(e){if(!this.node.parentNode)return e=l.extend({},e,{ViewConstructor:t.View}),i.prototype.createView.call(this,e);var n,s=this.el.getAttribute("data-input-transform"),r=s&&new Function("input","application",s);return e=l.extend({},e,this.schema.parseAttributes(this.attributeModel.getCamelCase()),{modelId:this.el.getAttribute("data-model"),inputTransform:r}),n=new this.constructor.View(e),this.instances.push(n),n}});return p.View=e.extend({initialize:function(){this.lateInitialize()},remove:function(){return this.resultsModel&&this.resultsModel.destroy(),this.model&&this.model.destroy(),delete this.options.application.models[this.modelId],e.prototype.remove.apply(this,arguments),this},lateInitialize:function(){var e,t,i=this;if(this.createModel(),this.options.requiresUserInput&&this.model.input.addValidator(function(){var e=i.model.input.get(i.options.application.getUnparsedUserQueryPath());return!!e}),this.options.constraint&&this.model.set("source_context.constraints.searchcontainer",this.options.constraint,{silent:!0}),this.model.set("count",this.options.count,{silent:!0}),this.options.name?this.model.set("name",this.options.name,{silent:!0}):this.model.set("name",l.uniqueId("app"),{silent:!0}),this.options.propagateToParent&&this.listenTo(this.model.input,"change",this.updateParentIfUserQueryChanged),this.options.hideOnNoResults&&(this.resultsModel=this.model.submodel("resultset.results"),this.listenTo(this.model,"change",this.updateDisplay),this.updateDisplay()),this.options.templateRefid){e=document.getElementById(this.options.templateRefid),t=e&&e.innerHTML||'Could not find template with id "'+this.options.templateRefid+'"',t=this.replaceTemplateOptions(t);var s=!0}if(this.options.templatePreset&&!s&&(t=this.replaceTemplateOptions(this.setTemplatePreset()),this.options.alignment&&u(this.el).addClass(this.options.alignment)),this.options.width){var r;switch(this.options.width){case"50":r=50;break;case"100":r=100;break;case"33":r=33;break;case"66":r=66;break;default:r=100}u(this.el).addClass("boxWidth"+r)}this.disable(),this.templateTree=new n(this.el,"search",t),this.options.showInTab&&this.createBoxShadowWithArrow(),this.templateTree.initialize(this.options.application,this.model,function(){i.options.enableAccessibilityHandlers&&(i.accessibilityContainer=new o.Container(i.rootEls)),i.originalInput=a(i.model.input.get()),i.listenTo(i.options.application.models.search.input,"change",i.inputChanged),i.inputChanged()})},createBoxShadowWithArrow:function(){var e=document.createElement("div");if(e.className="tabArrow","true"==this.options.showInTab){var t=this.showTabArrow();e.appendChild(t)}else u(e).addClass("boxGradientArrow");this.el.appendChild(e)},setTemplatePreset:function(){var e;switch(this.options.templatePreset){case"default-results":e=c;break;case"gallery-results":e=h;break;case"person-results":e=d;break;default:e=c}return this.el.className="searchboxElement "+this.options.templatePreset,this.options.templateClass&&(this.el.className+=" "+this.options.templateClass),e},showTabArrow:function(){var e=document.createElement("div");return e.className="tabArrowInner",e.setAttribute("data-action-object",'{"changeView":{"name": "'+this.options.name+'", "model": null }}'),this.options.name&&e.setAttribute("title",'Show all results for "'+r(this.options.name)+'"'),e},replaceTemplateOptions:function(e){var t,i="",n="";return this.options.templateTitle&&(n=r(this.options.templateTitle)),this.options.templateIcon?(i=this.options.templateIcon,t=i.concat(n)):t=n,e=e.replace(/{{templateoptions.title}}/g,t),e=e.replace(/{{templateoptions.actionTitle}}/g,n)},updateParentIfUserQueryChanged:function(){var e=this.model.input.get(this.options.application.getUnparsedUserQueryPath());this.options.application.getUnparsedUserQuery()!==e&&this.options.application.setUnparsedUserQuery(e)},createModel:function(){var e=this.options.application.models;this.modelId=this.options.modelId||"search_"+this.cid,this.model=e[this.modelId]=s.search.createModel(e.channels,{enableImmediateDisplayOfFederatedResults:this.options.application.options.enableImmediateDisplayOfFederatedResults}),this.options.propagateToParent&&(this.listenTo(this.model.output,"change",function(){this._enabled&&e.search.output.load(this.model.output.attributes,{parse:!1,merge:!1})}),this.listenTo(this.model.computedInput,"change",function(){this._enabled&&e.search.computedInput.load(this.model.computedInput.attributes,{parse:!1,merge:!1})}),this.listenTo(this.model,"computing",function(){e.search.trigger("computing")}),this.listenTo(this.model,"computed",function(){e.search.trigger("computed")}))},resetModel:function(){this.model.input.clear({silent:!0}),this.model.input.set(this.originalInput,{silent:!0}),this.options.name?this.model.set("name",this.options.name,{silent:!0}):this.model.set("name",l.uniqueId("app"),{silent:!0})},disable:function(){this._enabled=!1,u(this.options.application.rootEls).attr("data-enabled-searchcontainers",(u(this.options.application.rootEls).attr("data-enabled-searchcontainers")||"").replace(this.options.templateRefid,"")),this.$el.hide(),this.model.deactivate(),this.model.output.load({})},enable:function(){this._enabled||(this._enabled=!0,u(this.options.application.rootEls).attr("data-enabled-searchcontainers",(u(this.options.application.rootEls).attr("data-enabled-searchcontainers")||"").replace(this.options.templateRefid,"")+" "+this.options.templateRefid),this.updateDisplay(),this.model.output.load({}),this.model.activate())},inputChanged:function(){var e=this.options.application.models.search.input.get("source_context.constraints.view.name")||"Everything",t=this.options.application.models.search.input.get("source_context.constraints.view.description"),i=l.indexOf(this.options.enabledViews,e)>=0,n=l.indexOf(this.options.disabledViews,e)>=0,s=!(this.options.enabledViews&&!i||n);if(s||this.disable(),s){if(this.parentApplication)return;this.resetModel(t);var r=this.options.application.models.search.input.get();this.model.input.set(this.transformInput(r)),this.enable()}},updateDisplay:function(){if(this._enabled)if(this.options.hideOnNoResults){var e=this.resultsModel.get();e&&e.length?this.$el.show():this.$el.hide()}else this.$el.show()},transformInput:function(e){if(this.options.constraint&&(e.source_context=e.source_context||{},e.source_context.constraints=e.source_context.constraints||{},e.source_context.constraints.search=this.options.constraint),!this.options.inputTransform){var t=e.user&&e.user.query||null;return t?{user:{query:t}}:{user:{}}}return this.options.inputTransform.call(window,e,this.options.application),e}}),p}),Mindbreeze.define("model/filtered_collection",["backbone","utils/events","underscore"],function(e,t,i){var n=[],s=n.push;n.slice;var r=n.splice;return e.Collection.extend(i.extend({},t,{initialize:function(e,t){this.delegate=t.delegate,this._filter=t.filter,this.listenTo(this.delegate,"add",this._update),this.listenTo(this.delegate,"remove",this._update),this.listenTo(this.delegate,"reset",this._update),this.proxyAllEvents(this.delegate,/^(add|remove|reset)$/)},_update:function(){var e=this;i.defer(function(){e.reset()})},reset:function(e,t){e=this._filter(this.delegate.models),t||(t={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({},t)),t.silent||this.trigger("reset",this,t),e},add:function(e,t){var n,a,o,l,u,c=t&&t.at,h=null==(t&&t.sort)?!0:t.sort;for(e=i.isArray(e)?e.slice():[e],n=e.length-1;n>=0;n--)(o=this._prepareModel(e[n],t))?(e[n]=o,l=null!=o.id&&this._byId.hasOwnProperty(o.id)&&this._byId[o.id],l||this._byCid.hasOwnProperty(o.cid)&&this._byCid[o.cid]?(t&&t.merge&&l&&(l.set(o.attributes,t),u=h),e.splice(n,1)):(o.on("all",this._onModelEvent,this),this._byCid[o.cid]=o,null!=o.id&&(this._byId[o.id]=o))):(this.trigger("error",this,e[n],t),e.splice(n,1));if(e.length&&(u=h),this.length+=e.length,a=[null!=c?c:this.models.length,0],s.apply(a,e),r.apply(this.models,a),u&&this.comparator&&null==c&&this.sort({silent:!0}),t&&t.silent)return this;for(var d,c=0;o=e.shift();)t.previousModels&&(d=i.indexOf(t.previousModels,o),d>=0&&t.previousModels.splice(d,1)),(!t.previousModels||0>d)&&(t=i.extend({},t,{at:c}),o.trigger("add",o,this,t)),c++;if(t.previousModels)for(;o=t.previousModels.shift();)o.trigger("remove",o,this,t),this._onModelEvent("remove",o,this,t);return this},setFilter:function(e){this._filter=e,this._update()},_prepareModel:function(e){return e},cutoff:function(){return this.models.length!==this.delegate.models.length}}))}),Mindbreeze.define("components/suggest/js/suggest",["api/v2/common","underscore","backbone","component!base","model/filtered_collection","client/template","client/templateregistry","utils/dom","utils/string","utils/trace","jquery","jquery-ui-autocomplete","i18n/i18n"],function(e,t,i,n,s,r,a,o,l,u,c,h,d){var p=n.extend({tagName:"li",className:"ui-autocomplete-category",initialize:function(){this.collection=this.model.collection,this.listenTo(this.collection,"remove",this.removeIfEmpty)},removeIfEmpty:function(){this.collection.models.length<1&&this.remove()},render:function(){var e=t.escape(this.options.customValue)||d("suggest_my_recent_searches");return c(this.el).attr("id",(t.escape(this.options.customValue)||d("suggest_my_recent_searches")).replace(/\s+/g,"")),c(this.el).attr("role","presentation"),this.el.innerHTML='<i class="icon-time"></i> '+e,this}}),m=n.extend({tagName:"li",render:function(){return c(this.el).append(c("<a/>").append(c("<span/>").addClass("pull-right").append(c("<button/>").addClass("action mb-btn-no-decor").attr("tabindex","0").attr("title","Delete").attr("data-action-name","destroyModel").append(c("<i/>").addClass("icon-trash")))).append(t.escape(this.model.get("query")))),this}}),f=i.Model.extend({initialize:function(){i.Model.prototype.initialize.apply(this,arguments),this.id=this.get("query")},isValid:function(){return this.get("query")},getSuggestModel:function(){return{value:this.get("query"),label:this.get("query"),model:this,category:d("suggest_my_recent_searches")}}}),g=i.Collection.extend({model:f,initialize:function(e,t){if(!t||!t.storageKey)throw new Error("SuggestCollection options must contain a 'storageKey'!");this.storageKey=t.storageKey,this.sync("read"),i.Collection.prototype.initialize.apply(this,arguments),this.listenTo(this,"add",this.save),this.listenTo(this,"update",this.save),this.listenTo(this,"remove",this.save)},getStorageKey:function(){return this.storageKey},save:function(){this.sync("update")},add:function(e,n){var s=this;return n=n||{},n.at=n.at||0,t.isArray(e)||(e=[e]),e=t.filter(t.map(e,function(e){return s._prepareModel(e,n)}),function(e){return e.isValid()}),this.remove(t.pluck(e,"id"),n),i.Collection.prototype.add.call(this,e,n)},sync:function(e){var i=this;if("read"===e)try{var n=JSON.parse(localStorage[this.getStorageKey()]);t.forEach(n,function(e){i.add(e)})}catch(s){}else"update"===e&&(localStorage[this.getStorageKey()]=JSON.stringify(this.toJSON()))}});g.getOrCreateForProperty=function(e){return this.instances=this.instances||[],this.instances[e]=this.instances[e]||new g(null,{storageKey:"querySuggestions_"+e}),this.instances[e]};var v=r.extend({initialize:function(){r.prototype.initialize.apply(this,t.toArray(arguments)),this.$el=c(this.el)},createView:function(e){var i,n=this.attributeModel.get("service");if(n){var s=n.split(/\s+/);i=t.map(s,function(t){return e.application.channels.channelFactory.createChannel(t)})}else i=e.model.wiring.channel;var r,a=this.attributeModel.get("source"),o=!1,l=!1,u=!0,c=this.get("suggest-timeout");a&&(r=a.split(/\s+/),l=t.contains(r,"RECENT_QUERY"),u=t.contains(r,"TABS"),r=t.without(r,"RECENT_QUERY","TABS","EXTERNAL","CONCEPT"),o=!0);var h,d=this.attributeModel.get("initial-source"),p=l,m=u;d&&(h=d.split(/\s+/),p=t.contains(h,"RECENT_QUERY"),m=t.contains(h,"TABS"),h=t.without(h,"RECENT_QUERY","TABS","EXTERNAL","CONCEPT"),o=!0);var f=this.attributeModel.get("grouped"),g=this.attributeModel.get("initial-grouped");f&&(f="true"===this.attributeModel.get("grouped")),g=g?"true"===this.attributeModel.get("initial-grouped"):f;var v=this.attributeModel.get("count");v?(v=parseInt(v),isNaN(v)&&(v=4)):v=4;var y=this.attributeModel.get("property-constraint");y&&t.isString(y)&&(y={unparsed:y});var b=this.attributeModel.get("source-id-pattern"),w=this.attributeModel.get("initial-source-id-pattern");if(b)if(o)t.each(r,function(e){b=b.concat("|"+e.toLowerCase())});else var l=new RegExp("^("+b+")$").test("recent_query"),u=new RegExp("^("+b+")$").test("tabs");else null!==b?(b="",u=!1):(b="document_property",u=!0);if(w)if(o)t.each(h,function(e){w=w.concat("|"+e.toLowerCase())});else var p=new RegExp("^("+w+")$").test("recent_query"),m=new RegExp("^("+w+")$").test("tabs");else null!==w?(p=!1,w=""):(p=!0,w="");var x={};this.get("source-id-document_property-title")&&(x.DOCUMENT_PROPERTY={value:this.get("source-id-document_property-title")}),this.get("source-id-recent-query-title")&&(x.RECENT_QUERY={value:this.get("source-id-recent-query-title")}),this.get("source-id-words-and-terms-title")&&(x.WordsandTerms={value:this.get("source-id-words-and-terms-title")}),this.get("source-id-popularsearches-title")&&(x.PopularSearches={value:this.get("source-id-popularsearches-title")});var M=this.attributeModel.get("default-tab-title"),T=this.get("source-id-order"),k=this.get("initial-source-id-order"),C=this.attributeModel.get("property"),L=this.get("show-onfocus"),D=new _(t.extend({},e,{application:e.application,template:this,el:this.el,channel:i,property:C,recentQueriesActivated:l,grouped:f,suggest_timeout:c,placeholder:this.attributeModel.get("placeholder"),title:this.attributeModel.get("title"),ariaLabel:this.attributeModel.get("aria-label"),showOnfocus:L,propertyConstraint:y,count:v,source:a,sources:r,headlineTranslation:x,defaultTabTitle:M,sourceIdPattern:b,initialSourceIdPattern:w,sourceIdOrder:T,initialSourceIdOrder:k,initialSource:d,initialSources:h,initialRecentQueriesActivated:p,searchInTabsActivated:u,initialSearchInTabsActivated:m,initialGrouped:g,disabled:"true"===this.attributeModel.get("disabled")}));return this.instances.push(D),D},schema:new r.Schema({attributes:{"source-id-pattern":{type:"string",title:"editor_suggest_source_id_pattern","default":"document_propertytabs"},"initial-source-id-pattern":{type:"string",title:"editor_suggest_initial_source_id_pattern","default":"recent_query"},property:{type:"string",title:"editor_suggest_property",required:!0},"property-constraint":{type:"QueryExpr",title:"editor_suggest_property_constraint"},"source-id-order":{type:"string",title:"editor_suggest_source_id_order"},"initial-source-id-order":{type:"string",title:"editor_suggest_initial_source_id_order"},"default-tab-title":{type:"string",title:"editor_suggest_default_tab_title"},count:{type:"int",title:"editor_suggest_count",required:!1},service:{type:"string",title:"editor_suggest_service",required:!1},suggest_timeout:{type:"int",title:"editor_suggest_timeout",required:!1},"show-onfocus":{type:"boolean",title:"editor_suggest_show_onfocus",defaultValue:!1,visible:!1},grouped:{type:"boolean",title:"editor_suggest_categoryGroup","default":!0,defaultValue:!0},"initial-grouped":{type:"boolean",title:"editor_suggest_categoryInitialGroup","default":!0,defaultValue:!0,visible:!1},disabled:{type:"boolean",title:"editor_suggest_disabled",required:!1,defaultValue:!1}}}),hasContent:function(){return!1},remove:function(e){t.forEach(this.instances,function(e){e.remove()}),this.instances=[],t.forEach(e.node.children,function(e){e.template.remove({node:e})})}}),_=n.extend({tagName:"input",events:function(){return t.extend({},n.prototype.events,{keypress:"handleKeypress",change:"updateSilently",blur:"updateSilently"})},updateSilently:function(e,t){this._triggerSelect(e,null,t,{silent:!0})},_triggerSelect:function(e,i,n,s){s=s||{};var r=this,a=t.escape(r.el.value),o=!!i;if(i&&i.item&&i.item.value&&(a=i.item.value,r.el.value=a),!s.silent&&r.options.parentView&&r.options.parentView.submit){r.submittedValue=a;var l=this.options.application.models.tabs.getSelectedTab();l&&i&&i.item&&i.item.category!=l.id&&(s.changeViewValue=i.item.tabID),r.options.parentView.submit(e,n,r.submittedValue,o,s)}},initialize:function(){n.prototype.initialize.apply(this,t.toArray(arguments)),!this.el.name&&this.options.property&&(this.el.name=this.options.property);var e=this,i=document.createElement("DIV");i.className="autocomplete-result-placeholder";var s="";s=this.options.appendTo&&"undefined"!=typeof this.options.appendTo?this.options.appendTo:this.$el.parent(),this.$el.autocomplete({source:t.bind(this._autocompleteSource,this),appendTo:s,position:{my:"left top",at:"left bottom",collision:"none"},minLength:0,messages:{noResults:d("suggest_no_suggestions"),results:function(e){return 1===e?d("suggest_result_singular"):d("suggest_result_plural",[e])}}}).focus(function(){e.showAutocomplete()}),this.$el.on("autocompleteselect",t.bind(this._triggerSelect,this)),this.$el.on("autocompletefocus",function(){e.submittedValue=null}),this.options.placeholder=this.options.placeholder&&d(this.options.placeholder),this.options.title=this.options.title&&d(this.options.title),this.options.ariaLabel=this.options.ariaLabel&&d(this.options.ariaLabel),this.$el.data("uiAutocomplete")._renderItemData=t.bind(this._renderItemData,this),this.$el.data("uiAutocomplete")._renderItemOwn=t.bind(this._renderItemOwn,this),this.originalRenderMenu=this.$el.data("uiAutocomplete")._renderMenu,this.options.placeholder&&this.el.setAttribute("placeholder",this.options.placeholder),this.options.title&&this.el.setAttribute("title",this.options.title),this.options.ariaLabel&&this.el.setAttribute("aria-label",this.options.ariaLabel),this.channel=this.options.channel,this.property=this.options.property||"title",this.options.count=this.options.count||5;var r=this.el.getAttribute("data-use-constraints-only");"false"==r&&(this.options.useConstraintsOnly=!1),this.initializeRecentQueries(),document.activeElement===this.el&&this.showAutocomplete()},showAutocomplete:function(){this.options.showOnfocus&&(this.$el.autocomplete("enable"),this.$el.autocomplete("search",this.$el.val()))},initializeRecentQueries:function(){if(this.options.recentQueriesActivated||this.options.initialRecentQueriesActivated){var e=g.getOrCreateForProperty(this.property),t=new s([],{delegate:e,filter:function(e){return e.slice(0,5)}});this.recentQueries=t,this.listenTo(this.model.input,"change",this.addRecentQuery)}},addRecentQuery:function(){var e=this.options.application.getUnparsedUserQuery();e&&(this.options.recentQueriesActivated||this.options.initialRecentQueriesActivated)&&this.recentQueries.delegate.add({query:e})},doInstrument:function(e){return/handleKeypress/i.test(e)?!1:n.prototype.doInstrument.apply(this,arguments)},setEditable:function(){},handleKeypress:function(e,t){return 13===e.keyCode?(this.$el.autocomplete("close"),this.$el.data("uiAutocomplete").disable(),this._triggerSelect(e,null,t),e.preventDefault(),!1):(this.$el.autocomplete("enable"),void 0)},getCategory:function(e){var t=this.options.headlineTranslation&&this.options.headlineTranslation[e.replace(/\s+/g,"")]&&this.options.headlineTranslation[e.replace(/\s+/g,"")].value;return/DOCUMENT_PROPERTY/.test(e)?{icon:"icon-file",name:d("editor_suggest_property"),customName:t}:"Popular Searches"===e?{icon:"icon-bar-chart",name:d("suggest_popular_searches"),customName:t}:"Words and Terms"===e?{icon:"icon-book",name:d("suggest_terms_and_words"),customName:t}:{icon:"",name:e}},_renderMenu:function(e,i){var n=this,s="",r=0;return c.each(i,function(i,a){var o,l=n.getCategory(a.originalCategory||a.category);if(a.category!=s){if(a.model){r++;var u=t.escape(n.options.headlineTranslation.RECENT_QUERY&&n.options.headlineTranslation.RECENT_QUERY.value||a.category||l.name);new p({model:a.model,application:n.options.application,index:r,customValue:u}).render().$el.appendTo(e)}else{r++;var u=t.escape(l.customName||a.category||l.name),h="<li role='presentation' class='ui-autocomplete-category' id='"+u.replace(/\s+/g,"_")+"'><span class='ui-autocomplete-category-head'><i class='"+l.icon+"'></i> "+u+"</span></li>",h=c(h);e.append(h)}s=a.category}else if(a.model)var u=t.escape(n.options.headlineTranslation.RECENT_QUERY&&n.options.headlineTranslation.RECENT_QUERY.value||a.category||l.name);else var u=t.escape(l.customName||a.category||l.name);o=n._renderItemData(e,a),a.category&&o.attr("aria-describedby",u.replace(/\s+/g,""))}),e},_renderItemData:function(e,t){return this._renderItemOwn(e,t).data("ui-autocomplete-item",t)},_renderItemOwn:function(e,i){var n=this.getCategory(i.originalCategory||i.category),s=t.escape(n.customName||i.category||n.name).replace(/\s+/g,"");return i.model?new m({model:i.model,application:this.options.application}).render().$el.appendTo(e):c("<li aria-describedby='"+s+"'><a>"+i.label+"</a></li>").appendTo(e)},_autocompleteSource:function(e,i){if(this.$el.is(":visible")&&this.$el.is(":focus")){var n=!e.term,s=this.originalRenderMenu;(n&&this.options.initialGrouped||!n&&this.options.grouped)&&(s=t.bind(this._renderMenu,this)),this.$el.data("uiAutocomplete")._renderMenu=s;var r=this;if(!this.options.disabled&&i){var a=u.events.uiAction.enter(null,"suggest",this.el.id||this.el.name),o=i;i=function(i){function s(e,t){if(!e)return!1;e=e.trim(),t=t.trim();var i=e.toUpperCase().indexOf(t.toUpperCase());if(0>i)return!1;var n=new RegExp(t,"gi"),s=e.replace(n,'<span class="matched">'+t+"</span>");return"<b>"+s+"</b>"}var u=r.options.getAndSetParentQueryExpr&&r.options.getAndSetParentQueryExpr(r.options.useConstraintsOnly,r._addQuery),h=0;u?(u=u.and[0].and[0].filter_base[0],h=u.path&&u.path.length+1||0,t.each(i,function(t){var i,n=t.value,r=n.substring(1,n.length-1).split(",")[h].trim();r.toUpperCase().indexOf(e.query.toUpperCase())>=0?(t.value=r,i=s(r,e.query),i?t.label=i:t.toRemove=!0):t.toRemove=!0})):t.each(i,function(t){var i,n=!1,r=!1;"["==t.value[0]&&"]"==t.value[t.value.length-1]&&(r=t.value.substring(1,t.value.length-1),n=r&&r.split&&r.split(",")&&r.split(",").length>1&&r.split(",")[h],n||(n=r),t.value=n,i=s(n,e.query),i?t.label=i:t.toRemove=!0)}),i=t.filter(i,function(e){return!e.toRemove}),i=t.uniq(i,function(e){return e.value});var d=[],p=[],m=[],f=[],g=[];if(t.forEach(i,function(e){"DOCUMENT_PROPERTY"===e.category&&(e.category=e.category||"Default")}),n&&r.options.initialSearchInTabsActivated||!n&&r.options.searchInTabsActivated){var v=r.options.application.models.tabs.models,_=r.options.application.models.tabs.getSelectedTab(),y=[];if(i&&i.length?t.each(v,function(e){e.get("name")!=_.get("name")&&y.push(e)}):y=v,r.el.value.length>0)var b=t.map(y,function(e){var i=t.escape(c(r.el).val()),n=i;return{category:e.get("name"),label:n,score:1e3,tabID:e.id||e.get("name"),value:r.el.value,originalCategory:"Tabs"}});b&&(d=b)}t.each(i,function(e){if("DOCUMENT_PROPERTY"===e.category){var t=r.options.application.models.tabs.getSelectedTab()&&r.options.application.models.tabs.getSelectedTab().get("name")||r.options.defaultTabTitle||"Default";e.originalCategory=e.category,e.category=t}});var w=e.query,x=!1;(n&&r.options.initialRecentQueriesActivated||!n&&r.options.recentQueriesActivated)&&r.recentQueries&&(r.recentQueries.setFilter(function(e){return t.filter(e,function(e){return new RegExp(".*"+w.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+".*","i").test(e.get("query"))}).slice(0,5)}),x=!0),t.defer(function(){function e(e,n){return n?t.each(e,function(e){switch(e){case"document_property":h=t.union(h,g);break;case"popularsearches":h=t.union(h,m);break;case"words_and_terms":h=t.union(h,f);break;case"recent_query":h=t.union(h,p);break;case"tabs":h=t.union(h,d)}}):t.each(e,function(e){switch(e){case"DOCUMENT_PROPERTY":h=t.union(h,i);break;case"TABS":h=t.union(h,d);break;case"RECENT_QUERY":h=t.union(h,p);break;default:h=t.union(h,i)}}),h}try{if(x){p=t.map(r.recentQueries.models,function(e){return e.getSuggestModel()});var s=t.escape(r.el.value);t.each(p,function(e){function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")
}if(r.el.value){var n=new RegExp(i(s),"gi");e.label=l.addHighlights(e.value,n)}else e.label=t.escape(e.value)})}var u=r.options.application.models.tabs.getSelectedTab()&&r.options.application.models.tabs.getSelectedTab().get("name")||"";d=t.sortBy(d,function(e){return e.category!=u});var h=[];if(i&&i.length>0&&d&&d.length>0){var v=r.options.application.models.tabs.getSelectedTab(),_=t.escape(c(r.el).val()),y=_,b=!1;t.each(i,function(e){e.category==v.get("name")&&(b=!0)}),b||i.push({category:v&&v.get("name")||r.options.defaultTabTitle||"Default",label:y,score:1e3,tabID:v&&v.id||r.options.defaultTabTitle||"Default",value:_})}t.each(i,function(e){"Words and Terms"==e.category?f.push(e):"Popular Searches"==e.category?m.push(e):g.push(e)});var w=r.options.source&&r.options.source.split(/\s+/)||!1,M=r.options.initialSource&&r.options.initialSource.split(/\s+/)||!1,T=r.options.sourceIdOrder&&r.options.sourceIdOrder.split(",")||!1,k=r.options.initialSourceIdOrder&&r.options.initialSourceIdOrder.split(",")||!1;if(n)if(k||M){if(k)var C=!0;h=e(k||M,C)}else h=e("document_property,popularsearches,recent_query".split(","),!0);else if(T||w){if(T)var L=!0;h=e(T||w,L)}else h=e("document_property,popularsearches,words_and_terms,recent_query,tabs".split(","),!0);i=h,o(i)}finally{a.leave()}})};var h=this.options;if(h.suggest_timeout)var e={query:e.term,property:this.property,timeout_in_seconds:h.suggest_timeout};else var e={query:e.term,property:this.property};h.application.models.search.input.get("name")&&(e.name=h.application.models.search.input.get("name")),h.count&&t.isNumber(h.count)&&(e.count=h.count),h.sources&&(e.source=h.sources);var d=[];if(this._addQuery(d,h.propertyConstraint),this._addQuery(d,h.application.models.search.get("source_context.constraints"),!0),h.getAndSetParentQueryExpr?this._addQuery(d,h.getAndSetParentQueryExpr(h.useConstraintsOnly,this._addQuery)):h.addQueryConstraints&&this._addQuery(d,this._getSearchConstraint(h.useConstraintsOnly)),d.length>0&&(e.property_constraint={and:d}),h.sourceIdPattern&&(e.source_id_pattern=h.sourceIdPattern),n){if(!h.initialSourceIdPattern)return e.source_id_pattern="",void 0;e.source_id_pattern=h.initialSourceIdPattern}var r=this,p=h.application.api.suggest.createInput(e);"recent_query"===e.source_id_pattern||e.source&&0===e.source.length&&h.initialRecentQueriesActivated?i([]):h.application.api.suggest.call(this.channel,p.toJSON(),function(e){if(e){if(!e)return;var n=t.values(e.results)||[];t.each(n,function(e){"DOCUMENT_PROPERTY"==e.source?e.temp_category=e.source:e.source_name&&(e.temp_category=e.source_name)}),n.sort(function(e,t){return e.source===t.source?e.score-t.score:e.source<t.source?-1:1});for(var s,r,a=0,o=[],l=0;l<n.length;++l){var u=n[l];(s!==u.source||r!==u.source_id)&&(a=0,s=u.source,r=u.source_id),a++,a>h.count||o.push({value:u.value,label:u.html,category:u.temp_category,score:u.score})}i(o)}else i([])},{traceContext:a})}}},_getSearchConstraint:function(e){var t;if(t=this.options.parentView&&this.options.parentView.options&&this.options.parentView.options.outerModel?this.options.parentView.options.outerModel.input.get():this.options.model&&this.options.model.input?this.options.model.input.get():this.options.application.models.search.input.get()){var i=[];return e||this._addQuery(i,t.query),t.user&&(e||this._addQuery(i,t.user.query),this._addQuery(i,t.user.constraints,!0)),i.length>0?{and:i}:void 0}},_addQuery:function(i,n,s){n&&(s&&!t.isArray(n)&&(n=t.clone(n),delete n[this&&this.options&&this.options.excludedFilterID],n=e.propertyListToArray(n),t.each(n,function(t){t.filter_base=e.propertyListToArray(t.filter_base),t.filtered=e.propertyListToArray(t.filtered)}),n={and:n}),i.push(n))},change:function(){},clear:function(){this.el.value=""},setValue:function(e){e=e||"",this.el.value=e},computing:function(){},remove:function(){this.$el.off("autocompleteselect"),this.$el.off("autocompletefocus");try{this.$el.autocomplete("destroy")}catch(e){}n.prototype.remove.apply(this,arguments)}});return v.View=_,v}),Mindbreeze.define("text!bootstrap-daterangepicker/daterangepicker-bs2.css",[],function(){return"/*!\n * Stylesheet for the Date Range Picker, for use with Bootstrap 2.x\n *\n * Copyright 2013 Dan Grossman ( http://www.dangrossman.info )\n * Licensed under the Apache License v2.0\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Built for http://www.improvely.com\n */\n\n.daterangepicker.dropdown-menu {\n  max-width: none;\n  z-index: 3000;\n}\n\n.daterangepicker.opensleft .ranges, .daterangepicker.opensleft .calendar {\n  float: left;\n  margin: 4px;\n}\n\n.daterangepicker.opensright .ranges, .daterangepicker.opensright .calendar {\n  float: left;\n  margin: 4px;\n}\n\n@media (max-width: 700px) {\n  .daterangepicker.opensright .ranges, .daterangepicker.opensright .calendar {\n    float: none;\n  }\n}\n@media (min-width: 701px) {\n  .daterangepicker {\n    width: 625px;\n  }\n}\n\n.daterangepicker .ranges {\n  width: 160px;\n  text-align: left;\n}\n\n.daterangepicker .ranges .range_inputs>div {\n  float: left;\n}\n\n.daterangepicker .ranges .range_inputs>div:nth-child(2) {\n  padding-left: 11px;\n}\n\n.daterangepicker .calendar {\n  display: none;\n  max-width: 250px;\n}\n.daterangepicker.show-calendar .calendar {\n    display: block;\n}\n\n.daterangepicker .calendar.single .calendar-date {\n  border: none;\n}\n\n.daterangepicker .calendar th, .daterangepicker .calendar td {\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  white-space: nowrap;\n  text-align: center;\n}\n\n.daterangepicker .daterangepicker_start_input label,\n.daterangepicker .daterangepicker_end_input label {\n  color: #333;\n  font-size: 11px;\n  margin-bottom: 2px;\n  text-transform: uppercase;\n  text-shadow: 1px 1px 0 #fff;\n}\n\n.daterangepicker .ranges input {\n  font-size: 11px;\n}\n\n.daterangepicker .ranges ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n.daterangepicker .ranges li {\n  font-size: 13px;\n  background: #f5f5f5;\n  border: 1px solid #f5f5f5;\n  color: #08c;\n  padding: 3px 12px;\n  margin-bottom: 8px;\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.daterangepicker .ranges li.active, .daterangepicker .ranges li:hover {\n  background: #08c;\n  border: 1px solid #08c;\n  color: #fff;\n}\n\n.daterangepicker .calendar-date {\n  border: 1px solid #ddd;\n  padding: 4px;\n  border-radius: 4px;\n  background: #fff;\n}\n\n.daterangepicker .calendar-time {\n  text-align: center;\n  margin: 8px auto 0 auto;\n  line-height: 30px;\n}\n\n.daterangepicker {\n  position: absolute;\n  background: #fff;\n  top: 100px;\n  left: 20px;\n  padding: 4px;\n  margin-top: 1px;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n}\n\n.daterangepicker.opensleft:before {\n  position: absolute;\n  top: -7px;\n  right: 9px;\n  display: inline-block;\n  border-right: 7px solid transparent;\n  border-bottom: 7px solid #ccc;\n  border-left: 7px solid transparent;\n  border-bottom-color: rgba(0, 0, 0, 0.2);\n  content: '';\n}\n\n.daterangepicker.opensleft:after {\n  position: absolute;\n  top: -6px;\n  right: 10px;\n  display: inline-block;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #fff;\n  border-left: 6px solid transparent;\n  content: '';\n}\n\n.daterangepicker.opensright:before {\n  position: absolute;\n  top: -7px;\n  left: 9px;\n  display: inline-block;\n  border-right: 7px solid transparent;\n  border-bottom: 7px solid #ccc;\n  border-left: 7px solid transparent;\n  border-bottom-color: rgba(0, 0, 0, 0.2);\n  content: '';\n}\n\n.daterangepicker.opensright:after {\n  position: absolute;\n  top: -6px;\n  left: 10px;\n  display: inline-block;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #fff;\n  border-left: 6px solid transparent;\n  content: '';\n}\n\n.daterangepicker table {\n  width: 100%;\n  margin: 0;\n}\n\n.daterangepicker td, .daterangepicker th {\n  text-align: center;\n  width: 20px;\n  height: 20px;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.daterangepicker td.off {\n  color: #999;\n}\n\n.daterangepicker td.disabled {\n  color: #999;\n}\n\n.daterangepicker td.available:hover, .daterangepicker th.available:hover {\n  background: #eee;\n}\n\n.daterangepicker td.in-range {\n  background: #ebf4f8;\n  -webkit-border-radius: 0;\n  -moz-border-radius: 0;\n  border-radius: 0;\n}\n\n.daterangepicker td.active, .daterangepicker td.active:hover {\n  background-color: #006dcc;\n  background-image: -moz-linear-gradient(top, #0088cc, #0044cc);\n  background-image: -ms-linear-gradient(top, #0088cc, #0044cc);\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#0088cc), to(#0044cc));\n  background-image: -webkit-linear-gradient(top, #0088cc, #0044cc);\n  background-image: -o-linear-gradient(top, #0088cc, #0044cc);\n  background-image: linear-gradient(top, #0088cc, #0044cc);\n  background-repeat: repeat-x;\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#0088cc', endColorstr='#0044cc', GradientType=0);\n  border-color: #0044cc #0044cc #002a80;\n  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);\n  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);\n  color: #fff;\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\n}\n\n.daterangepicker td.week, .daterangepicker th.week {\n  font-size: 80%;\n  color: #ccc;\n}\n\n.daterangepicker select.monthselect, .daterangepicker select.yearselect {\n  font-size: 12px;\n  padding: 1px;\n  height: auto;\n  margin: 0;\n  cursor: default;\n}\n\n.daterangepicker select.monthselect {\n  margin-right: 2%;\n  width: 56%;\n}\n\n.daterangepicker select.yearselect {\n  width: 40%;\n}\n\n.daterangepicker select.hourselect, .daterangepicker select.minuteselect, .daterangepicker select.ampmselect {\n  width: 60px;\n  margin-bottom: 0;\n}\n\n.daterangepicker_start_input {\n  float: left;\n}\n\n.daterangepicker_end_input {\n  float: left; \n  padding-left: 11px\n}\n\n.daterangepicker th.month {\n  width: auto;\n}\n"}),/**
* @version: 1.3.13
* @author: Dan Grossman http://www.dangrossman.info/
* @date: 2014-09-04
* @license
* @copyright: Copyright (c) 2012-2014 Dan Grossman. All rights reserved.
* @license: Licensed under Apache License v2.0. See http://www.apache.org/licenses/LICENSE-2.0
* @website: http://www.improvely.com/
*/
Mindbreeze.define("bootstrap-daterangepicker/daterangepicker",["moment","jquery","i18n/i18n","utils/dom","text!./daterangepicker-bs2.css"],function(e,t,i,n,s){e.locale(i.locale);var r="mb-daterangepicker-css",a=document.getElementById(r);if(!a){a=n.createStyleElement(s);var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o)}var l=function(e,i,n){this.parentEl="body",this.element=t(e),this.isShowing=!1;var s='<div class="daterangepicker dropdown-menu"><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div><div class="calendar right"></div><div class="calendar left"></div></div>';("object"!=typeof i||null===i)&&(i={}),this.parentEl="object"==typeof i&&i.parentEl&&t(i.parentEl).length?t(i.parentEl):t(this.parentEl),this.container=t(s).appendTo(this.parentEl),this.setOptions(i,n);var r=this.container;t.each(this.buttonClasses,function(e,t){r.find("button").addClass(t)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",t.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",t.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",t.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",t.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",t.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",t.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",t.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",t.proxy(this.updateTime,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",t.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",t.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",t.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",t.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",t.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",t.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",t.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",t.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":t.proxy(this.show,this),"focus.daterangepicker":t.proxy(this.show,this),"keyup.daterangepicker":t.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",t.proxy(this.toggle,this))};return l.prototype={constructor:l,setOptions:function(i,n){if(this.startDate=e().startOf("day"),this.endDate=e().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.suppressInputParsing=!1,this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData()._week.dow},this.cb=function(){},"boolean"==typeof i.suppressInputParsing&&(this.suppressInputParsing=i.suppressInputParsing),"string"==typeof i.format&&(this.format=i.format),"string"==typeof i.separator&&(this.separator=i.separator),"string"==typeof i.startDate&&(this.startDate=e(i.startDate,this.format)),"string"==typeof i.endDate&&(this.endDate=e(i.endDate,this.format)),"string"==typeof i.minDate&&(this.minDate=e(i.minDate,this.format)),"string"==typeof i.maxDate&&(this.maxDate=e(i.maxDate,this.format)),"object"==typeof i.startDate&&(this.startDate=e(i.startDate)),"object"==typeof i.endDate&&(this.endDate=e(i.endDate)),"object"==typeof i.minDate&&(this.minDate=e(i.minDate)),"object"==typeof i.maxDate&&(this.maxDate=e(i.maxDate)),"string"==typeof i.applyClass&&(this.applyClass=i.applyClass),"string"==typeof i.cancelClass&&(this.cancelClass=i.cancelClass),"object"==typeof i.dateLimit&&(this.dateLimit=i.dateLimit),"object"==typeof i.locale&&("object"==typeof i.locale.daysOfWeek&&(this.locale.daysOfWeek=i.locale.daysOfWeek.slice()),"object"==typeof i.locale.monthNames&&(this.locale.monthNames=i.locale.monthNames.slice()),"number"==typeof i.locale.firstDay&&(this.locale.firstDay=i.locale.firstDay),"string"==typeof i.locale.applyLabel&&(this.locale.applyLabel=i.locale.applyLabel),"string"==typeof i.locale.cancelLabel&&(this.locale.cancelLabel=i.locale.cancelLabel),"string"==typeof i.locale.fromLabel&&(this.locale.fromLabel=i.locale.fromLabel),"string"==typeof i.locale.toLabel&&(this.locale.toLabel=i.locale.toLabel),"string"==typeof i.locale.weekLabel&&(this.locale.weekLabel=i.locale.weekLabel),"string"==typeof i.locale.customRangeLabel&&(this.locale.customRangeLabel=i.locale.customRangeLabel)),"string"==typeof i.opens&&(this.opens=i.opens),"boolean"==typeof i.showWeekNumbers&&(this.showWeekNumbers=i.showWeekNumbers),"string"==typeof i.buttonClasses&&(this.buttonClasses=[i.buttonClasses]),"object"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses),"boolean"==typeof i.showDropdowns&&(this.showDropdowns=i.showDropdowns),"boolean"==typeof i.singleDatePicker&&(this.singleDatePicker=i.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof i.timePicker&&(this.timePicker=i.timePicker),"number"==typeof i.timePickerIncrement&&(this.timePickerIncrement=i.timePickerIncrement),"boolean"==typeof i.timePicker12Hour&&(this.timePicker12Hour=i.timePicker12Hour),0!=this.locale.firstDay)for(var s=this.locale.firstDay;s>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),s--;var r,a,o;if("undefined"==typeof i.startDate&&"undefined"==typeof i.endDate&&t(this.element).is("input[type=text]")){var l=t(this.element).val(),u=l.split(this.separator);r=a=null,2==u.length?(r=e(u[0],this.format),a=e(u[1],this.format)):this.singleDatePicker&&(r=e(l,this.format),a=e(l,this.format)),null!==r&&null!==a&&(this.startDate=r,this.endDate=a)}if("object"==typeof i.ranges){for(o in i.ranges)r=e(i.ranges[o][0]),a=e(i.ranges[o][1]),this.minDate&&r.isBefore(this.minDate)&&(r=e(this.minDate)),this.maxDate&&a.isAfter(this.maxDate)&&(a=e(this.maxDate)),this.minDate&&a.isBefore(this.minDate)||this.maxDate&&r.isAfter(this.maxDate)||(this.ranges[o]=[r,a]);var c="<ul>";for(o in this.ranges)c+="<li>"+o+"</li>";c+="<li>"+this.locale.customRangeLabel+"</li>",c+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(c)}if("function"==typeof n&&(this.cb=n),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:e([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:e([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]},"right"==this.opens){var h=this.container.find(".calendar.left"),d=this.container.find(".calendar.right");d.hasClass("single")&&(d.removeClass("single"),h.addClass("single")),h.removeClass("left").addClass("right"),d.removeClass("right").addClass("left"),this.singleDatePicker&&(h.show(),d.hide())}"undefined"!=typeof i.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(t){"string"==typeof t&&(this.startDate=e(t,this.format)),"object"==typeof t&&(this.startDate=e(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(t){"string"==typeof t&&(this.endDate=e(t,this.format)),"object"==typeof t&&(this.endDate=e(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled")},updateFromControl:function(){if(!this.suppressInputParsing&&this.element.is("input")&&this.element.val().length){var t=this.element.val().split(this.separator),i=null,n=null;2===t.length&&(i=e(t[0],this.format),n=e(t[1],this.format)),(this.singleDatePicker||null===i||null===n)&&(i=e(this.element.val(),this.format),n=i),n.isBefore(i)||(this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=i,this.endDate=n,this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.updateCalendars())}},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var e={top:0,left:0},i=t(window).width();this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),"left"==this.opens?(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,right:i-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>t(window).width()&&this.container.css({left:"auto",right:0}))},toggle:function(){this.element.hasClass("active")?this.hide():this.show()},show:function(){this.isShowing||(this.element.addClass("active"),this.container.show(),this.move(),this._outsideClickProxy=t.proxy(function(e){this.outsideClick(e)},this),t(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.element.trigger("show.daterangepicker",this))},outsideClick:function(e){var i=t(e.target);i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-date").length||this.hide()},hide:function(){this.isShowing&&(t(document).off("mousedown.daterangepicker").off("click.daterangepicker","[data-toggle=dropdown]").off("focusin.daterangepicker"),this.element.removeClass("active"),this.container.hide(),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.isShowing=!1,this.element.trigger("hide.daterangepicker",this))},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(i){var n=t(i.target),s=e(n.val(),this.format);if(s.isValid()){var r,a;"daterangepicker_start"===n.attr("name")?(r=s,a=this.endDate):(r=this.startDate,a=s),this.setCustomDates(r,a)}},inputsKeydown:function(e){13===e.keyCode&&(this.inputsChanged(e),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.endDate.format(this.format))},clickRange:function(e){var t=e.target.innerHTML;if(this.chosenLabel=t,t==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[t];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(e){var i=t(e.target).parents(".calendar");i.hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var i=t(e.target).parents(".calendar");i.hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(e){var i=t(e.target).attr("data-title"),n=i.substr(1,1),s=i.substr(3,1),r=t(e.target).parents(".calendar");r.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[n][s].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[n][s].format(this.format))},setCustomDates:function(t,i){if(this.chosenLabel=this.locale.customRangeLabel,t.isAfter(i)){var n=this.endDate.diff(this.startDate);i=e(t).add(n,"ms")}this.startDate=t,this.endDate=i,this.updateView(),this.updateCalendars()},clickDate:function(i){var n,s,r=t(i.target).attr("data-title"),a=r.substr(1,1),o=r.substr(3,1),l=t(i.target).parents(".calendar");if(l.hasClass("left")){if(n=this.leftCalendar.calendar[a][o],s=this.endDate,"object"==typeof this.dateLimit){var u=e(n).add(this.dateLimit).startOf("day");s.isAfter(u)&&(s=u)}}else if(n=this.startDate,s=this.rightCalendar.calendar[a][o],"object"==typeof this.dateLimit){var c=e(s).subtract(this.dateLimit).startOf("day");n.isBefore(c)&&(n=c)}this.singleDatePicker&&l.hasClass("left")?s=n.clone():this.singleDatePicker&&l.hasClass("right")&&(n=s.clone()),l.find("td").removeClass("active"),t(i.target).addClass("active"),this.setCustomDates(n,s),this.timePicker||s.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(e){var i=t(e.target).closest(".calendar").hasClass("left"),n=i?"left":"right",s=this.container.find(".calendar."+n),r=parseInt(s.find(".monthselect").val(),10),a=s.find(".yearselect").val();this[n+"Calendar"].month.month(r).year(a),this.updateCalendars()},updateTime:function(e){var i=t(e.target).closest(".calendar"),n=i.hasClass("left"),s=parseInt(i.find(".hourselect").val(),10),r=parseInt(i.find(".minuteselect").val(),10);if(this.timePicker12Hour){var a=i.find(".ampmselect").val();"PM"===a&&12>s&&(s+=12),"AM"===a&&12===s&&(s=0)}if(n){var o=this.startDate.clone();o.hour(s),o.minute(r),this.startDate=o,this.leftCalendar.month.hour(s).minute(r)}else{var l=this.endDate.clone();l.hour(s),l.minute(r),this.endDate=l,this.rightCalendar.month.hour(s).minute(r)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate)),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate)),this.container.find(".ranges li").removeClass("active");var e=!0,t=0;for(var i in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[i][0])&&this.endDate.isSame(this.ranges[i][1])&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()):this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")&&(e=!1,this.chosenLabel=this.container.find(".ranges li:eq("+t+")").addClass("active").html()),t++;e&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())},buildCalendar:function(t,i,n,s){var r,a=e([i,t]).daysInMonth(),o=e([i,t,1]),l=e([i,t,a]),u=e(o).subtract(1,"month").month(),c=e(o).subtract(1,"month").year(),h=e([c,u]).daysInMonth(),d=o.day(),p=[];for(p.firstDay=o,p.lastDay=l,r=0;6>r;r++)p[r]=[];var m=h-d+this.locale.firstDay+1;m>h&&(m-=7),d==this.locale.firstDay&&(m=h-6);var f,g,v=e([c,u,m,12,s]);for(r=0,f=0,g=0;42>r;r++,f++,v=e(v).add(24,"hour"))r>0&&0===f%7&&(f=0,g++),p[g][f]=v.clone().hour(n),v.hour(12);return p},renderDropdowns:function(e,t,i){for(var n=e.month(),s='<select class="monthselect">',r=!1,a=!1,o=0;12>o;o++)(!r||o>=t.month())&&(!a||o<=i.month())&&(s+="<option value='"+o+"'"+(o===n?" selected='selected'":"")+">"+this.locale.monthNames[o]+"</option>");s+="</select>";for(var l=e.year(),u=i&&i.year()||l+5,c=t&&t.year()||l-50,h='<select class="yearselect">',d=c;u>=d;d++)h+='<option value="'+d+'"'+(d===l?' selected="selected"':"")+">"+d+"</option>";return h+="</select>",s+h},renderCalendar:function(e,i,n,s){var r='<div class="calendar-date">';r+='<table class="table-condensed">',r+="<thead>",r+="<tr>",this.showWeekNumbers&&(r+="<th></th>"),r+=!n||n.isBefore(e.firstDay)?'<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>':"<th></th>";var a=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");this.showDropdowns&&(a=this.renderDropdowns(e[1][1],n,s)),r+='<th colspan="5" class="month">'+a+"</th>",r+=!s||s.isAfter(e.lastDay)?'<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>':"<th></th>",r+="</tr>",r+="<tr>",this.showWeekNumbers&&(r+='<th class="week">'+this.locale.weekLabel+"</th>"),t.each(this.locale.daysOfWeek,function(e,t){r+="<th>"+t+"</th>"}),r+="</tr>",r+="</thead>",r+="<tbody>";for(var o=0;6>o;o++){r+="<tr>",this.showWeekNumbers&&(r+='<td class="week">'+e[o][0].week()+"</td>");for(var l=0;7>l;l++){var u="available ";u+=e[o][l].month()==e[1][1].month()?"":"off",n&&e[o][l].isBefore(n,"day")||s&&e[o][l].isAfter(s,"day")?u=" off disabled ":e[o][l].format("YYYY-MM-DD")==i.format("YYYY-MM-DD")?(u+=" active ",e[o][l].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(u+=" start-date "),e[o][l].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(u+=" end-date ")):e[o][l]>=this.startDate&&e[o][l]<=this.endDate&&(u+=" in-range ",e[o][l].isSame(this.startDate)&&(u+=" start-date "),e[o][l].isSame(this.endDate)&&(u+=" end-date "));var c="r"+o+"c"+l;r+='<td class="'+u.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+c+'">'+e[o][l].date()+"</td>"}r+="</tr>"}r+="</tbody>",r+="</table>",r+="</div>";var h;if(this.timePicker){r+='<div class="calendar-time">',r+='<select class="hourselect">';var d=0,p=23,m=i.hour();for(this.timePicker12Hour&&(d=1,p=12,m>=12&&(m-=12),0===m&&(m=12)),h=d;p>=h;h++)r+=h==m?'<option value="'+h+'" selected="selected">'+h+"</option>":'<option value="'+h+'">'+h+"</option>";for(r+="</select> : ",r+='<select class="minuteselect">',h=0;60>h;h+=this.timePickerIncrement){var f=h;10>f&&(f="0"+f),r+=h==i.minute()?'<option value="'+h+'" selected="selected">'+f+"</option>":'<option value="'+h+'">'+f+"</option>"}r+="</select> ",this.timePicker12Hour&&(r+='<select class="ampmselect">',r+=i.hour()>=12?'<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':'<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',r+="</select>"),r+="</div>"}return r},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},t.fn.daterangepicker=function(e,i){return this.each(function(){var n=t(this);n.data("daterangepicker")&&n.data("daterangepicker").remove(),n.data("daterangepicker",new l(n,e,i))}),this},l}),Mindbreeze.define("components/inputdate/js/inputdate",["api/v2/common","underscore","component!base","component!searchform","client/template","client/templateregistry","utils/dom","jquery","i18n/i18n","bootstrap-daterangepicker/daterangepicker","moment"],function(e,t,i,n,s,r,a,o,l,u,c){var h=s.extend({}),d=n.ComponentView.extend({tagName:"input",initializeDatePicker:function(){var e=this;n.ComponentView.prototype.initialize.apply(this,arguments);var t=e.options&&"true"===e.options.isrange;if(this.formats=["DD.MM.YYYY","DD-MM-YYYY","MM.DD.YYYY","MM-DD-YYYY","D. MMMM YYYY","DD. MMMM YYYY","DD MMMM YYYY","D MMMM YYYY","MMMM YYYY","YYYY MMMM","MM YYYY","YYYY MM","M YYYY","YYYY M","MMMM","YYYY"],this.formatGranularityMap={"DD.MM.YYYY":"D","DD-MM-YYYY":"D","MM.DD.YYYY":"D","MM-DD-YYYY":"D","D. MMMM YYYY":"D","DD. MMMM YYYY":"D","DD MMMM YYYY":"D","D MMMM YYYY":"D","MMMM YYYY":"M","YYYY MMMM":"M","MM YYYY":"M","YYYY MM":"M","M YYYY":"M","YYYY M":"M",MMMM:"M",YYYY:"Y"},!this.picker){if(this.picker=this.$el.daterangepicker({showDropdowns:!0,singleDatePicker:!t,minDate:"01.01.1900",maxDate:"12.31.2100",format:"DD.MM.YYYY",suppressInputParsing:!0,locale:{applyLabel:l("Apply"),cancelLabel:l("Cancel"),fromLabel:l("daterangepicker_from"),toLabel:l("daterangepicker_to"),weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:c.weekdaysMin(),monthNames:c.monthsShort(),firstDay:c.localeData()._week.dow}}),this.picker.show,this.$el.on("apply.daterangepicker",function(t,i){var n=(i.startDate.valueOf(),i.endDate.valueOf(),e.options&&"true"===e.options.isrange),s=n?l("daterangepicker_from")+" "+i.startDate.format("DD.MM.YYYY")+" "+l("daterangepicker_to")+" "+i.endDate.format("DD.MM.YYYY"):i.startDate.format("DD.MM.YYYY");e.setQuery(e.$el,s,i.startDate,i.endDate,!0),e.options.parentView.submit(t,null)}),!o.browser.msie){this.$el.wrap('<div class="mb-input-clear"></div>');var i=o('<button class="btn mb-btn-no-decor mb-no-print" type="button" tabindex="-1"><i class="icon-remove-sign"></i></button>');this.$el.after(i),i.click(function(t){(e.$el.val()||e.$el.data("queryexpr"))&&(e.$el.data("queryexpr",null).trigger("changedata"),e.options.parentView.submit(t,null))})}this.$el.change(function(t){e.$el.val()||(e.$el.data("queryexpr",null).trigger("changedata"),e.options.parentView.submit(t,null),o(t.target).data("daterangepicker").hide())}),this.$el.keypress(function(t,i){if(o(t.target).data("daterangepicker").show(),13!==t.keyCode)e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.parseInput(o(t.target).val(),i)},1e3);else{e.timeout&&clearTimeout(e.timeout),e.parseInput(o(t.target).val(),i);var n=o(t.target).data("queryexpr");(null==n||void 0==n)&&(t.preventDefault(),t.stopPropagation()),o(t.target).data("daterangepicker").hide()}})}},initialize:function(){o(this.el).on("mouseover",t.bind(function(){this.initializeDatePicker()},this))},isRange:function(){return this.options&&"true"===this.options.isrange},setQuery:function(e,t,i,n,s){if(e&&i&&n){i.startOf("day"),n.endOf("day");var r={description:t,and:[{num:i.valueOf()-72e5,cmp:"GE",unit:"ms_since_1970"},{num:n.valueOf(),cmp:"LE",unit:"ms_since_1970"}]};s?o(e).data("queryexpr",r).trigger("changedata"):o(e).data("queryexpr",r)}},getDateStrings:function(e){var t=new RegExp(".*\\s*(from|"+l("daterangepicker_from")+")\\s*","i"),i=new RegExp("\\s+(to|:|"+l("daterangepicker_to")+")\\s+","i");if(e){e=e.replace(t,"");for(var n=e.split(i),s=[],r=0;r<n.length;r++)s.push(n[r].trim());return s}return[e.trim()]},parseSingleDate:function(e){var t=c(e,this.formats,!1),i=t;if(t.isValid()){var n=this.formatGranularityMap[t._f];i=t.clone(),"D"==n?i.endOf("day"):"M"==n?i.endOf("month"):"Y"==n&&i.endOf("year");var s=o(this.picker).data("daterangepicker");return s.startDate=t,s.endDate=t,s.format=t._f,s.leftCalendar.month.month(t.month()).year(t.year()),s.rightCalendar.month.month(t.month()).year(t.year()),s.updateCalendars(),s.notify(),{formatType:n,startDate:t,endDate:i}}return{startDate:null,endDate:null}},parseDateRange:function(e,t){var i=c(e,this.formats,!1),n=c(t,this.formats,!1);if(i.isValid()&&n.isValid()){n.endOf("day");var s=this.formatGranularityMap[i._f],r=this.formatGranularityMap[n._f];"M"==r?n.endOf("month"):"Y"==r&&n.endOf("year");var a=o(this.picker).data("daterangepicker");return a.startDate=i,a.format=i._f,a.endDate=n,a.leftCalendar.month.month(i.month()).year(i.year()),a.rightCalendar.month.month(n.month()).year(n.year()),a.updateCalendars(),a.notify(),{startFormatType:s,endFormatType:r,startDate:i,endDate:n}}return{startDate:null,endDate:null}},parseInput:function(e){try{var t=this.getDateStrings(e),i=null;t&&t.length?(i=this.isRange()?this.parseDateRange(t[0],t[t.length-1]):this.parseSingleDate(t[0]),i&&i.startDate&&i.endDate?this.setQuery(this.picker,e,i.startDate,i.endDate,!0):o(this.picker).data("queryexpr",null)):o(this.picker).data("queryexpr",null)}catch(n){o(this.picker).data("queryexpr",null)}}});return h.View=d,h}),Mindbreeze.define("components/inputnumber/js/inputnumber",["api/v2/common","underscore","component!base","component!searchform","client/template","client/templateregistry","utils/dom","jquery","i18n/i18n","moment"],function(e,t,i,n,s,r,a,o){var l=s.extend({}),u=n.ComponentView.extend({initialize:function(){if(n.ComponentView.prototype.initialize.apply(this,arguments),this.cmpType="GE",this.el.getAttribute("data-range"))switch(this.el.getAttribute("data-range").toLowerCase()){case"from":this.cmpType="GE";break;case"to":this.cmpType="LE"}this.$el.data("queryexpr",t.bind(this.queryexpr,this))},queryexpr:function(e){if(void 0===e){var t=o(this.el).val(),i=parseInt(t);return isNaN(i)?null:{description:t,num:i,cmp:this.cmpType}}}});return l.View=u,l}),Mindbreeze.define("components/inputregex/js/inputregex",["api/v2/common","underscore","component!base","component!searchform","client/template","client/templateregistry","utils/dom","jquery","i18n/i18n"],function(e,t,i,n,s,r,a,o){var l=s.extend({}),u=n.ComponentView.extend({tagName:"input",initialize:function(){n.ComponentView.prototype.initialize.apply(this,arguments);var e=this.$el.data("queryexpr");e&&!t.isFunction(e)&&o(this.el).val(e.description),this.$el.data("queryexpr",t.bind(this.setQuery,this))},setQuery:function(){var e=o(this.el).val(),t=o(this.el).attr("name");return 0==e.length?null:{description:e,id:t,label:t,regex:".*\\Q"+e+"\\E.*"}}});return l.View=u,l}),Mindbreeze.define("components/charts/js/charts",["client/templates","api/v2/search","client/template","component!base","i18n/i18n","jquery","underscore","highcharts"],function(e,t,i,n,s,r,a){var o=i.extend({schema:new i.Schema({inputAttributes:{chartTitle:{title:"editor_chart_title",type:"string"},chartSourceName:{title:"editor_chart_source_name",type:"enum",values:{bind:{options:"available_facets",value:"name",text:"localized_name"}}},enableCustomSourceName:{title:"editor_enable_custom_sourcename",type:"boolean",defaultValue:!1,"default":!1},customSourceName:{title:"editor_custom_sourcename",type:"string",depends:""},chartheight:{title:"editor_chart_height",type:"int"},titlealign:{title:"editor_title_align",type:"enum",values:[{value:"center",text:"Center"},{value:"left",text:"Left"},{value:"right",text:"Right"}]},showlegend:{title:"editor_show_legend",type:"boolean",defaultValue:!1,"default":!1,depends:"'pie' === attributes['charttype']"}}}),getOptions:function(e){return e=a.extend({},i.prototype.getOptions.apply(this,arguments),this.attributeModel.get()),this.schema.parseAttributes(e)}});return o.View=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments);var e="true"==this.options.enablecustomsourcename?this.options.customsourcename:this.options.chartsourcename||this.options.chartSourceName,t=this.options.chartsourcename2||this.options.chartSourceName2;this.options.chartsourcename3||this.options.chartSourceName3;var i=this.options.chartsource||this.options.chartSource;this.name=e,this.source=i,"facets2"==this.source&&(this.name="filter_"+e+"_"+t,this.model.set("computed_properties",[{name:this.name,expr:"concat("+e+',";",'+t+")"}],{silent:!0}));var s={};s[this.name]={format:"HTML"};var o={cid:a.uniqueId("c"),facets:s,name:this.name,properties:{count:{format:"PROPERTY"},excluded:{format:"PROPERTY"},html:{format:"HTML"},showAddAnd:{format:"PROPERTY"}},setView:function(){},clear:function(){},stopListening:function(){}};this.facetRegistriation=o,this.model.addFacet&&void 0!==this.facetRegistriation.cid&&this.model.addFacet(this.facetRegistriation,{silent:!1}),this.constraintsModel=this.model.input.submodel("user.constraints"),this.listenTo(this.model,"change",this.render),r(window).resize(a.bind(function(){this.$el.highcharts()&&this.$el.highcharts().reflow()},this))},renderFacets:function(){var e=this.model.get("entries")||this.model.get(["facets",this.name,"entries"]);e=a.uniq(e,function(e){return e.html});var t=this,i=this.options.charttype,n=this.options.charttitle||null,s=this.options.chartwidth,o=this.options.chartheight,l=this.options.titlealign,u=this.options.yaxistitletext,c=this.options.showlegend||!1,h="pie"==i;
if(!e||!e.length)return this.$el.hide(),void 0;this.$el.show();for(var d={},p={title:{text:n,align:l||"center"},chart:{type:i,height:o||200,width:s||null,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,spacingBottom:10,spacingTop:0,spacingLeft:0,spacingRight:0,marginTop:30},yAxis:{title:{text:u||"Count"},plotLines:[{value:0,width:1,color:"#808080"}]},credits:!1,plotOptions:{pie:{allowPointSelect:!0,animation:!1,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:c,point:{events:{click:function(){this.color;var i=e[this.index],n=i.query_expr.label?"filter_"+i.query_expr.label:a.uniqueId("cid"),s={};a.each(e,function(e){var t=e.query_expr;s[t.id]=t});var r={};r[0]=i.query_expr;var o={label:i.query_expr.label,filtered_name:i.query_expr.label,filtered:s,id:n,filter_base:r};this.userConstraintInput=t.model.input.submodel("user.constraints"),(this.userConstraintInput.get(n)&&this.userConstraintInput.get(n).filter_base[0].id)!=this.name?this.userConstraintInput.set(n,o):this.userConstraintInput.unset(n,p)}}}},bar:{point:{events:{click:function(){}}}},column:{point:{events:{click:function(){}}}},line:{point:{events:{click:function(){}}}}}},m=0;m<e.length;++m){var f=this.getDecodedHTML(e[m].html);d[f]={count:e[m].count,value:f,name:f}}var g=a.filter(a.keys(d),function(e){return d[e]&&null!=d[e].count}),v=[];if(h){for(var _=[],m=0;m<g.length;++m)_.push({name:g[m],y:d[g[m]].count});v.push({name:n,data:_})}else{var y={name:n};y.data=a.map(g,function(e){return d[e].count}),v.push(y),p.xAxis={categories:g}}p.series=v,r(this.el).append("<div class='mb-highcharts'></div>"),r(this.el).find(".mb-highcharts").highcharts(p)},getDecodedHTML:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},render:function(){return this.renderFacets()},remove:function(){this.constraintsModel&&this.constraintsModel.dispose(),this.el.innerHTML="",this.model.removeFacet&&this.model.removeFacet(this.facetRegistriation),void 0!==this.$el.highcharts()&&this.$el.highcharts().destroy(),n.prototype.remove.apply(this,arguments)}}),e.add({name:"charts",weight:7,attributes:{size:{title:"Title",type:"string",defaultValue:"charts"}},designer_menu:[{name:"editor_pie_title",icon:"../img/imgpiechart.png",group:{name:"Charts"},options:{charttype:"pie"}},{name:"editor_bar_title",icon:"../img/imgbarchart.png",group:{name:"Charts"},options:{charttype:"bar"}},{name:"editor_line_title",icon:"../img/imglinechart.png",group:{name:"Charts"},options:{charttype:"line"}}]}),o}),Mindbreeze.define("components/accordion/js/accordion",["client/template","component!base","underscore","jquery"],function(e,t,i,n){var s=e.extend({schema:new e.Schema({attributes:{enabled:{type:"boolean",title:"editor_facet_collapsible_label","default":!1},"default-open":{type:"boolean",title:"editor_facet_default_open_label","default":!1}}}),createView:function(t){return t=i.extend({},t,this.schema.parseAttributes(this.attributeModel.get()),this.schema.parseAttributes(this.attributeModel.getCamelCase())),t.defaultOpen=this.get("default-open"),e.prototype.createView.apply(this,[t].concat(Array.prototype.slice.call(arguments,1)))},createSubView:function(e,t,i){var s=e.template.createView({application:t.application,collapsible:t.enabled,defaultOpen:t.defaultOpen,accordion:t.enabled?this.instances.instances[0]:null,model:i,node:e});s&&e.template&&s.el!==e.template.el&&s.el!==e.template.el.parentNode&&n(e.template.el).after(s.el)}});return s.View=t.extend({events:{},initialize:function(){t.prototype.initialize.apply(this,arguments),this.options.enabled&&(this.el.setAttribute("role","tablist"),this.el.setAttribute("tabindex","0"),this.el.setAttribute("aria-multiselectable","true"),this.$el.addClass("mb-role"))},isOpen:function(e,t){var i="undefined"==typeof t?this.options.defaultOpen:t,n=this.options.application.models.tabs.setting(e);return"undefined"!=typeof n&&(i=n===!0),!!i},setEditable:function(){}}),s}),Mindbreeze.define("client/views/label",["component!base"],function(e){var t=e.extend({render:function(){var e=this.model&&this.model.get("label");return this.el.innerHTML=e||"",this}});return t}),Mindbreeze.define("utils/array",{move:function(e,t,i){return this.growArrayToLength(e,t+1),this.growArrayToLength(e,i+1),e.splice(i,0,e.splice(t,1)[0]),e},growArrayToLength:function(e,t){return t>e.length&&(e[t-1]=void 0),e}}),Mindbreeze.define("client/views/list",["component!base","client/views/label","utils/array","i18n/i18n","underscore","jquery"],function(e,t,i,n,s){var r=function(){this.instances=[]};r.prototype={push:function(e){if(e){var t=this,i=e.remove;e.remove=function(){t.instances=s.without(t.instances,this),i.apply(this,arguments),e.remove=i},this.instances.push(e)}},remove:function(e){e?this.instances=s.without(this.instances,e):(s.forEach(this.instances,function(e){e.remove()}),this.instances=[])}};var a=e.extend({tagName:"ul",className:"nav nav-stacked nav-pills",defaultOptions:{entryTagName:"li"},initialize:function(){e.prototype.initialize.apply(this,arguments);var t=this;this.children=new r,s.each(this.model&&this.model.models,function(e){t.addOne(e,t.model)})},setModel:function(){e.prototype.setModel.apply(this,arguments),this.model&&(this.listenTo(this.model,"add",this.addOne),this.listenTo(this.model,"remove",function(e){var t=s.indexOf(this.model.models,e);0===this.$el.find(" > li").eq(this.options.showMoreAfter).length&&(-1===t?this.$el.find(" > li.li-sub ul li").eq(0).insertBefore(this.$el.find(" > li").eq(this.options.showMoreAfter-1)):t>-1&&this.$el.find(" > li.li-sub ul li").eq(t-this.options.showMoreAfter).insertBefore(this.$el.find(" > li").eq(this.options.showMoreAfter-1)))}),this.listenTo(this.model,"change",function(e){if(e&&e.changed&&e.changed.selected&&this.model.models){var t=s.indexOf(this.model.models,e);t>=this.options.showMoreAfter&&(this.$el.find(" > li.li-sub ul li").eq(t-this.options.showMoreAfter).insertBefore(this.$el.find(" > li").eq(this.options.showMoreAfter-1)),this.$el.find(" > li.li-sub ul li").length>0?this.$el.find(" > li").eq(this.options.showMoreAfter).insertBefore(this.$el.find(" > li.li-sub ul li").eq(0)):this.$el.find(" > li").eq(this.options.showMoreAfter).appendTo(this.$el.find(" > li.li-sub ul")),i.move(this.model.models,t,this.options.showMoreAfter-1))}}))},setEditable:function(){},createEntryView:function(e){return new this.constructor.EntryView(s.extend({application:this.options.application,tagName:this.options.entryTagName,className:this.options.entryClassName,role:this.options.entryRole,childViewConstructor:this.options.childViewConstructor||t,referenceList:this.children},e)).render()},addOne:function(e,t,i){i=i||{};var r="undefined"==typeof i.at?t&&s.indexOf(t.models,e):i.at,a=this.createEntryView({model:e});if(this.children.push(a),r==this.options.showMoreAfter){var o=document.createElement("li");o.className="li-sub";var l=document.createElement("span");l.setAttribute("data-i18n","show_more"),l.appendChild(document.createTextNode(n("show_more"))),o.appendChild(l);var u=document.createElement("ul");u.className="ul-sub",o.appendChild(u),this.insertAt(o,r),u.appendChild(a.el)}else if(r>this.options.showMoreAfter&&r<this.model.models.length){var u=document.getElementsByClassName("ul-sub");u[0].appendChild(a.el)}else this.insertAt(a.el,r)},remove:function(t){t&&t!==this.model||(this.children.remove(),e.prototype.remove.apply(this,arguments))}});return a.EntryView=e.extend({tagName:"li",initialize:function(){var t=s.clone(this.options);delete t.tagName,delete t.className,this.childView=this.createChildView(t),this.childView&&this.childView.render(),e.prototype.initialize.apply(this,arguments),this.childView&&this.childView.el&&this.insertAt(this.childView.el,0)},setEditable:function(){},createChildView:function(e){return new this.options.childViewConstructor(e)},setModel:function(){e.prototype.setModel.apply(this,arguments),this.childView&&this.childView.setModel(this.model)},remove:function(t){t&&t!==this.model||(this.options.referenceList&&this.options.referenceList.remove(this),this.childView&&(this.childView.remove(),delete this.childView),e.prototype.remove.apply(this,arguments))}}),a}),Mindbreeze.define("client/views/tree",["component!base","client/views/list","underscore"],function(e,t,i){var n=t.extend({defaultOptions:{entryTagName:"li"},createEntryView:function(e){return t.prototype.createEntryView.apply(this,[i.extend(e,{childrenPath:this.options.childrenPath,containerTagName:this.tagName,containerClassName:this.className,containerConstructor:this.constructor})])}});return n.EntryView=t.EntryView.extend({updateChildListView:function(){var e=this.getChildModel();if(e){this.childListView&&this.childListView.remove();var t=i.clone(this.options),n=t.tagName,s=t.className;delete t.tagName,delete t.className,this.childListView=new this.options.containerConstructor(i.extend({tagName:t.containerTagName,className:t.containerClassName,entryTagName:n,entryClassName:s},t,{model:e})),this.appendChild(this.childListView.el)}else this.childListView&&(this.childListView.remove(),delete this.childListView)},getChildModel:function(){return this.model.get(this.options.childrenPath)},setModel:function(){t.EntryView.prototype.setModel.apply(this,arguments),this.childView&&this.childView.setModel(this.model),this.model&&(this.updateChildListView(),this.listenTo(this.model,"change:"+this.options.childrenPath,this.updateChildListView))},remove:function(){this.childListView&&(this.childListView.remove(),delete this.childListView),t.EntryView.prototype.remove.apply(this,arguments)}}),n}),Mindbreeze.define("components/filteredfacet/js/filteredfacet",["i18n/i18n","api/v2/search","api/v2/common","model/tree","model/readonlytree","model/computed","model/filtered_collection","client/template","component!mustache","utils/mustache","utils/string","component!base","component!suggest","component!searchform","component!accordion","client/views/tree","client/views/list","client/templateregistry","utils/dom","utils/keys","utils/trace","jquery","client/application","underscore","backbone"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,T){var k='<script type="text/x-mustache-template" data-tag-name="span"><span class="{{#showAddAnd?}}mb-add-and-available{{/showAddAnd?}} mb-tooltip">{{{html}}}{{#showAddAnd?}} <a class="action mb-add-and"><i class="icon-plus-sign"></i></a>{{/showAddAnd?}}</span><span class="pull-right" title="{{count}}">{{#count?}}&nbsp;{{count}}{{/count?}}{{#excluded}}&ndash;{{/excluded}}</span></script>',C={Date:"inputdate",String:"suggest"},L={Date:{isrange:"true"}},D=function(){};M.extend(D.prototype,T.Events,{id:"filteredfacet",name:"editor_facet_title",weight:4,getAdders:function(e,t){var i=this;if(this.previousModel&&this.changeListener&&(this.previousModel.off("change",this.changeListener),delete this.previousModel,delete this.changeListener),"view"===e.type){this.previousModel=e,this.changeListener=function(){i.trigger("changed",this)},e.on("change",this.changeListener);var n=t.models.search.get("available_facets")||[];return n=n.sort(function(e,t){return e=e&&e.name,t=t&&t.name,t>e?-1:1}),M.collect(n,function(e){return{name:e.name,icon:"../img/imgfacet.png",options:{name:e.name}}})}},create:function(e){return T.View.prototype.make("div",{"data-template":"filteredfacet","data-name":e.name,"data-title":e.title},k)}}),v.add(new D);var E=o.extend({editableName:"editor_facet_title",initialize:function(){o.prototype.initialize.apply(this,M.toArray(arguments)),this.$el=w(this.el)},getDefaultTemplate:function(){return k},createView:function(e){var t=new this.constructor.View(M.extend(this.attributeModel.getCamelCase(),e,{application:e.application,el:e.el||this.el,suggest:this.get("suggest",e.suggest),userInput:this.get("user-input",e.userInput),disableUserInput:this.get("disable-user-input",e.disableUserInput),userInputTemplate:this.get("user-input-template",e.userInputTemplate),alwaysVisible:this.get("always-visible",e.alwaysVisible),andAvailable:this.get("and-available",e.andAvailable),collapsible:this.get("collapsible",e.collapsible),defaultOpen:this.get("default-open",e.defaultOpen),displayed:this.get("displayed",e.displayed),template:this,dropdownfilter:this.get("dropdownfilter",e.dropdownfilter),dropdownfilter_containerClassName:this.get("container-class-name",e.dropdownfilter_containerClassName),dropdownfilter_titleClassName:this.get("title-class-name",e.dropdownfilter_titleClassName),facetTitle:this.get("title",e.title),facetName:this.get("name",e.facetName),elementTemplate:e.node&&e.node.children&&e.node.children[0]&&e.node.children[0].template,orderCriteria:this.get("order-criteria",e.orderCriteria),orderDirection:this.get("order-direction",e.orderDirection),predefinedOrder:this.get("predefined-order",e.predefinedOrder),showCheckbox:this.get("show-checkbox",e.showCheckbox),showAll:this.get("show-all",e.showAll),titleTemplate:this.get("title-template",e.titleTemplate),restoreFocus:this.get("restoreFocus",e.restoreFocus)}));return this.instances.push(t),t},schema:new o.Schema({inputAttributes:{view:{type:"reference",reference:"view",selectorPattern:"^filter$"}},attributes:{name:{type:"string",title:"editor_facet_title",required:!0,model_stored:!0},title:{type:"i18nString",title:"editor_facet_title_label"},suggest:{type:"boolean",title:"editor_facet_suggest_label","default":!0,visible:!1},disableUserInput:{type:"boolean",title:"editor_facet_disable_userinput","default":!1,visible:!1},"user-input":{type:"string",title:"editor_facet_user_input_label",model_stored:!1,defaultValue:"auto",values:[{value:"auto",text:e("editor_facet_user_input_value_auto")},{value:"",text:e("editor_facet_user_input_value_enabled")},{value:"disabled",text:e("editor_facet_user_input_value_disabled")}]},"user-input-template":{type:"SearchFormComponent",model_stored:!1,title:"editor_facet_user_input_template_label",values:[{value:null},{value:"suggest",text:e("editor_facet_user_input_template_value_suggest")},{value:"inputdate",text:e("editor_facet_user_input_template_value_inputdate")}],depends:"/^s*$/.test(attributes['user-input'])"},"always-visible":{type:"boolean",title:"editor_facet_always_visible_label","default":!1,depends:"/^s*$/.test(attributes['user-input'])"},displayed:{type:"int",title:"editor_facet_displayed_label"},collapsible:{type:"boolean",title:"editor_facet_collapsible_label","default":!1},"default-open":{type:"boolean",title:"editor_facet_default_open_label","default":!1,depends:"/^true$/i.test(attributes['collapsible'])"},"intersect-values":{type:"boolean",title:"editor_facet_intersect_values","default":!1,defaultValue:!1,values:[{value:"false",text:e("editor_facet_intersect_values_or")},{value:"true",text:e("editor_facet_intersect_values_and")}]},"and-available":{type:"boolean",title:"editor_facet_and_available_label","default":!1,depends:"!/^true$/i.test(attributes['intersect-values'])"},"order-criteria":{type:"list",title:"client_toolbar_sortingalgorithm_label",values:[{value:"",text:""},{value:"COUNT",text:e("editor_facet_orderby_count")},{value:"VALUE",text:e("editor_facet_title_label")},{value:"PREDEFINED",text:e("editor_facet_orderby_predefined")}]},"order-direction":{type:"list",title:"order_direction",values:[{value:"ASCENDING",text:e("sort_ascending")},{value:"DESCENDING",text:e("sort_descending")}],depends:"attributes['order-criteria'] && !/^PREDEFINED$/.test(attributes['order-criteria'])"},"predefined-order":{type:"list",title:"predefined_order",depends:"/^PREDEFINED$/.test(attributes['order-criteria'])"},"title-template":{title:"editor_facet_title_template_label",visible:!1},"show-checkbox":{type:"boolean",title:"editor_facet_show_checkbox_label","default":!0,defaultValue:!0,visible:!1},restoreFocus:{type:"boolean",title:"editor_facet_restoreFocus","default":!0,defaultValue:!0,visible:!1},"show-all":{type:"boolean",title:"editor_facet_show_all_label","default":!0,defaultValue:!0,visible:!1},dropdownfilter:{type:"boolean",title:"editor_facet_dropdownfilter","default":!1,defaultValue:!1,visible:!1}}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},getContent:function(){return this.children[0].template},setContent:function(e){this.children[0].template=e},remove:function(e){M.forEach(this.instances,function(e){e.remove()}),this.instances=[],M.forEach(e.node.children,function(e){e&&e.template&&e.template.remove({node:e})})}}),S=h.extend({initialize:function(){h.prototype.initialize.apply(this,M.toArray(arguments)),this.model&&this.model.get("id")===this.options.facetView.modelIdPathToFocus&&(delete this.options.facetView.modelIdPathToFocus,this.focus=!0),this.listenTo(this.options.constraintsModel,"change",this.updateState),this.options&&this.options.facetView&&this.options.facetView.monitorFacetValueChecked&&this.options.facetView.monitorFacetValueChecked(this),this.contentView=this.options.elementTemplate.createView({model:this.model,application:this.options.application,useOutputOnly:!!this.model.output,labelid:this.options.labelid}),this.patchRenderData(this.contentView),this.contentView.el.id=this.options.labelid},patchRenderData:function(e){var t=e.renderData,i=this.options.andAvailable;e.renderData=function(){var e=t.apply(this,arguments);return{get:function(t){return"showAddAnd"!==t||i?e.get.apply(e,arguments):i}}}},handleAction:function(e){var t=e.currentTarget;w(t).hasClass("mb-add-and")?(this.options.application.trigger("actionHandled"),this.addAnd(e),e.stopPropagation(),e.preventDefault()):h.prototype.handleAction.apply(this,M.toArray(arguments))},addAnd:function(){var e=this.options.application,t=this.options.facetName,i=this.model,n=e.models.search.get(["facets",t,"entries"]),s=i.get("query_expr.and.id"),r=M.filter(n,function(e){return!e.excluded&&e.query_expr.id!==i.get("query_expr.id")&&M.indexOf(s,e.query_expr.id)<0}).concat([{suggest:!0}]);this.andSelectorView=new A({model:new T.Collection(r),facetEntryView:this,application:e}),this.el.appendChild(this.andSelectorView.el)},_cleanupQueryExpr:function(e){return e?(e=M.extend({},e),e.and&&(delete e.description,delete e.id,delete e.path),e):void 0},addOrUpdateUserGeneratedEntry:function(e,i,n){var s=this.options.application,r=this.model,a=s.models.search.output.submodel(["facets",e,"entries"]),o=this.model.get("query_expr.description")+"<br>"+i,n=t.and(this._cleanupQueryExpr(this.model.get("query_expr")),n),l=s.models.search.output.createStringFacetValue(o,{count:0,html:o,query_expr:n});n.description=o,n.id="user_generated_"+M.uniqueId(),n.value={str:o},l.isUserGenerated=!0,l.showAddAnd=this.options.andAvailable,this.model.get("isUserGenerated")?(l.query_expr.id=this.model.get("query_expr").id,(this.model.output||this.model).load(l),this.options.facetView.toggleFacetValue(!0,this.model)):(a.load([l],{silent:!1,merge:!0}),this.options.facetView.toggleFacetValue(!1,r,{silent:!0}),this.options.facetView.toggleFacetValue(!0,l)),this.andSelectorView&&this.andSelectorView.remove(),delete this.andSelectorView},updateState:function(){this.checkBox&&(this.checkBox.checked=this.options.facetView.isFacetValueChecked(this.model))},setModel:function(){this.stopListening(this.options.constraintsModel),h.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.options.constraintsModel,"change",function(){this.checkBox&&(this.checkBox.checked=this.options.facetView.isFacetValueChecked(this.model))})},setEditable:function(){},render:function(){var e=this,t=this.contentView.render().el;return t.setAttribute("tabindex","-1"),t.setAttribute("data-prevent-refocus","true"),this.options.showCheckbox?(this.label=this.make("label",{"class":"checkbox"}),this.checkBox=this.make("input",{type:"checkbox"}),this.updateState(),w(this.checkBox).change(b.instrument(M.bind(this.onFacetValueChange,this),"uiAction",function(){return["facet selection changed"]})),this.label.appendChild(this.checkBox,!0),this.label.appendChild(t),this.appendChild(this.label,!0)):this.appendChild(t,!0),w(t).find(".mb-tooltip").each(function(){var e=w(this);e.get(0),e.attr("title",e.text())}),this.focus&&(delete this.focus,this.options.restoreFocus&&window.setTimeout(function(){e.checkBox&&e.checkBox.focus()},0)),this},onFacetValueChange:function(e,t){this.options.facetView.toggleFacetValue(e.target.checked,this.model,{traceContext:t}),this.updateState()},remove:function(){this.model&&this.model.get("id")&&document.activeElement===this.checkBox&&(this.options.facetView.modelIdPathToFocus=this.model.get("id")),w(this.checkBox).off(),this.andSelectorView&&this.andSelectorView.remove(),delete this.andSelectorView,this.contentView&&this.contentView.remove(),delete this.contentView,h.prototype.remove.apply(this,arguments)}});x.prototype.toggleExpandable=function(e){if("Not available"!=e.eventTarget.innerText&&!e.event.toggleHandled){e.event.toggleHandled=!0;var t=e.id||e.eventTarget.getAttribute("aria-controls"),i=document.getElementById(t),n=e.eventTarget.hasAttribute("aria-expanded")?e.eventTarget:i,s=n.hasAttribute("aria-expanded")?!("false"===n.getAttribute("aria-expanded")):w(n).is(":visible");s?this.closeExpandable(e):this.openExpandable(e)}},x.prototype.openExpandable=function(e){var t=this,i=M.uniqueId("event"),n=e.eventTarget.getAttribute("data-enabled-selector"),s=e.id||e.eventTarget.getAttribute("aria-controls"),r=document.getElementById(s);return n&&!w(n).is(":visible")?!0:(e.eventTarget.hasAttribute("aria-expanded")&&e.eventTarget.setAttribute("aria-expanded","true"),r.setAttribute("aria-expanded","true"),w("body").addClass(s+"-visible"),_.focus(r),e.closeOnFocusout&&w(r).on("focusout."+i,function(){window.setTimeout(function(){var n=_.isChild(document.activeElement,r);n||(w(r).off("focusout."+i),t.closeExpandable(e))},10)}),void 0)},x.prototype.closeExpandable=function(e){var t=e.id||e.eventTarget.getAttribute("aria-controls"),i=document.getElementById(t);e.eventTarget&&e.eventTarget.hasAttribute("aria-expanded")&&e.eventTarget.setAttribute("aria-expanded","false"),i.setAttribute("aria-expanded","false"),w("body").removeClass(t+"-visible")},E.ValueView=S,E.DEFAULT_TEMPLATE=k,E.View=h.extend({events:function(){return M.extend({},h.prototype.events,{"click a.mb-toggle":"toggleDisplayed","keypress a.mb-toggle":"toggleDisplayed",accordionactivate:"handleAccordionactivate",accordiondeactivate:"handleAccordiondeactivate","click .dropdown-toggle":"toggleDropdown","keypress .dropdown-toggle":"toggleDropdown"})},defaultOptions:{titleTagName:"h3",titleClassName:"",containerTagName:"ul",containerClassName:"nav nav-stacked nav-pills",dropdownfilter_containerClassName:"nav nav-stacked nav-pills mb-flexbox",dropdownfilter_titleClassName:"btn btn-default dropdown-toggle full-width",entryTagName:"li",entryClassName:"",collapsible:!1,andAvailable:!1,alwaysVisible:!1,disableUserInput:!1},initialize:function(){if(this.options.dropdownfilter){var t=this.options.name,i="filter-title-"+t,n=this.options.containerClassName||this.defaultOptions.dropdownfilter_containerClassName,s=this.options.titleClassName||this.defaultOptions.dropdownfilter_titleClassName;this.el.setAttribute("data-title-el-id",i),this.el.setAttribute("data-container-class-name",n),this.el.setAttribute("data-title-class-name",s),this.el.setAttribute("class","dropdownfilter"),this.$referencedTitle=w(document.getElementById(this.el.getAttribute("data-title-el-id"))),this.options.titleClassName=s,this.options.className=n,this.options.titleTagName="div",this.options.titleTemplate=this.options.titleTemplate||'<span data-i18n="no_restriction">{{i18n.no_restriction}}</span>',this.options.emptyFilterName=e("no_restriction")}if(this.options=M.extend({labelid:M.uniqueId("label")},this.defaultOptions,this.options),this.initializeUserInputOptions(),this.options.displayed=this.options.displayed||Number.MAX_VALUE,this.options.titleTemplate&&(this.titleAdapter=new u(this.options.titleTemplate)),h.prototype.initialize.apply(this,arguments),this.options.collapsible&&!this.options.accordion&&(this.options.accordion=new m.View({el:this.el,enabled:!0,"default-open":this.options.defaultOpen,application:this.options.application})),M.isArray(this.options.orderCriteria)&&this.options.orderCriteria.length){var r=M.isArray(this.options.predefinedOrder)?[].concat(this.options.predefinedOrder):[];r.length&&!M.isArray(r[0])&&(r=[r]);for(var o=null,l=this.options.orderCriteria.length-1;l>0;--l){var c={criteria:this.options.orderCriteria[l],direction:this.options.orderDirection&&this.options.orderDirection.length>l?this.options.orderDirection[l]:"ASCENDING",options:{}};o&&(c.options.subCriteria=o),"PREDEFINED"==c.criteria&&(c.options.predefinedOrder=this.preparePredefinedOrder(r.pop()),c.direction="ASCENDING"),o=c}this.orderOptions={criteria:this.options.orderCriteria[0],direction:this.options.orderDirection&&this.options.orderDirection.length>0?this.options.orderDirection[l]:"ASCENDING"},o&&(this.orderOptions.subCriteria=o),"PREDEFINED"==this.orderOptions.criteria&&(this.orderOptions.predefinedOrder=this.preparePredefinedOrder(r.pop()),this.orderOptions.direction="ASCENDING")}if(this.options.intersectValues=this.options.intersectValues===!0||M.isString(this.options.intersectValues)&&"true"===this.options.intersectValues,this.filterID=this.options.facetName?"filter_"+this.options.facetName:M.uniqueId("cid"),this.options.collection?this.collection=this.options.collection:(this.collection=this.getCollection(),this.model.addFacet&&this.model.addFacet(this.collection,{silent:!0})),this.constraintsModel=this.getConstraintsModel(),this.options._displayed=this.options.displayed,this.collection.models){var d=this;this.collection=new a([],{delegate:this.collection,filter:function(e){var t=M.filter(e,function(e,t){var i;e.id||(e.id=e.get("id"));try{i=d.isFacetValueChecked(e)}catch(n){i=!1}return t<d.options._displayed||i});return M.defer(function(){d.updateContent()}),t}})}this.listenTo(this.collection,"add",this.updateContent),this.listenTo(this.collection,"remove",this.updateContent),this.options.dropdownfilter&&this.listenTo(this.constraintsModel,"change",this.updateTitle),this.updateContent()},initializeUserInputOptions:function(){"undefined"!=typeof this.options.userInput&&delete this.options.suggest,/disabled|auto/i.test(this.options.userInput)&&(delete this.options.userInputTemplate,/disabled/i.test(this.options.userInput)&&delete this.options.userInput),this.options.userInputTemplate&&(delete this.options.suggest,delete this.options.userInput),/auto/i.test(this.options.userInput)&&delete this.options.suggest,this.options.suggest?this.options.userInput="auto":this.options.suggest===!1&&(delete this.options.userInputTemplate,delete this.options.userInput),delete this.options.suggest,this.options.userInputTemplate?Mindbreeze.require(["component!"+this.options.userInputTemplate]):this.options.alwaysVisible=!1},preparePredefinedOrder:function(e){return M.map(e,function(e){return M.isString(e)?e:e.toString&&e.toString()})},handleAccordionactivate:function(){this.options.application.models.tabs.setting(this.openId(),!0),this.updateTitle()},handleAccordiondeactivate:function(){this.options.application.models.tabs.setting(this.openId(),!1),this.updateTitle()},getUserQuery:function(){var e=this.options.application.formqueryadapter.field(this.options.facetName);return e?this.getInput().get(["user","query"].concat(e.path)):void 0},_useAutoUserInput:function(){return/auto/i.test(this.options.userInput)},_getUserInputOptions:function(e,t){var i={};return this._useAutoUserInput()&&(i=L[t]||{}),i.appendTo=this.el,i=M.extend({},i,new _.AttributeModel(this.el,"data-user-input-").get()),M.each(this.options,function(e,t){/userInput.*/.test(t)&&(i[_.AttributeModel.camelCaseToSeparated(t).substring(11)]=e)}),delete i.template,delete i[""],e.prototype.schema&&(i=e.prototype.schema.parseAttributes(i)),i.grouped=!1,i=M.extend({model:this.model,placeholder:"search",application:this.options.application,channel:this.model.wiring.channel,property:this.options.facetName,sources:["DOCUMENT_PROPERTY"],parentView:this,excludedFilterID:this.filterID,addQueryConstraints:!0},i)},_getUserInputTemplate:function(e){return this.options.userInputTemplate?this.options.userInputTemplate:this._useAutoUserInput()?C[e]:void 0},updateContent:function(){if(this.options.dropdownfilter){this.options.alwaysVisible="true"===this.el.getAttribute("data-always-visible");var t=this;t.updateTitle(),this.options.alwaysVisible||(this.collection.length?this.$referencedTitle.show():this.$referencedTitle.hide())}M.defer(M.bind(function(){if(this.model){var t,i=this,n=this.collection.models.length>0,s=this.getUserQuery(),r=this.options.alwaysVisible||n||s,a=this.collection&&(M.isFunction(this.collection.showToggle)&&this.collection.showToggle()||this.collection.delegate&&this.collection.delegate.models&&this.collection.delegate.models.length>this.options.displayed),o=this.collection.delegate?this.collection.delegate.dataType:this.collection.dataType;if(this.collection.cutoff&&this.collection.cutoff(),r&&(this.$el.show(),this.groupView||(this.groupView=this.appendChild(this.make("div",{role:this.options.collapsible?"tabpanel":"","aria-labelledby":this.options.labelid,id:"panel_"+this.options.labelid}),!0),this.isOpen()||(this.groupView.setAttribute("aria-hidden","true"),this.groupView.style.display="none")),this.$toggleEl||(this.$toggleEl=w(this.groupView.appendChild(this.make("a",{"class":"action mb-center mb-toggle hidden-phone mb-action-sheet-visible",href:"#",role:"button"},""))).hide()),this.options.charttype&&(this.chartView||(this.chartView=!0,Mindbreeze.require(["component!piechart"],function(e){i.chartView=new e.View({charttype:i.options.charttype,model:i.collection&&i.collection.delegate||i.collection,title:"",series:["facets",i.options.facetName]}),i.chartView.render(),i.groupView.appendChild(i.chartView.el)}))),t=this._getUserInputTemplate(o),t&&!this.userInputView&&(this.userInputView=!0,Mindbreeze.require(["component!"+t],function(t){var n=i._getUserInputOptions(t,o);i.userInputView=new t.View(n),i.userInputView.render(),i.userInputView.el.setAttribute("aria-label",e("facet_suggest",{criteria:i.getTitle()})),i.groupView.appendChild(i.userInputView.el);var s=i.options.model;s=s.submodel("user.query");var r=M.extend({},i.options,{model:s,outerModel:i.options.model,el:i.el});i.searchForm=new p.View(r),i.searchForm.disableEditing()})),this.titleEl||(this.titleEl=this.make(this.options.titleTagName,{"class":this.options.titleClassName,id:this.options.labelid}),this.options.collapsible&&(this.titleEl.setAttribute("role","tab"),this.titleEl.setAttribute("aria-controls","panel_"+this.options.labelid),this.titleEl.setAttribute("aria-expanded",this.isOpen()),this.titleEl.setAttribute("title",e(this.isOpen()?"Close":"Open"))),this.insertAt(this.titleEl,0,!0)),this.updateTitle()),n?this.treeView||(this.treeView=new E.TreeView(M.extend({},this.options,{facetView:this,filterID:this.filterID,el:null,model:this.collection,constraintsModel:this.constraintsModel,facetTitle:this.options.facetTitle,dropdownfilter:this.options.dropdownfilter,dropdownfilter_containerClassName:this.options.dropdownfilter_containerClassName,dropdownfilter_titleClassName:this.options.dropdownfilter_titleClassName,facetName:this.options.facetName,wiring:this.model.wiring,tagName:this.options.containerTagName,className:this.options.containerClassName,entryTagName:this.options.entryTagName,entryClassName:this.options.entryClassName,labelid:this.options.labelid,addGroupRole:!1,restoreFocus:this.options.restoreFocus})).render(),_.insertAt(this.groupView,this.treeView.el,0)):this.treeView&&(this.treeView.remove(),delete this.treeView),this.$toggleEl)if(a){var l=this.collection.cutoff();l?(this.$toggleEl.addClass("mb-more-available"),w(".mb-more-available-is-open").length&&this.$toggleEl.removeClass("mb-more-available-is-open"),this.$toggleEl.html(e("show_more"))):(this.$toggleEl.addClass("mb-more-available-is-open"),this.$toggleEl.removeClass("mb-more-available"),this.$toggleEl.html(e("show_less"))),this.$toggleEl.show()
}else this.$toggleEl.hide();r||(this.$el.hide(),this.removeOwnedNode(this.titleEl),delete this.titleEl,this.removeOwnedNode(this.progressEl),delete this.progressEl,this.userInputView&&(this.userInputView.$el.remove(),delete this.userInputView),this.groupView&&(this.groupView.parentNode&&this.groupView.parentNode.removeChild(this.groupView),delete this.$toggleEl,delete this.groupView))}},this)),this.options.dropdownfilter&&M.defer(function(){t.groupView&&w(t.groupView).addClass("dropdown-menu")})},updateTitle:function(){if(this.options.dropdownfilter){var e=this.getTitle();if(!this.titleEl){this.titleEl=this.make(this.options.titleTagName,{"class":this.options.titleClassName,id:this.options.labelid,"aria-haspopup":!0,"aria-expanded":!1,"data-action-object":JSON.stringify({toggleExpandable:{id:"panel_"+this.options.labelid,closeOnFocusout:!1}})}),this.insertAt(this.titleEl,0,!0);var t=this.options.facetTitle||this.getFacetTitleOfModel()||this.options.title||"";w(this.el).prepend("<h3>"+t+"</h3>")}this.options.dropdownFacetValue&&this.el.firstChild.innerHTML!=this.options.dropdownFacetValue&&w(this.el).prepend("<h3>"+this.options.dropdownFacetValue+"</h3>"),this.titleEl.innerHTML=e,this.titleEl.setAttribute("title",c.stripHtml(e))}else{var e=this.getTitle();this.titleAdapter&&(e=this.titleAdapter.render(new T.Model({title:e,isOpen:this.isOpen()?!0:void 0}))),this.titleEl.innerHTML=e}},openId:function(){return"facet."+this.options.facetName+".opened"},isOpen:function(){return!this.options.accordion||this.options.accordion.isOpen(this.openId(),this.options.defaultOpen)},toggleDisplayed:function(e){return!e||"keypress"!==e.type||e.which===y.enter||e.which===y.space&&/button/i.test(e.currentTarget.getAttribute("role"))?(e.preventDefault(),this.collection.delegate&&(this.options._displayed=this.options._displayed===Number.MAX_VALUE?this.options.displayed:Number.MAX_VALUE,this.collection.reset()),void 0):!0},getTitle:function(){if(this.options.dropdownFacetValue=this.options.facetTitle||this.getFacetTitleOfModel()||this.options.title||"",this.options.dropdownfilter){this.getFacetTitleOfModel();var t=M.keys(this.checkedFacetValues()||{}),i=t.join(", ")||e(this.el.getAttribute("data-all-title"))||this.treeView&&this.treeView.getAnyModelName()||e("not_available");return(e(this.el.getAttribute("data-title-prefix"))||"")+i+' <span class="caret"></span>'}var i=this.options.facetTitle||this.getFacetTitleOfModel()||this.options.title||"";return i?this.cachedTitle=i:i=this.cachedTitle,i?i:e(this.options.facetName)},getFacetTitleOfModel:function(){try{return this.originalFacetTitle=this.model.get(["facets",this.options.facetName,"name"])}catch(e){}},submit:function(e,i,n,s,r){M.uniqueId("c");var a,o=c.trim(n),l=this,u=this.treeView&&this.treeView.model.delegate||this.treeView&&this.treeView.model;r=M.extend({},r,{traceContext:i}),this.treeView&&(a=u.get(o),a||(o=c.normalizeString(o),u.each(function(e){if(null==a){var t=e.get("query_expr.id");return t=c.normalizeString(t),t==o?(a=e,void 0):(t=e.get("query_expr.id"),t&&t.toLowerCase()==o?(a=e,void 0):void 0)}}))),(!this.options.disableUserInput||s)&&(!a&&s&&(t.addFacetValue(this.model,u.name,n),a=u.get(n)),a?(this.searchForm.clearModel({silent:!0}),l.userInputView.el&&l.userInputView.el.value&&(l.userInputView.el.value=""),this.toggleFacetValue(!0,a,r),M.defer(function(){l.userInputView&&l.userInputView.clear()})):this.searchForm.submit.apply(this.searchForm,arguments))},createFacet:function(e){e=M.escape(e);var t={id:e,label:this.options.facetName,regex:"^"+e+"$",description:e},i=new s({id:e,query_expr:t,value:e,html:e,excluded:!0});return new r(this.model.wiring,{input:this.getInput(),output:i})},monitorFacetValueChecked:function(e){e&&e.model&&e.model.isAny&&e.updateState&&e.model.get("siblings")&&e.listenTo(e.model.get("siblings"),"add remove",e.updateState)},isFacetValueChecked:function(e){if(!e)return!1;var t=this.checkedFacetValues();if(e.isAny){if(!t)return!0;var i=M.map(e.get("siblings").models,function(e){return e.get("query_expr").id}),n=M.intersection(M.keys(t),i),s=n.length>0;if(!s)return!0}var r=e.get("query_expr");if(!r)return!1;var a=t;return!(!a||!a[r.id])},checkedFacetValues:function(){var e,t,i=this.getConstraint(),n=M.values(i&&i.filter_base);if(n&&!(n.length<1)){for(e=0;e<n.length;e++){var t=n[e].path;t&&(n=n.concat(t))}return M.reduce(n,function(e,t){return e[t.id]=t,e},{})}},getConstraint:function(){return this.constraintsModel&&this.constraintsModel.get([this.filterID])},toggleFacetValue:function(e,t,i){if(this.options.dropdownfilter&&(this.options.application.closeExpandable({id:"panel_"+this.options.labelid}),document.activeElement.blur()),t){var n,s=this.allFilterConstraints(),r=this.checkedFacetValues();if(t.isAny){var a,o=t.get("siblings");if(o=o&&o.models,o&&o.length>0){var l=o[0].get("query_expr").path;a=l&&l.length>0&&l[l.length-1]}a?(r=this._deselectChildren(s,a,r),r[a.id]=a,this._setConstraint(s,r,i)):(i=M.extend({},i,{path:[this.filterID]}),this.constraintsModel.unset(null,i))}else{if(n=t.get?t.get("query_expr"):t.query_expr,r=r||{},e)r[n.id]=n;else if(r=this._deselectChildren(s,n,r),delete r[n.id],n.path&&n.path.length>0){var u=n.path[n.path.length-1];r[u.id]=u}this._setConstraint(s,r,i)}}},toggleDropdown:function(e){return!e||"keypress"!==e.type||e.which===y.enter||e.which===y.space&&/button/i.test(e.currentTarget.getAttribute("role"))?(e.preventDefault(),void 0):!0},_setConstraint:function(e,t,i){i=M.extend({},i,{path:[this.filterID]}),e=M.reduce(e,function(e,i,n){return t[n]||(e[n]=i),e},{}),M.each(t,function(i){M.each(i.path,function(i){delete t[i.id],delete e[i.id]})});var n=M.flatten(M.map(t,function(e){return e.path}));n.push(void 0),n=M.uniq(M.map(n,function(e){return e&&e.id})),e=M.reduce(e,function(e,t,i){var s=t.path&&t.path[t.path.length-1];return M.indexOf(n,s&&s.id)>=0&&(e[i]=t),e},{}),e=M.reduce(e,function(t,i){return i.path&&0!==i.path.length||(t[i.id]=i),M.each(i.path,function(n){e[n.id]||(t[i.id]=i)}),t},{}),e=M.reduce(e,function(t,i){return i.path&&0!==i.path.length||(t[i.id]=i),M.each(i.path,function(n){e[n.id]||(t[i.id]=i)}),t},{});var s=M.keys(t).length;if(s>0){var r={label:this.options.facetName,filtered_name:this.options.facetTitle||this.getFacetTitleOfModel()||this.options.title,filtered:e,filter_base:t};this.options.intersectValues&&(r.filter_join="AND",delete r.filtered),this.constraintsModel.set(null,r,i)}else this.constraintsModel.unset(null,i)},_deselectChildren:function(e,t,i){var n=M.pluck(t.path||[],"id").concat(t.id);return M.each(e,function(e){if(e.path&&e.path.length>=n.length){for(var t=!0,s=0;t&&s<n.length;s++)t=n[s]===e.path[s].id;t&&delete i[e.id]}}),i},allFilterConstraints:function(){var e,t=[];if(!this.options.model.get(["facets",this.options.facetName,"count_filtered_facet_values"]))for(t=t.concat(this.collection.delegate&&this.collection.delegate.models||this.collection.models),e=0;e<t.length;e++){var i=t[e].get("entries");i&&i.models&&i.models.length&&(t=t.concat(i.models))}var n=M.reduce(t,function(e,t){var i=t.get("query_expr");return e[i.id]=i,e},{});return n},getConstraintsModelPath:function(){return"user.constraints"},getInput:function(){return this.model.input},getConstraintsModel:function(){return this.getInput().submodel(this.getConstraintsModelPath())},getCollection:function(){var n,s=this;return this.orderOptions&&(n=i.getCompareFunction(this.orderOptions.criteria,this.orderOptions.direction,this.orderOptions)),!this.options.andAvailable||this.options.orderCriteria&&"COUNT"!=this.options.orderCriteria||(n=function(t,i){var n=s.options.orderCriteria||s.options.application.models.search.get(["facets",s.options.facetName,"order_criteria"]),r=s.options.orderDirection||s.options.application.models.search.get(["facets",s.options.facetName,"order_direction"]),a=s.options.application.models.search.output.getFacetCompareFunction(n,r);if("COUNT"===n){var o,l,u,c=t.get("isUserGenerated"),h=i.get("isUserGenerated"),d=s.isFacetValueChecked(t),p=s.isFacetValueChecked(i);return c!==h?d===p?c?-1:1:d?-1:1:(u=a(t.get(),i.get()),0===u?(o=t.get("value"),l=i.get("value"),(""+o).localeCompare(l,e.locale)):u)}return a(t.get(),i.get())}),this.collectionCreated=!0,new t.FacetValueCollection(this.options.facetName,this.properties||this.options.elementTemplate.properties,{comparator:n,entriesLevel:this.options.entriesLevel})},remove:function(){this.searchForm&&(this.searchForm.remove(),delete this.searchForm),this.userInputView&&this.userInputView.remove&&(this.userInputView.remove(),delete this.userInputView),this.treeView&&(this.treeView.remove(),delete this.treeView),this.collection&&this.collection.dispose&&this.collectionCreated&&(this.collection.dispose(),delete this.collection),this.constraintsModel&&this.constraintsModel.dispose&&(this.constraintsModel.dispose(),delete this.constraintsModel),delete this.$toggleEl,delete this.titleEl,delete this.groupView,h.prototype.remove.apply(this,arguments)}}),E.TreeView=f.extend({initialize:function(){this.options.childrenPath=this.options.childrenPath||"entries",this.options.childViewConstructor=this.options.childViewConstructor||E.ValueView,this.options.labelid=this.options.labelid,this.options.addGroupRole!==!1&&this.options.labelid&&this.el.setAttribute("aria-labelledby",this.options.labelid),f.prototype.initialize.apply(this,arguments),this.listenTo(e,"change:locale",this.updateAnyModel)},addOne:function(e,t,i){i=i||{},this.options.showAll&&this.addAnyIfNotExists(),i=M.clone(i),i.at=i.at||t&&M.indexOf(t.models,e),"undefined"!=typeof i.at&&(i.at=i.at+1),f.prototype.addOne.apply(this,[e,t,i])},addAnyIfNotExists:function(){if(!this.anyModel&&!this.options.disableEmptyFilter){var e=M.uniqueId("c"),t=new s({id:e,siblings:this.model});t.isAny=!0,this.anyModel=t,this.updateAnyModel(),this.addOne(this.anyModel,null,{at:0})}},getAnyModelName:function(){var t=e("All");return this.options.emptyFilterName&&(t=e(this.options.emptyFilterName)),t},updateAnyModel:function(){if(this.anyModel){var e=this.getAnyModelName();this.anyModel.update({value:e,html:e})}},getWiring:function(){return this.options.wiring},createEntryView:function(e){return e=M.clone(e),e.elementTemplate=this.options.elementTemplate,e.facetView=this.options.facetView,e.constraintsModel=this.options.constraintsModel,e.facetTitle=this.options.facetTitle,e.facetName=this.options.facetName,e.wiring=this.options.wiring,e.labelid=M.uniqueId("label"),e.andAvailable=this.options.andAvailable,e.alwaysVisible=this.options.alwaysVisible,e.dropdownfilter=this.options.dropdownfilter,e.showCheckbox=this.options.showCheckbox,e.restoreFocus=this.options.restoreFocus,e.userInput=this.options.userInput,f.prototype.createEntryView.apply(this,[e])}}),E.TreeView.EntryView=f.EntryView.extend({events:function(){return M.extend({},h.prototype.events,{"click a.mb-hierarchy-toggle":"toggleHierachyDisplayed","keypress a.mb-hierarchy-toggle":"toggleHierachyDisplayed"})},initialize:function(){f.EntryView.prototype.initialize.apply(this,arguments),this.listenTo(this.options.constraintsModel,"change",function(){this.createChildCollection()}),this.createChildCollection()},getAllChildModel:function(){return this.model?this.model.get(this.options.childrenPath):void 0},toggleHierachyDisplayed:function(e){if(e.originalEvent.handled)return!1;if(e.originalEvent.handled=!0,e&&"keypress"===e.type&&e.which!==y.enter&&(e.which!==y.space||!/button/i.test(e.currentTarget.getAttribute("role"))))return!0;e.preventDefault();var t=this.childCollection;t&&t.delegate&&(this.getCurrentDisplayed()===Number.MAX_VALUE?this.setCurrentDisplayed(this.getDisplayed()):this.setCurrentDisplayed(Number.MAX_VALUE),t.reset())},updateChildContent:function(){if(!this.childListView)return this.$toggleHierarchyEl&&this.$toggleHierarchyEl.remove(),this.userInputView&&this.userInputView.remove(),void 0;if(this.$toggleHierarchyEl&&this.$toggleHierarchyEl.remove(),this.$toggleHierarchyEl=w(this.appendChild(this.make("a",{"class":"action mb-hierarchy-toggle hidden-phone mb-action-sheet-visible",href:"#",role:"button"},""))).hide(),this.$toggleHierarchyEl){var t=this.isFacetValueChecked()&&this.childCollection&&this.childCollection.delegate&&this.childCollection.delegate.models&&this.childCollection.delegate.models.length>this.getDisplayed();if(t){var i=this.childCollection.cutoff();i?(this.$toggleHierarchyEl.addClass("mb-more-available"),w(".mb-more-available-is-open").length&&this.$toggleHierarchyEl.removeClass("mb-more-available-is-open"),this.$toggleHierarchyEl.html(e("show_more"))):(this.$toggleHierarchyEl.addClass("mb-more-available-is-open"),this.$toggleHierarchyEl.removeClass("mb-more-available"),this.$toggleHierarchyEl.html(e("show_less"))),this.$toggleHierarchyEl.show(),this.handleHierarchySuggest()}else this.$toggleHierarchyEl.hide()}},handleHierarchySuggest:function(){if(this.userInputView&&this.userInputView.remove(),this.options.userInput){var t=this;this.userInputView=new d.View({placeholder:"search",application:this.options.application,channel:this.options.application.models.search.wiring.channel,property:this.options.facetName,sources:["DOCUMENT_PROPERTY"],parentView:this,excludedFilterID:this.filterID,addQueryConstraints:!0,getAndSetParentQueryExpr:function(e,i){var n;if(n=t.options.parentView&&t.options.parentView.options&&t.options.parentView.options.outerModel?t.options.parentView.options.outerModel.input.get():t.options.model&&t.options.model.input?t.options.model.input.get():t.options.application.models.search.input.get()){var s=[];return n.user&&i(s,n.user.constraints,!0),s.length>0?(delete s[0].and[0].filter_base[0],s[0].and[0].filter_base[0]=t.model.get("query_expr"),{and:s}):void 0}}}),this.userInputView.el.setAttribute("aria-label",e("facet_suggest",{criteria:this.options.facetView.getTitle()})),this.userInputView.el.setAttribute("class","ui-autocomplete-input mb-hierarchy-suggest"),this.el.appendChild(this.userInputView.el);var i=t.options.facetView.model;i=i.submodel("user.query");var n=M.extend({},this.options,{model:i,outerModel:this.options.model,el:this.el});this.searchForm=new p.View(n),this.searchForm.disableEditing()}},submit:function(e,i,n,s,r){M.uniqueId("c");var a,o=c.trim(n),l=this,u=this.childCollection&&this.childCollection.delegate||this.childCollection&&this.childCollection.models;if(r=M.extend({},r,{traceContext:i}),this.childCollection&&(a=u.get(o),a||(o=c.normalizeString(o),u.each(function(e){if(null==a){var t=e.get("query_expr.id");return t=c.normalizeString(t),t==o?(a=e,void 0):(t=e.get("query_expr.id"),t&&t.toLowerCase()==o?(a=e,void 0):void 0)}}))),!this.options.disableUserInput||s){if(!a&&s){if(t.addFacetValue(this.model,this.options.name,n),!u){var h=this.model.get(["facets",this.options.name,"entries",0,"query_expr"]);this.searchForm.clearModel({silent:!0}),this.userInputView.el&&this.userInputView.el.value&&(this.userInputView.el.value="");var d={};return d[h.id]=h,this._setConstraint({},d),void 0}a=u.get(n)}a?(this.searchForm.clearModel({silent:!0}),l.userInputView.el&&l.userInputView.el.value&&(l.userInputView.el.value=""),this.toggleFacetValue(!0,a,r),M.defer(function(){l.userInputView&&l.userInputView.clear()})):this.searchForm.submit.apply(this.searchForm,arguments)}},isFacetValueChecked:function(e){return e=e||this.model,this.options.facetView.isFacetValueChecked(e)},toggleFacetValue:function(e,t,i){return this.options.facetView.toggleFacetValue(e,t,i)},getFacetId:function(){return this.model?this.model.get("facet")+"."+this.model.id:null},getCurrentDisplayed:function(){this.options.facetView.displayedMap||(this.options.facetView.displayedMap={});var e=this.getFacetId();if(!e)return this.getDisplayed();var t=this.options.facetView.displayedMap[e];return null==t?this.getDisplayed():t},setCurrentDisplayed:function(e){this.options.facetView.displayedMap||(this.options.facetView.displayedMap={});var t=this.getFacetId();null!=t&&(this.options.facetView.displayedMap[t]=e)},getDisplayed:function(){return this.options.facetView.options.displayed},createChildCollection:function(){var e=this.options.facetView.isFacetValueChecked(this.model),t=this.model.get(this.options.childrenPath);if(e&&t&&t.models&&t.models.length>0){var i=this,n=new a([],{delegate:t,filter:function(e){var t=[];return i.options.facetView.isFacetValueChecked(i.model)&&(t=M.filter(e,function(e,t){var n;e.id||(e.id=e.get("id"));try{n=i.isFacetValueChecked(e)}catch(s){n=!1}return t<i.getCurrentDisplayed()||n||i.getCurrentDisplayed()!=i.getDisplayed()})),M.defer(function(){i.updateChildListView(),i.updateChildContent()}),t}});this.childCollection=n}else{this.childCollection=null;var i=this;M.defer(function(){i.updateChildListView(),i.updateChildContent()})}},getChildModel:function(){return this.childCollection}});var A=g.extend({className:"dropdown-menu show mb-filter-dropdown",initialize:function(){this.options.childViewConstructor=this.options.childViewConstructor||A.LinkView,g.prototype.initialize.apply(this,arguments);var e=this;this.listenTo(this.options.application,"actionHandled",this.remove),w(document).on("click."+this.cid,function(t){return w(t.target).closest(e.el).length?!0:(e.remove(),void 0)})},submit:function(e,t,i,n,s){if(!s||!s.silent){var r=this.options.facetEntryView.options.facetName;this.options.facetEntryView.addOrUpdateUserGeneratedEntry(r,M.escape(i),{label:r,unparsed:i}),this.remove()}},remove:function(){w(document).off("click."+this.cid),g.prototype.remove.apply(this,arguments)},createEntryView:function(t){var i=Array.prototype.slice.apply(arguments);if(t=t||{},t.facetEntryView=this.options.facetEntryView,i[0]=t,t.model.get("suggest")){var n=new d.View({placeholder:"search",application:this.options.application,channel:this.options.application.models.search.wiring.channel,property:this.options.facetEntryView.options.facetName,sources:["DOCUMENT_PROPERTY"],parentView:this,excludedFilterID:this.filterID,addQueryConstraints:!0});return n.render(),n.el.setAttribute("aria-label",e("facet_suggest",{criteria:this.options.facetEntryView.options.facetView.getTitle()})),n}return g.prototype.createEntryView.apply(this,i)}});return A.LinkView=h.extend({tagName:"a",events:{click:"select"},setEditable:function(){},createChildView:function(){},select:function(){this.options.facetEntryView.addOrUpdateUserGeneratedEntry(this.options.facetEntryView.options.facetName,this.model.get("value")||this.model.get("html"),this.model.get("query_expr"))},render:function(){return this.model?(this.el.tabindex=-1,this.el.innerHTML=this.model.get("html"),this):this}}),E}),Mindbreeze.define("components/constraints/js/constraints",["i18n/i18n","api/v2/search","client/template","component!mustache","component!filteredfacet","client/templateregistry","underscore","backbone"],function(e,t,i,n,s,r,a,o){var l=[],u=function(){var e,t;for(e=l.length-1;e>=0;e--)t=l[e],t.target.toggleFacetValue(!1,t.model,{silent:e>0});l=[]},c=i.extend({editableName:"editor_searchin_title",schema:new i.Schema({attributes:{displayed:{type:"int",title:"editor_facet_displayed_label"},collapsible:{type:"boolean",title:"editor_facet_collapsible_label","default":!1},"default-open":{type:"boolean",title:"editor_facet_default_open_label","default":!1},"show-checkbox":{type:"boolean",title:"editor_facet_show_checkbox_label","default":!0,defaultValue:!0,visible:!1},"show-all":{type:"boolean",title:"editor_facet_show_all_label","default":!0,defaultValue:!0,visible:!1}}}),getDefaultTemplate:function(){return s.DEFAULT_TEMPLATE},hasContent:function(){return!0},createView:function(e){var t,i=this.model(e);return t=new this.constructor.View(a.extend(this.attributeModel.getCamelCase(),e,{model:i,facetName:this.get("template"),application:e.application,collapsible:this.get("collapsible",e.collapsible),defaultOpen:this.get("default-open",e.defaultOpen),displayed:this.get("displayed",e.displayed),el:this.el,elementTemplate:this.children&&this.children[0]&&this.children[0].template,showCheckbox:this.get("show-checkbox",e.showCheckbox),showAll:this.get("show-all",e.showAll)})),this.instances.push(t),t},remove:function(e){a.forEach(this.instances,function(e){e.remove()}),this.instances=[],a.forEach(e.node.children,function(e){e.template.remove({node:e})})},name:function(){return null}}),h=s.ValueView.extend({getInput:function(){return this.options.application.models.search.input}}),d=s.View.extend({initialize:function(){this.options.title=this.options.title||e("client_sidepane_refinements_label"),this.options.suggest=!1,s.View.prototype.initialize.apply(this,arguments),this.listenTo(this.collection,"remove",this.entryRemoved)},entryRemoved:function(e){var t=a.pluck(this.options.application.models.channels.models,"id"),i=a.intersection(t,e.get("source_ids")).length>0;i||this.disableDeferred(e)},disableDeferred:function(e){l=l||[],l.push({model:e,target:this}),a.defer(u)},setModel:function(){s.View.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"change",this.render)},getConstraintsModelPath:function(){return"source_context.constraints"},getCollection:function(){var e=this,t=o.Collection.extend({initialize:function(){o.Collection.prototype.initialize.apply(this,arguments),this.listenTo(e.model.treeModel||e.model,"change",this.update),this.update()},removeAll:function(){var e;for(e=this.models.length-1;e>=0;e--)this.remove(this.models[e])},update:function(){this.removeAll(),e.model&&this.add(this.getModels())},getModels:function(){return a.map(e.model.get(),function(e,t){return a.extend({},e,{id:t})})}});return new t},getInput:function(){return this.options.application.models.search.input},getWiring:function(){return this.options.application.models.search.wiring},createChildView:function(e){return new h(e)},remove:function(){return s.View.prototype.remove.apply(this,arguments),this}});return c.View=d,c}),Mindbreeze.define("components/patternconstraints/js/patternconstraints",["i18n/i18n","api/v2/search","client/template","component!mustache","component!filteredfacet","client/templateregistry","underscore","backbone"],function(e,t,i,n,s,r,a,o){var l=[],u=function(){var e,t;for(e=l.length-1;e>=0;e--)t=l[e],t.target.toggleFacetValue(!1,t.model,{silent:e>0});l=[]},c=i.extend({editableName:"editor_searchin_title",getDefaultTemplate:function(){return s.DEFAULT_TEMPLATE},hasContent:function(){return!0},createView:function(e){var t,i=this.model(e);return t=new this.constructor.View(a.extend(this.attributeModel.getCamelCase(),e,{model:i,application:e.application,el:this.el,elementTemplate:this.children&&this.children[0]&&this.children[0].template,emptyFilterName:"None"})),this.instances.push(t),t},remove:function(e){a.forEach(this.instances,function(e){e.remove()}),this.instances=[],a.forEach(e.node.children,function(e){e.template.remove({node:e})})},name:function(){return null}}),h=s.ValueView.extend({getInput:function(){return this.options.application.models.search.input}}),d=s.View.extend({initialize:function(){this.options.title=this.options.title||e("client_sidepane_refinements_label"),this.options.suggest=!1,s.View.prototype.initialize.apply(this,arguments),this.filterID="source",this.listenTo(this.collection,"remove",this.entryRemoved),this.collection.delegate?this.collection.delegate.update():this.collection.update()},entryRemoved:function(e){this.disableDeferred(e)},disableDeferred:function(e){l=l||[],l.push({model:e,target:this}),a.defer(u)},setModel:function(){s.View.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"change",this.render)},_setConstraint:function(){var e=this.getInput();if(!e.get(this.getConstraintsModelPath())){var t="pattern_constraints["+JSON.stringify(this.options.name)+"]",i={exclude:this.options.exclude&&"true"===this.options.exclude||!1,or:this.options.pattern,source:{}};e.set(t,i,{silent:!0})}s.View.prototype._setConstraint.apply(this,arguments)},toggleFacetValue:function(e,t,i){i.silent=!0,s.View.prototype.toggleFacetValue.apply(this,arguments);var n=this.getInput(),r=n.get(this.getConstraintsModelPath()+".source.filter_base");!r||a.isEmpty(r)?n.unset(this.getConstraintsModelPath()):n.change()},getConstraintsModelPath:function(){return"pattern_constraints["+JSON.stringify(this.options.name)+"]"},getCollection:function(){var e=this,t=o.Collection.extend({initialize:function(){o.Collection.prototype.initialize.apply(this,arguments),this.listenTo(e.model.treeModel||e.model,"change",this.update),this.listenTo(e.options.application.models.tabs,"change",this.update)},removeAll:function(){var e;for(e=this.models.length-1;e>=0;e--)this.remove(this.models[e])},update:function(){this.removeAll(),e.model&&this.add(this.getModels())},getModels:function(){return a.map(e.model.models,function(t,i){var n=t.attributes,s={};if(n&&n.selectedTabName){var r=e.options.application.models.tabs.getByName(n.selectedTabName);if(r){var o=r.get("constraint");o&&(s.tab_constraint=o)}}return n&&n.user&&n.user.query&&(s.user_query=n.user.query),n&&n.user&&n.user.constraint&&(s.user_constraint=n.user.constraint),a.isNumber(i)&&(i=i.toString()),{id:i,html:n.name,name:n.name,query_expr:{id:i,and:s}}})}});return new t},getInput:function(){return this.options.application.models.search.input},getWiring:function(){return this.options.application.models.search.wiring},createChildView:function(e){return new h(e)},remove:function(){return s.View.prototype.remove.apply(this,arguments),this}});return c.View=d,c}),!function(e,t,i){var n=e.L,s={};s.version="0.7.3","object"==typeof module&&"object"==typeof module.exports?module.exports=s:"function"==typeof Mindbreeze.define&&Mindbreeze.define.amd&&Mindbreeze.define("components/map/js/leaflet/leaflet",s),s.noConflict=function(){return e.L=n,this},e.L=s,s.Util={extend:function(e){var t,i,n,s,r=Array.prototype.slice.call(arguments,1);for(i=0,n=r.length;n>i;i++){s=r[i]||{};for(t in s)s.hasOwnProperty(t)&&(e[t]=s[t])}return e},bind:function(e,t){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return e.apply(t,i||arguments)}},stamp:function(){var e=0,t="_leaflet_id";return function(i){return i[t]=i[t]||++e,i[t]}}(),invokeEach:function(e,t,i){var n,s;if("object"==typeof e){s=Array.prototype.slice.call(arguments,3);for(n in e)t.apply(i,[n,e[n]].concat(s));return!0}return!1},limitExecByInterval:function(e,t,i){var n,s;return function r(){var a=arguments;return n?void(s=!0):(n=!0,setTimeout(function(){n=!1,s&&(r.apply(i,a),s=!1)},t),void e.apply(i,a))}},falseFn:function(){return!1},formatNum:function(e,t){var i=Math.pow(10,t||5);return Math.round(e*i)/i},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},splitWords:function(e){return s.Util.trim(e).split(/\s+/)},setOptions:function(e,t){return e.options=s.extend({},e.options,t),e.options},getParamString:function(e,t,i){var n=[];for(var s in e)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(e[s]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")},template:function(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,n){var s=t[n];if(s===i)throw new Error("No value provided for variable "+e);return"function"==typeof s&&(s=s(t)),s})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){var i,n,s=["webkit","moz","o","ms"];for(i=0;i<s.length&&!n;i++)n=e[s[i]+t];return n}function i(t){var i=+new Date,s=Math.max(0,16-(i-n));return n=i+s,e.setTimeout(t,s)}var n=0,r=e.requestAnimationFrame||t("RequestAnimationFrame")||i,a=e.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){e.clearTimeout(t)};s.Util.requestAnimFrame=function(t,n,a,o){return t=s.bind(t,n),a&&r===i?void t():r.call(e,t,o)},s.Util.cancelAnimFrame=function(t){t&&a.call(e,t)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(e){var t=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=t,t.prototype=n;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&(t[r]=this[r]);e.statics&&(s.extend(t,e.statics),delete e.statics),e.includes&&(s.Util.extend.apply(null,[n].concat(e.includes)),delete e.includes),e.options&&n.options&&(e.options=s.extend({},n.options,e.options)),s.extend(n,e),n._initHooks=[];var a=this;return t.__super__=a.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=n._initHooks.length;t>e;e++)n._initHooks[e].call(this)}},t},s.Class.include=function(e){s.extend(this.prototype,e)},s.Class.mergeOptions=function(e){s.extend(this.prototype.options,e)},s.Class.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var r="_leaflet_events";s.Mixin={},s.Mixin.Events={addEventListener:function(e,t,i){if(s.Util.invokeEach(e,this.addEventListener,this,t,i))return this;var n,a,o,l,u,c,h,d=this[r]=this[r]||{},p=i&&i!==this&&s.stamp(i);for(e=s.Util.splitWords(e),n=0,a=e.length;a>n;n++)o={action:t,context:i||this},l=e[n],p?(u=l+"_idx",c=u+"_len",h=d[u]=d[u]||{},h[p]||(h[p]=[],d[c]=(d[c]||0)+1),h[p].push(o)):(d[l]=d[l]||[],d[l].push(o));return this},hasEventListeners:function(e){var t=this[r];return!!t&&(e in t&&t[e].length>0||e+"_idx"in t&&t[e+"_idx_len"]>0)},removeEventListener:function(e,t,i){if(!this[r])return this;if(!e)return this.clearAllEventListeners();if(s.Util.invokeEach(e,this.removeEventListener,this,t,i))return this;var n,a,o,l,u,c,h,d,p,m=this[r],f=i&&i!==this&&s.stamp(i);for(e=s.Util.splitWords(e),n=0,a=e.length;a>n;n++)if(o=e[n],c=o+"_idx",h=c+"_len",d=m[c],t){if(l=f&&d?d[f]:m[o]){for(u=l.length-1;u>=0;u--)l[u].action!==t||i&&l[u].context!==i||(p=l.splice(u,1),p[0].action=s.Util.falseFn);i&&d&&0===l.length&&(delete d[f],m[h]--)}}else delete m[o],delete m[c],delete m[h];return this},clearAllEventListeners:function(){return delete this[r],this},fireEvent:function(e,t){if(!this.hasEventListeners(e))return this;var i,n,a,o,l,u=s.Util.extend({},t,{type:e,target:this}),c=this[r];if(c[e])for(i=c[e].slice(),n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,u);o=c[e+"_idx"];for(l in o)if(i=o[l].slice())for(n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,u);return this},addOneTimeEventListener:function(e,t,i){if(s.Util.invokeEach(e,this.addOneTimeEventListener,this,t,i))return this;var n=s.bind(function(){this.removeEventListener(e,t,i).removeEventListener(e,n,i)},this);return this.addEventListener(e,t,i).addEventListener(e,n,i)}},s.Mixin.Events.on=s.Mixin.Events.addEventListener,s.Mixin.Events.off=s.Mixin.Events.removeEventListener,s.Mixin.Events.once=s.Mixin.Events.addOneTimeEventListener,s.Mixin.Events.fire=s.Mixin.Events.fireEvent,function(){var n="ActiveXObject"in e,r=n&&!t.addEventListener,a=navigator.userAgent.toLowerCase(),o=-1!==a.indexOf("webkit"),l=-1!==a.indexOf("chrome"),u=-1!==a.indexOf("phantom"),c=-1!==a.indexOf("android"),h=-1!==a.search("android [23]"),d=-1!==a.indexOf("gecko"),p=typeof orientation!=i+"",m=e.navigator&&e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints&&!e.PointerEvent,f=e.PointerEvent&&e.navigator.pointerEnabled&&e.navigator.maxTouchPoints||m,g="devicePixelRatio"in e&&e.devicePixelRatio>1||"matchMedia"in e&&e.matchMedia("(min-resolution:144dpi)")&&e.matchMedia("(min-resolution:144dpi)").matches,v=t.documentElement,_=n&&"transition"in v.style,y="WebKitCSSMatrix"in e&&"m11"in new e.WebKitCSSMatrix&&!h,b="MozPerspective"in v.style,w="OTransition"in v.style,x=!e.L_DISABLE_3D&&(_||y||b||w)&&!u,M=!e.L_NO_TOUCH&&!u&&function(){var e="ontouchstart";if(f||e in v)return!0;var i=t.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(e,"return;"),"function"==typeof i[e]&&(n=!0),i.removeAttribute(e),i=null,n):!1
}();s.Browser={ie:n,ielt9:r,webkit:o,gecko:d&&!o&&!e.opera&&!n,android:c,android23:h,chrome:l,ie3d:_,webkit3d:y,gecko3d:b,opera3d:w,any3d:x,mobile:p,mobileWebkit:p&&o,mobileWebkit3d:p&&y,mobileOpera:p&&e.opera,touch:M,msPointer:m,pointer:f,retina:g}}(),s.Point=function(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(e){return this.clone()._add(s.point(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(s.point(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(e){e=s.point(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=s.point(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=s.point(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(e,t,n){return e instanceof s.Point?e:s.Util.isArray(e)?new s.Point(e[0],e[1]):e===i||null===e?e:new s.Point(e,t,n)},s.Bounds=function(e,t){if(e)for(var i=t?[e,t]:e,n=0,s=i.length;s>n;n++)this.extend(i[n])},s.Bounds.prototype={extend:function(e){return e=s.point(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return e="number"==typeof e[0]||e instanceof s.Point?s.point(e):s.bounds(e),e instanceof s.Bounds?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=s.bounds(e);var t=this.min,i=this.max,n=e.min,r=e.max,a=r.x>=t.x&&n.x<=i.x,o=r.y>=t.y&&n.y<=i.y;return a&&o},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(e,t){return!e||e instanceof s.Bounds?e:new s.Bounds(e,t)},s.Transformation=function(e,t,i,n){this._a=e,this._b=t,this._c=i,this._d=n},s.Transformation.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new s.Point((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}},s.DomUtil={get:function(e){return"string"==typeof e?t.getElementById(e):e},getStyle:function(e,i){var n=e.style[i];if(!n&&e.currentStyle&&(n=e.currentStyle[i]),(!n||"auto"===n)&&t.defaultView){var s=t.defaultView.getComputedStyle(e,null);n=s?s[i]:null}return"auto"===n?null:n},getViewportOffset:function(e){var i,n=0,r=0,a=e,o=t.body,l=t.documentElement;do{if(n+=a.offsetTop||0,r+=a.offsetLeft||0,n+=parseInt(s.DomUtil.getStyle(a,"borderTopWidth"),10)||0,r+=parseInt(s.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=s.DomUtil.getStyle(a,"position"),a.offsetParent===o&&"absolute"===i)break;if("fixed"===i){n+=o.scrollTop||l.scrollTop||0,r+=o.scrollLeft||l.scrollLeft||0;break}if("relative"===i&&!a.offsetLeft){var u=s.DomUtil.getStyle(a,"width"),c=s.DomUtil.getStyle(a,"max-width"),h=a.getBoundingClientRect();("none"!==u||"none"!==c)&&(r+=h.left+a.clientLeft),n+=h.top+(o.scrollTop||l.scrollTop||0);break}a=a.offsetParent}while(a);a=e;do{if(a===o)break;n-=a.scrollTop||0,r-=a.scrollLeft||0,a=a.parentNode}while(a);return new s.Point(r,n)},documentIsLtr:function(){return s.DomUtil._docIsLtrCached||(s.DomUtil._docIsLtrCached=!0,s.DomUtil._docIsLtr="ltr"===s.DomUtil.getStyle(t.body,"direction")),s.DomUtil._docIsLtr},create:function(e,i,n){var s=t.createElement(e);return/img/i.test(e)&&(s.alt=""),s.className=i,n&&n.appendChild(s),s},hasClass:function(e,t){if(e.classList!==i)return e.classList.contains(t);var n=s.DomUtil._getClass(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){if(e.classList!==i)for(var n=s.Util.splitWords(t),r=0,a=n.length;a>r;r++)e.classList.add(n[r]);else if(!s.DomUtil.hasClass(e,t)){var o=s.DomUtil._getClass(e);s.DomUtil._setClass(e,(o?o+" ":"")+t)}},removeClass:function(e,t){e.classList!==i?e.classList.remove(t):s.DomUtil._setClass(e,s.Util.trim((" "+s.DomUtil._getClass(e)+" ").replace(" "+t+" "," ")))},_setClass:function(e,t){e.className.baseVal===i?e.className=t:e.className.baseVal=t},_getClass:function(e){return e.className.baseVal===i?e.className:e.className.baseVal},setOpacity:function(e,t){if("opacity"in e.style)e.style.opacity=t;else if("filter"in e.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(s){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}},testProp:function(e){for(var i=t.documentElement.style,n=0;n<e.length;n++)if(e[n]in i)return e[n];return!1},getTranslateString:function(e){var t=s.Browser.webkit3d,i="translate"+(t?"3d":"")+"(",n=(t?",0":"")+")";return i+e.x+"px,"+e.y+"px"+n},getScaleString:function(e,t){var i=s.DomUtil.getTranslateString(t.add(t.multiplyBy(-1*e))),n=" scale("+e+") ";return i+n},setPosition:function(e,t,i){e._leaflet_pos=t,!i&&s.Browser.any3d?e.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(t):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getPosition:function(e){return e._leaflet_pos}},s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),s.DomUtil.TRANSITION_END="webkitTransition"===s.DomUtil.TRANSITION||"OTransition"===s.DomUtil.TRANSITION?s.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in t)s.extend(s.DomUtil,{disableTextSelection:function(){s.DomEvent.on(e,"selectstart",s.DomEvent.preventDefault)},enableTextSelection:function(){s.DomEvent.off(e,"selectstart",s.DomEvent.preventDefault)}});else{var i=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.extend(s.DomUtil,{disableTextSelection:function(){if(i){var e=t.documentElement.style;this._userSelect=e[i],e[i]="none"}},enableTextSelection:function(){i&&(t.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}s.extend(s.DomUtil,{disableImageDrag:function(){s.DomEvent.on(e,"dragstart",s.DomEvent.preventDefault)},enableImageDrag:function(){s.DomEvent.off(e,"dragstart",s.DomEvent.preventDefault)}})}(),s.LatLng=function(e,t,n){if(e=parseFloat(e),t=parseFloat(t),isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=e,this.lng=t,n!==i&&(this.alt=parseFloat(n))},s.extend(s.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),s.LatLng.prototype={equals:function(e){if(!e)return!1;e=s.latLng(e);var t=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return t<=s.LatLng.MAX_MARGIN},toString:function(e){return"LatLng("+s.Util.formatNum(this.lat,e)+", "+s.Util.formatNum(this.lng,e)+")"},distanceTo:function(e){e=s.latLng(e);var t=6378137,i=s.LatLng.DEG_TO_RAD,n=(e.lat-this.lat)*i,r=(e.lng-this.lng)*i,a=this.lat*i,o=e.lat*i,l=Math.sin(n/2),u=Math.sin(r/2),c=l*l+u*u*Math.cos(a)*Math.cos(o);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))},wrap:function(e,t){var i=this.lng;return e=e||-180,t=t||180,i=(i+t)%(t-e)+(e>i||i===t?t:e),new s.LatLng(this.lat,i)}},s.latLng=function(e,t){return e instanceof s.LatLng?e:s.Util.isArray(e)?"number"==typeof e[0]||"string"==typeof e[0]?new s.LatLng(e[0],e[1],e[2]):null:e===i||null===e?e:"object"==typeof e&&"lat"in e?new s.LatLng(e.lat,"lng"in e?e.lng:e.lon):t===i?null:new s.LatLng(e,t)},s.LatLngBounds=function(e,t){if(e)for(var i=t?[e,t]:e,n=0,s=i.length;s>n;n++)this.extend(i[n])},s.LatLngBounds.prototype={extend:function(e){if(!e)return this;var t=s.latLng(e);return e=null!==t?t:s.latLngBounds(e),e instanceof s.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(e.lat,this._southWest.lat),this._southWest.lng=Math.min(e.lng,this._southWest.lng),this._northEast.lat=Math.max(e.lat,this._northEast.lat),this._northEast.lng=Math.max(e.lng,this._northEast.lng)):(this._southWest=new s.LatLng(e.lat,e.lng),this._northEast=new s.LatLng(e.lat,e.lng)):e instanceof s.LatLngBounds&&(this.extend(e._southWest),this.extend(e._northEast)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new s.LatLngBounds(new s.LatLng(t.lat-n,t.lng-r),new s.LatLng(i.lat+n,i.lng+r))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof s.LatLng?s.latLng(e):s.latLngBounds(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof s.LatLngBounds?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},intersects:function(e){e=s.latLngBounds(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>=t.lat&&n.lat<=i.lat,o=r.lng>=t.lng&&n.lng<=i.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e){return e?(e=s.latLngBounds(e),this._southWest.equals(e.getSouthWest())&&this._northEast.equals(e.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(e,t){return!e||e instanceof s.LatLngBounds?e:new s.LatLngBounds(e,t)},s.Projection={},s.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(e){var t=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=e.lng*t,a=n*t;return a=Math.log(Math.tan(Math.PI/4+a/2)),new s.Point(r,a)},unproject:function(e){var t=s.LatLng.RAD_TO_DEG,i=e.x*t,n=(2*Math.atan(Math.exp(e.y))-Math.PI/2)*t;return new s.LatLng(n,i)}},s.Projection.LonLat={project:function(e){return new s.Point(e.lng,e.lat)},unproject:function(e){return new s.LatLng(e.y,e.x)}},s.CRS={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},scale:function(e){return 256*Math.pow(2,e)},getSize:function(e){var t=this.scale(e);return s.point(t,t)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,-1,0),scale:function(e){return Math.pow(2,e)}}),s.CRS.EPSG3857=s.extend({},s.CRS,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:new s.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(e){var t=this.projection.project(e),i=6378137;return t.multiplyBy(i)}}),s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/360,.5,-1/360,.5)}),s.Map=s.Class.extend({includes:s.Mixin.Events,options:{crs:s.CRS.EPSG3857,fadeAnimation:s.DomUtil.TRANSITION&&!s.Browser.android23,trackResize:!0,markerZoomAnimation:s.DomUtil.TRANSITION&&s.Browser.any3d},initialize:function(e,t){t=s.setOptions(this,t),this._initContainer(e),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.center&&t.zoom!==i&&this.setView(s.latLng(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(t.layers)},setView:function(e,t){return t=t===i?this.getZoom():t,this._resetView(s.latLng(e),this._limitZoom(t)),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=this._limitZoom(e),this)},zoomIn:function(e,t){return this.setZoom(this._zoom+(e||1),t)},zoomOut:function(e,t){return this.setZoom(this._zoom-(e||1),t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),a=e instanceof s.Point?e:this.latLngToContainerPoint(e),o=a.subtract(r).multiplyBy(1-1/n),l=this.containerPointToLatLng(r.add(o));return this.setView(l,t,{zoom:i})},fitBounds:function(e,t){t=t||{},e=e.getBounds?e.getBounds():s.latLngBounds(e);var i=s.point(t.paddingTopLeft||t.padding||[0,0]),n=s.point(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n)),a=n.subtract(i).divideBy(2),o=this.project(e.getSouthWest(),r),l=this.project(e.getNorthEast(),r),u=this.unproject(o.add(l).divideBy(2).add(a),r);return r=t&&t.maxZoom?Math.min(t.maxZoom,r):r,this.setView(u,r,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e){return this.fire("movestart"),this._rawPanBy(s.point(e)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(e){return e=s.latLngBounds(e),this.options.maxBounds=e,e?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(e,t){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,e);return i.equals(n)?this:this.panTo(n,t)},addLayer:function(e){var t=s.stamp(e);return this._layers[t]?this:(this._layers[t]=e,!e.options||isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[t]=e,this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&e instanceof s.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,e.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(e),this)},removeLayer:function(e){var t=s.stamp(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&this.fire("layerremove",{layer:e}),this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels()),this.options.zoomAnimation&&s.TileLayer&&e instanceof s.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,e.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(e){return e?s.stamp(e)in this._layers:!1},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},invalidateSize:function(e){if(!this._loaded)return this;e=s.extend({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=t.divideBy(2).round(),r=i.divideBy(2).round(),a=n.subtract(r);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(e){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new s.LatLngBounds(t,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=s.latLngBounds(e);var n,r=this.getMinZoom()-(t?1:0),a=this.getMaxZoom(),o=this.getSize(),l=e.getNorthWest(),u=e.getSouthEast(),c=!0;i=s.point(i||[0,0]);do r++,n=this.project(u,r).subtract(this.project(l,r)).add(i),c=t?n.x<o.x||n.y<o.y:o.contains(n);while(c&&a>=r);return c&&t?null:t?r:r-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new s.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var e=this._getTopLeftPoint();return new s.Bounds(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e){var t=this.options.crs;return t.scale(e)/t.scale(this._zoom)},getScaleZoom:function(e){return this._zoom+Math.log(e)/Math.LN2},project:function(e,t){return t=t===i?this._zoom:t,this.options.crs.latLngToPoint(s.latLng(e),t)},unproject:function(e,t){return t=t===i?this._zoom:t,this.options.crs.pointToLatLng(s.point(e),t)},layerPointToLatLng:function(e){var t=s.point(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(s.latLng(e))._round();return t._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(e){return s.point(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return s.point(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(s.point(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(e)))},mouseEventToContainerPoint:function(e){return s.DomEvent.getMousePosition(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=s.DomUtil.get(e);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var e=this._container;s.DomUtil.addClass(e,"leaflet-container"+(s.Browser.touch?" leaflet-touch":"")+(s.Browser.retina?" leaflet-retina":"")+(s.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var t=s.DomUtil.getStyle(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._mapPane=e.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=e.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),e.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),e.shadowPane=this._createPane("leaflet-shadow-pane"),e.overlayPane=this._createPane("leaflet-overlay-pane"),e.markerPane=this._createPane("leaflet-marker-pane"),e.popupPane=this._createPane("leaflet-popup-pane");var t=" leaflet-zoom-hide";this.options.markerZoomAnimation||(s.DomUtil.addClass(e.markerPane,t),s.DomUtil.addClass(e.shadowPane,t),s.DomUtil.addClass(e.popupPane,t))},_createPane:function(e,t){return s.DomUtil.create("div",e,t||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(e){e=e?s.Util.isArray(e)?e:[e]:[];for(var t=0,i=e.length;i>t;t++)this.addLayer(e[t])},_resetView:function(e,t,i,n){var r=this._zoom!==t;n||(this.fire("movestart"),r&&this.fire("zoomstart")),this._zoom=t,this._initialCenter=e,this._initialTopLeftPoint=this._getNewTopLeftPoint(e),i?this._initialTopLeftPoint._add(this._getMapPanePos()):s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),a&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(r||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(e){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var e,t=1/0,n=-1/0,s=this._getZoomSpan();for(e in this._zoomBoundLayers){var r=this._zoomBoundLayers[e];isNaN(r.options.minZoom)||(t=Math.min(t,r.options.minZoom)),isNaN(r.options.maxZoom)||(n=Math.max(n,r.options.maxZoom))}e===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=t),s!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(s.DomEvent){t=t||"on",s.DomEvent[t](this._container,"click",this._onMouseClick,this);var i,n,r=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=r.length;n>i;i++)s.DomEvent[t](this._container,r[i],this._fireMouseEvent,this);this.options.trackResize&&s.DomEvent[t](e,"resize",this._onResize,this)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(e){!this._loaded||!e._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||s.DomEvent._skipped(e)||(this.fire("preclick"),this._fireMouseEvent(e))},_fireMouseEvent:function(e){if(this._loaded&&!s.DomEvent._skipped(e)){var t=e.type;if(t="mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,this.hasEventListeners(t)){"contextmenu"===t&&s.DomEvent.preventDefault(e);var i=this.mouseEventToContainerPoint(e),n=this.containerPointToLayerPoint(i),r=this.layerPointToLatLng(n);this.fire(t,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:e})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var e=0,t=this._handlers.length;t>e;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,this):this.on("load",e,t),this},_layerAdd:function(e){e.onAdd(this),this.fire("layeradd",{layer:e})},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewTopLeftPoint(i,t).add(this._getMapPanePos());return this.project(e,t)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),r=this.getSize().divideBy(2),a=new s.Bounds(n.subtract(r),n.add(r)),o=this._getBoundsOffset(a,i,t);return this.unproject(n.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new s.Bounds(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=this.project(t.getNorthWest(),i).subtract(e.min),r=this.project(t.getSouthEast(),i).subtract(e.max),a=this._rebound(n.x,-r.x),o=this._rebound(n.y,-r.y);return new s.Point(a,o)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom();return Math.max(t,Math.min(i,e))}}),s.map=function(e,t){return new s.Map(e,t)},s.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(e){var t=s.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=this.R_MAJOR,a=this.R_MINOR,o=e.lng*t*r,l=n*t,u=a/r,c=Math.sqrt(1-u*u),h=c*Math.sin(l);h=Math.pow((1-h)/(1+h),.5*c);var d=Math.tan(.5*(.5*Math.PI-l))/h;return l=-r*Math.log(d),new s.Point(o,l)},unproject:function(e){for(var t,i=s.LatLng.RAD_TO_DEG,n=this.R_MAJOR,r=this.R_MINOR,a=e.x*i/n,o=r/n,l=Math.sqrt(1-o*o),u=Math.exp(-e.y/n),c=Math.PI/2-2*Math.atan(u),h=15,d=1e-7,p=h,m=.1;Math.abs(m)>d&&--p>0;)t=l*Math.sin(c),m=Math.PI/2-2*Math.atan(u*Math.pow((1-t)/(1+t),.5*l))-c,c+=m;return new s.LatLng(c*i,a)}},s.CRS.EPSG3395=s.extend({},s.CRS,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var e=s.Projection.Mercator,t=e.R_MAJOR,i=.5/(Math.PI*t);return new s.Transformation(i,.5,-i,.5)}()}),s.TileLayer=s.Class.extend({includes:s.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:s.Browser.mobile,updateWhenIdle:s.Browser.mobile},initialize:function(e,t){t=s.setOptions(this,t),t.detectRetina&&s.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom>0&&t.minZoom--,this.options.maxZoom--),t.bounds&&(t.bounds=s.latLngBounds(t.bounds)),this._url=e;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(e){this._map=e,this._animated=e._zoomAnimated,this._initContainer(),e.on({viewreset:this._reset,moveend:this._update},this),this._animated&&e.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=s.Util.limitExecByInterval(this._update,150,this),e.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this._container.parentNode.removeChild(this._container),e.off({viewreset:this._reset,moveend:this._update},this),this._animated&&e.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||e.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var e=this._map._panes.tilePane;return this._container&&(e.appendChild(this._container),this._setAutoZIndex(e,Math.max)),this},bringToBack:function(){var e=this._map._panes.tilePane;return this._container&&(e.insertBefore(this._container,e.firstChild),this._setAutoZIndex(e,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e,t){var i,n,s,r=e.children,a=-t(1/0,-1/0);for(n=0,s=r.length;s>n;n++)r[n]!==this._container&&(i=parseInt(r[n].style.zIndex,10),isNaN(i)||(a=t(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+t(1,-1)},_updateOpacity:function(){var e,t=this._tiles;if(s.Browser.ielt9)for(e in t)s.DomUtil.setOpacity(t[e],this.options.opacity);else s.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var e=this._map._panes.tilePane;if(!this._container){if(this._container=s.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var t="leaflet-tile-container";this._bgBuffer=s.DomUtil.create("div",t,this._container),this._tileContainer=s.DomUtil.create("div",t,this._container)}else this._tileContainer=this._container;e.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(e){for(var t in this._tiles)this.fire("tileunload",{tile:this._tiles[t]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&e&&e.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var e=this._map,t=e.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&t>i&&(n=Math.round(e.getZoomScale(t)/e.getZoomScale(i)*n)),n},_update:function(){if(this._map){var e=this._map,t=e.getPixelBounds(),i=e.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var r=s.bounds(t.min.divideBy(n)._floor(),t.max.divideBy(n)._floor());this._addTilesFromCenterOut(r),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(r)}}},_addTilesFromCenterOut:function(e){var i,n,r,a=[],o=e.getCenter();for(i=e.min.y;i<=e.max.y;i++)for(n=e.min.x;n<=e.max.x;n++)r=new s.Point(n,i),this._tileShouldBeLoaded(r)&&a.push(r);var l=a.length;if(0!==l){a.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)});var u=t.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=l,n=0;l>n;n++)this._addTile(a[n],u);this._tileContainer.appendChild(u)}},_tileShouldBeLoaded:function(e){if(e.x+":"+e.y in this._tiles)return!1;var t=this.options;if(!t.continuousWorld){var i=this._getWrapTileNum();if(t.noWrap&&(e.x<0||e.x>=i.x)||e.y<0||e.y>=i.y)return!1}if(t.bounds){var n=t.tileSize,s=e.multiplyBy(n),r=s.add([n,n]),a=this._map.unproject(s),o=this._map.unproject(r);if(t.continuousWorld||t.noWrap||(a=a.wrap(),o=o.wrap()),!t.bounds.intersects([a,o]))return!1}return!0},_removeOtherTiles:function(e){var t,i,n,s;for(s in this._tiles)t=s.split(":"),i=parseInt(t[0],10),n=parseInt(t[1],10),(i<e.min.x||i>e.max.x||n<e.min.y||n>e.max.y)&&this._removeTile(s)},_removeTile:function(e){var t=this._tiles[e];this.fire("tileunload",{tile:t,url:t.src}),this.options.reuseTiles?(s.DomUtil.removeClass(t,"leaflet-tile-loaded"),this._unusedTiles.push(t)):t.parentNode===this._tileContainer&&this._tileContainer.removeChild(t),s.Browser.android||(t.onload=null,t.src=s.Util.emptyImageUrl),delete this._tiles[e]},_addTile:function(e,t){var i=this._getTilePos(e),n=this._getTile();s.DomUtil.setPosition(n,i,s.Browser.chrome),this._tiles[e.x+":"+e.y]=n,this._loadTile(n,e),n.parentNode!==this._tileContainer&&t.appendChild(n)},_getZoomForUrl:function(){var e=this.options,t=this._map.getZoom();return e.zoomReverse&&(t=e.maxZoom-t),t+=e.zoomOffset,e.maxNativeZoom?Math.min(t,e.maxNativeZoom):t},_getTilePos:function(e){var t=this._map.getPixelOrigin(),i=this._getTileSize();return e.multiplyBy(i).subtract(t)},getTileUrl:function(e){return s.Util.template(this._url,s.extend({s:this._getSubdomain(e),z:e.z,x:e.x,y:e.y},this.options))},_getWrapTileNum:function(){var e=this._map.options.crs,t=e.getSize(this._map.getZoom());return t.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(e){var t=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(e.x=(e.x%t.x+t.x)%t.x),this.options.tms&&(e.y=t.y-e.y-1),e.z=this._getZoomForUrl()
},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var e=this._unusedTiles.pop();return this._resetTile(e),e}return this._createTile()},_resetTile:function(){},_createTile:function(){var e=s.DomUtil.create("img","leaflet-tile");return e.style.width=e.style.height=this._getTileSize()+"px",e.galleryimg="no",e.onselectstart=e.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity!==i&&s.DomUtil.setOpacity(e,this.options.opacity),s.Browser.mobileWebkit3d&&(e.style.WebkitBackfaceVisibility="hidden"),e},_loadTile:function(e,t){e._layer=this,e.onload=this._tileOnLoad,e.onerror=this._tileOnError,this._adjustTilePoint(t),e.src=this.getTileUrl(t),this.fire("tileloadstart",{tile:e,url:e.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&s.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(s.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var e=this._layer;this.src!==s.Util.emptyImageUrl&&(s.DomUtil.addClass(this,"leaflet-tile-loaded"),e.fire("tileload",{tile:this,url:this.src})),e._tileLoaded()},_tileOnError:function(){var e=this._layer;e.fire("tileerror",{tile:this,url:this.src});var t=e.options.errorTileUrl;t&&(this.src=t),e._tileLoaded()}}),s.tileLayer=function(e,t){return new s.TileLayer(e,t)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(e,t){this._url=e;var i=s.extend({},this.defaultWmsParams),n=t.tileSize||this.options.tileSize;i.width=i.height=t.detectRetina&&s.Browser.retina?2*n:n;for(var r in t)this.options.hasOwnProperty(r)||"crs"===r||(i[r]=t[r]);this.wmsParams=i,s.setOptions(this,t)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._map,i=this.options.tileSize,n=e.multiplyBy(i),r=n.add([i,i]),a=this._crs.project(t.unproject(n,e.z)),o=this._crs.project(t.unproject(r,e.z)),l=this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[o.y,a.x,a.y,o.x].join(","):[a.x,o.y,o.x,a.y].join(","),u=s.Util.template(this._url,{s:this._getSubdomain(e)});return u+s.Util.getParamString(this.wmsParams,u,!0)+"&BBOX="+l},setParams:function(e,t){return s.extend(this.wmsParams,e),t||this.redraw(),this}}),s.tileLayer.wms=function(e,t){return new s.TileLayer.WMS(e,t)},s.TileLayer.Canvas=s.TileLayer.extend({options:{async:!1},initialize:function(e){s.setOptions(this,e)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var e in this._tiles)this._redrawTile(this._tiles[e]);return this},_redrawTile:function(e){this.drawTile(e,e._tilePoint,this._map._zoom)},_createTile:function(){var e=s.DomUtil.create("canvas","leaflet-tile");return e.width=e.height=this.options.tileSize,e.onselectstart=e.onmousemove=s.Util.falseFn,e},_loadTile:function(e,t){e._layer=this,e._tilePoint=t,this._redrawTile(e),this.options.async||this.tileDrawn(e)},drawTile:function(){},tileDrawn:function(e){this._tileOnLoad.call(e)}}),s.tileLayer.canvas=function(e){return new s.TileLayer.Canvas(e)},s.ImageOverlay=s.Class.extend({includes:s.Mixin.Events,options:{opacity:1},initialize:function(e,t,i){this._url=e,this._bounds=s.latLngBounds(t),s.setOptions(this,i)},onAdd:function(e){this._map=e,this._image||this._initImage(),e._panes.overlayPane.appendChild(this._image),e.on("viewreset",this._reset,this),e.options.zoomAnimation&&s.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){e.getPanes().overlayPane.removeChild(this._image),e.off("viewreset",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var e=this._map._panes.overlayPane;return this._image&&e.insertBefore(this._image,e.firstChild),this},setUrl:function(e){this._url=e,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=s.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&s.Browser.any3d?s.DomUtil.addClass(this._image,"leaflet-zoom-animated"):s.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),s.extend(this._image,{galleryimg:"no",onselectstart:s.Util.falseFn,onmousemove:s.Util.falseFn,onload:s.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(e){var t=this._map,i=this._image,n=t.getZoomScale(e.zoom),r=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),o=t._latLngToNewLayerPoint(r,e.zoom,e.center),l=t._latLngToNewLayerPoint(a,e.zoom,e.center)._subtract(o),u=o._add(l._multiplyBy(.5*(1-1/n)));i.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(u)+" scale("+n+") "},_reset:function(){var e=this._image,t=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(t);s.DomUtil.setPosition(e,t),e.style.width=i.x+"px",e.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(e,t,i){return new s.ImageOverlay(e,t,i)},s.Icon=s.Class.extend({options:{className:""},initialize:function(e){s.setOptions(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=t&&"IMG"===t.tagName?this._createImg(i,t):this._createImg(i),this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var i,n=this.options,r=s.point(n[t+"Size"]);i=s.point("shadow"===t?n.shadowAnchor||n.iconAnchor:n.iconAnchor),!i&&r&&(i=r.divideBy(2,!0)),e.className="leaflet-marker-"+t+" "+n.className,i&&(e.style.marginLeft=-i.x+"px",e.style.marginTop=-i.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,i){return i=i||t.createElement("img"),i.alt="",i.src=e,i},_getIconUrl:function(e){return s.Browser.retina&&this.options[e+"RetinaUrl"]?this.options[e+"RetinaUrl"]:this.options[e+"Url"]}}),s.icon=function(e){return new s.Icon(e)},s.Icon.Default=s.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(e){var t=e+"Url";if(this.options[t])return this.options[t];s.Browser.retina&&"icon"===e&&(e+="-2x");var i=s.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+e+".png"}}),s.Icon.Default.imagePath=function(){var e,i,n,s,r,a=t.getElementsByTagName("script"),o=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(e=0,i=a.length;i>e;e++)if(n=a[e].src,s=n.match(o))return r=n.split(o)[0],(r?r+"/":"")+"images"}(),s.Marker=s.Class.extend({includes:s.Mixin.Events,options:{icon:new s.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(e,t){s.setOptions(this,t),this._latlng=s.latLng(e)},onAdd:function(e){this._map=e,e.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),e.options.zoomAnimation&&e.options.markerZoomAnimation&&e.on("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),e.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=s.latLng(e),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update(),this},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t=this._map,i=t.options.zoomAnimation&&t.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",r=e.icon.createIcon(this._icon),a=!1;r!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(r.title=e.title),e.alt&&(r.alt=e.alt)),s.DomUtil.addClass(r,n),e.keyboard&&(r.tabIndex="0"),this._icon=r,this._initInteraction(),e.riseOnHover&&s.DomEvent.on(r,"mouseover",this._bringToFront,this).on(r,"mouseout",this._resetZIndex,this);var o=e.icon.createShadow(this._shadow),l=!1;o!==this._shadow&&(this._removeShadow(),l=!0),o&&s.DomUtil.addClass(o,n),this._shadow=o,e.opacity<1&&this._updateOpacity();var u=this._map._panes;a&&u.markerPane.appendChild(this._icon),o&&l&&u.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&s.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(e){s.DomUtil.setPosition(this._icon,e),this._shadow&&s.DomUtil.setPosition(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.clickable){var e=this._icon,t=["dblclick","mousedown","mouseover","mouseout","contextmenu"];s.DomUtil.addClass(e,"leaflet-clickable"),s.DomEvent.on(e,"click",this._onMouseClick,this),s.DomEvent.on(e,"keypress",this._onKeyPress,this);for(var i=0;i<t.length;i++)s.DomEvent.on(e,t[i],this._fireMouseEvent,this);s.Handler.MarkerDrag&&(this.dragging=new s.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(e){var t=this.dragging&&this.dragging.moved();(this.hasEventListeners(e.type)||t)&&s.DomEvent.stopPropagation(e),t||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(e.type,{originalEvent:e,latlng:this._latlng})},_onKeyPress:function(e){13===e.keyCode&&this.fire("click",{originalEvent:e,latlng:this._latlng})},_fireMouseEvent:function(e){this.fire(e.type,{originalEvent:e,latlng:this._latlng}),"contextmenu"===e.type&&this.hasEventListeners(e.type)&&s.DomEvent.preventDefault(e),"mousedown"!==e.type?s.DomEvent.stopPropagation(e):s.DomEvent.preventDefault(e)},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){s.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&s.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),s.marker=function(e,t){return new s.Marker(e,t)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(e){var i=e&&"DIV"===e.tagName?e:t.createElement("div"),n=this.options;return i.innerHTML=n.html!==!1?n.html:"",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),s.divIcon=function(e){return new s.DivIcon(e)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Popup=s.Class.extend({includes:s.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(e,t){s.setOptions(this,e),this._source=t,this._animated=s.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(e){this._map=e,this._container||this._initLayout();var t=e.options.fadeAnimation;t&&s.DomUtil.setOpacity(this._container,0),e._panes.popupPane.appendChild(this._container),e.on(this._getEvents(),this),this.update(),t&&s.DomUtil.setOpacity(this._container,1),this.fire("open"),e.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(e){return e.addLayer(this),this},openOn:function(e){return e.openPopup(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),s.Util.falseFn(this._container.offsetWidth),e.off(this._getEvents(),this),e.options.fadeAnimation&&s.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),e.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=s.latLng(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var e={viewreset:this._updatePosition};return this._animated&&(e.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e,t="leaflet-popup",i=t+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=s.DomUtil.create("div",i);this.options.closeButton&&(e=this._closeButton=s.DomUtil.create("a",t+"-close-button",n),e.href="#close",e.innerHTML="&#215;",s.DomEvent.disableClickPropagation(e),s.DomEvent.on(e,"click",this._onCloseButtonClick,this));var r=this._wrapper=s.DomUtil.create("div",t+"-content-wrapper",n);s.DomEvent.disableClickPropagation(r),this._contentNode=s.DomUtil.create("div",t+"-content",r),s.DomEvent.disableScrollPropagation(this._contentNode),s.DomEvent.on(r,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",t+"-tip-container",n),this._tip=s.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,r=this.options.maxHeight,a="leaflet-popup-scrolled";r&&n>r?(t.height=r+"px",s.DomUtil.addClass(e,a)):s.DomUtil.removeClass(e,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=this._animated,i=s.point(this.options.offset);t&&s.DomUtil.setPosition(this._container,e),this._containerBottom=-i.y-(t?0:e.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(t?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);s.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var e=this._map,t=this._container.offsetHeight,i=this._containerWidth,n=new s.Point(this._containerLeft,-t-this._containerBottom);this._animated&&n._add(s.DomUtil.getPosition(this._container));var r=e.layerPointToContainerPoint(n),a=s.point(this.options.autoPanPadding),o=s.point(this.options.autoPanPaddingTopLeft||a),l=s.point(this.options.autoPanPaddingBottomRight||a),u=e.getSize(),c=0,h=0;r.x+i+l.x>u.x&&(c=r.x+i-u.x+l.x),r.x-c-o.x<0&&(c=r.x-o.x),r.y+t+l.y>u.y&&(h=r.y+t-u.y+l.y),r.y-h-o.y<0&&(h=r.y-o.y),(c||h)&&e.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(e){this._close(),s.DomEvent.stop(e)}}),s.popup=function(e,t){return new s.Popup(e,t)},s.Map.include({openPopup:function(e,t,i){if(this.closePopup(),!(e instanceof s.Popup)){var n=e;e=new s.Popup(i).setLatLng(t).setContent(n)}return e._isOpen=!0,this._popup=e,this.addLayer(e)},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&(this.removeLayer(e),e._isOpen=!1),this}}),s.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(e,t){var i=s.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(s.Popup.prototype.options.offset),t&&t.offset&&(i=i.add(t.offset)),t=s.extend({offset:i},t),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),e instanceof s.Popup?(s.setOptions(e,t),this._popup=e):this._popup=new s.Popup(t,this).setContent(e),this},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(e){this._popup.setLatLng(e.latlng)}}),s.LayerGroup=s.Class.extend({initialize:function(e){this._layers={};var t,i;if(e)for(t=0,i=e.length;i>t;t++)this.addLayer(e[t])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return e?e in this._layers||this.getLayerId(e)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)i=this._layers[t],i[e]&&i[e].apply(i,n);return this},onAdd:function(e){this._map=e,this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e),this._map=null},addTo:function(e){return e.addLayer(this),this},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];for(var t in this._layers)e.push(this._layers[t]);return e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s.stamp(e)}}),s.layerGroup=function(e){return new s.LayerGroup(e)},s.FeatureGroup=s.LayerGroup.extend({includes:s.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(e){return this.hasLayer(e)?this:("on"in e&&e.on(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.addLayer.call(this,e),this._popupContent&&e.bindPopup&&e.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.off(s.FeatureGroup.EVENTS,this._propagateEvent,this),s.LayerGroup.prototype.removeLayer.call(this,e),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:e})):this},bindPopup:function(e,t){return this._popupContent=e,this._popupOptions=t,this.invoke("bindPopup",e,t)},openPopup:function(e){for(var t in this._layers){this._layers[t].openPopup(e);break}return this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new s.LatLngBounds;return this.eachLayer(function(t){e.extend(t instanceof s.Marker?t.getLatLng():t.getBounds())}),e},_propagateEvent:function(e){e=s.extend({layer:e.target,target:this},e),this.fire(e.type,e)}}),s.featureGroup=function(e){return new s.FeatureGroup(e)},s.Path=s.Class.extend({includes:[s.Mixin.Events],statics:{CLIP_PADDING:function(){var t=s.Browser.mobile?1280:2e3,i=(t/Math.max(e.outerWidth,e.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(e){s.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),e.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,s.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),e.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(e){return s.setOptions(this,e),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),s.Map.include({_updatePathViewport:function(){var e=s.Path.CLIP_PADDING,t=this.getSize(),i=s.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(t.multiplyBy(e)._round()),r=n.add(t.multiplyBy(1+2*e)._round());this._pathViewport=new s.Bounds(n,r)}}),s.Path.SVG_NS="http://www.w3.org/2000/svg",s.Browser.svg=!(!t.createElementNS||!t.createElementNS(s.Path.SVG_NS,"svg").createSVGRect),s.Path=s.Path.extend({statics:{SVG:s.Browser.svg},bringToFront:function(){var e=this._map._pathRoot,t=this._container;return t&&e.lastChild!==t&&e.appendChild(t),this},bringToBack:function(){var e=this._map._pathRoot,t=this._container,i=e.firstChild;return t&&i!==t&&e.insertBefore(t,i),this},getPathString:function(){},_createElement:function(e){return t.createElementNS(s.Path.SVG_NS,e)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&s.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var e=this.getPathString();e||(e="M0 0"),this._path.setAttribute("d",e)},_initEvents:function(){if(this.options.clickable){(s.Browser.svg||!s.Browser.vml)&&s.DomUtil.addClass(this._path,"leaflet-clickable"),s.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var e=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],t=0;t<e.length;t++)s.DomEvent.on(this._container,e[t],this._fireMouseEvent,this)}},_onMouseClick:function(e){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(e)},_fireMouseEvent:function(e){if(this.hasEventListeners(e.type)){var t=this._map,i=t.mouseEventToContainerPoint(e),n=t.containerPointToLayerPoint(i),r=t.layerPointToLatLng(n);this.fire(e.type,{latlng:r,layerPoint:n,containerPoint:i,originalEvent:e}),"contextmenu"===e.type&&s.DomEvent.preventDefault(e),"mousemove"!==e.type&&s.DomEvent.stopPropagation(e)}}}),s.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=s.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&s.Browser.any3d?(s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):s.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(e){var t=this.getZoomScale(e.zoom),i=this._getCenterOffset(e.center)._multiplyBy(-t)._add(this._pathViewport.min);this._pathRoot.style[s.DomUtil.TRANSFORM]=s.DomUtil.getTranslateString(i)+" scale("+t+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max,n=i.x-t.x,r=i.y-t.y,a=this._pathRoot,o=this._panes.overlayPane;s.Browser.mobileWebkit&&o.removeChild(a),s.DomUtil.setPosition(a,t),a.setAttribute("width",n),a.setAttribute("height",r),a.setAttribute("viewBox",[t.x,t.y,n,r].join(" ")),s.Browser.mobileWebkit&&o.appendChild(a)}}}),s.Path.include({bindPopup:function(e,t){return e instanceof s.Popup?this._popup=e:((!this._popup||t)&&(this._popup=new s.Popup(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(e){return this._popup&&(e=e||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:e})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(e){this._popup.setLatLng(e.latlng),this._map.openPopup(this._popup)}}),s.Browser.vml=!s.Browser.svg&&function(){try{var e=t.createElement("div");e.innerHTML='<v:shape adj="1"/>';var i=e.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),s.Path=s.Browser.svg||!s.Browser.vml?s.Path:s.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return t.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var e=this._container=this._createElement("shape");s.DomUtil.addClass(e,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&s.DomUtil.addClass(e,"leaflet-clickable"),e.coordsize="1 1",this._path=this._createElement("path"),e.appendChild(this._path),this._map._pathRoot.appendChild(e)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var e=this._stroke,t=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(e||(e=this._stroke=this._createElement("stroke"),e.endcap="round",n.appendChild(e)),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,e.dashStyle=i.dashArray?s.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",i.lineCap&&(e.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(e.joinstyle=i.lineJoin)):e&&(n.removeChild(e),this._stroke=null),i.fill?(t||(t=this._fill=this._createElement("fill"),n.appendChild(t)),t.color=i.fillColor||i.color,t.opacity=i.fillOpacity):t&&(n.removeChild(t),this._fill=null)},_updatePath:function(){var e=this._container.style;e.display="none",this._path.v=this.getPathString()+" ",e.display=""}}),s.Map.include(s.Browser.svg||!s.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var e=this._pathRoot=t.createElement("div");e.className="leaflet-vml-container",this._panes.overlayPane.appendChild(e),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),s.Browser.canvas=function(){return!!t.createElement("canvas").getContext}(),s.Path=s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?s.Path:s.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(e){return s.setOptions(this,e),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(e){e.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!s.Path._updateRequest&&(s.Path._updateRequest=s.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){s.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var e=this.options;e.stroke&&(this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color),e.fill&&(this._ctx.fillStyle=e.fillColor||e.color)},_drawPath:function(){var e,t,i,n,r,a;for(this._ctx.beginPath(),e=0,i=this._parts.length;i>e;e++){for(t=0,n=this._parts[e].length;n>t;t++)r=this._parts[e][t],a=(0===t?"move":"line")+"To",this._ctx[a](r.x,r.y);this instanceof s.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var e=this._ctx,t=this.options;this._drawPath(),e.save(),this._updateStyle(),t.fill&&(e.globalAlpha=t.fillOpacity,e.fill()),t.stroke&&(e.globalAlpha=t.opacity,e.stroke()),e.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(e){this._containsPoint(e.layerPoint)&&this.fire("click",e)},_onMouseMove:function(e){this._map&&!this._map._animatingZoom&&(this._containsPoint(e.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",e)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",e)))}}),s.Map.include(s.Path.SVG&&!e.L_PREFER_CANVAS||!s.Browser.canvas?{}:{_initPathRoot:function(){var e,i=this._pathRoot;i||(i=this._pathRoot=t.createElement("canvas"),i.style.position="absolute",e=this._canvasCtx=i.getContext("2d"),e.lineCap="round",e.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())
},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var e=this._pathViewport,t=e.min,i=e.max.subtract(t),n=this._pathRoot;s.DomUtil.setPosition(n,t),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-t.x,-t.y)}}}),s.LineUtil={simplify:function(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=this._reducePoints(e,i),e=this._simplifyDP(e,i)},pointToSegmentDistance:function(e,t,i){return Math.sqrt(this._sqClosestPointOnSegment(e,t,i,!0))},closestPointOnSegment:function(e,t,i){return this._sqClosestPointOnSegment(e,t,i)},_simplifyDP:function(e,t){var n=e.length,s=typeof Uint8Array!=i+""?Uint8Array:Array,r=new s(n);r[0]=r[n-1]=1,this._simplifyDPStep(e,r,t,0,n-1);var a,o=[];for(a=0;n>a;a++)r[a]&&o.push(e[a]);return o},_simplifyDPStep:function(e,t,i,n,s){var r,a,o,l=0;for(a=n+1;s-1>=a;a++)o=this._sqClosestPointOnSegment(e[a],e[n],e[s],!0),o>l&&(r=a,l=o);l>i&&(t[r]=1,this._simplifyDPStep(e,t,i,n,r),this._simplifyDPStep(e,t,i,r,s))},_reducePoints:function(e,t){for(var i=[e[0]],n=1,s=0,r=e.length;r>n;n++)this._sqDist(e[n],e[s])>t&&(i.push(e[n]),s=n);return r-1>s&&i.push(e[r-1]),i},clipSegment:function(e,t,i,n){var s,r,a,o=n?this._lastCode:this._getBitCode(e,i),l=this._getBitCode(t,i);for(this._lastCode=l;;){if(!(o|l))return[e,t];if(o&l)return!1;s=o||l,r=this._getEdgeIntersection(e,t,s,i),a=this._getBitCode(r,i),s===o?(e=r,o=a):(t=r,l=a)}},_getEdgeIntersection:function(e,t,i,n){var r=t.x-e.x,a=t.y-e.y,o=n.min,l=n.max;return 8&i?new s.Point(e.x+r*(l.y-e.y)/a,l.y):4&i?new s.Point(e.x+r*(o.y-e.y)/a,o.y):2&i?new s.Point(l.x,e.y+a*(l.x-e.x)/r):1&i?new s.Point(o.x,e.y+a*(o.x-e.x)/r):void 0},_getBitCode:function(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i},_sqDist:function(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},_sqClosestPointOnSegment:function(e,t,i,n){var r,a=t.x,o=t.y,l=i.x-a,u=i.y-o,c=l*l+u*u;return c>0&&(r=((e.x-a)*l+(e.y-o)*u)/c,r>1?(a=i.x,o=i.y):r>0&&(a+=l*r,o+=u*r)),l=e.x-a,u=e.y-o,n?l*l+u*u:new s.Point(a,o)}},s.Polyline=s.Path.extend({initialize:function(e,t){s.Path.prototype.initialize.call(this,t),this._latlngs=this._convertLatLngs(e)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var e=0,t=this._latlngs.length;t>e;e++)this._originalPoints[e]=this._map.latLngToLayerPoint(this._latlngs[e])},getPathString:function(){for(var e=0,t=this._parts.length,i="";t>e;e++)i+=this._getPathPartStr(this._parts[e]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._latlngs=this._convertLatLngs(e),this.redraw()},addLatLng:function(e){return this._latlngs.push(s.latLng(e)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),e},closestLayerPoint:function(e){for(var t,i,n=1/0,r=this._parts,a=null,o=0,l=r.length;l>o;o++)for(var u=r[o],c=1,h=u.length;h>c;c++){t=u[c-1],i=u[c];var d=s.LineUtil._sqClosestPointOnSegment(e,t,i,!0);n>d&&(n=d,a=s.LineUtil._sqClosestPointOnSegment(e,t,i))}return a&&(a.distance=Math.sqrt(n)),a},getBounds:function(){return new s.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(e,t){var i,n,r=t?e:[];for(i=0,n=e.length;n>i;i++){if(s.Util.isArray(e[i])&&"number"!=typeof e[i][0])return;r[i]=s.latLng(e[i])}return r},_initEvents:function(){s.Path.prototype._initEvents.call(this)},_getPathPartStr:function(e){for(var t,i=s.Path.VML,n=0,r=e.length,a="";r>n;n++)t=e[n],i&&t._round(),a+=(n?"L":"M")+t.x+" "+t.y;return a},_clipPoints:function(){var e,t,i,n=this._originalPoints,r=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var a=this._parts,o=this._map._pathViewport,l=s.LineUtil;for(e=0,t=0;r-1>e;e++)i=l.clipSegment(n[e],n[e+1],o,e),i&&(a[t]=a[t]||[],a[t].push(i[0]),(i[1]!==n[e+1]||e===r-2)&&(a[t].push(i[1]),t++))},_simplifyPoints:function(){for(var e=this._parts,t=s.LineUtil,i=0,n=e.length;n>i;i++)e[i]=t.simplify(e[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),s.Path.prototype._updatePath.call(this))}}),s.polyline=function(e,t){return new s.Polyline(e,t)},s.PolyUtil={},s.PolyUtil.clipPolygon=function(e,t){var i,n,r,a,o,l,u,c,h,d=[1,4,2,8],p=s.LineUtil;for(n=0,u=e.length;u>n;n++)e[n]._code=p._getBitCode(e[n],t);for(a=0;4>a;a++){for(c=d[a],i=[],n=0,u=e.length,r=u-1;u>n;r=n++)o=e[n],l=e[r],o._code&c?l._code&c||(h=p._getEdgeIntersection(l,o,c,t),h._code=p._getBitCode(h,t),i.push(h)):(l._code&c&&(h=p._getEdgeIntersection(l,o,c,t),h._code=p._getBitCode(h,t),i.push(h)),i.push(o));e=i}return e},s.Polygon=s.Polyline.extend({options:{fill:!0},initialize:function(e,t){s.Polyline.prototype.initialize.call(this,e,t),this._initWithHoles(e)},_initWithHoles:function(e){var t,i,n;if(e&&s.Util.isArray(e[0])&&"number"!=typeof e[0][0])for(this._latlngs=this._convertLatLngs(e[0]),this._holes=e.slice(1),t=0,i=this._holes.length;i>t;t++)n=this._holes[t]=this._convertLatLngs(this._holes[t]),n[0].equals(n[n.length-1])&&n.pop();e=this._latlngs,e.length>=2&&e[0].equals(e[e.length-1])&&e.pop()},projectLatlngs:function(){if(s.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var e,t,i,n;for(e=0,i=this._holes.length;i>e;e++)for(this._holePoints[e]=[],t=0,n=this._holes[e].length;n>t;t++)this._holePoints[e][t]=this._map.latLngToLayerPoint(this._holes[e][t])}},setLatLngs:function(e){return e&&s.Util.isArray(e[0])&&"number"!=typeof e[0][0]?(this._initWithHoles(e),this.redraw()):s.Polyline.prototype.setLatLngs.call(this,e)},_clipPoints:function(){var e=this._originalPoints,t=[];if(this._parts=[e].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var r=s.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);r.length&&t.push(r)}this._parts=t}},_getPathPartStr:function(e){var t=s.Polyline.prototype._getPathPartStr.call(this,e);return t+(s.Browser.svg?"z":"x")}}),s.polygon=function(e,t){return new s.Polygon(e,t)},function(){function e(e){return s.FeatureGroup.extend({initialize:function(e,t){this._layers={},this._options=t,this.setLatLngs(e)},setLatLngs:function(t){var i=0,n=t.length;for(this.eachLayer(function(e){n>i?e.setLatLngs(t[i++]):this.removeLayer(e)},this);n>i;)this.addLayer(new e(t[i++],this._options));return this},getLatLngs:function(){var e=[];return this.eachLayer(function(t){e.push(t.getLatLngs())}),e}})}s.MultiPolyline=e(s.Polyline),s.MultiPolygon=e(s.Polygon),s.multiPolyline=function(e,t){return new s.MultiPolyline(e,t)},s.multiPolygon=function(e,t){return new s.MultiPolygon(e,t)}}(),s.Rectangle=s.Polygon.extend({initialize:function(e,t){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=s.latLngBounds(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}}),s.rectangle=function(e,t){return new s.Rectangle(e,t)},s.Circle=s.Path.extend({initialize:function(e,t,i){s.Path.prototype.initialize.call(this,i),this._latlng=s.latLng(e),this._mRadius=t},options:{fill:!0},setLatLng:function(e){return this._latlng=s.latLng(e),this.redraw()},setRadius:function(e){return this._mRadius=e,this.redraw()},projectLatlngs:function(){var e=this._getLngRadius(),t=this._latlng,i=this._map.latLngToLayerPoint([t.lat,t.lng-e]);this._point=this._map.latLngToLayerPoint(t),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var e=this._getLngRadius(),t=360*(this._mRadius/40075017),i=this._latlng;return new s.LatLngBounds([i.lat-t,i.lng-e],[i.lat+t,i.lng+e])},getLatLng:function(){return this._latlng},getPathString:function(){var e=this._point,t=this._radius;return this._checkIfEmpty()?"":s.Browser.svg?"M"+e.x+","+(e.y-t)+"A"+t+","+t+",0,1,1,"+(e.x-.1)+","+(e.y-t)+" z":(e._round(),t=Math.round(t),"AL "+e.x+","+e.y+" "+t+","+t+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return 360*(this._mRadius/40075017)},_getLngRadius:function(){return this._getLatRadius()/Math.cos(s.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var e=this._map._pathViewport,t=this._radius,i=this._point;return i.x-t>e.max.x||i.y-t>e.max.y||i.x+t<e.min.x||i.y+t<e.min.y}}),s.circle=function(e,t,i){return new s.Circle(e,t,i)},s.CircleMarker=s.Circle.extend({options:{radius:10,weight:2},initialize:function(e,t){s.Circle.prototype.initialize.call(this,e,null,t),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){s.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(e){return s.Circle.prototype.setLatLng.call(this,e),this._popup&&this._popup._isOpen&&this._popup.setLatLng(e),this},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius}}),s.circleMarker=function(e,t){return new s.CircleMarker(e,t)},s.Polyline.include(s.Path.CANVAS?{_containsPoint:function(e,t){var i,n,r,a,o,l,u,c=this.options.weight/2;for(s.Browser.touch&&(c+=10),i=0,a=this._parts.length;a>i;i++)for(u=this._parts[i],n=0,o=u.length,r=o-1;o>n;r=n++)if((t||0!==n)&&(l=s.LineUtil.pointToSegmentDistance(e,u[r],u[n]),c>=l))return!0;return!1}}:{}),s.Polygon.include(s.Path.CANVAS?{_containsPoint:function(e){var t,i,n,r,a,o,l,u,c=!1;if(s.Polyline.prototype._containsPoint.call(this,e,!0))return!0;for(r=0,l=this._parts.length;l>r;r++)for(t=this._parts[r],a=0,u=t.length,o=u-1;u>a;o=a++)i=t[a],n=t[o],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c}}:{}),s.Circle.include(s.Path.CANVAS?{_drawPath:function(){var e=this._point;this._ctx.beginPath(),this._ctx.arc(e.x,e.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(e){var t=this._point,i=this.options.stroke?this.options.weight/2:0;return e.distanceTo(t)<=this._radius+i}}:{}),s.CircleMarker.include(s.Path.CANVAS?{_updateStyle:function(){s.Path.prototype._updateStyle.call(this)}}:{}),s.GeoJSON=s.FeatureGroup.extend({initialize:function(e,t){s.setOptions(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,r=s.Util.isArray(e)?e:e.features;if(r){for(t=0,i=r.length;i>t;t++)n=r[t],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(r[t]);return this}var a=this.options;if(!a.filter||a.filter(e)){var o=s.GeoJSON.geometryToLayer(e,a.pointToLayer,a.coordsToLatLng,a);return o.feature=s.GeoJSON.asFeature(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)}},resetStyle:function(e){var t=this.options.style;t&&(s.Util.extend(e.options,e.defaultOptions),this._setLayerStyle(e,t))},setStyle:function(e){this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),s.extend(s.GeoJSON,{geometryToLayer:function(e,t,i,n){var r,a,o,l,u="Feature"===e.type?e.geometry:e,c=u.coordinates,h=[];switch(i=i||this.coordsToLatLng,u.type){case"Point":return r=i(c),t?t(e,r):new s.Marker(r);case"MultiPoint":for(o=0,l=c.length;l>o;o++)r=i(c[o]),h.push(t?t(e,r):new s.Marker(r));return new s.FeatureGroup(h);case"LineString":return a=this.coordsToLatLngs(c,0,i),new s.Polyline(a,n);case"Polygon":if(2===c.length&&!c[1].length)throw new Error("Invalid GeoJSON object.");return a=this.coordsToLatLngs(c,1,i),new s.Polygon(a,n);case"MultiLineString":return a=this.coordsToLatLngs(c,1,i),new s.MultiPolyline(a,n);case"MultiPolygon":return a=this.coordsToLatLngs(c,2,i),new s.MultiPolygon(a,n);case"GeometryCollection":for(o=0,l=u.geometries.length;l>o;o++)h.push(this.geometryToLayer({geometry:u.geometries[o],type:"Feature",properties:e.properties},t,i,n));return new s.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(e){return new s.LatLng(e[1],e[0],e[2])},coordsToLatLngs:function(e,t,i){var n,s,r,a=[];for(s=0,r=e.length;r>s;s++)n=t?this.coordsToLatLngs(e[s],t-1,i):(i||this.coordsToLatLng)(e[s]),a.push(n);return a},latLngToCoords:function(e){var t=[e.lng,e.lat];return e.alt!==i&&t.push(e.alt),t},latLngsToCoords:function(e){for(var t=[],i=0,n=e.length;n>i;i++)t.push(s.GeoJSON.latLngToCoords(e[i]));return t},getFeature:function(e,t){return e.feature?s.extend({},e.feature,{geometry:t}):s.GeoJSON.asFeature(t)},asFeature:function(e){return"Feature"===e.type?e:{type:"Feature",properties:{},geometry:e}}});var a={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(a),s.Circle.include(a),s.CircleMarker.include(a),s.Polyline.include({toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"LineString",coordinates:s.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),s.Polygon.include({toGeoJSON:function(){var e,t,i,n=[s.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(e=0,t=this._holes.length;t>e;e++)i=s.GeoJSON.latLngsToCoords(this._holes[e]),i.push(i[0]),n.push(i);return s.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function e(e){return function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:e,coordinates:t})}}s.MultiPolyline.include({toGeoJSON:e("MultiLineString")}),s.MultiPolygon.include({toGeoJSON:e("MultiPolygon")}),s.LayerGroup.include({toGeoJSON:function(){var t,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return e("MultiPoint").call(this);var r=i&&"GeometryCollection"===i.type;return this.eachLayer(function(e){e.toGeoJSON&&(t=e.toGeoJSON(),n.push(r?t.geometry:s.GeoJSON.asFeature(t)))}),r?s.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),s.geoJson=function(e,t){return new s.GeoJSON(e,t)},s.DomEvent={addListener:function(e,t,i,n){var r,a,o,l=s.stamp(i),u="_leaflet_"+t+l;return e[u]?this:(r=function(t){return i.call(n||e,t||s.DomEvent._getEvent())},s.Browser.pointer&&0===t.indexOf("touch")?this.addPointerListener(e,t,r,l):(s.Browser.touch&&"dblclick"===t&&this.addDoubleTapListener&&this.addDoubleTapListener(e,r,l),"addEventListener"in e?"mousewheel"===t?(e.addEventListener("DOMMouseScroll",r,!1),e.addEventListener(t,r,!1)):"mouseenter"===t||"mouseleave"===t?(a=r,o="mouseenter"===t?"mouseover":"mouseout",r=function(t){return s.DomEvent._checkMouse(e,t)?a(t):void 0},e.addEventListener(o,r,!1)):"click"===t&&s.Browser.android?(a=r,r=function(e){return s.DomEvent._filterClick(e,a)},e.addEventListener(t,r,!1)):e.addEventListener(t,r,!1):"attachEvent"in e&&e.attachEvent("on"+t,r),e[u]=r,this))},removeListener:function(e,t,i){var n=s.stamp(i),r="_leaflet_"+t+n,a=e[r];return a?(s.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(e,t,n):s.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(e,n):"removeEventListener"in e?"mousewheel"===t?(e.removeEventListener("DOMMouseScroll",a,!1),e.removeEventListener(t,a,!1)):"mouseenter"===t||"mouseleave"===t?e.removeEventListener("mouseenter"===t?"mouseover":"mouseout",a,!1):e.removeEventListener(t,a,!1):"detachEvent"in e&&e.detachEvent("on"+t,a),e[r]=null,this):this},stopPropagation:function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,s.DomEvent._skipped(e),this},disableScrollPropagation:function(e){var t=s.DomEvent.stopPropagation;return s.DomEvent.on(e,"mousewheel",t).on(e,"MozMousePixelScroll",t)},disableClickPropagation:function(e){for(var t=s.DomEvent.stopPropagation,i=s.Draggable.START.length-1;i>=0;i--)s.DomEvent.on(e,s.Draggable.START[i],t);return s.DomEvent.on(e,"click",s.DomEvent._fakeStop).on(e,"dblclick",t)},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this},stop:function(e){return s.DomEvent.preventDefault(e).stopPropagation(e)},getMousePosition:function(e,t){if(!t)return new s.Point(e.clientX,e.clientY);var i=t.getBoundingClientRect();return new s.Point(e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop)},getWheelDelta:function(e){var t=0;return e.wheelDelta&&(t=e.wheelDelta/120),e.detail&&(t=-e.detail/3),t},_skipEvents:{},_fakeStop:function(e){s.DomEvent._skipEvents[e.type]=!0},_skipped:function(e){var t=this._skipEvents[e.type];return this._skipEvents[e.type]=!1,t},_checkMouse:function(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(n){return!1}return i!==e},_getEvent:function(){var t=e.event;if(!t)for(var i=arguments.callee.caller;i&&(t=i.arguments[0],!t||e.Event!==t.constructor);)i=i.caller;return t},_filterClick:function(e,t){var i=e.timeStamp||e.originalEvent.timeStamp,n=s.DomEvent._lastClick&&i-s.DomEvent._lastClick;return n&&n>100&&500>n||e.target._simulatedClick&&!e._simulated?void s.DomEvent.stop(e):(s.DomEvent._lastClick=i,t(e))}},s.DomEvent.on=s.DomEvent.addListener,s.DomEvent.off=s.DomEvent.removeListener,s.Draggable=s.Class.extend({includes:s.Mixin.Events,statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(e,t){this._element=e,this._dragStartTarget=t||e},enable:function(){if(!this._enabled){for(var e=s.Draggable.START.length-1;e>=0;e--)s.DomEvent.on(this._dragStartTarget,s.Draggable.START[e],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var e=s.Draggable.START.length-1;e>=0;e--)s.DomEvent.off(this._dragStartTarget,s.Draggable.START[e],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(e){if(this._moved=!1,!(e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(s.DomEvent.stopPropagation(e),s.Draggable._disabled||(s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),this._moving)))){var i=e.touches?e.touches[0]:e;this._startPoint=new s.Point(i.clientX,i.clientY),this._startPos=this._newPos=s.DomUtil.getPosition(this._element),s.DomEvent.on(t,s.Draggable.MOVE[e.type],this._onMove,this).on(t,s.Draggable.END[e.type],this._onUp,this)}},_onMove:function(e){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var i=e.touches&&1===e.touches.length?e.touches[0]:e,n=new s.Point(i.clientX,i.clientY),r=n.subtract(this._startPoint);(r.x||r.y)&&(s.Browser.touch&&Math.abs(r.x)+Math.abs(r.y)<3||(s.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(r),s.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,s.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){s.DomUtil.removeClass(t.body,"leaflet-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in s.Draggable.MOVE)s.DomEvent.off(t,s.Draggable.MOVE[e],this._onMove).off(t,s.Draggable.END[e],this._onUp);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),s.Handler=s.Class.extend({initialize:function(e){this._map=e},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:s.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new s.Draggable(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),e.on("viewreset",this._onViewReset,this),e.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var e=this._map;e._panAnim&&e._panAnim.stop(),e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var e=this._lastTime=+new Date,t=this._lastPos=this._draggable._newPos;this._positions.push(t),this._times.push(e),e-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var e=this._map.getSize()._divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-t+i)%e+t-i,r=(n+t+i)%e-t-i,a=Math.abs(s+i)<Math.abs(r+i)?s:r;this._draggable._newPos.x=a},_onDragEnd:function(e){var t=this._map,i=t.options,n=+new Date-this._lastTime,r=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(t.fire("dragend",e),r)t.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),o=(this._lastTime+n-this._times[0])/1e3,l=i.easeLinearity,u=a.multiplyBy(l/o),c=u.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,c),d=u.multiplyBy(h/c),p=h/(i.inertiaDeceleration*l),m=d.multiplyBy(-p/2).round();m.x&&m.y?(m=t._limitOffset(m,t.options.maxBounds),s.Util.requestAnimFrame(function(){t.panBy(m,{duration:p,easeLinearity:l,noMoveStart:!0})})):t.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom()+(e.originalEvent.shiftKey?-1:1);"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),s.DomEvent.on(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),s.DomEvent.off(this._map._container,"MozMousePixelScroll",s.DomEvent.preventDefault)},_onWheelScroll:function(e){var t=s.DomEvent.getWheelDelta(e);this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),i),s.DomEvent.preventDefault(e),s.DomEvent.stopPropagation(e)},_performZoom:function(){var e=this._map,t=this._delta,i=e.getZoom();t=t>0?Math.ceil(t):Math.floor(t),t=Math.max(Math.min(t,4),-4),t=e._limitZoom(i+t)-i,this._delta=0,this._startTime=null,t&&("center"===e.options.scrollWheelZoom?e.setZoom(i+t):e.setZoomAround(this._lastMousePos,i+t))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(e,i,n){function r(e){var t;if(s.Browser.pointer?(m.push(e.pointerId),t=m.length):t=e.touches.length,!(t>1)){var i=Date.now(),n=i-(o||i);l=e.touches?e.touches[0]:e,u=n>0&&c>=n,o=i}}function a(e){if(s.Browser.pointer){var t=m.indexOf(e.pointerId);if(-1===t)return;m.splice(t,1)}if(u){if(s.Browser.pointer){var n,r={};for(var a in l)n=l[a],r[a]="function"==typeof n?n.bind(l):n;l=r}l.type="dblclick",i(l),o=null}}var o,l,u=!1,c=250,h="_leaflet_",d=this._touchstart,p=this._touchend,m=[];e[h+d+n]=r,e[h+p+n]=a;var f=s.Browser.pointer?t.documentElement:e;return e.addEventListener(d,r,!1),f.addEventListener(p,a,!1),s.Browser.pointer&&f.addEventListener(s.DomEvent.POINTER_CANCEL,a,!1),this},removeDoubleTapListener:function(e,i){var n="_leaflet_";return e.removeEventListener(this._touchstart,e[n+this._touchstart+i],!1),(s.Browser.pointer?t.documentElement:e).removeEventListener(this._touchend,e[n+this._touchend+i],!1),s.Browser.pointer&&t.documentElement.removeEventListener(s.DomEvent.POINTER_CANCEL,e[n+this._touchend+i],!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(e,t,i,n){switch(t){case"touchstart":return this.addPointerListenerStart(e,t,i,n);case"touchend":return this.addPointerListenerEnd(e,t,i,n);case"touchmove":return this.addPointerListenerMove(e,t,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(e,i,n,r){var a="_leaflet_",o=this._pointers,l=function(e){s.DomEvent.preventDefault(e);for(var t=!1,i=0;i<o.length;i++)if(o[i].pointerId===e.pointerId){t=!0;break}t||o.push(e),e.touches=o.slice(),e.changedTouches=[e],n(e)};if(e[a+"touchstart"+r]=l,e.addEventListener(this.POINTER_DOWN,l,!1),!this._pointerDocumentListener){var u=function(e){for(var t=0;t<o.length;t++)if(o[t].pointerId===e.pointerId){o.splice(t,1);break}};t.documentElement.addEventListener(this.POINTER_UP,u,!1),t.documentElement.addEventListener(this.POINTER_CANCEL,u,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(e,t,i,n){function s(e){if(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons){for(var t=0;t<a.length;t++)if(a[t].pointerId===e.pointerId){a[t]=e;break}e.touches=a.slice(),e.changedTouches=[e],i(e)}}var r="_leaflet_",a=this._pointers;return e[r+"touchmove"+n]=s,e.addEventListener(this.POINTER_MOVE,s,!1),this},addPointerListenerEnd:function(e,t,i,n){var s="_leaflet_",r=this._pointers,a=function(e){for(var t=0;t<r.length;t++)if(r[t].pointerId===e.pointerId){r.splice(t,1);break}e.touches=r.slice(),e.changedTouches=[e],i(e)};return e[s+"touchend"+n]=a,e.addEventListener(this.POINTER_UP,a,!1),e.addEventListener(this.POINTER_CANCEL,a,!1),this},removePointerListener:function(e,t,i){var n="_leaflet_",s=e[n+t+i];switch(t){case"touchstart":e.removeEventListener(this.POINTER_DOWN,s,!1);break;case"touchmove":e.removeEventListener(this.POINTER_MOVE,s,!1);break;case"touchend":e.removeEventListener(this.POINTER_UP,s,!1),e.removeEventListener(this.POINTER_CANCEL,s,!1)}return this}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var i=this._map;if(e.touches&&2===e.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(e.touches[0]),r=i.mouseEventToLayerPoint(e.touches[1]),a=i._getCenterLayerPoint();this._startCenter=n.add(r)._divideBy(2),this._startDist=n.distanceTo(r),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),s.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(e)}},_onTouchMove:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&this._zooming){var i=t.mouseEventToLayerPoint(e.touches[0]),n=t.mouseEventToLayerPoint(e.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(t.options.bounceAtZoomLimits||!(t.getZoom()===t.getMinZoom()&&this._scale<1||t.getZoom()===t.getMaxZoom()&&this._scale>1))&&(this._moved||(s.DomUtil.addClass(t._mapPane,"leaflet-touching"),t.fire("movestart").fire("zoomstart"),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest),this._animRequest=s.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),s.DomEvent.preventDefault(e))}},_updateOnMove:function(){var e=this._map,t=this._getScaleOrigin(),i=e.layerPointToLatLng(t),n=e.getScaleZoom(this._scale);e._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var e=this._map;this._zooming=!1,s.DomUtil.removeClass(e._mapPane,"leaflet-touching"),s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=e.layerPointToLatLng(i),r=e.getZoom(),a=e.getScaleZoom(this._scale)-r,o=a>0?Math.ceil(a):Math.floor(a),l=e._limitZoom(r+o),u=e.getZoomScale(l)/this._scale;e._animateZoom(n,l,i,u)},_getScaleOrigin:function(){var e=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(e)}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(s.DomEvent.preventDefault(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=e.touches[0],n=i.target;this._startPos=this._newPos=new s.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),s.DomEvent.on(t,"touchmove",this._onMove,this).on(t,"touchend",this._onUp,this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),s.DomEvent.off(t,"touchmove",this._onMove,this).off(t,"touchend",this._onUp,this),this._fireClick&&e&&e.changedTouches){var i=e.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new s.Point(t.clientX,t.clientY)},_simulateEvent:function(i,n){var s=t.createEvent("MouseEvents");s._simulated=!0,n.target._simulatedClick=!0,s.initMouseEvent(i,!0,!0,e,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._moved=!1},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(e){return this._moved=!1,!e.shiftKey||1!==e.which&&1!==e.button?!1:(s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(e),void s.DomEvent.on(t,"mousemove",this._onMouseMove,this).on(t,"mouseup",this._onMouseUp,this).on(t,"keydown",this._onKeyDown,this))
},_onMouseMove:function(e){this._moved||(this._box=s.DomUtil.create("div","leaflet-zoom-box",this._pane),s.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var t=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(e),r=n.subtract(t),a=new s.Point(Math.min(n.x,t.x),Math.min(n.y,t.y));s.DomUtil.setPosition(i,a),this._moved=!0,i.style.width=Math.max(0,Math.abs(r.x)-4)+"px",i.style.height=Math.max(0,Math.abs(r.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(t,"mousemove",this._onMouseMove).off(t,"mouseup",this._onMouseUp).off(t,"keydown",this._onKeyDown)},_onMouseUp:function(e){this._finish();var t=this._map,i=t.mouseEventToLayerPoint(e);if(!this._startLayerPoint.equals(i)){var n=new s.LatLngBounds(t.layerPointToLatLng(this._startLayerPoint),t.layerPointToLatLng(i));t.fitBounds(n),t.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(e){this._map=e,this._setPanOffset(e.options.keyboardPanOffset),this._setZoomOffset(e.options.keyboardZoomOffset)},addHooks:function(){var e=this._map._container;-1===e.tabIndex&&(e.tabIndex="0"),s.DomEvent.on(e,"focus",this._onFocus,this).on(e,"blur",this._onBlur,this).on(e,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var e=this._map._container;s.DomEvent.off(e,"focus",this._onFocus,this).off(e,"blur",this._onBlur,this).off(e,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=t.body,n=t.documentElement,s=i.scrollTop||n.scrollTop,r=i.scrollLeft||n.scrollLeft;this._map._container.focus(),e.scrollTo(r,s)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(e){var t,i,n=this._panKeys={},s=this.keyCodes;for(t=0,i=s.left.length;i>t;t++)n[s.left[t]]=[-1*e,0];for(t=0,i=s.right.length;i>t;t++)n[s.right[t]]=[e,0];for(t=0,i=s.down.length;i>t;t++)n[s.down[t]]=[0,e];for(t=0,i=s.up.length;i>t;t++)n[s.up[t]]=[0,-1*e]},_setZoomOffset:function(e){var t,i,n=this._zoomKeys={},s=this.keyCodes;for(t=0,i=s.zoomIn.length;i>t;t++)n[s.zoomIn[t]]=e;for(t=0,i=s.zoomOut.length;i>t;t++)n[s.zoomOut[t]]=-e},_addHooks:function(){s.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){var t=e.keyCode,i=this._map;if(t in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[t]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(t in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[t])}s.DomEvent.stop(e)}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(e,e)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),s.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),s.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var e=this._marker,t=e._shadow,i=s.DomUtil.getPosition(e._icon),n=e._map.layerPointToLatLng(i);t&&s.DomUtil.setPosition(t,i),e._latlng=n,e.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(e){this._marker.fire("moveend").fire("dragend",e)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(e){s.setOptions(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return s.DomUtil.addClass(t,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this},removeFrom:function(e){var t=this.getPosition(),i=e._controlCorners[t];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(e),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),s.control=function(e){return new s.Control(e)},s.Map.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.removeFrom(this),this},_initControlPos:function(){function e(e,r){var a=i+e+" "+i+r;t[e+r]=s.DomUtil.create("div",a,n)}var t=this._controlCorners={},i="leaflet-",n=this._controlContainer=s.DomUtil.create("div",i+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=s.DomUtil.create("div",t+" leaflet-bar");return this._map=e,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,t+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,t+"-out",i,this._zoomOut,this),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(e){this._map.zoomIn(e.shiftKey?3:1)},_zoomOut:function(e){this._map.zoomOut(e.shiftKey?3:1)},_createButton:function(e,t,i,n,r,a){var o=s.DomUtil.create("a",i,n);o.innerHTML=e,o.href="#",o.title=t;var l=s.DomEvent.stopPropagation;return s.DomEvent.on(o,"click",l).on(o,"mousedown",l).on(o,"dblclick",l).on(o,"click",s.DomEvent.preventDefault).on(o,"click",r,a).on(o,"click",this._refocusOnMap,a),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";s.DomUtil.removeClass(this._zoomInButton,t),s.DomUtil.removeClass(this._zoomOutButton,t),e._zoom===e.getMinZoom()&&s.DomUtil.addClass(this._zoomOutButton,t),e._zoom===e.getMaxZoom()&&s.DomUtil.addClass(this._zoomInButton,t)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(e){return new s.Control.Zoom(e)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){s.setOptions(this,e),this._attributions={}},onAdd:function(e){this._container=s.DomUtil.create("div","leaflet-control-attribution"),s.DomEvent.disableClickPropagation(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return e.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(e){e.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):void 0},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):void 0},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(e){e.layer.getAttribution&&this.addAttribution(e.layer.getAttribution())},_onLayerRemove:function(e){e.layer.getAttribution&&this.removeAttribution(e.layer.getAttribution())}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new s.Control.Attribution).addTo(this))}),s.control.attribution=function(e){return new s.Control.Attribution(e)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(e){this._map=e;var t="leaflet-control-scale",i=s.DomUtil.create("div",t),n=this.options;return this._addScales(n,t,i),e.on(n.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=s.DomUtil.create("div",t+"-line",i)),e.imperial&&(this._iScale=s.DomUtil.create("div",t+"-line",i))},_update:function(){var e=this._map.getBounds(),t=e.getCenter().lat,i=6378137*Math.PI*Math.cos(t*Math.PI/180),n=i*(e.getNorthEast().lng-e.getSouthWest().lng)/180,s=this._map.getSize(),r=this.options,a=0;s.x>0&&(a=n*(r.maxWidth/s.x)),this._updateScales(r,a)},_updateScales:function(e,t){e.metric&&t&&this._updateMetric(t),e.imperial&&t&&this._updateImperial(t)},_updateMetric:function(e){var t=this._getRoundNum(e);this._mScale.style.width=this._getScaleWidth(t/e)+"px",this._mScale.innerHTML=1e3>t?t+" m":t/1e3+" km"},_updateImperial:function(e){var t,i,n,s=3.2808399*e,r=this._iScale;s>5280?(t=s/5280,i=this._getRoundNum(t),r.style.width=this._getScaleWidth(i/t)+"px",r.innerHTML=i+" mi"):(n=this._getRoundNum(s),r.style.width=this._getScaleWidth(n/s)+"px",r.innerHTML=n+" ft")},_getScaleWidth:function(e){return Math.round(this.options.maxWidth*e)-10},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),s.control.scale=function(e){return new s.Control.Scale(e)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(e,t,i){s.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){return this._initLayout(),this._update(),e.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(e){e.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._update(),this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._update(),this},removeLayer:function(e){var t=s.stamp(e);return delete this._layers[t],this._update(),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=s.DomUtil.create("div",e);t.setAttribute("aria-haspopup",!0),s.Browser.touch?s.DomEvent.on(t,"click",s.DomEvent.stopPropagation):s.DomEvent.disableClickPropagation(t).disableScrollPropagation(t);var i=this._form=s.DomUtil.create("form",e+"-list");if(this.options.collapsed){s.Browser.android||s.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var n=this._layersLink=s.DomUtil.create("a",e+"-toggle",t);n.href="#",n.title="Layers",s.Browser.touch?s.DomEvent.on(n,"click",s.DomEvent.stop).on(n,"click",this._expand,this):s.DomEvent.on(n,"focus",this._expand,this),s.DomEvent.on(i,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=s.DomUtil.create("div",e+"-base",i),this._separator=s.DomUtil.create("div",e+"-separator",i),this._overlaysList=s.DomUtil.create("div",e+"-overlays",i),t.appendChild(i)},_addLayer:function(e,t,i){var n=s.stamp(e);this._layers[n]={layer:e,name:t,overlay:i},this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var e,t,i=!1,n=!1;for(e in this._layers)t=this._layers[e],this._addItem(t),n=n||t.overlay,i=i||!t.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(e){var t=this._layers[s.stamp(e.layer)];if(t){this._handlingClick||this._update();var i=t.overlay?"layeradd"===e.type?"overlayadd":"overlayremove":"layeradd"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)}},_createRadioElement:function(e,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"';i&&(n+=' checked="checked"'),n+="/>";var s=t.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(e){var i,n=t.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?(i=t.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=r):i=this._createRadioElement("leaflet-base-layers",r),i.layerId=s.stamp(e.layer),s.DomEvent.on(i,"click",this._onInputClick,this);var a=t.createElement("span");a.innerHTML=" "+e.name,n.appendChild(i),n.appendChild(a);var o=e.overlay?this._overlaysList:this._baseLayersList;return o.appendChild(n),n},_onInputClick:function(){var e,t,i,n=this._form.getElementsByTagName("input"),s=n.length;for(this._handlingClick=!0,e=0;s>e;e++)t=n[e],i=this._layers[t.layerId],t.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!t.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){s.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),s.control.layers=function(e,t,i){return new s.Control.Layers(e,t,i)},s.PosAnimation=s.Class.extend({includes:s.Mixin.Events,run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._newPos=t,this.fire("start"),e.style[s.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",s.DomEvent.on(e,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),s.DomUtil.setPosition(e,t),s.Util.falseFn(e.offsetWidth),this._stepTimer=setInterval(s.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(s.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),s.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var e=this._getPos();return e?(this._el._leaflet_pos=e,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var t,i,n,r=this._el,a=e.getComputedStyle(r);if(s.Browser.any3d){if(n=a[s.DomUtil.TRANSFORM].match(this._transformRe),!n)return;t=parseFloat(n[1]),i=parseFloat(n[2])}else t=parseFloat(a.left),i=parseFloat(a.top);return new s.Point(t,i,!0)},_onTransitionEnd:function(){s.DomEvent.off(this._el,s.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[s.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),s.Map.include({setView:function(e,t,n){if(t=t===i?this._zoom:this._limitZoom(t),e=this._limitCenter(s.latLng(e),t,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=s.extend({animate:n.animate},n.zoom),n.pan=s.extend({animate:n.animate},n.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,n.zoom):this._tryAnimatedPan(e,n.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t),this},panBy:function(e,t){if(e=s.point(e).round(),t=t||{},!e.x&&!e.y)return this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){s.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e);this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._floor();return(t&&t.animate)===!0||this.getSize().contains(i)?(this.panBy(i,t),!0):!1}}),s.PosAnimation=s.DomUtil.TRANSITION?s.PosAnimation:s.PosAnimation.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=s.DomUtil.getPosition(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var e=+new Date-this._startTime,t=1e3*this._duration;t>e?this._runFrame(this._easeOut(e/t)):(this._runFrame(1),this._complete())},_runFrame:function(e){var t=this._startPos.add(this._offset.multiplyBy(e));s.DomUtil.setPosition(this._el,t),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),s.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),s.DomUtil.TRANSITION&&s.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.android23&&!s.Browser.mobileOpera,this._zoomAnimated&&s.DomEvent.on(this._mapPane,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),s.Map.include(s.DomUtil.TRANSITION?{_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),s=this._getCenterOffset(e)._divideBy(1-1/n),r=this._getCenterLayerPoint()._add(s);return i.animate===!0||this.getSize().contains(s)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(e,t,r,n,null,!0),!0):!1},_animateZoom:function(e,t,i,n,r,a,o){o||(this._animatingZoom=!0),s.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=e,this._animateToZoom=t,s.Draggable&&(s.Draggable._disabled=!0),s.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:e,zoom:t,origin:i,scale:n,delta:r,backwards:a})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,s.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),s.Draggable&&(s.Draggable._disabled=!1)}}:{}),s.TileLayer.include({_animateZoom:function(e){this._animating||(this._animating=!0,this._prepareBgBuffer());var t=this._bgBuffer,i=s.DomUtil.TRANSFORM,n=e.delta?s.DomUtil.getTranslateString(e.delta):t.style[i],r=s.DomUtil.getScaleString(e.scale,e.origin);t.style[i]=e.backwards?r+" "+n:n+" "+r},_endZoomAnim:function(){var e=this._tileContainer,t=this._bgBuffer;e.style.visibility="",e.parentNode.appendChild(e),s.Util.falseFn(t.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var e=this._map;!e||e._animatingZoom||e.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[s.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var e=this._tileContainer,t=this._bgBuffer,i=this._getLoadedTilesPercentage(t),n=this._getLoadedTilesPercentage(e);return t&&i>.5&&.5>n?(e.style.visibility="hidden",void this._stopLoadingImages(e)):(t.style.visibility="hidden",t.style[s.DomUtil.TRANSFORM]="",this._tileContainer=t,t=this._bgBuffer=e,this._stopLoadingImages(t),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(e){var t,i,n=e.getElementsByTagName("img"),s=0;for(t=0,i=n.length;i>t;t++)n[t].complete&&s++;return s/i},_stopLoadingImages:function(e){var t,i,n,r=Array.prototype.slice.call(e.getElementsByTagName("img"));for(t=0,i=r.length;i>t;t++)n=r[t],n.complete||(n.onload=s.Util.falseFn,n.onerror=s.Util.falseFn,n.src=s.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),s.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(e){if(e=this._locateOptions=s.extend(this._defaultLocateOptions,e),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=s.bind(this._handleGeolocationResponse,this),i=s.bind(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=e.coords.latitude,i=e.coords.longitude,n=new s.LatLng(t,i),r=180*e.coords.accuracy/40075017,a=r/Math.cos(s.LatLng.DEG_TO_RAD*t),o=s.latLngBounds([t-r,i-a],[t+r,i+a]),l=this._locateOptions;if(l.setView){var u=Math.min(this.getBoundsZoom(o),l.maxZoom);this.setView(n,u)}var c={latlng:n,bounds:o,timestamp:e.timestamp};for(var h in e.coords)"number"==typeof e.coords[h]&&(c[h]=e.coords[h]);this.fire("locationfound",c)}})}(window,document),Mindbreeze.define("text!components/map/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-tag-name="span">\n  <a target="_blank" href="{{actions[0].href}}">{{{title}}}</a>\n</script>'}),Mindbreeze.define("components/map/js/map",["client/template","component!results","client/resourceinfo","utils/dom","i18n/i18n","jquery","underscore","./leaflet/leaflet","text!../mustache/template.mustache"],function(e,t,i,n,s,r,a,o,l){var u=t.View,c=u.extend({events:function(){return a.extend({},t.View.prototype.events,{"click a[href^='#']":"skip"})},initialize:function(){u.prototype.initialize.apply(this,arguments),o.Icon.Default.imagePath=i.scriptLocation+"../client/component/map/js/leaflet/images/",this.skipDownEl=n.instantiate('<a class="mb-acc" id="before-'+this.cid+'" href="#after-'+this.cid+'">'+s("map_skip_down")+"</a>"),this.skipUpEl=n.instantiate('<a class="mb-acc" id="after-'+this.cid+'" href="#before-'+this.cid+'">'+s("map_skip_up")+"</a>")},setModel:function(){u.prototype.setModel.apply(this,arguments),this.listenTo(this.collection,"remove",this.removeOne)},skip:function(e){var t=e.currentTarget.getAttribute("href").substring(1);t&&(n.focus(document.getElementById(t)),e.preventDefault())},removeOne:function(){this.hide(),this.update()},hide:function(){this.$el.hide(),this.mapEl&&this.mapEl.parentNode&&(this.skipUpEl.parentNode.removeChild(this.skipUpEl),this.mapEl.parentNode.removeChild(this.mapEl),this.skipDownEl.parentNode.removeChild(this.skipDownEl)),this.markerGroup&&this.markerGroup.clearLayers(),this.latLngBounds=new o.LatLngBounds},show:function(){this.mapEl&&(this.mapEl.parentNode!=this.el&&(this.el.appendChild(this.skipDownEl),this.el.appendChild(this.mapEl),this.el.appendChild(this.skipUpEl)),this.$el.show())},updateState:function(){},render:function(){if(this.mapEl=this.mapEl||document.createElement("div"),!this.map){if(!this.mapEl)return;this.mapEl.style.height="300px",this.mapEl.style.width="100%",this.map=o.map(this.mapEl,{scrollWheelZoom:!1}),o.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',detectRetina:!0}).addTo(this.map),this.markerGroup=new o.LayerGroup,this.markerGroup.addTo(this.map),this.latLngBounds=new o.LatLngBounds}return this},getDisplayedProperties:function(){var e=u.prototype.getDisplayedProperties.apply(this,arguments);return e[JSON.stringify("title")]={format:"VALUE"},e[JSON.stringify("actions")]={format:"VALUE"},e[JSON.stringify("geo_latitude")]={format:"VALUE"},e[JSON.stringify("geo_longitude")]={format:"VALUE"},e},addOne:function(){this.update()},update:function(){try{var e=this,t=!1;this.markerGroup&&this.markerGroup.clearLayers(),a.each(this.collection.models,function(i){var n=(i.get("title"),i.get("actions[0].href"),i.get("geo_latitude")),s=i.get("geo_longitude");if(!n||!s)return!1;if(n&&a.isArray(n)&&n.length>1)a.each(n,function(n,s){var r=i.get("geo_longitude")[s],n=n;if(n>=-90&&90>=n&&r>=-180&&180>=r){e.render(),t=!0;var a=new o.LatLng(n,r);e.map&&e.map.invalidateSize(),e.show(),o.marker(a).addTo(e.markerGroup).bindPopup(e.renderMarker(i)).openPopup(),e.latLngBounds.extend(a)}});else if(n>=-90&&90>=n&&s>=-180&&180>=s){e.render(),t=!0;var r=new o.LatLng(n,s);e.map&&e.map.invalidateSize(),e.show(),o.marker(r).addTo(e.markerGroup).bindPopup(e.renderMarker(i)).openPopup(),e.latLngBounds.extend(r)}}),t?this.map.fitBounds(e.latLngBounds.pad(.15)):this.hide()}catch(i){}},renderMarker:function(e){try{var t=this.options.resultTemplate.createView({model:e,application:this.options.application,parent:this,modelType:"Result"}),i=t.render().el;return i}finally{}},remove:function(){this.hide(),this.setEditable(!1),this.computed(),this.removeOwnedNodes(),this.options.template&&this.options.template.el==this.el||r(this.el).remove(),this.setModel(),this.stopListening(),this.undelegateEvents(),t.View.prototype.remove.apply(this,arguments)}}),h=t.extend({createView:function(e){var t=new c(a.extend({},e,{application:e.application,template:this,resultTemplate:this.getContent(),el:this.el}));return this.instances.push(t),t},schema:new e.Schema({inputAttributes:{view:{title:"Search",type:"reference",reference:"view"}}}),hasContent:function(){return!0},getContent:function(){return this.children[0].template}});return h.DEFAULT_TEMPLATE=l,h}),Mindbreeze.define("utils/inplace-edit",["client/application","component!base","i18n/i18n","utils/dom","utils/keys","utils/timer","jquery","underscore"],function(e,t,i,n,s,r,a,o){t.prototype.events=o.extend({contextmenu:"abortContextMenu","focusin *:has( > [data-edit]),.mb-inplace-editable":"updateHasPopup","keydown *:has( > [data-edit]),.mb-inplace-editable":"showInPlaceEditHandleOnMenuKey","keypress *:has( > [data-edit]),.mb-inplace-editable":"abortMenuKey","keyup *:has( > [data-edit]),.mb-inplace-editable":"abortMenuKey","mouseenter *:has( > [data-edit]),.mb-inplace-editable":"showInPlaceEditHandle","mouseleave *:has( > [data-edit]),.mb-inplace-editable":"hideInPlaceEditHandle"},t.prototype.events),t.prototype.updateHasPopup=function(e){a(e.currentTarget).attr("aria-haspopup","true")},t.prototype.abortContextMenu=function(e){this._abortContextMenu&&(e.stopPropagation(),e.preventDefault(),delete this._abortContextMenu)},t.prototype.abortMenuKey=function(e){(e.which===s.f10&&e.shiftKey||e.which===s.menu)&&(this._abortContextMenu=e.which===s.menu,e.stopPropagation(),e.preventDefault())},t.prototype.showInPlaceEditHandleOnMenuKey=function(e,t){e.which===s.f2?this.options.application.inplaceEdit({targetEl:e.currentTarget,model:this.model,deletable:!0}):e.which===s.f10&&e.shiftKey||e.which===s.menu?(this._abortContextMenu=e.which===s.menu,this.showInPlaceEditHandle(e,t,!0,"key"),e.stopPropagation(),e.preventDefault()):e.which===s["delete"]&&this.model.destroy()};var l=t.prototype.initialize;t.prototype.initialize=function(){var e=this;l.apply(this,arguments),this.showInPlaceEditHandle=r.delayedThrottled(function(t,s,r,o){var l=a(t.currentTarget),u=this.options.application;if(!(l.children("[data-edit]").length<1||u.inplaceEditHandleEl&&u.inplaceEditHandleEl.parentNode===t.currentTarget)){e.hideEventMask=o,l.addClass("mb-inplace-editable"),this.removeInPlaceEditHandle(),u.inplaceEditHandleEl=document.createElement("span"),u.inplaceEditHandleEl.setAttribute("role","menu"),u.inplaceEditHandleEl.className="mb-role";var c=document.createElement("button");c.className="action mb-inplace-handle mb-inplace-action mb-btn-no-decor",c.setAttribute("role","menuitem"),c.setAttribute("title",i("editor_edit",[""])),c.setAttribute("data-action-object",JSON.stringify({inplaceEdit:{deletable:!0}})),c.innerHTML='<span><i class="icon-pencil"></i><span class="mb-acc">'+i("editor_edit",[""])+'"</span></span>',u.inplaceEditHandleEl.appendChild(c),a(u.inplaceEditHandleEl).on("menuclose",function(){e.removeInPlaceEditHandle(),n.focus(l,!0)}),l.append(u.inplaceEditHandleEl),r&&c.focus()}},0)},t.prototype.hideInPlaceEditHandle=function(e){(!this.hideEventMask||new RegExp(this.hideEventMask).test(e.type))&&(this.showInPlaceEditHandle.abort(),this.removeInPlaceEditHandle())},t.prototype.removeInPlaceEditHandle=function(){delete this.hideEventMask;var e=a(this.options.application.inplaceEditHandleEl);e.remove(),delete this.options.application.inplaceEditHandleEl},e.prototype.inplaceEdit=function(e){var t=e.targetEl||a(e.eventTarget).closest(e.eventTarget.getAttribute("data-inplace-selector")||".mb-inplace-editable")[0],s=a(t);if(t){t.innerHTML="";var r=!1,l=a(document.createElement("input")),u=function(){a(document.body).off(".mb-inplace-edit"),e.model.unset("edit")},c=function(e){e&&(e.preventDefault(),e.stopPropagation())},h=function(t){t&&/key/i.test(t.type)&&13!==t.which||(c(t),u(),e.model.trigger("change"),n.focus(s,!0))},d=function(t){if(!t||!/key/i.test(t.type)||13===t.which||/input/i.test(t.target.tagName)){c(t),u();var i=l.val();if(i){var a=e.model&&e.model.collection&&e.model.collection.isNameTaken(i,e.model);r=a,a?(alert("Name ist bereits vergeben, bitte wÃ¤hlen Sie einen anderen Namen."),l.focus()):(e.model.get("name")!==i?e.model.set("name",i):e.model.trigger("change"),e.model.collection&&e.model.collection.save?e.model.collection.save():e.model.collection&&e.model.save(),n.focus(s,!0))}else s.addClass("mb-inplace-editable"),r||e.model.trigger("change")}};l.addClass("mb-inplace-edit"),l.attr("placeholder",e.model.get("name")),l.val(e.model.get("name")),l.on("keydown",function(e){13===e.keyCode?d():27===e.keyCode&&h()}),l.on("click",function(e){e.stopPropagation(),e.preventDefault()});var p=document.createElement("span");p.className="mb-inplace-edit-control",p.appendChild(l[0]),t.removeAttribute("data-action-object"),t.removeAttribute("href"),s.removeClass("mb-inplace-editable"),l.css("font",s.css("font")),l.css("vertical-align",s.css("vertical-align")),o.defer(function(){l.select()});var m=document.createElement("span");m.className="mb-inplace-actions";var f=a('<button class="mb-btn-no-decor action mb-inplace-action" title="'+i("article_button_publish")+'">&nbsp;<i class="icon-ok-sign"></i></button>');f.on("click",d),f.on("keypress",d),m.appendChild(f[0]);var g=a('<button class="mb-btn-no-decor action mb-inplace-action" title="'+i("Cancel")+'">&nbsp;<i class="icon-remove-sign"></i></button>');g.on("click",h),g.on("keypress",h),m.appendChild(g[0]),e.deletable&&m.appendChild(a('<button class="mb-btn-no-decor action mb-inplace-action" title="'+i("action_delete")+'" data-action-object="'+o.escape(JSON.stringify({destroyModel:{}}))+'">&nbsp;<i class="icon-trash"></i></button>')[0]),p.appendChild(m),a(document.body).on("focusin.mb-inplace-edit click.mb-inplace-edit",function(e){n.isChild(e.target,t)||(a(document.body).off(".mb-inplace-edit"),t.parentElement&&t.parentElement.parentElement&&h())
}),t.appendChild(p)}}}),Mindbreeze.define("components/table/js/table",["client/template","client/resourceinfo","component!results","underscore","jquery","jquery-ui-autocomplete","moment","handsontable","utils/inplace-edit","i18n/i18n","utils/browser","model/properties","utils/jsonpath"],function(e,t,i,n,s,r,a,o,l,u,c,h,d){function p(e){this.value=e}var m=function(e,t){var i=document.getElementById(t);i||(i=document.createElement("link"),i.rel="stylesheet",i.href=e,i.id=t,(document.head||document.getElementsByTagName("script")[0].parentNode).appendChild(i))};m(t.scriptLocation+"/handsontable/handsontable.full.min.css","mbHandsontableCss"),n.extend(p.prototype,{get:function(){return this.value}});var f=i.View,g=f.extend({events:function(){return n.extend({},f.prototype.events,{"dblclick th .colHeaderEl":"headerClicked","click th .delAll":"delClicked","keydown .colHeader input":"keyDetection","click .colHeader input":"setFocus","click .icon_remove":"breakInput","click .icon_ok":"doInput","click #addColHeader":"AddClicked","click .exportToCSV":"showExportDownloader"})},setFocus:function(){s(".InputField").focus()},keyDownLoadMore:function(e){40==e.keyCode&&this.afterScrollVertically()},getFormatOptions:function(e){return{formats:"mes:summary"===e||"mes:relevanceinfo"===e?["PROPERTY"]:["VALUE","HTML"]}},getDisplayedProperties:function(){var e=this,t=n.reduce(this.properties,function(t,i){return n.each(i.ids,function(i){var n=i[0];t[d.stringifyPath([n])]=e.getFormatOptions(n)}),t},{});return t.noadditionalproperties=!0,t},initialize:function(e){if(this.properties=[],this.doInputOrWriteAdd=!1,this.doInputOrWriteProp=!1,this.editProperties=!1,this.h_counter=0,this.tableData=[],e.model){this.updateTranslatedPropertyMap(e.model);var t=this.options.application.models.exportProperties,i=this.options.application.models.exportProperties&&this.options.application.models.exportProperties.get("properties"),r=this.options.application.models.exportProperties&&this.options.application.models.exportProperties.get("standardProperties");!r&&t&&this.options.application.models.exportProperties.set({standardProperties:this.buildPropertiesFromModel(this.options.model)}),t&&this.listenTo(t,"change",this.handleExportPropertiesModelChange),this.properties=i&&!n.isObject(i)?this.buildPropertiesFromArray(i):this.buildPropertiesFromModel(this.options.model),this.savePropertiesForReset||(this.savePropertiesForReset=this.buildPropertiesFromModel(this.options.model))}var a=s('div[data-template="table"]');e.application.options.exportformat&&(this.options.exportformat=e.application.options.exportformat),this.options.allowexport?(n.isEmpty(a)||a.find("#allowExportTable").hide(),a.prepend('<div id="allowExportTable"><button class="exportToCSV mb-dont-serialize" data-action-object="{&quot;exportSearch&quot;:{&quot;exportFormat&quot;:&quot;'+this.options.exportformat+'&quot;}}">'+u("editor_export")+"</button></div>"),s(".showExportList").length||s(".mb-top-menu ul").append(s("<li>").append(s('<button class="showExportList">').attr({"data-action-object":'{"showExports": {}}'}).append(s("<i>").attr("class","icon-download"))))):a.find("#allowExportTable").hide();var l=this;this.tableEl=this.make("div"),this.appendChild(this.tableEl,!1),this.table=new o(this.tableEl,{data:this.tableData,contextMenu:!1,readOnly:!0,contextMenu:!1,afterScrollVertically:n.bind(this.afterScrollVertically,this),beforeKeyDown:n.bind(this.keyDownLoadMore,this),manualColumnResize:!0,manualColumnMove:!1,allowRemoveColumn:!0,columns:this.getColumns(),autoColumnSize:!0,colHeaders:this.getColHeaders(),colWidths:this.getColWidth(),afterSelection:n.bind(this.afterSelection,this)}),f.prototype.initialize.apply(this,arguments),this.collection.constructor.prototype.push=function(){},this.collection.constructor.prototype.slice=function(){return this.models.slice.apply(this.models,arguments)},this.collection.constructor.prototype.splice=function(){},this.collection.length=this.collection.models.length,s(window).resize(n.bind(function(){this.afterScrollVertically()},this));var c=s(".loaderLeft");s(document).on("click",function(e){!c.is(":visible")||c.is(e.target)||c.has(e.target).length||(l.setDownloaderColorGrey(),c.hide())}),s(".showExportList").on("click",function(){c.is(":visible")?l.setDownloaderColorGrey():l.setDownloaderColorWhite()}),s(".showExportList").hover(function(){l.setDownloaderColorWhite()},function(){c.is(":visible")||l.setDownloaderColorGrey()}),this.table.addHook("beforeRender",function(){this.lastRowRenedered=!1,this.lastTR=null,this.placeholderTargetEl=null,this.tableRendering=!0});var h=this.table.alter;if(this.table.alter=function(e,t,i,n,s){return"remove_col"==e?l.removeColumnByIndex(t,i,n,s):h.apply(l.table,arguments)},this.options.appendonscroll===!1){if(s(this.el).find(".mb-not-append-results").length)return;var d=u("mobileclient_load_more_results");s(this.el).append('<div><a href="#" class="mb-next mb-center mb-block action mb-not-append-results" data-action="this.nextPage({ append: true })">'+d+"</a></div>")}this.table.updateSettings({columns:this.getColumns(),colHeaders:this.getColHeaders()})},getColWidth:function(){var e="true"===c.getURLParameter("relevance-info");return e&&s(this.el).hasClass("relevanceInfoTable")?[70,170,130,90,90,70,70,100,100,100,100,100,100,170,100,100]:void 0},sanitizeProperties:function(e){return e&&e.length&&!n.isObject(e[0])?this.buildPropertiesFromArray(e):e},handleExportPropertiesModelChange:function(){var e=this.options.application.models.exportProperties;this.properties=this.sanitizeProperties(e.get("properties")),this.updateColumns()},updateColumns:function(){this.setEditProperties(),this.collection.setProperties(this.getDisplayedProperties())},setDownloaderColorGrey:function(){s(".showExportList").css("color","#808080")},setDownloaderColorWhite:function(){s(".showExportList").css("color","#ffffff")},remove:function(){return this.table.destroy(),this.tableEl&&this.tableEl.parentNode&&this.tableEl.parentNode.removeChild(this.tableEl),f.prototype.remove.apply(this,arguments),this},modelComputed:function(){this.editProperties||this.afterScrollVertically()},isVisible:function(e){function t(e){return e.offsetParent?e.offsetTop+t(e.offsetParent):e.offsetTop}var i=s(e).scrollParent(),n=s(e),r=i.scrollTop(),a=i[0]==window?"offset":"position",o=n[a]().top;if(!s.isWindow(i.get(0))){var l=t(i.get(0)),u=t(n.get(0));o=u-l}var c=o-i.outerHeight();return r>=c},afterScrollVertically:function(){this.model&&this.model.get("resultset.next_avail")&&(this.editProperties||this.lastTR&&this.isVisible(this.lastTR)&&(this.lastTR=!1,this.pagingAllowed&&this.options.appendonscroll&&this.page()))},showExportDownloader:function(){s(".showExportList").addClass("exportDownloaderBlink"),this.setDownloaderColorWhite()},delMouseEntered:function(e){!s(".colHeaderEl").find("input").length>0&&s(e.currentTarget).find(".btn_del").css("display","block")},delMouseLeave:function(e){s(e.currentTarget).find(".btn_del").css("display","none")},delClicked:function(e){var t=s(e.currentTarget),i=t.find("[data-index]").attr("data-index");this.options.application.models.exportProperties?(this.properties.splice(i,1),this.options.application.models.exportProperties.set({properties:n.union(this.properties)})):(this.removeColumnByIndex(i,1),this.getPropertiesForTemplate())},updateTranslatedPropertyMap:function(e){if(e=e||this.model){var t=n.reduce(e.get("available_properties"),function(e,t){var i=t.localized_name||t.name,s=t.localized_name?10:1,r=e.name2IDs;return r[i]?n.contains(r[i].ids,t.name)||r[i].ids.push(t.name):r[i]={label:i,name:i,ids:[[t.name]],score:s},e.id2Property[t.name]=i,e},{name2IDs:{},id2Property:{}});return this.translatedPropertyMap=t.name2IDs,this.propertyTranslationMap=t.id2Property,this.translatedPropertyMap}},propertiesFromNames:function(e){return n.reduce(e,function(e,t){return e[t]={formats:["HTML","VALUE"]},e},{})},buildPropertiesFromArray:function(e){return this.getTranslatedProperties(e)},buildPropertiesFromModel:function(e){var t=this.options.properties;return(!t||t.length<1)&&(t=n.keys(e.input.get("properties"))),this.getTranslatedProperties(t)},getTranslatedProperties:function(e){var t=this,i=n.reduce(e,function(e,i){var s=i,r=[i],a=t.propertyTranslationMap[i];if(a){var o=t.translatedPropertyMap[a];if(t.options.application.options.excludeFromTranslation)var l=t.options.application.options.excludeFromTranslation;else{var l=t.options["exclude-from-translation"];t.options.application.options.excludeFromTranslation=l}o&&(l&&l.indexOf(s)>=0||(s=o.name,r=o.ids))}return r=n.map(r,function(e){return d.parsePath(e)}),n.isArray(s)&&(s=s.join(".")),e.map[s]?e.map[s].ids=n.union(e.map[s].ids[0],r[0]):e.map[s]={name:s,ids:r},e.list.push(e.map[s]),e},{map:{},list:[]});return i.list},setModel:function(e){e&&(this.updateTranslatedPropertyMap(e),this.buildPropertiesFromModel(e)),f.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"computed",this.modelComputed),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"change",this.update)},appendScrollPlaceholder:function(){},removeColumnByIndex:function(e,t){var i=this,s=this.properties.splice(e,t);n.each(s,function(e){i.collection.removeProperty(e,{silent:!0})}),s.length>0&&this.collection.change(),this.collection.setProperties(this.getDisplayedProperties()),this.table.updateSettings({columns:this.getColumns(),colHeaders:this.getColHeaders()})},addColHeader:function(e){return this.doInputOrWriteAdd?"<button class='action' id='addColHeader' data-index='"+e+"' data-message='addNewHeader'>+</button>":(this.doInputOrWriteAdd=!0,"<button class='action' id='addColHeader' data-index='"+e+"' disabled='disabled' data-message='addNewHeader'>+</button>")},addColumnData:function(){return null},getCurrentProperties:function(){return this.properties},getColumns:function(){var e=this;return this.options.edittable?n.map(this.getCurrentProperties(),function(t){return e.attr(t)}).concat(e.addColumnData):n.map(this.getCurrentProperties(),function(t){return e.attr(t)})},getColHeaders:function(e){if(e&&e.length)var t=e;else var t=this.getCurrentProperties();var i,n=[];if(this.options.edittable){if(this.doInputOrWriteProp)for(var s=0;s<t.length;s++)i=t[s].name||t[s],i=u(i),n[s]='<div data-index="'+s+'" id="'+i+'" class="colHeaderEl action" data-value="'+i+'"><a>'+i+'</a></div><div data-index="'+s+'" class="delAll"><button data-index="'+s+'" class="btn_del"><i class="icon-trash"></i></button></div>';else{this.doInputOrWriteProp=!0;for(var s=0;s<t.length;s++)i=t[s].name||t[s],i=u(i),n[s]='<div data-index="'+s+'" id="'+i+'" class="colHeaderElBeforeLoad action" data-value="'+i+'"><a data-i18n='+i+">"+i+"</a></div>"}return n.concat(this.addColHeader(s))}for(var s=0;s<t.length;s++)i=t[s].name||t[s],i=u(i),n[s]='<div data-index="'+s+'" id="'+i+'" class="colHeaderElBeforeLoad action" data-value="'+i+'"><a data-i18n='+i+">"+i+"</a></div>";return n},getValue:function(e,t){var i=e&&e.get(JSON.stringify(t),{format:"VALUE"});if(n.isObject(i)||!i){var i=e&&e.get(JSON.stringify(t),{format:"HTML"});return i}return i},getValuesAndFormat:function(e,t){var i=e&&e.get(t,{format:"VALUE"});return!i||n.isObject(i)?(i=e&&e.get(t,{format:"HTML"}),{format:"HTML",values:i}):{format:"VALUE",values:i}},attr:function(e){var t=this;return{data:function(i,s){if(n.isUndefined(s)){if(!e)return null;var r=e.ids,a=t.getValuesAndFormat(i,r[0])}return a?[a]:null},renderer:n.bind(t.formattedRenderer,t)}},innerHTMLRenderer:function(e,t,i,n,s,r){var a=o.helper.stringify(r);return t.innerHTML=a,t},formattedRenderer:function(e,t,i,r,a,l,u){var c=function(e){var t="VALUE",i=!0,s=[],r={};if(n.isObject(e))for(var a=0;a<e.length;a++){var o=e[a];if(o&&o.values){"HTML"==o.format&&(t="HTML"),n.isArray(o.values)||(o.values=[o.values]);for(var l=0;l<o.values.length;l++){var u=o.values[l];i?u in r||(s.push(u),r[u]=!0):s.push(u)}}}var c=s.join(", ");return{stringValue:c,format:t}},h=o.renderers.TextRenderer,d=c(l);return"HTML"==d.format&&(h=n.bind(this.innerHTMLRenderer,this)),h.call(this,e,t,i,r,a,d.stringValue,u),this.tableData&&this.tableData.length>0&&i==this.tableData.length-1&&(this.lastRowRendered=!0),this.lastRowRendered&&(this.lastTR=t.parentNode,this.lastRowRendered=!1),s(t).prop("title",this.renderTitle(d.stringValue)),t},renderTitle:function(e){if(!e.match(/href="([^"]*)/))return e;var t=e;try{var i=document.createElement("div");i.innerHTML=e;var t=i.firstChild&&i.firstChild.getAttribute("href")}catch(n){console.log(n)}return t},breakInput:function(e){e.stopPropagation(),e.preventDefault(),this.setEditProperties(e)},doInput:function(e){this.updateWithInputFieldValue(e)},keyDetection:function(e){e.stopPropagation(),13==e.keyCode?this.updateWithInputFieldValue(e):27==e.keyCode&&(e.preventDefault(),this.setEditProperties())},setEditProperties:function(){this.editProperties=!1,this.isEditing=!1,this.table.updateSettings({columns:this.getColumns(),colHeaders:this.getColHeaders()}),this.modelComputed()},updateWithInputFieldValue:function(e){this.isEditing=!1,e.stopPropagation(),e.preventDefault();var t=s(e.currentTarget),i=t.parents(".colHeader").find("[data-index]").attr("data-index");if(s(".ui-autocomplete").remove(),""!=s(".InputField").val()){var n=s(".InputField").val();this.renameColumn(i,n)}},headerClicked:function(e){return this.startEditing(e)},AddClicked:function(e){return this.scrollInTableRight(),this.startEditing(e,"addColumnWidth")},startEditing:function(e,t){var i=s(e.currentTarget);if(!i.find("input").length&&!i.parents(".htCore").find("input").length){this.editProperties=!0,e.preventDefault(),e.stopPropagation();var r=i.attr("data-index");i.context.id;var a=0;t&&i.parent().addClass(t);var o=this,l=s("<input type='text' class='InputField "+(t||"")+"' name='"+r+"' data-index='"+r+"'/><span class='InputFieldEdit'><button class='icon_ok'><i class='icon-ok-sign'></i></button><button class='icon_remove'><i class='icon-remove-sign'></i></button></span>");l.val(this.properties[r]),i.parent().html(l),s(".InputField").focus(),s(".InputField").val(""),this.table.unlisten(),this.isEditing=!0;var u=n.filter(this.translatedPropertyMap,function(e){return 10==e.score});u.sort(function(e,t){var i=e.label.toLowerCase(),n=t.label.toLowerCase();return n>i?-1:i>n?1:0}),l.focus().autocomplete({source:u,selectFirst:!1,minLength:0,change:function(){},create:function(){a+=1,a%2&&s(l).trigger({type:"keypress",which:40,keyCode:40})},focus:function(e,t){e.preventDefault(),s(l).val(t.item.value)},select:function(e,t){o.isEditing=!1,t.item.value,o.renameColumn(r,t&&t.item&&t.item.value)},open:function(){var e=o.el.clientWidth,t=s(s(this).data("uiAutocomplete").menu.element)[0].clientWidth,i=s(s(this).data("uiAutocomplete").menu.element).offset().left,n=s(this).closest(".wtHolder").offset().left;if(i+t>e+n){var r=i+t-(e+n);s(this).data("uiAutocomplete").menu.element.css("margin-left","-"+r+"px")}}}).autocomplete("widget").addClass("handsontable-ui-autocomplete"),s(l).bind("focus",function(){s(this).autocomplete("search")})}},scrollInTableRight:function(){var e=s(".wtHolder"),t=s(".wtHider").width();e.scrollLeft(t)},renameColumn:function(e,t){var i=d.parsePath(t),s=this.translatedPropertyMap[t]||{name:t,ids:[i]};"undefined"==typeof e?this.properties.push(s):this.properties[e]=s,this.options.application.models.exportProperties?this.options.application.models.exportProperties.set({properties:n.union(this.properties)}):(this.table.updateSettings({columns:this.getColumns(),colHeaders:this.getColHeaders()}),this.collection.setProperties(this.getDisplayedProperties()),this.getPropertiesForTemplate(),this.editProperties=!1)},getPropertiesForTemplate:function(){var e=n.map(this.properties,function(e){return e.ids}).join();this.options.template.el.setAttribute("data-properties",e),this.editing&&this.edit()},getColumnsForModel:function(e){return e?n.map(e.get("mes:summary"),function(e){return e.id}):void 0},updateTableData:function(){null==this.tableData&&(this.tableData=[]),this.tableData.splice(0,this.tableData.length);for(var e=0;e<this.collection.models.length;e++)this.tableData[e]=this.collection.models[e];return this.tableDataLength=this.tableData.length,!0},update:function(){this.updateTranslatedPropertyMap(),this.isEditing||this.updateTableData()&&this.table&&this.table.render()},addOne:function(){this.update()},removeOne:function(){this.update()},render:function(){},afterSelection:function(e){this.selectedModel=this.tableData[e]},getActionModel:function(e){if(!e)return!1;var t=e.currentTarget;return s(".ht_master").has(t).length?this.selectedModel:this.model}}),v=i.extend({hasContent:function(){return!1},createView:function(e){var t=this.model(e),i=new this.constructor.View(n.extend({},e,this.schema.parseAttributes(this.attributeModel.get()),{model:t,el:this.createEl(),template:this}));return t.set("generate_available_properties_and_facets",!0),this.instances.push(i),e.node&&n.each(e.node.children,function(i){this.createSubView(i,e,t)},this),i},schema:new e.Schema({attributes:{appendonscroll:{title:"editor_result_append_on_scroll",type:"boolean","default":!1,defaultValue:!1}},inputAttributes:n.extend({},i.prototype.schema.inputAttributes,{view:{type:"reference",reference:"view"},properties:{title:"editor_table_properties",type:"list"},"exclude-from-translation":{title:"editor_table_exclude_properties",type:"list"},edittable:{title:"editor_table_allowEdit_label",type:"boolean",defaultValue:!1},allowexport:{title:"editor_table_allowExport",type:"boolean",defaultValue:!1},exportformat:{title:"editor_table_exportFormat",type:"enum",values:[{value:"application/x-ms-excel",text:"Excel"},{value:"text/csv",text:"CSV"}]}})})});return v.View=g,v}),Mindbreeze.define("text!components/timeline/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-tag-name="span">\n  <a tabindex="0" data-action-object="{&quot;preview&quot;: {}}" title="{{{title}}}">\n    {{{title}}}\n  </a>\n</script>\n'}),/**
 * @file timeline.js
 *
 * @brief
 * The Timeline is an interactive visualization chart to visualize events in
 * time, having a start and end date.
 * You can freely move and zoom in the timeline by dragging
 * and scrolling in the Timeline. Items are optionally dragable. The time
 * scale on the axis is adjusted automatically, and supports scales ranging
 * from milliseconds to years.
 *
 * Timeline is part of the CHAP Links library.
 *
 * Timeline is tested on Firefox 3.6, Safari 5.0, Chrome 6.0, Opera 10.6, and
 * Internet Explorer 6+.
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 * Copyright (c) 2011-2014 Almende B.V.
 *
 * @author  Jos de Jong, <jos@almende.org>
 * @date    2014-07-28
 * @version 2.9.0
 */
Mindbreeze.define("components/timeline/js/lib/timeline",[],function(){return"undefined"==typeof links&&(links={}),"undefined"==typeof google&&(google=void 0),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;++i)e.call(t||this,this[i],i,this)}),links.Timeline=function(e,t){if(e){this.dom={},this.conversion={},this.eventParams={},this.groups=[],this.groupIndexes={},this.items=[],this.renderQueue={show:[],hide:[],update:[]},this.renderedItems=[],this.clusterGenerator=new links.Timeline.ClusterGenerator(this),this.currentClusters=[],this.selection=void 0,this.listeners={},this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}},this.dom.container=e,this.options={width:"100%",height:"auto",minHeight:0,groupMinHeight:0,autoHeight:!0,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:void 0,max:void 0,zoomMin:10,zoomMax:31536e10,moveable:!0,zoomable:!0,selectable:!0,unselectable:!0,editable:!1,snapEvents:!0,groupChangeable:!0,timeChangeable:!0,showCurrentTime:!0,showCustomTime:!1,showMajorLabels:!0,showMinorLabels:!0,showNavigation:!1,showButtonNew:!1,groupsOnRight:!1,groupsOrder:!0,axisOnTop:!1,stackEvents:!0,animate:!0,animateZoom:!0,cluster:!1,clusterMaxItems:5,style:"box",customStackOrder:!1,locale:"en",MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},this.setOptions(t),this.clientTimeOffset=0;for(var i=this.dom;i.container.hasChildNodes();)i.container.removeChild(i.container.firstChild);this.step=new links.Timeline.StepDate,this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,floatingRange:links.Timeline.ItemFloatingRange,dot:links.Timeline.ItemDot},this.data=[],this.firstDraw=!0,this.setVisibleChartRange(void 0,void 0,!1),this.render();var n=this;setTimeout(function(){n.trigger("ready")},0)}},links.Timeline.prototype.draw=function(e,t){t&&console.log("WARNING: Passing options in draw() is deprecated. Pass options to the constructur or use setOptions() instead!"),this.setOptions(t),this.options.selectable&&links.Timeline.addClassName(this.dom.frame,"timeline-selectable"),this.setData(e),t&&(t.start||t.end)?this.setVisibleChartRange(t.start,t.end):this.firstDraw&&this.setVisibleChartRangeAuto(),this.firstDraw=!1},links.Timeline.prototype.setOptions=function(e){if(e){for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if("undefined"!=typeof links.locales&&"en"!==this.options.locale){var i=links.locales[this.options.locale];if(i)for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n])}void 0!=e.showButtonAdd&&(this.options.showButtonNew=e.showButtonAdd,console.log("WARNING: Option showButtonAdd is deprecated. Use showButtonNew instead")),void 0!=e.intervalMin&&(this.options.zoomMin=e.intervalMin,console.log("WARNING: Option intervalMin is deprecated. Use zoomMin instead")),void 0!=e.intervalMax&&(this.options.zoomMax=e.intervalMax,console.log("WARNING: Option intervalMax is deprecated. Use zoomMax instead")),e.scale&&e.step&&this.step.setScale(e.scale,e.step)}this.options.autoHeight="auto"===this.options.height},links.Timeline.prototype.getOptions=function(){return this.options},links.Timeline.prototype.addItemType=function(e,t){this.itemTypes[e]=t},links.Timeline.mapColumnIds=function(e){for(var t={},i=e.getNumberOfColumns(),n=!0,s=0;i>s;s++){var r=e.getColumnId(s)||e.getColumnLabel(s);t[r]=s,("start"==r||"end"==r||"content"==r||"group"==r||"className"==r||"editable"==r||"type"==r)&&(n=!1)}return n&&(t.start=0,t.end=1,t.content=2,i>3&&(t.group=3),i>4&&(t.className=4),i>5&&(t.editable=5),i>6&&(t.type=6)),t},links.Timeline.prototype.setData=function(e){this.unselectItem(),e||(e=[]),this.stackCancelAnimation(),this.clearItems(),this.data=e;var t=this.items;if(this.deleteGroups(),google&&google.visualization&&e instanceof google.visualization.DataTable)for(var i=links.Timeline.mapColumnIds(e),n=0,s=e.getNumberOfRows();s>n;n++)t.push(this.createItem({start:void 0!=i.start?e.getValue(n,i.start):void 0,end:void 0!=i.end?e.getValue(n,i.end):void 0,content:void 0!=i.content?e.getValue(n,i.content):void 0,group:void 0!=i.group?e.getValue(n,i.group):void 0,className:void 0!=i.className?e.getValue(n,i.className):void 0,editable:void 0!=i.editable?e.getValue(n,i.editable):void 0,type:void 0!=i.type?e.getValue(n,i.type):void 0}));else{if(!links.Timeline.isArray(e))throw"Unknown data type. DataTable or Array expected.";for(var n=0,s=e.length;s>n;n++){var r=e[n],a=this.createItem(r);t.push(a)}}this.options.cluster&&this.clusterGenerator.setData(this.items),this.render({animate:!1})},links.Timeline.prototype.getData=function(){return this.data},links.Timeline.prototype.updateData=function(e,t){var i,n=this.data;if(google&&google.visualization&&n instanceof google.visualization.DataTable){var s=e+1-n.getNumberOfRows();s>0&&n.addRows(s);var r=links.Timeline.mapColumnIds(n);for(i in t)if(t.hasOwnProperty(i)){var a=r[i];if(void 0==a){var o=t[i],l="string";"number"==typeof o?l="number":"boolean"==typeof o?l="boolean":o instanceof Date&&(l="datetime"),a=n.addColumn(l,i)}n.setValue(e,a,t[i])}}else{if(!links.Timeline.isArray(n))throw"Cannot update data, unknown type of data";var u=n[e];void 0==u&&(u={},n[e]=u);for(i in t)t.hasOwnProperty(i)&&(u[i]=t[i])}},links.Timeline.prototype.getItemIndex=function(e){for(var t=e,i=this.dom,n=i.items.frame,s=this.items,r=void 0;t.parentNode&&t.parentNode!==n;)t=t.parentNode;if(t.parentNode===n)for(var a=0,o=s.length;o>a;a++)if(s[a].dom===t){r=a;break}return r},links.Timeline.prototype.getClusterIndex=function(e){var t=e,i=this.dom,n=i.items.frame,s=this.clusters,r=void 0;if(this.clusters){for(;t.parentNode&&t.parentNode!==n;)t=t.parentNode;if(t.parentNode===n)for(var a=0,o=s.length;o>a;a++)if(s[a].dom===t){r=a;break}}return r},links.Timeline.prototype.getVisibleItems=function(e,t){var i=this.items,n=[];if(i)for(var s=0,r=i.length;r>s;s++){var a=i[s];a.end?e<=a.start&&a.end<=t&&n.push({row:s}):e<=a.start&&a.start<=t&&n.push({row:s})}return n},links.Timeline.prototype.setSize=function(e,t){e&&(this.options.width=e,this.dom.frame.style.width=e),t&&(this.options.height=t,this.options.autoHeight="auto"===this.options.height,"auto"!==t&&(this.dom.frame.style.height=t)),this.render({animate:!1})},links.Timeline.prototype.setVisibleChartRange=function(e,t,i){var n={};e&&t||(n=this.getDataRange(!0)),e||(t?n.min&&n.min.valueOf()<t.valueOf()?e=n.min:(e=new Date(t.valueOf()),e.setDate(e.getDate()-7)):(e=new Date,e.setDate(e.getDate()-3))),t||(n.max?t=n.max:(t=new Date(e.valueOf()),t.setDate(t.getDate()+7))),e>=t&&(t=new Date(e.valueOf()),t.setDate(t.getDate()+7));var s=this.options.min?this.options.min:void 0;void 0!=s&&e.valueOf()<s.valueOf()&&(e=new Date(s.valueOf()));var r=this.options.max?this.options.max:void 0;void 0!=r&&t.valueOf()>r.valueOf()&&(t=new Date(r.valueOf())),this.applyRange(e,t),void 0==i||1==i?this.render({animate:!1}):this.recalcConversion()},links.Timeline.prototype.setVisibleChartRangeAuto=function(){var e=this.getDataRange(!0);this.setVisibleChartRange(e.min,e.max)},links.Timeline.prototype.setVisibleChartRangeNow=function(){var e=new Date,t=this.end.valueOf()-this.start.valueOf(),i=new Date(e.valueOf()-t/2),n=new Date(i.valueOf()+t);this.setVisibleChartRange(i,n)},links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}},links.Timeline.prototype.getDataRange=function(e){var t=this.items,i=void 0,n=void 0;if(t)for(var s=0,r=t.length;r>s;s++){var a=t[s],o=void 0!=a.start?a.start.valueOf():void 0,l=void 0!=a.end?a.end.valueOf():o;void 0!=o&&(i=void 0!=i?Math.min(i.valueOf(),o.valueOf()):o),void 0!=l&&(n=void 0!=n?Math.max(n.valueOf(),l.valueOf()):l)}if(i&&n&&e){var u=n-i;i-=.05*u,n+=.05*u}return{min:void 0!=i?new Date(i):void 0,max:void 0!=n?new Date(n):void 0}},links.Timeline.prototype.render=function(e){this.reflowFrame(),this.reflowAxis(),this.reflowGroups(),this.reflowItems();var t=this.options.animate;e&&void 0!=e.animate&&(t=e.animate),this.recalcConversion(),this.clusterItems(),this.filterItems(),this.stackItems(t),this.recalcItems();var i=this.repaint();if(i){var n=e?e.renderTimesLeft:void 0;void 0==n&&(n=5),n>0&&this.render({animate:e?e.animate:void 0,renderTimesLeft:n-1})}},links.Timeline.prototype.repaint=function(){var e=this.repaintFrame(),t=this.repaintAxis(),i=this.repaintGroups(),n=this.repaintItems();return this.repaintCurrentTime(),this.repaintCustomTime(),e||t||i||n},links.Timeline.prototype.reflowFrame=function(){var e=this.dom,t=(this.options,this.size),i=!1,n=e.frame?e.frame.offsetWidth:0,s=e.frame?e.frame.clientHeight:0;return i=i||t.frameWidth!==n,i=i||t.frameHeight!==s,t.frameWidth=n,t.frameHeight=s,i},links.Timeline.prototype.repaintFrame=function(){var e=!1,t=this.dom,i=this.options,n=this.size;t.frame||(t.frame=document.createElement("DIV"),t.frame.className="timeline-frame ui-widget ui-widget-content ui-corner-all",t.container.appendChild(t.frame),e=!0);var s=i.autoHeight?n.actualHeight+"px":i.height||"100%",r=i.width||"100%";if(e=e||t.frame.style.height!=s,e=e||t.frame.style.width!=r,t.frame.style.height=s,t.frame.style.width=r,!t.content){t.content=document.createElement("DIV"),t.content.className="timeline-content",t.frame.appendChild(t.content);var a=document.createElement("DIV");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.height="100%",a.style.width="0px",t.content.appendChild(a),t.contentTimelines=a;var o=this.eventParams,l=this;o.onMouseDown||(o.onMouseDown=function(e){l.onMouseDown(e)},links.Timeline.addEventListener(t.content,"mousedown",o.onMouseDown)),o.onTouchStart||(o.onTouchStart=function(e){l.onTouchStart(e)},links.Timeline.addEventListener(t.content,"touchstart",o.onTouchStart)),o.onMouseWheel||(o.onMouseWheel=function(e){l.onMouseWheel(e)},links.Timeline.addEventListener(t.content,"mousewheel",o.onMouseWheel)),o.onDblClick||(o.onDblClick=function(e){l.onDblClick(e)},links.Timeline.addEventListener(t.content,"dblclick",o.onDblClick)),e=!0}return t.content.style.left=n.contentLeft+"px",t.content.style.top="0px",t.content.style.width=n.contentWidth+"px",t.content.style.height=n.frameHeight+"px",this.repaintNavigation(),e},links.Timeline.prototype.reflowAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,s=t.axis,r=s&&s.characterMinor?s.characterMinor.clientWidth:0,a=s&&s.characterMinor?s.characterMinor.clientHeight:0,o=s&&s.characterMajor?s.characterMajor.clientWidth:0,l=s&&s.characterMajor?s.characterMajor.clientHeight:0,u=(i.showMinorLabels?a:0)+(i.showMajorLabels?l:0),c=i.axisOnTop?0:n.frameHeight-u,h=i.axisOnTop?u:c;e=e||n.axis.top!==c,e=e||n.axis.line!==h,e=e||n.axis.height!==u,n.axis.top=c,n.axis.line=h,n.axis.height=u,n.axis.labelMajorTop=i.axisOnTop?0:h+(i.showMinorLabels?a:0),n.axis.labelMinorTop=i.axisOnTop?i.showMajorLabels?l:0:h,n.axis.lineMinorTop=i.axisOnTop?n.axis.labelMinorTop:0,n.axis.lineMinorHeight=i.showMajorLabels?n.frameHeight-l:n.frameHeight,n.axis.lineMinorWidth=s&&s.minorLines&&s.minorLines.length?s.minorLines[0].offsetWidth:1,n.axis.lineMajorWidth=s&&s.majorLines&&s.majorLines.length?s.majorLines[0].offsetWidth:1,e=e||n.axis.characterMinorWidth!==r,e=e||n.axis.characterMinorHeight!==a,e=e||n.axis.characterMajorWidth!==o,e=e||n.axis.characterMajorHeight!==l,n.axis.characterMinorWidth=r,n.axis.characterMinorHeight=a,n.axis.characterMajorWidth=o,n.axis.characterMajorHeight=l;var d=Math.max(n.frameHeight-u,0);return n.contentLeft=i.groupsOnRight?0:n.groupsWidth,n.contentWidth=Math.max(n.frameWidth-n.groupsWidth,0),n.contentHeight=d,e},links.Timeline.prototype.repaintAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,s=this.step,r=t.axis;r||(r={},t.axis=r),n.axis.properties||(n.axis.properties={}),r.minorTexts||(r.minorTexts=[]),r.minorLines||(r.minorLines=[]),r.majorTexts||(r.majorTexts=[]),r.majorLines||(r.majorLines=[]),r.frame||(r.frame=document.createElement("DIV"),r.frame.style.position="absolute",r.frame.style.left="0px",r.frame.style.top="0px",t.content.appendChild(r.frame)),t.content.removeChild(r.frame),r.frame.style.width=n.contentWidth+"px",r.frame.style.height=n.axis.height+"px";var a=this.screenToTime(0),o=this.screenToTime(n.contentWidth);n.axis.characterMinorWidth&&(this.minimumStep=this.screenToTime(6*n.axis.characterMinorWidth)-this.screenToTime(0),s.setRange(a,o,this.minimumStep));var l=this.repaintAxisCharacters();e=e||l,this.repaintAxisStartOverwriting(),s.start();for(var u=void 0,c=0;!s.end()&&1e3>c;){c++;var h=s.getCurrent(),d=this.timeToScreen(h),p=s.isMajor();i.showMinorLabels&&this.repaintAxisMinorText(d,s.getLabelMinor(i)),p&&i.showMajorLabels?(d>0&&(void 0==u&&(u=d),this.repaintAxisMajorText(d,s.getLabelMajor(i))),this.repaintAxisMajorLine(d)):this.repaintAxisMinorLine(d),s.next()}if(i.showMajorLabels){var m=this.screenToTime(0),f=this.step.getLabelMajor(i,m),g=f.length*n.axis.characterMajorWidth+10;(void 0==u||u>g)&&this.repaintAxisMajorText(0,f,m)}return this.repaintAxisEndOverwriting(),this.repaintAxisHorizontal(),t.content.insertBefore(r.frame,t.content.firstChild),e},links.Timeline.prototype.repaintAxisCharacters=function(){var e,t=!1,i=this.dom,n=i.axis;if(!n.characterMinor){e=document.createTextNode("0");var s=document.createElement("DIV");s.className="timeline-axis-text timeline-axis-text-minor",s.appendChild(e),s.style.position="absolute",s.style.visibility="hidden",s.style.paddingLeft="0px",s.style.paddingRight="0px",n.frame.appendChild(s),n.characterMinor=s,t=!0}if(!n.characterMajor){e=document.createTextNode("0");var r=document.createElement("DIV");r.className="timeline-axis-text timeline-axis-text-major",r.appendChild(e),r.style.position="absolute",r.style.visibility="hidden",r.style.paddingLeft="0px",r.style.paddingRight="0px",n.frame.appendChild(r),n.characterMajor=r,t=!0}return t},links.Timeline.prototype.repaintAxisStartOverwriting=function(){var e=this.size.axis.properties;e.minorTextNum=0,e.minorLineNum=0,e.majorTextNum=0,e.majorLineNum=0},links.Timeline.prototype.repaintAxisEndOverwriting=function(){var e,t=this.dom,i=this.size.axis.properties,n=this.dom.axis.frame,s=t.axis.minorTexts;for(e=i.minorTextNum;s.length>e;){var r=s[e];n.removeChild(r),s.splice(e,1)}var a=t.axis.minorLines;for(e=i.minorLineNum;a.length>e;){var o=a[e];n.removeChild(o),a.splice(e,1)}var l=t.axis.majorTexts;for(e=i.majorTextNum;l.length>e;){var u=l[e];n.removeChild(u),l.splice(e,1)}var c=t.axis.majorLines;for(e=i.majorLineNum;c.length>e;){var h=c[e];n.removeChild(h),c.splice(e,1)}},links.Timeline.prototype.repaintAxisHorizontal=function(){var e=this.dom.axis,t=this.size,i=this.options,n=i.showMinorLabels||i.showMajorLabels;if(n){if(!e.backgroundLine){var s=document.createElement("DIV");s.className="timeline-axis",s.style.position="absolute",s.style.left="0px",s.style.width="100%",s.style.border="none",e.frame.insertBefore(s,e.frame.firstChild),e.backgroundLine=s}e.backgroundLine&&(e.backgroundLine.style.top=t.axis.top+"px",e.backgroundLine.style.height=t.axis.height+"px")}else e.backgroundLine&&(e.frame.removeChild(e.backgroundLine),delete e.backgroundLine);if(n){if(e.line){var r=e.frame.removeChild(e.line);e.frame.appendChild(r)}else{var r=document.createElement("DIV");r.className="timeline-axis",r.style.position="absolute",r.style.left="0px",r.style.width="100%",r.style.height="0px",e.frame.appendChild(r),e.line=r}e.line.style.top=t.axis.line+"px"}else e.line&&e.line.parentElement&&(e.frame.removeChild(e.line),delete e.line)},links.Timeline.prototype.repaintAxisMinorText=function(e,t){var i,n=this.size,s=this.dom,r=n.axis.properties,a=s.axis.frame,o=s.axis.minorTexts,l=r.minorTextNum;if(l<o.length)i=o[l];else{var u=document.createTextNode("");i=document.createElement("DIV"),i.appendChild(u),i.className="timeline-axis-text timeline-axis-text-minor",i.style.position="absolute",a.appendChild(i),o.push(i)}i.childNodes[0].nodeValue=t,i.style.left=e+"px",i.style.top=n.axis.labelMinorTop+"px",r.minorTextNum++},links.Timeline.prototype.repaintAxisMinorLine=function(e){var t,i=this.size.axis,n=this.dom,s=i.properties,r=n.axis.frame,a=n.axis.minorLines,o=s.minorLineNum;o<a.length?t=a[o]:(t=document.createElement("DIV"),t.className="timeline-axis-grid timeline-axis-grid-minor",t.style.position="absolute",t.style.width="0px",r.appendChild(t),a.push(t)),t.style.top=i.lineMinorTop+"px",t.style.height=i.lineMinorHeight+"px",t.style.left=e-i.lineMinorWidth/2+"px",s.minorLineNum++},links.Timeline.prototype.repaintAxisMajorText=function(e,t){var i,n=this.size,s=n.axis.properties,r=this.dom.axis.frame,a=this.dom.axis.majorTexts,o=s.majorTextNum;if(o<a.length)i=a[o];else{var l=document.createTextNode(t);i=document.createElement("DIV"),i.className="timeline-axis-text timeline-axis-text-major",i.appendChild(l),i.style.position="absolute",i.style.top="0px",r.appendChild(i),a.push(i)}i.childNodes[0].nodeValue=t,i.style.top=n.axis.labelMajorTop+"px",i.style.left=e+"px",s.majorTextNum++},links.Timeline.prototype.repaintAxisMajorLine=function(e){var t,i=this.size,n=i.axis.properties,s=this.size.axis,r=this.dom.axis.frame,a=this.dom.axis.majorLines,o=n.majorLineNum;o<a.length?t=a[o]:(t=document.createElement("DIV"),t.className="timeline-axis-grid timeline-axis-grid-major",t.style.position="absolute",t.style.top="0px",t.style.width="0px",r.appendChild(t),a.push(t)),t.style.left=e-s.lineMajorWidth/2+"px",t.style.height=i.frameHeight+"px",n.majorLineNum++},links.Timeline.prototype.reflowItems=function(){var e,t,i,n=!1,s=this.groups,r=this.renderedItems;for(s&&s.forEach(function(e){e.itemsHeight=0}),e=0,t=r.length;t>e;e++){var a=r[e],o=a.dom;if(i=a.group,o){var l=o?o.clientWidth:0,u=o?o.clientHeight:0;n=n||a.width!=l,n=n||a.height!=u,a.width=l,a.height=u,a.reflow()}i&&(i.itemsHeight=Math.max(this.options.groupMinHeight,i.itemsHeight?Math.max(i.itemsHeight,a.height):a.height))}return n},links.Timeline.prototype.recalcItems=function(){var e,t,i,n,s,r,a=!1,o=this.groups,l=this.size,u=this.options,c=this.renderedItems,h=0;if(0==o.length){if(u.autoHeight||u.cluster){var d=0,p=0;if(this.stack&&this.stack.finalItems)for(s=this.stack.finalItems,n=s[0],n&&n.top&&(d=n.top,p=n.top+n.height),e=1,t=s.length;t>e;e++)n=s[e],d=Math.min(d,n.top),p=Math.max(p,n.top+n.height);else for(i=c[0],i&&i.top&&(d=i.top,p=i.top+i.height),e=1,t=c.length;t>e;e++)i=c[e],i.top&&(d=Math.min(d,i.top),p=Math.max(p,i.top+i.height));if(h=p-d+2*u.eventMarginAxis+l.axis.height,h<u.minHeight&&(h=u.minHeight),l.actualHeight!=h&&u.autoHeight&&!u.axisOnTop){var m=h-l.actualHeight;if(this.stack&&this.stack.finalItems)for(s=this.stack.finalItems,e=0,t=s.length;t>e;e++)s[e].top+=m,s[e].item.top+=m;else for(e=0,t=c.length;t>e;e++)c[e].top+=m}}}else{for(h=l.axis.height+2*u.eventMarginAxis,e=0,t=o.length;t>e;e++){r=o[e];var f=r.itemsHeight;a=a||f!=r.height,r.height=Math.max(f,u.groupMinHeight),h+=o[e].height+u.eventMargin}var g=u.eventMargin,v=u.axisOnTop?u.eventMarginAxis+g/2:l.contentHeight-u.eventMarginAxis+g/2,_=l.axis.height;for(e=0,t=o.length;t>e;e++)r=o[e],u.axisOnTop?(r.top=v+_,r.labelTop=v+_+(r.height-r.labelHeight)/2,r.lineTop=v+_+r.height+g/2,v+=r.height+g):(v-=r.height+g,r.top=v,r.labelTop=v+(r.height-r.labelHeight)/2,r.lineTop=v-g/2);a=!0}return h<u.minHeight&&(h=u.minHeight),a=a||h!=l.actualHeight,l.actualHeight=h,a},links.Timeline.prototype.clearItems=function(){var e=this.renderQueue.hide;this.renderedItems.forEach(function(t){e.push(t)}),this.clusterGenerator.clear(),this.items=[]},links.Timeline.prototype.repaintItems=function(){var e,t,i=!1,n=this.dom,s=this.size,r=this,a=this.renderedItems;n.items||(n.items={});var o=n.items.frame;o||(o=document.createElement("DIV"),o.style.position="relative",n.content.appendChild(o),n.items.frame=o),o.style.left="0px",o.style.top=s.items.top+"px",o.style.height="0px",n.content.removeChild(o);var l=this.renderQueue,u=[];for(i=i||l.show.length>0||l.update.length>0||l.hide.length>0;e=l.show.shift();)e.showDOM(o),e.getImageUrls(u),a.push(e);for(;e=l.update.shift();)e.updateDOM(o),e.getImageUrls(u),t=this.renderedItems.indexOf(e),-1==t&&a.push(e);for(;e=l.hide.shift();)e.hideDOM(o),t=this.renderedItems.indexOf(e),-1!=t&&a.splice(t,1);if(a.forEach(function(e){e.updatePosition(r)}),this.repaintDeleteButton(),this.repaintDragAreas(),n.content.appendChild(o),u.length){var c=function(){r.render()},h=!1;links.imageloader.loadAll(u,c,h)}return i},links.Timeline.prototype.reflowGroups=function(){for(var e=!1,t=this.options,i=this.size,n=this.dom,s=0,r=this.groups,a=this.dom.groups?this.dom.groups.labels:[],o=0,l=r.length;l>o;o++){var u=r[o],c=a[o];u.labelWidth=c?c.clientWidth:0,u.labelHeight=c?c.clientHeight:0,u.width=u.labelWidth,s=Math.max(s,u.width)}void 0!==t.groupsWidth&&(s=n.groups.frame?n.groups.frame.clientWidth:0),s+=1;var h=t.groupsOnRight?i.frameWidth-s:0;return e=e||i.groupsWidth!==s,e=e||i.groupsLeft!==h,i.groupsWidth=s,i.groupsLeft=h,e},links.Timeline.prototype.repaintGroups=function(){var e=this.dom,t=this,i=this.options,n=this.size,s=this.groups;void 0===e.groups&&(e.groups={});var r=e.groups.labels;r||(r=[],e.groups.labels=r);var a=e.groups.labelLines;a||(a=[],e.groups.labelLines=a);var o=e.groups.itemLines;o||(o=[],e.groups.itemLines=o);var l=e.groups.frame;l||(l=document.createElement("DIV"),l.className="timeline-groups-axis",l.style.position="absolute",l.style.overflow="hidden",l.style.top="0px",l.style.height="100%",e.frame.appendChild(l),e.groups.frame=l),l.style.left=n.groupsLeft+"px",l.style.width=void 0!==i.groupsWidth?i.groupsWidth:n.groupsWidth+"px",l.style.display=0==s.length?"none":"";for(var u=r.length,c=s.length,h=0,d=Math.min(u,c);d>h;h++){var p=s[h],m=r[h];m.innerHTML=this.getGroupName(p),m.style.display=""}for(var h=u;c>h;h++){var p=s[h],m=document.createElement("DIV");m.className="timeline-groups-text",m.style.position="absolute",void 0===i.groupsWidth&&(m.style.whiteSpace="nowrap"),m.innerHTML=this.getGroupName(p),l.appendChild(m),r[h]=m;var f=document.createElement("DIV");f.className="timeline-axis-grid timeline-axis-grid-minor",f.style.position="absolute",f.style.left="0px",f.style.width="100%",f.style.height="0px",f.style.borderTopStyle="solid",l.appendChild(f),a[h]=f;var g=document.createElement("DIV");g.className="timeline-axis-grid timeline-axis-grid-minor",g.style.position="absolute",g.style.left="0px",g.style.width="100%",g.style.height="0px",g.style.borderTopStyle="solid",e.content.insertBefore(g,e.content.firstChild),o[h]=g}for(var h=c;u>h;h++){var m=r[h],f=a[h],g=o[h];l.removeChild(m),l.removeChild(f),e.content.removeChild(g)}r.splice(c,u-c),a.splice(c,u-c),o.splice(c,u-c),links.Timeline.addClassName(l,i.groupsOnRight?"timeline-groups-axis-onright":"timeline-groups-axis-onleft");for(var h=0,d=s.length;d>h;h++){var p=s[h],m=r[h],f=a[h],g=o[h];m.style.top=p.labelTop+"px",f.style.top=p.lineTop+"px",g.style.top=p.lineTop+"px",g.style.width=n.contentWidth+"px"}if(!e.groups.background){var v=document.createElement("DIV");v.className="timeline-axis",v.style.position="absolute",v.style.left="0px",v.style.width="100%",v.style.border="none",l.appendChild(v),e.groups.background=v}if(e.groups.background.style.top=n.axis.top+"px",e.groups.background.style.height=n.axis.height+"px",!e.groups.line){var _=document.createElement("DIV");_.className="timeline-axis",_.style.position="absolute",_.style.left="0px",_.style.width="100%",_.style.height="0px",l.appendChild(_),e.groups.line=_}if(e.groups.line.style.top=n.axis.line+"px",e.groups.frame&&s.length){var y=[];if(links.imageloader.filterImageUrls(e.groups.frame,y),y.length){var b=function(){t.render()},w=!1;links.imageloader.loadAll(y,b,w)}}},links.Timeline.prototype.repaintCurrentTime=function(){var e=this.options,t=this.dom,i=this.size;if(!e.showCurrentTime)return t.currentTime&&(t.contentTimelines.removeChild(t.currentTime),delete t.currentTime),void 0;if(!t.currentTime){var n=document.createElement("DIV");n.className="timeline-currenttime",n.style.position="absolute",n.style.top="0px",n.style.height="100%",t.contentTimelines.appendChild(n),t.currentTime=n}var s=new Date,r=new Date(s.valueOf()+this.clientTimeOffset),a=this.timeToScreen(r),o=a>-i.contentWidth&&a<2*i.contentWidth;t.currentTime.style.display=o?"":"none",t.currentTime.style.left=a+"px",t.currentTime.title="Current time: "+r,void 0!=this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer);var l=this,u=function(){l.repaintCurrentTime()},c=1/this.conversion.factor/2;30>c&&(c=30),this.currentTimeTimer=setTimeout(u,c)},links.Timeline.prototype.repaintCustomTime=function(){var e=this.options,t=this.dom,i=this.size;if(!e.showCustomTime)return t.customTime&&(t.contentTimelines.removeChild(t.customTime),delete t.customTime),void 0;if(!t.customTime){var n=document.createElement("DIV");n.className="timeline-customtime",n.style.position="absolute",n.style.top="0px",n.style.height="100%";var s=document.createElement("DIV");s.style.position="relative",s.style.top="0px",s.style.left="-10px",s.style.height="100%",s.style.width="20px",n.appendChild(s),t.contentTimelines.appendChild(n),t.customTime=n,this.customTime=new Date}var r=this.timeToScreen(this.customTime),a=r>-i.contentWidth&&r<2*i.contentWidth;t.customTime.style.display=a?"":"none",t.customTime.style.left=r+"px",t.customTime.title="Time: "+this.customTime},links.Timeline.prototype.repaintDeleteButton=function(){var e=this.dom,t=e.items.frame,i=e.items.deleteButton;i||(i=document.createElement("DIV"),i.className="timeline-navigation-delete",i.style.position="absolute",t.appendChild(i),e.items.deleteButton=i);var n=this.selection&&void 0!==this.selection.index?this.selection.index:-1,s=this.selection&&void 0!==this.selection.index?this.items[n]:void 0;if(s&&s.rendered&&this.isEditable(s)){var r=s.getRight(this),a=s.top;i.style.left=r+"px",i.style.top=a+"px",i.style.display="",t.removeChild(i),t.appendChild(i)}else i.style.display="none"},links.Timeline.prototype.repaintDragAreas=function(){var e=this.options,t=this.dom,i=this.dom.items.frame,n=t.items.dragLeft;n||(n=document.createElement("DIV"),n.className="timeline-event-range-drag-left",n.style.position="absolute",i.appendChild(n),t.items.dragLeft=n);var s=t.items.dragRight;s||(s=document.createElement("DIV"),s.className="timeline-event-range-drag-right",s.style.position="absolute",i.appendChild(s),t.items.dragRight=s);var r=this.selection&&void 0!==this.selection.index?this.selection.index:-1,a=this.selection&&void 0!==this.selection.index?this.items[r]:void 0;if(a&&a.rendered&&this.isEditable(a)&&(a instanceof links.Timeline.ItemRange||a instanceof links.Timeline.ItemFloatingRange)){var o=a.getLeft(this),l=a.getRight(this),u=a.top,c=a.height;n.style.left=o+"px",n.style.top=u+"px",n.style.width=e.dragAreaWidth+"px",n.style.height=c+"px",n.style.display="",i.removeChild(n),i.appendChild(n),s.style.left=l-e.dragAreaWidth+"px",s.style.top=u+"px",s.style.width=e.dragAreaWidth+"px",s.style.height=c+"px",s.style.display="",i.removeChild(s),i.appendChild(s)}else n.style.display="none",s.style.display="none"},links.Timeline.prototype.repaintNavigation=function(){var e=this,t=this.options,i=this.dom,n=i.frame,s=i.navBar;if(!s){var r=t.showButtonNew&&t.editable,a=t.showNavigation&&(t.zoomable||t.moveable);if((a||r)&&(s=document.createElement("DIV"),s.style.position="absolute",s.className="timeline-navigation ui-widget ui-state-highlight ui-corner-all",t.groupsOnRight?s.style.left="10px":s.style.right="10px",t.axisOnTop?s.style.bottom="10px":s.style.top="10px",i.navBar=s,n.appendChild(s)),r){s.addButton=document.createElement("DIV"),s.addButton.className="timeline-navigation-new",s.addButton.title=t.CREATE_NEW_EVENT;var o=document.createElement("SPAN");o.className="ui-icon ui-icon-circle-plus",s.addButton.appendChild(o);var l=function(i){links.Timeline.preventDefault(i),links.Timeline.stopPropagation(i);var n=e.size.contentWidth,s=n/2,r=e.screenToTime(s);t.snapEvents&&e.step.snap(r);var a=t.NEW,o=e.groups.length?e.groups[0].content:void 0,l=!0;e.addItem({start:r,content:a,group:o},l);var u=e.items.length-1;e.selectItem(u),e.applyAdd=!0,e.trigger("add"),e.applyAdd?(e.render({animate:!1}),e.selectItem(u)):e.deleteItem(u)};links.Timeline.addEventListener(s.addButton,"mousedown",l),s.appendChild(s.addButton)}if(r&&a&&links.Timeline.addClassName(s.addButton,"timeline-navigation-new-line"),a){if(t.zoomable){s.zoomInButton=document.createElement("DIV"),s.zoomInButton.className="timeline-navigation-zoom-in",s.zoomInButton.title=this.options.ZOOM_IN;var u=document.createElement("SPAN");u.className="ui-icon ui-icon-circle-zoomin",s.zoomInButton.appendChild(u);var c=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(.4),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.zoomInButton,"mousedown",c),s.appendChild(s.zoomInButton),s.zoomOutButton=document.createElement("DIV"),s.zoomOutButton.className="timeline-navigation-zoom-out",s.zoomOutButton.title=this.options.ZOOM_OUT;var h=document.createElement("SPAN");h.className="ui-icon ui-icon-circle-zoomout",s.zoomOutButton.appendChild(h);var d=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(-.4),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.zoomOutButton,"mousedown",d),s.appendChild(s.zoomOutButton)}if(t.moveable){s.moveLeftButton=document.createElement("DIV"),s.moveLeftButton.className="timeline-navigation-move-left",s.moveLeftButton.title=this.options.MOVE_LEFT;var p=document.createElement("SPAN");p.className="ui-icon ui-icon-circle-arrow-w",s.moveLeftButton.appendChild(p);var m=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(-.2),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.moveLeftButton,"mousedown",m),s.appendChild(s.moveLeftButton),s.moveRightButton=document.createElement("DIV"),s.moveRightButton.className="timeline-navigation-move-right",s.moveRightButton.title=this.options.MOVE_RIGHT;var f=document.createElement("SPAN");f.className="ui-icon ui-icon-circle-arrow-e",s.moveRightButton.appendChild(f);var g=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(.2),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.moveRightButton,"mousedown",g),s.appendChild(s.moveRightButton)}}}},links.Timeline.prototype.setCurrentTime=function(e){var t=new Date;this.clientTimeOffset=e.valueOf()-t.valueOf(),this.repaintCurrentTime()},links.Timeline.prototype.getCurrentTime=function(){var e=new Date;return new Date(e.valueOf()+this.clientTimeOffset)},links.Timeline.prototype.setCustomTime=function(e){this.customTime=new Date(e.valueOf()),this.repaintCustomTime()},links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},links.Timeline.prototype.setScale=function(e,t){this.step.setScale(e,t),this.render()},links.Timeline.prototype.setAutoScale=function(e){this.step.setAutoScale(e),this.render()},links.Timeline.prototype.redraw=function(){this.setData(this.data)},links.Timeline.prototype.checkResize=function(){this.render()},links.Timeline.prototype.isEditable=function(e){return e?void 0!=e.editable?e.editable:this.options.editable:!1
},links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf(),this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())},links.Timeline.prototype.screenToTime=function(e){var t=this.conversion;return new Date(e/t.factor+t.offset)},links.Timeline.prototype.timeToScreen=function(e){var t=this.conversion;return(e.valueOf()-t.offset)*t.factor},links.Timeline.prototype.onTouchStart=function(e){var t=this.eventParams,i=this;if(!t.touchDown){t.touchDown=!0,t.zoomed=!1,this.onMouseDown(e),t.onTouchMove||(t.onTouchMove=function(e){i.onTouchMove(e)},links.Timeline.addEventListener(document,"touchmove",t.onTouchMove)),t.onTouchEnd||(t.onTouchEnd=function(e){i.onTouchEnd(e)},links.Timeline.addEventListener(document,"touchend",t.onTouchEnd));var n=links.Timeline.getTarget(e),s=this.getItemIndex(n);t.doubleTapStartPrev=t.doubleTapStart,t.doubleTapStart=(new Date).valueOf(),t.doubleTapItemPrev=t.doubleTapItem,t.doubleTapItem=s,links.Timeline.preventDefault(e)}},links.Timeline.prototype.onTouchMove=function(e){var t=this.eventParams;if(e.scale&&1!==e.scale&&(t.zoomed=!0),t.zoomed){if(this.options.zoomable){t.zoomed=!0;var i=e.scale,n=t.end.valueOf()-t.start.valueOf(),s=n/i,r=s-n,a=new Date(parseInt(t.start.valueOf()-r/2)),o=new Date(parseInt(t.end.valueOf()+r/2));this.setVisibleChartRange(a,o),this.trigger("rangechange")}}else this.onMouseMove(e);links.Timeline.preventDefault(e)},links.Timeline.prototype.onTouchEnd=function(e){var t=this.eventParams,i=this;t.touchDown=!1,t.zoomed&&this.trigger("rangechanged"),t.onTouchMove&&(links.Timeline.removeEventListener(document,"touchmove",t.onTouchMove),delete t.onTouchMove),t.onTouchEnd&&(links.Timeline.removeEventListener(document,"touchend",t.onTouchEnd),delete t.onTouchEnd),this.onMouseUp(e);var n=500,s=(new Date).valueOf(),r=links.Timeline.getTarget(e);this.getItemIndex(r),t.doubleTapStartPrev&&s-t.doubleTapStartPrev<n&&t.doubleTapItem==t.doubleTapItemPrev&&(t.touchDown=!0,i.onDblClick(e),t.touchDown=!1),links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseDown=function(e){e=e||window.event;var t=this.eventParams,i=this.options,n=this.dom,s=e.which?1==e.which:1==e.button;if(s||t.touchDown){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e),t.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content),t.frameTop=links.Timeline.getAbsoluteTop(this.dom.content),t.previousLeft=0,t.previousOffset=0,t.moved=!1,t.start=new Date(this.start.valueOf()),t.end=new Date(this.end.valueOf()),t.target=links.Timeline.getTarget(e);var r=n.items&&n.items.dragLeft?n.items.dragLeft:void 0,a=n.items&&n.items.dragRight?n.items.dragRight:void 0;if(t.itemDragLeft=t.target===r,t.itemDragRight=t.target===a,t.itemDragLeft||t.itemDragRight?(t.itemIndex=this.selection&&void 0!==this.selection.index?this.selection.index:void 0,delete t.clusterIndex):(t.itemIndex=this.getItemIndex(t.target),t.clusterIndex=this.getClusterIndex(t.target)),t.customTime=t.target===n.customTime||t.target.parentNode===n.customTime?this.customTime:void 0,t.addItem=i.editable&&e.ctrlKey,t.addItem){var o=t.mouseX-t.frameLeft,l=t.mouseY-t.frameTop,u=this.screenToTime(o);i.snapEvents&&this.step.snap(u);var c=new Date(u.valueOf()),h=i.NEW,d=this.getGroupFromHeight(l);this.addItem({start:u,end:c,content:h,group:this.getGroupName(d)}),t.itemIndex=this.items.length-1,delete t.clusterIndex,this.selectItem(t.itemIndex),t.itemDragRight=!0}var p=this.items[t.itemIndex],m=this.isSelected(t.itemIndex);if(t.editItem=m&&this.isEditable(p),t.editItem?(t.itemStart=p.start,t.itemEnd=p.end,t.itemGroup=p.group,t.itemLeft=p.getLeft(this),t.itemRight=p.getRight(this)):this.dom.frame.style.cursor="move",!t.touchDown){var f=this;t.onMouseMove||(t.onMouseMove=function(e){f.onMouseMove(e)},links.Timeline.addEventListener(document,"mousemove",t.onMouseMove)),t.onMouseUp||(t.onMouseUp=function(e){f.onMouseUp(e)},links.Timeline.addEventListener(document,"mouseup",t.onMouseUp)),links.Timeline.preventDefault(e)}}},links.Timeline.prototype.onMouseMove=function(e){e=e||window.event;var t=this.eventParams,i=this.size,n=this.dom,s=this.options,r=links.Timeline.getPageX(e),a=links.Timeline.getPageY(e);void 0==t.mouseX&&(t.mouseX=r),void 0==t.mouseY&&(t.mouseY=a);var o=r-t.mouseX;if(a-t.mouseY,Math.abs(o)>=1&&(t.moved=!0),t.customTime){var l=this.timeToScreen(t.customTime),u=l+o;this.customTime=this.screenToTime(u),this.repaintCustomTime(),this.trigger("timechange")}else if(t.editItem){var c,h,d=this.items[t.itemIndex];t.itemDragLeft&&s.timeChangeable?(c=t.itemLeft+o,h=t.itemRight,d.start=this.screenToTime(c),s.snapEvents&&(this.step.snap(d.start),c=this.timeToScreen(d.start)),c>h&&(c=h,d.start=this.screenToTime(c)),this.trigger("change")):t.itemDragRight&&s.timeChangeable?(c=t.itemLeft,h=t.itemRight+o,d.end=this.screenToTime(h),s.snapEvents&&(this.step.snap(d.end),h=this.timeToScreen(d.end)),c>h&&(h=c,d.end=this.screenToTime(h)),this.trigger("change")):s.timeChangeable&&(c=t.itemLeft+o,d.start=this.screenToTime(c),s.snapEvents&&(this.step.snap(d.start),c=this.timeToScreen(d.start)),d.end&&(h=c+(t.itemRight-t.itemLeft),d.end=this.screenToTime(h)),this.trigger("change")),d.setPosition(c,h);var p=t.itemDragLeft||t.itemDragRight;if(this.groups.length&&!p){var m=a-t.frameTop,f=this.getGroupFromHeight(m);if(s.groupsChangeable&&d.group!==f){var g=this.items.indexOf(d);this.changeItem(g,{group:this.getGroupName(f)})}else this.repaintDeleteButton(),this.repaintDragAreas()}else this.render()}else if(s.moveable){var v=t.end.valueOf()-t.start.valueOf(),_=Math.round(-o/i.contentWidth*v),y=new Date(t.start.valueOf()+_),b=new Date(t.end.valueOf()+_);this.applyRange(y,b);var w=this.start.valueOf()-y.valueOf();w&&(_+=w),this.recalcConversion();var x=t.previousLeft||0,M=parseFloat(n.items.frame.style.left)||0,T=t.previousOffset||0,k=T+(M-x),C=-_/v*i.contentWidth+k;n.items.frame.style.left=C+"px",t.previousOffset=k,t.previousLeft=parseFloat(n.items.frame.style.left)||C,this.repaintCurrentTime(),this.repaintCustomTime(),this.repaintAxis(),this.trigger("rangechange")}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseUp=function(e){var t=this.eventParams,i=this.options;if(e=e||window.event,this.dom.frame.style.cursor="auto",t.onMouseMove&&(links.Timeline.removeEventListener(document,"mousemove",t.onMouseMove),delete t.onMouseMove),t.onMouseUp&&(links.Timeline.removeEventListener(document,"mouseup",t.onMouseUp),delete t.onMouseUp),t.customTime)this.trigger("timechanged");else if(t.editItem){var n=this.items[t.itemIndex];if(t.moved||t.addItem){if(this.applyChange=!0,this.applyAdd=!0,this.updateData(t.itemIndex,{start:n.start,end:n.end}),this.trigger(t.addItem?"add":"changed"),n=this.items[t.itemIndex],t.addItem)this.applyAdd?this.updateData(t.itemIndex,{start:n.start,end:n.end,content:n.content,group:this.getGroupName(n.group)}):this.deleteItem(t.itemIndex);else if(this.applyChange)this.updateData(t.itemIndex,{start:n.start,end:n.end});else{delete this.applyChange,delete this.applyAdd;var n=this.items[t.itemIndex];n.dom,n.start=t.itemStart,n.end=t.itemEnd,n.group=t.itemGroup,n.setPosition(t.itemLeft,t.itemRight),this.updateData(t.itemIndex,{start:t.itemStart,end:t.itemEnd})}this.options.cluster&&this.clusterGenerator.updateData(),this.render()}}else t.moved||t.zoomed?(this.render(),(t.moved&&i.moveable||t.zoomed&&i.zoomable)&&this.trigger("rangechanged")):t.target===this.dom.items.deleteButton?this.selection&&void 0!==this.selection.index&&this.confirmDeleteItem(this.selection.index):i.selectable&&(void 0!=t.itemIndex?this.isSelected(t.itemIndex)||(this.selectItem(t.itemIndex),this.trigger("select")):void 0!=t.clusterIndex?(this.selectCluster(t.clusterIndex),this.trigger("select")):i.unselectable&&(this.unselectItem(),this.trigger("select")))},links.Timeline.prototype.onDblClick=function(e){var t=this.eventParams,i=this.options,n=this.dom;if(this.size,e=e||window.event,void 0!=t.itemIndex){var s=this.items[t.itemIndex];s&&this.isEditable(s)&&this.trigger("edit")}else if(i.editable){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e);var r=t.mouseX-links.Timeline.getAbsoluteLeft(n.content),a=t.mouseY-links.Timeline.getAbsoluteTop(n.content),o=this.screenToTime(r);i.snapEvents&&this.step.snap(o);var l=i.NEW,u=this.getGroupFromHeight(a),c=!0;this.addItem({start:o,content:l,group:this.getGroupName(u)},c),t.itemIndex=this.items.length-1,this.selectItem(t.itemIndex),this.applyAdd=!0,this.trigger("add"),this.applyAdd?(this.render({animate:!1}),this.selectItem(t.itemIndex)):this.deleteItem(t.itemIndex)}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseWheel=function(e){if(this.options.zoomable){e||(e=window.event);var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this,n=function(){var n=t/5,s=links.Timeline.getAbsoluteLeft(i.dom.content),r=links.Timeline.getPageX(e),a=void 0!=r&&void 0!=s?i.screenToTime(r-s):void 0;i.zoom(n,a),i.trigger("rangechange"),i.trigger("rangechanged")},s=function(){i.move(t*-.2),i.trigger("rangechange"),i.trigger("rangechanged")};e.shiftKey?s():n()}links.Timeline.preventDefault(e)}},links.Timeline.prototype.zoom=function(e,t){void 0==t&&(t=new Date((this.start.valueOf()+this.end.valueOf())/2)),e>=1&&(e=.9),-1>=e&&(e=-.9),0>e&&(e/=1+e);var i=this.start.valueOf()-t,n=this.end.valueOf()-t,s=new Date(this.start.valueOf()-i*e),r=new Date(this.end.valueOf()-n*e),a=r.valueOf()-s.valueOf(),o=Number(this.options.zoomMin)||10;10>o&&(o=10),a>=o&&(this.applyRange(s,r,t),this.render({animate:this.options.animate&&this.options.animateZoom}))},links.Timeline.prototype.move=function(e){var t=this.end.valueOf()-this.start.valueOf(),i=new Date(this.start.valueOf()+t*e),n=new Date(this.end.valueOf()+t*e);this.applyRange(i,n),this.render()},links.Timeline.prototype.applyRange=function(e,t,i){var n=e.valueOf(),s=t.valueOf(),r=s-n,a=this.options,o=31536e6,l=Number(a.zoomMin)||10;10>l&&(l=10);var u=Number(a.zoomMax)||1e4*o;u>1e4*o&&(u=1e4*o),l>u&&(u=l);var c=a.min?a.min.valueOf():void 0,h=a.max?a.max.valueOf():void 0;if(void 0!=c&&void 0!=h){if(c>=h){var d=864e5;h=c+d}u>h-c&&(u=h-c),l>h-c&&(l=h-c)}if(n>=s&&(s+=864e5),l>r){var p=l-r,m=i?(i.valueOf()-n)/r:.5;n-=Math.round(p*m),s+=Math.round(p*(1-m))}if(r>u){var p=r-u,m=i?(i.valueOf()-n)/r:.5;n+=Math.round(p*m),s-=Math.round(p*(1-m))}if(void 0!=c){var p=n-c;0>p&&(n-=p,s-=p)}if(void 0!=h){var p=h-s;0>p&&(n+=p,s+=p)}this.start=new Date(n),this.end=new Date(s)},links.Timeline.prototype.confirmDeleteItem=function(e){this.applyDelete=!0,this.isSelected(e)||this.selectItem(e),this.trigger("delete"),this.applyDelete&&this.deleteItem(e),delete this.applyDelete},links.Timeline.prototype.deleteItem=function(e,t){if(e>=this.items.length)throw"Cannot delete row, index out of range";this.selection&&void 0!==this.selection.index&&(this.selection.index==e?this.unselectItem():this.selection.index>e&&this.selection.index--);var i=this.items.splice(e,1)[0];if(this.renderQueue.hide.push(i),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRow(e);else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(e,1)}this.options.cluster&&this.clusterGenerator.updateData(),t||this.render()},links.Timeline.prototype.deleteAllItems=function(){if(this.unselectItem(),this.clearItems(),this.deleteGroups(),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRows(0,this.data.getNumberOfRows());else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(0,this.data.length)}this.options.cluster&&this.clusterGenerator.updateData(),this.render()},links.Timeline.prototype.getGroupFromHeight=function(e){var t,i,n=this.groups;if(n.length){if(this.options.axisOnTop){for(t=n.length-1;t>=0;t--)if(i=n[t],e>i.top)return i}else for(t=0;t<n.length;t++)if(i=n[t],e>i.top)return i;return i}return void 0},links.Timeline.Item=function(e,t){if(e&&(this.start=e.start,this.end=e.end,this.content=e.content,this.className=e.className,this.editable=e.editable,this.group=e.group,this.type=e.type),this.top=0,this.left=0,this.width=0,this.height=0,this.lineWidth=0,this.dotWidth=0,this.dotHeight=0,this.rendered=!1,t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])},links.Timeline.Item.prototype.reflow=function(){return!1},links.Timeline.Item.prototype.getImageUrls=function(e){this.dom&&links.imageloader.filterImageUrls(this.dom,e)},links.Timeline.Item.prototype.select=function(){},links.Timeline.Item.prototype.unselect=function(){},links.Timeline.Item.prototype.createDOM=function(){},links.Timeline.Item.prototype.showDOM=function(){},links.Timeline.Item.prototype.hideDOM=function(){},links.Timeline.Item.prototype.updateDOM=function(){},links.Timeline.Item.prototype.updatePosition=function(){},links.Timeline.Item.prototype.isRendered=function(){return this.rendered},links.Timeline.Item.prototype.isVisible=function(){return!1},links.Timeline.Item.prototype.setPosition=function(){},links.Timeline.Item.prototype.getLeft=function(){return 0},links.Timeline.Item.prototype.getRight=function(){return 0},links.Timeline.Item.prototype.getWidth=function(){return this.width||0},links.Timeline.ItemBox=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemBox.prototype=new links.Timeline.Item,links.Timeline.ItemBox.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.line.offsetWidth,s=this.dotHeight!=t||this.dotWidth!=i||this.lineWidth!=n;return this.dotHeight=t,this.dotWidth=i,this.lineWidth=n,s},links.Timeline.ItemBox.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute",e.style.left=this.left+"px",e.style.top=this.top+"px";var t=document.createElement("DIV");t.className="timeline-event-content",t.innerHTML=this.content,e.appendChild(t);var i=document.createElement("DIV");i.style.position="absolute",i.style.width="0px",e.line=i;var n=document.createElement("DIV");return n.style.position="absolute",n.style.width="0px",n.style.height="0px",e.dot=n,this.dom=e,this.updateDOM(),e},links.Timeline.ItemBox.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),e.insertBefore(t.line,e.firstChild),e.appendChild(t.dot),this.rendered=!0)},links.Timeline.ItemBox.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),e.line&&e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot&&e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.rendered=!1)},links.Timeline.ItemBox.prototype.updateDOM=function(){var e=this.dom;if(e){var t=e.line,i=e.dot;e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-box ui-widget ui-state-default",t.className="timeline-event timeline-event-line ui-widget ui-state-default",i.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(i,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className),links.Timeline.addClassName(i,this.className))}},links.Timeline.ItemBox.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start),n=e.options.axisOnTop,s=e.size.axis.top,r=e.size.axis.height,a=e.options.box&&e.options.box.align?e.options.box.align:void 0;t.style.top=this.top+"px",t.style.left="right"==a?i-this.width+"px":"left"==a?i+"px":i-this.width/2+"px";var o=t.line,l=t.dot;o.style.left=i-this.lineWidth/2+"px",l.style.left=i-this.dotWidth/2+"px",n?(o.style.top=r+"px",o.style.height=Math.max(this.top-r,0)+"px",l.style.top=r-this.dotHeight/2+"px"):(o.style.top=this.top+this.height+"px",o.style.height=Math.max(s-this.top-this.height,0)+"px",l.style.top=s-this.dotHeight/2+"px")}},links.Timeline.ItemBox.prototype.isVisible=function(e,t){return this.cluster?!1:this.start>e&&this.start<t},links.Timeline.ItemBox.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.width/2+"px",t.line.style.left=e-this.lineWidth/2+"px",t.dot.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemBox.prototype.getLeft=function(e){var t=e.options.box&&e.options.box.align?e.options.box.align:void 0,i=e.timeToScreen(this.start);return i-="right"==t?width:this.width/2},links.Timeline.ItemBox.prototype.getRight=function(e){var t,i=e.options.box&&e.options.box.align?e.options.box.align:void 0,n=e.timeToScreen(this.start);return t="right"==i?n:"left"==i?n+this.width:n+this.width/2},links.Timeline.ItemRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemRange.prototype=new links.Timeline.Item,links.Timeline.ItemRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=e.timeToScreen(this.start),s=e.timeToScreen(this.end);-i>n&&(n=-i),s>2*i&&(s=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(s-n,1)+"px"}},links.Timeline.ItemRange.prototype.isVisible=function(e,t){return this.cluster?!1:this.end>e&&this.start<t},links.Timeline.ItemRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemRange.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemRange.prototype.getRight=function(e){return e.timeToScreen(this.end)},links.Timeline.ItemRange.prototype.getWidth=function(e){return e.timeToScreen(this.end)-e.timeToScreen(this.start)},links.Timeline.ItemFloatingRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemFloatingRange.prototype=new links.Timeline.Item,links.Timeline.ItemFloatingRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemFloatingRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemFloatingRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemFloatingRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemFloatingRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=this.getLeft(e),s=this.getRight(e);-i>n&&(n=-i),s>2*i&&(s=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(s-n,1)+"px"}},links.Timeline.ItemFloatingRange.prototype.isVisible=function(e,t){return this.cluster?!1:this.end&&this.start?this.end>e&&this.start<t:this.start?this.start<t:this.end?this.end>e:!0},links.Timeline.ItemFloatingRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemFloatingRange.prototype.getLeft=function(e){return this.start?e.timeToScreen(this.start):0},links.Timeline.ItemFloatingRange.prototype.getRight=function(e){return this.end?e.timeToScreen(this.end):e.size.contentWidth},links.Timeline.ItemFloatingRange.prototype.getWidth=function(e){return this.getRight(e)-this.getLeft(e)},links.Timeline.ItemDot=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemDot.prototype=new links.Timeline.Item,links.Timeline.ItemDot.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.content.offsetHeight,s=this.dotHeight!=t||this.dotWidth!=i||this.contentHeight!=n;return this.dotHeight=t,this.dotWidth=i,this.contentHeight=n,s},links.Timeline.ItemDot.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");t.className="timeline-event-content",e.appendChild(t);var i=document.createElement("DIV");return i.style.position="absolute",i.style.width="0px",i.style.height="0px",e.appendChild(i),e.content=t,e.dot=i,this.dom=e,this.updateDOM(),e},links.Timeline.ItemDot.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemDot.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var e=this.dom,t=e.dot;this.content&&this.content.tagName?(e.firstChild.innerHTML="",e.firstChild.appendChild(this.content)):e.firstChild.innerHTML=this.content,e.className="timeline-event-dot-container",t.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className))}},links.Timeline.ItemDot.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start);t.style.top=this.top+"px",t.style.left=i-this.dotWidth/2+"px",t.content.style.marginLeft=1.5*this.dotWidth+"px",t.dot.style.top=(this.height-this.dotHeight)/2+"px"}},links.Timeline.ItemDot.prototype.isVisible=function(e,t){return this.cluster?!1:this.start>e&&this.start<t},links.Timeline.ItemDot.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemDot.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemDot.prototype.getRight=function(e){return e.timeToScreen(this.start)+this.width},links.Timeline.prototype.getItem=function(e){if(e>=this.items.length)throw"Cannot get item, index out of range";var t,i=this.data;if(google&&google.visualization&&i instanceof google.visualization.DataTable){var n=links.Timeline.mapColumnIds(i);t={};for(var s in n)n.hasOwnProperty(s)&&(t[s]=this.data.getValue(e,n[s]))}else{if(!links.Timeline.isArray(this.data))throw"Unknown data type. DataTable or Array expected.";t=links.Timeline.clone(this.data[e])}var r=this.items[e];return t.start=new Date(r.start.valueOf()),r.end&&(t.end=new Date(r.end.valueOf())),t.content=r.content,r.group&&(t.group=this.getGroupName(r.group)),r.className&&(t.className=r.className),"undefined"!=typeof r.editable&&(t.editable=r.editable),r.type&&(t.type=r.type),t},links.Timeline.prototype.getCluster=function(e){if(e>=this.clusters.length)throw"Cannot get cluster, index out of range";var t={},i=this.clusters[e],n=i.items;t.start=new Date(i.start.valueOf()),i.type&&(t.type=i.type),t.items=[];for(var s=0;s<n.length;s++)for(var r=0;r<this.items.length;r++)if(this.items[r]==n[s]){t.items.push(this.getItem(r));break}return t},links.Timeline.prototype.addItem=function(e,t){var i=[e];this.addItems(i,t)},links.Timeline.prototype.addItems=function(e,t){var i=this,n=this.items;e.forEach(function(e){var t=n.length;n.push(i.createItem(e)),i.updateData(t,e)}),this.options.cluster&&this.clusterGenerator.updateData(),t||this.render({animate:!1})},links.Timeline.prototype.createItem=function(e){var t=e.type||(e.end?"range":this.options.style),i=links.Timeline.clone(e);i.type=t,i.group=this.getGroup(e.group);var n,s=this.options;return n=s.axisOnTop?this.size.axis.height+s.eventMarginAxis+s.eventMargin/2:this.size.contentHeight-s.eventMarginAxis-s.eventMargin/2,t in this.itemTypes?new this.itemTypes[t](i,{top:n}):(console.log('ERROR: Unknown event type "'+t+'"'),new links.Timeline.Item(i,{top:n}))},links.Timeline.prototype.changeItem=function(e,t,i){var n=this.items[e];if(!n)throw"Cannot change item, index out of range";var s=this.createItem({start:t.hasOwnProperty("start")?t.start:n.start,end:t.hasOwnProperty("end")?t.end:n.end,content:t.hasOwnProperty("content")?t.content:n.content,group:t.hasOwnProperty("group")?t.group:this.getGroupName(n.group),className:t.hasOwnProperty("className")?t.className:n.className,editable:t.hasOwnProperty("editable")?t.editable:n.editable,type:t.hasOwnProperty("type")?t.type:n.type});this.items[e]=s,this.renderQueue.hide.push(n),this.renderQueue.show.push(s),this.updateData(e,t),this.options.cluster&&this.clusterGenerator.updateData(),i||(this.render({animate:!1}),this.selection&&this.selection.index==e&&s.select())},links.Timeline.prototype.deleteGroups=function(){this.groups=[],this.groupIndexes={}},links.Timeline.prototype.getGroup=function(e){var t=this.groups,i=this.groupIndexes,n=void 0,s=i[e];if(void 0==s&&void 0!=e){n={content:e,labelTop:0,lineTop:0},t.push(n),1==this.options.groupsOrder?t=t.sort(function(e,t){return e.content>t.content?1:e.content<t.content?-1:0}):"function"==typeof this.options.groupsOrder&&(t=t.sort(this.options.groupsOrder));for(var r=0,a=t.length;a>r;r++)i[t[r].content]=r}else n=t[s];return n},links.Timeline.prototype.getGroupName=function(e){return e?e.content:void 0},links.Timeline.prototype.cancelChange=function(){this.applyChange=!1},links.Timeline.prototype.cancelDelete=function(){this.applyDelete=!1},links.Timeline.prototype.cancelAdd=function(){this.applyAdd=!1},links.Timeline.prototype.setSelection=function(e){if(void 0!=e&&e.length>0){if(void 0!=e[0].row){var t=e[0].row;if(this.items[t]){var i=this.items[t];this.selectItem(t);var n,s=i.start,r=i.end;n=void 0!=r?(r.valueOf()+s.valueOf())/2:s.valueOf();var a=this.end.valueOf()-this.start.valueOf(),o=new Date(n-a/2),l=new Date(n+a/2);return this.setVisibleChartRange(o,l),!0}}}else this.unselectItem();return!1},links.Timeline.prototype.getSelection=function(){var e=[];return this.selection&&(void 0!==this.selection.index?e.push({row:this.selection.index}):e.push({cluster:this.selection.cluster})),e},links.Timeline.prototype.selectItem=function(e){if(this.unselectItem(),this.selection=void 0,void 0!=this.items[e]){var t=this.items[e];t.dom,this.selection={index:e},t&&t.dom&&(this.isEditable(t)&&(t.dom.style.cursor="move"),t.select()),this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.selectCluster=function(e){this.unselectItem(),this.selection=void 0,void 0!=this.clusters[e]&&(this.selection={cluster:e},this.repaintDeleteButton(),this.repaintDragAreas())},links.Timeline.prototype.isSelected=function(e){return this.selection&&this.selection.index==e},links.Timeline.prototype.unselectItem=function(){if(this.selection&&void 0!==this.selection.index){var e=this.items[this.selection.index];if(e&&e.dom){var t=e.dom;t.style.cursor="",e.unselect()}this.selection=void 0,this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.stackItems=function(e){void 0==e&&(e=!1);var t=this.stack;if(t||(t={},this.stack=t),t.sortedItems=this.stackOrder(this.renderedItems),t.finalItems=this.stackCalculateFinal(t.sortedItems),e||t.timer){var i=this,n=function(){var e=i.stackMoveOneStep(t.sortedItems,t.finalItems);i.repaint(),e?delete t.timer:t.timer=setTimeout(n,30)};t.timer||(t.timer=setTimeout(n,30))}else this.stackMoveToFinal(t.sortedItems,t.finalItems)},links.Timeline.prototype.stackCancelAnimation=function(){this.stack&&this.stack.timer&&(clearTimeout(this.stack.timer),delete this.stack.timer)},links.Timeline.prototype.getItemsByGroup=function(e){for(var t={},i=0;i<e.length;++i){var n=e[i],s="undefined";n.group&&(s=n.group.content?n.group.content:n.group),t[s]||(t[s]=[]),t[s].push(n)}return t},links.Timeline.prototype.stackOrder=function(e){var t=e.concat([]),i=this.options.customStackOrder&&"function"==typeof this.options.customStackOrder?this.options.customStackOrder:function(e,t){return!(e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange)||t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange?e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange||!(t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange)?e.left-t.left:1:-1};return t.sort(i),t},links.Timeline.prototype.stackCalculateFinal=function(e){var t,i,n=this.size,s=this.options,r=s.axisOnTop,a=s.eventMargin,o=s.eventMarginAxis,l=r?n.axis.height+o+a/2:n.contentHeight-o-a/2,u=[];for(t=this.getItemsByGroup(e),j=0;j<this.groups.length;++j){var c=this.groups[j];t[c.content]?(i=this.finalItemsPosition(t[c.content],l,c),i.forEach(function(e){u.push(e)}),r?l+=c.itemsHeight+a:l-=c.itemsHeight+a):r?l+=s.groupMinHeight+a:l-=s.groupMinHeight+a}return t.undefined&&(i=this.finalItemsPosition(t.undefined,l),i.forEach(function(e){u.push(e)})),u},links.Timeline.prototype.finalItemsPosition=function(e,t,i){var n,s,r,a=this.options,o=a.axisOnTop,l=a.eventMargin;for(r=this.initialItemsPosition(e,t),n=0,s=r.length;s>n;n++){var u=r[n],c=null;if(this.options.stackEvents)do c=this.stackItemsCheckOverlap(r,n,0,n-1),null!=c&&(u.top=o?c.top+c.height+l:c.top-u.height-l,u.bottom=u.top+u.height);while(c);i&&(i.itemsHeight=o?i.itemsHeight?Math.max(i.itemsHeight,u.bottom-t):u.height+l:i.itemsHeight?Math.max(i.itemsHeight,t-u.top):u.height+l)
}return r},links.Timeline.prototype.initialItemsPosition=function(e,t){for(var i=this.options,n=i.axisOnTop,s=[],r=0,a=e.length;a>r;++r){var o,l,u=e[r],c=u.height,h=u.getWidth(this),d=u.getRight(this),p=d-h;o=n?t:t-c,l=o+c,s.push({left:p,top:o,right:d,bottom:l,height:c,item:u})}return s},links.Timeline.prototype.stackMoveOneStep=function(e,t){for(var i=!0,n=0,s=t.length;s>n;n++){var r=t[n],a=r.item,o=parseInt(a.top),l=parseInt(r.top),u=l-o;if(u){var c=l==o?0:l>o?1:-1;Math.abs(u)>4&&(c=u/4);var h=parseInt(o+c);h!=l&&(i=!1),a.top=h,a.bottom=a.top+a.height}else a.top=r.top,a.bottom=r.bottom;a.left=r.left,a.right=r.right}return i},links.Timeline.prototype.stackMoveToFinal=function(e,t){for(var i=0,n=t.length;n>i;i++){var s=t[i],r=s.item;r.left=s.left,r.top=s.top,r.right=s.right,r.bottom=s.bottom}},links.Timeline.prototype.stackItemsCheckOverlap=function(e,t,i,n){for(var s=this.options.eventMargin,r=this.collision,a=e[t],o=n;o>=i;o--){var l=e[o];if(r(a,l,s)&&o!=t)return l}return void 0},links.Timeline.prototype.collision=function(e,t,i){return void 0==i&&(i=0),e.left-i<t.right&&e.right+i>t.left&&e.top-i<t.bottom&&e.bottom+i>t.top},links.Timeline.prototype.trigger=function(e){var t=null;switch(e){case"rangechange":case"rangechanged":t={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":t={time:new Date(this.customTime.valueOf())}}links.events.trigger(this,e,t),google&&google.visualization&&google.visualization.events.trigger(this,e,t)},links.Timeline.prototype.clusterItems=function(){if(this.options.cluster){var e=this.clusterGenerator.getClusters(this.conversion.factor,this.options.clusterMaxItems);if(this.clusters!=e){var t=this.renderQueue;this.clusters&&this.clusters.forEach(function(e){t.hide.push(e),e.items.forEach(function(e){e.cluster=void 0})}),e.forEach(function(e){e.items.forEach(function(t){t.cluster=e})}),this.clusters=e}}},links.Timeline.prototype.filterItems=function(){function e(e){e.forEach(function(e){var i=e.rendered,r=e.isVisible(n,s);i!=r&&(i&&t.hide.push(e),r&&-1==t.show.indexOf(e)&&t.show.push(e))})}var t=this.renderQueue,i=this.end-this.start,n=new Date(this.start.valueOf()-i),s=new Date(this.end.valueOf()+i);e(this.items),this.clusters&&e(this.clusters)},links.Timeline.ClusterGenerator=function(e){this.timeline=e,this.clear()},links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[],this.groups={},this.clearCache()},links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]},links.Timeline.ClusterGenerator.prototype.setData=function(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!0,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)},links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=!0,this.applyOnChangedLevel=!1},links.Timeline.ClusterGenerator.prototype.filterData=function(){var e=this.items||[],t={};this.groups=t,e.forEach(function(e){var i=e.group?e.group.content:"",n=t[i];n||(n=[],t[i]=n),n.push(e),e.start&&(e.center=e.end?(e.start.valueOf()+e.end.valueOf())/2:e.start.valueOf())});for(var i in t)t.hasOwnProperty(i)&&t[i].sort(function(e,t){return e.center-t.center});this.dataChanged=!1},links.Timeline.ClusterGenerator.prototype.getClusters=function(e,t){var i=-1,n=2,s=0;if(e>0&&(i=Math.round(Math.log(100/e)/Math.log(n)),s=Math.pow(n,i)),this.dataChanged){var r=i!=this.cacheLevel,a=this.applyOnChangedLevel?r:!0;a&&(this.clearCache(),this.filterData())}this.cacheLevel=i;var o=this.cache[i];if(!o){o=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l))for(var u=this.groups[l],c=u.length,h=0;c>h;){for(var d=u[h],p=1,m=h-1;m>=0&&d.center-u[m].center<s/2;)u[m].cluster||p++,m--;for(var f=h+1;f<u.length&&u[f].center-d.center<s/2;)p++,f++;for(var g=o.length-1;g>=0&&d.center-o[g].center<s/2;)d.group==o[g].group&&p++,g--;if(p>t){for(var v=p-t+1,_=[],y=void 0,b=void 0,w=void 0,x=!1,M=0,T=h;_.length<v&&T<u.length;){var k=u[T],C=k.start.valueOf(),L=k.end?k.end.valueOf():k.start.valueOf();_.push(k),y=M?M/(M+1)*y+1/(M+1)*k.center:k.center,b=void 0!=b?Math.min(b,C):C,w=void 0!=w?Math.max(w,L):L,x=x||k instanceof links.Timeline.ItemRange||k instanceof links.Timeline.ItemFloatingRange,M++,T++}var D,E="Cluster containing "+M+" events. Zoom in to see the individual events.",S='<div title="'+E+'">'+M+" events</div>",A=d.group?d.group.content:void 0;D=x?this.timeline.createItem({start:new Date(b),end:new Date(w),content:S,group:A}):this.timeline.createItem({start:new Date(y),content:S,group:A}),D.isCluster=!0,D.items=_,D.items.forEach(function(e){e.cluster=D}),o.push(D),h+=v}else delete d.cluster,h+=1}this.cache[i]=o}return o},links.events=links.events||{listeners:[],indexOf:function(e){for(var t=this.listeners,i=0,n=this.listeners.length;n>i;i++){var s=t[i];if(s&&s.object==e)return i}return-1},addListener:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];s||(s={object:e,events:{}},this.listeners.push(s));var r=s.events[t];r||(r=[],s.events[t]=r),-1==r.indexOf(i)&&r.push(i)},removeListener:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];if(s){var r=s.events[t];if(r){var n=r.indexOf(i);-1!=n&&r.splice(n,1),0==r.length&&delete s.events[t]}var a=0,o=s.events;for(var l in o)o.hasOwnProperty(l)&&a++;0==a&&delete this.listeners[n]}},removeAllListeners:function(){this.listeners=[]},trigger:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];if(s){var r=s.events[t];if(r)for(var a=0,o=r.length;o>a;a++)r[a](i)}}},links.Timeline.StepDate=function(e,t,i){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1,this.setRange(e,t,i)},links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},links.Timeline.StepDate.prototype.setRange=function(e,t,i){e instanceof Date&&t instanceof Date&&(this._start=void 0!=e?new Date(e.valueOf()):new Date,this._end=void 0!=t?new Date(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i))},links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},links.Timeline.StepDate.prototype.end=function(){return this.current.valueOf()>this._end.valueOf()},links.Timeline.StepDate.prototype.next=function(){var e=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+60*1e3*this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+60*60*1e3*this.step);var t=this.current.getHours();this.current.setHours(t-t%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case links.Timeline.StepDate.SCALE.YEAR:}this.current.valueOf()==e&&(this.current=new Date(this._end.valueOf()))},links.Timeline.StepDate.prototype.getCurrent=function(){return this.current},links.Timeline.StepDate.prototype.setScale=function(e,t){this.scale=e,t>0&&(this.step=t),this.autoScale=!1},links.Timeline.StepDate.prototype.setAutoScale=function(e){this.autoScale=e},links.Timeline.StepDate.prototype.setMinimumStep=function(e){if(void 0!=e){var t=31104e6,i=2592e6,n=864e5,s=36e5,r=6e4,a=1e3,o=1;1e3*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1e3),500*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=500),100*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=100),50*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=50),10*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=10),5*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=5),t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1),3*i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=3),i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=1),5*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=5),2*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=2),n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1),n/2>e&&(this.scale=links.Timeline.StepDate.SCALE.WEEKDAY,this.step=1),4*s>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=4),s>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=1),15*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=15),10*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=10),5*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=5),r>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=1),15*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=15),10*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=10),5*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=5),a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=1),200*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=200),100*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=100),50*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=50),10*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=10),5*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=5),o>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=1)}},links.Timeline.StepDate.prototype.snap=function(e){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var t=e.getFullYear()+Math.round(e.getMonth()/12);e.setFullYear(Math.round(t/this.step)*this.step),e.setMonth(0),e.setDate(0),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MONTH)e.getDate()>15?(e.setDate(1),e.setMonth(e.getMonth()+1)):e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);else if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:e.setHours(24*Math.round(e.getHours()/24));break;default:e.setHours(12*Math.round(e.getHours()/12))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.HOUR){switch(this.step){case 4:e.setMinutes(60*Math.round(e.getMinutes()/60));break;default:e.setMinutes(30*Math.round(e.getMinutes()/30))}e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:e.setMinutes(5*Math.round(e.getMinutes()/5)),e.setSeconds(0);break;case 5:e.setSeconds(60*Math.round(e.getSeconds()/60));break;default:e.setSeconds(30*Math.round(e.getSeconds()/30))}e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.SECOND)switch(this.step){case 15:case 10:e.setSeconds(5*Math.round(e.getSeconds()/5)),e.setMilliseconds(0);break;case 5:e.setMilliseconds(1e3*Math.round(e.getMilliseconds()/1e3));break;default:e.setMilliseconds(500*Math.round(e.getMilliseconds()/500))}else if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var i=this.step>5?this.step/2:1;e.setMilliseconds(Math.round(e.getMilliseconds()/i)*i)}},links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case links.Timeline.StepDate.SCALE.SECOND:return 0==this.current.getSeconds();case links.Timeline.StepDate.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case links.Timeline.StepDate.SCALE.HOUR:return 0==this.current.getHours();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return 1==this.current.getDate();case links.Timeline.StepDate.SCALE.MONTH:return 0==this.current.getMonth();case links.Timeline.StepDate.SCALE.YEAR:return!1;default:return!1}},links.Timeline.StepDate.prototype.getLabelMinor=function(e,t){switch(void 0==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(t.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(t.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return e.DAYS_SHORT[t.getDay()]+" "+t.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(t.getDate());case links.Timeline.StepDate.SCALE.MONTH:return e.MONTHS_SHORT[t.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.getLabelMajor=function(e,t){switch(void 0==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2)+":"+this.addZeros(t.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:return e.DAYS[t.getDay()]+" "+t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.HOUR:return e.DAYS[t.getDay()]+" "+t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.addZeros=function(e,t){for(var i=""+e;i.length<t;)i="0"+i;return i},links.imageloader=function(){function e(e){if(1==r[e])return!0;var t=new Image;return t.src=e,t.complete?!0:!1}function t(e){return void 0!=a[e]}function i(i,n,s){if(void 0==s&&(s=!0),e(i))return s&&n(i),void 0;if(!t(i)||s){var o=a[i];if(!o){var l=new Image;l.src=i,o=[],a[i]=o,l.onload=function(){r[i]=!0,delete a[i];for(var e=0;e<o.length;e++)o[e](i)}}-1==o.indexOf(n)&&o.push(n)}}function n(t,n,s){var r=[];if(t.forEach(function(t){e(t)||r.push(t)}),r.length){var a=r.length;r.forEach(function(e){i(e,function(){a--,0==a&&n()},s)})}else s&&n()}function s(e,t){for(var i=e.firstChild;i;){if("IMG"==i.tagName){var n=i.src;-1==t.indexOf(n)&&t.push(n)}s(i,t),i=i.nextSibling}}var r={},a={};return{isLoaded:e,isLoading:t,load:i,loadAll:n,filterImageUrls:s}}(),links.Timeline.addEventListener=function(e,t,i,n){e.addEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,i,n)):e.attachEvent("on"+t,i)},links.Timeline.removeEventListener=function(e,t,i,n){e.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,i,n)):e.detachEvent("on"+t,i)},links.Timeline.getTarget=function(e){e||(e=window.event);var t;return e.target?t=e.target:e.srcElement&&(t=e.srcElement),void 0!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},links.Timeline.stopPropagation=function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},links.Timeline.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},links.Timeline.getAbsoluteLeft=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetLeft,s=e.offsetParent;null!=s&&s!=i&&s!=t;)n+=s.offsetLeft,n-=s.scrollLeft,s=s.offsetParent;return n},links.Timeline.getAbsoluteTop=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetTop,s=e.offsetParent;null!=s&&s!=i&&s!=t;)n+=s.offsetTop,n-=s.scrollTop,s=s.offsetParent;return n},links.Timeline.getPageY=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageY"in e)return e.pageY;var t=e.clientY,i=document.documentElement,n=document.body;return t+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)},links.Timeline.getPageX=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageX"in e)return e.pageX;var t=e.clientX,i=document.documentElement,n=document.body;return t+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0)},links.Timeline.addClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),s=!1,r=0;r<n.length;r++)-1==i.indexOf(n[r])&&(i.push(n[r]),s=!0);s&&(e.className=i.join(" "))},links.Timeline.removeClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),s=!1,r=0;r<n.length;r++){var a=i.indexOf(n[r]);-1!=a&&(i.splice(a,1),s=!0)}s&&(e.className=i.join(" "))},links.Timeline.isArray=function(e){return e instanceof Array?!0:"[object Array]"===Object.prototype.toString.call(e)},links.Timeline.clone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},links.Timeline.parseJSONDate=function(e){if(void 0==e)return void 0;if(e instanceof Date)return e;var t=e.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(t){var i=t[2]?36e5*t[2]+6e4*t[3]*(t[2]/Math.abs(t[2])):0;return new Date(1*t[1]+i)}return Date.parse(e)},links}),Mindbreeze.define("components/timeline/js/lib/timeline-locales",["./timeline"],function(e){return"undefined"==typeof e?(e={},e.locales={}):"undefined"==typeof e.locales&&(e.locales={}),e.locales.en={MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},e.locales.en_US=e.locales.en,e.locales.en_UK=e.locales.en,e.locales.fr={MONTHS:["Janvier","FÃ©vrier","Mars","Avril","Mai","Juin","Juillet","AoÃ»t","Septembre","Octobre","Novembre","DÃ©cembre"],MONTHS_SHORT:["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aou","Sep","Oct","Nov","Dec"],DAYS:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],DAYS_SHORT:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],ZOOM_IN:"Zoomer",ZOOM_OUT:"DÃ©zoomer",MOVE_LEFT:"DÃ©placer Ã  gauche",MOVE_RIGHT:"DÃ©placer Ã  droite",NEW:"Nouveau",CREATE_NEW_EVENT:"CrÃ©er un nouvel Ã©vÃ¨nement"},e.locales.fr_FR=e.locales.fr,e.locales.fr_BE=e.locales.fr,e.locales.fr_CA=e.locales.fr,e.locales.ca={MONTHS:["Gener","Febrer","MarÃ§","Abril","Maig","Juny","Juliol","Setembre","Octubre","Novembre","Desembre"],MONTHS_SHORT:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],DAYS:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],DAYS_SHORT:["Dm.","Dl.","Dm.","Dc.","Dj.","Dv.","Ds."],ZOOM_IN:"Augmentar zoom",ZOOM_OUT:"Disminuir zoom",MOVE_LEFT:"Moure esquerra",MOVE_RIGHT:"Moure dreta",NEW:"Nou",CREATE_NEW_EVENT:"Crear nou event"},e.locales.ca_ES=e.locales.ca,e.locales.de={MONTHS:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],MONTHS_SHORT:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],DAYS:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],DAYS_SHORT:["Son","Mon","Die","Mit","Don","Fre","Sam"],ZOOM_IN:"VergrÃ¶Ãern",ZOOM_OUT:"Verkleinern",MOVE_LEFT:"Nach links verschieben",MOVE_RIGHT:"Nach rechts verschieben",NEW:"Neu",CREATE_NEW_EVENT:"Neues Ereignis erzeugen"},e.locales.de_DE=e.locales.de,e.locales.de_CH=e.locales.de,e.locales.da={MONTHS:["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december"],MONTHS_SHORT:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],DAYS:["sÃ¸ndag","mandag","tirsdag","onsdag","torsdag","fredag","lÃ¸rdag"],DAYS_SHORT:["sÃ¸n","man","tir","ons","tor","fre","lÃ¸r"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},e.locales.da_DK=e.locales.da,e.locales.ru={MONTHS:["Ð¯Ð½Ð²Ð°ÑÑ","Ð¤ÐµÐ²ÑÐ°Ð»Ñ","ÐÐ°ÑÑ","ÐÐ¿ÑÐµÐ»Ñ","ÐÐ°Ð¹","ÐÑÐ½Ñ","ÐÑÐ»Ñ","ÐÐ²Ð³ÑÑÑ","Ð¡ÐµÐ½ÑÑÐ±ÑÑ","ÐÐºÑÑÐ±ÑÑ","ÐÐ¾ÑÐ±ÑÑ","ÐÐµÐºÐ°Ð±ÑÑ"],MONTHS_SHORT:["Ð¯Ð½Ð²","Ð¤ÐµÐ²","ÐÐ°Ñ","ÐÐ¿Ñ","ÐÐ°Ð¹","ÐÑÐ½","ÐÑÐ»","ÐÐ²Ð³","Ð¡ÐµÐ½","ÐÐºÑ","ÐÐ¾Ñ","ÐÐµÐº"],DAYS:["ÐÐ¾ÑÐºÑÐµÑÐµÐ½ÑÐµ","ÐÐ¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº","ÐÑÐ¾ÑÐ½Ð¸Ðº","Ð¡ÑÐµÐ´Ð°","Ð§ÐµÑÐ²ÐµÑÐ³","ÐÑÑÐ½Ð¸ÑÐ°","Ð¡ÑÐ±Ð±Ð¾ÑÐ°"],DAYS_SHORT:["ÐÐ¾Ñ","ÐÐ¾Ð½","ÐÑo","Ð¡Ñe","Ð§ÐµÑ","ÐÑÑ","Ð¡ÑÐ±"],ZOOM_IN:"Ð£Ð²eÐ»Ð¸ÑÐ¸ÑÑ",ZOOM_OUT:"Ð£Ð¼eÐ½ÑÑÐ¸ÑÑ",MOVE_LEFT:"Ð¡Ð´Ð²Ð¸Ð½ÑÑÑ Ð½Ð°Ð»eÐ²Ð¾",MOVE_RIGHT:"Ð¡Ð´Ð²Ð¸Ð½ÑÑÑ Ð½Ð°Ð¿ÑÐ°Ð²Ð¾",NEW:"ÐÐ¾Ð²ÑÐ¹",CREATE_NEW_EVENT:"Ð¡Ð¾Ð·Ð´Ð°ÑÑ Ð½Ð¾Ð²Ð¾e ÑÐ¾Ð±ÑÑÐ¸e"},e.locales.ru_RU=e.locales.ru,e.locales.es={MONTHS:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],MONTHS_SHORT:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],DAYS:["Domingo","Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado"],DAYS_SHORT:["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"],ZOOM_IN:"Aumentar zoom",ZOOM_OUT:"Disminuir zoom",MOVE_LEFT:"Mover izquierda",MOVE_RIGHT:"Mover derecha",NEW:"Nuevo",CREATE_NEW_EVENT:"Crear nuevo evento"},e.locales.es_ES=e.locales.es,e.locales.nl={MONTHS:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],MONTHS_SHORT:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],DAYS:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],DAYS_SHORT:["zo","ma","di","wo","do","vr","za"],ZOOM_IN:"Inzoomen",ZOOM_OUT:"Uitzoomen",MOVE_LEFT:"Naar links",MOVE_RIGHT:"Naar rechts",NEW:"Nieuw",CREATE_NEW_EVENT:"Nieuwe gebeurtenis maken"},e.locales.nl_NL=e.locales.nl,e.locales.nl_BE=e.locales.nl,e.locales.tr={MONTHS:["Ocak","Åubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"],MONTHS_SHORT:["Oca","Åub","Mar","Nis","May","Haz","Tem","AÄu","Eyl","Eki","Kas","Ara"],DAYS:["Pazar","Pazartesi","SalÄ±","ÃarÅamba","PerÅembe","Cuma","Cumartesi"],DAYS_SHORT:["Paz","Pzt","Sal","Ãar","Per","Cum","Cmt"],ZOOM_IN:"BÃ¼yÃ¼lt",ZOOM_OUT:"KÃ¼Ã§Ã¼lt",MOVE_LEFT:"Sola TaÅÄ±",MOVE_RIGHT:"SaÄa TaÅÄ±",NEW:"Yeni",CREATE_NEW_EVENT:"Yeni etkinlik oluÅtur"},e.locales.tr_TR=e.locales.tr,e.locales.hu={MONTHS:["januÃ¡r","februÃ¡r","mÃ¡rcius","Ã¡prilis","mÃ¡jus","jÃºnius","jÃºlius","augusztus","szeptember","oktÃ³ber","november","december"],MONTHS_SHORT:["jan","feb","mÃ¡rc","Ã¡pr","mÃ¡j","jÃºn","jÃºl","aug","szep","okt","nov","dec"],DAYS:["vasÃ¡rnap","hÃ©tfÅ","kedd","szerda","csÃ¼tÃ¶rtÃ¶k","pÃ©ntek","szombat"],DAYS_SHORT:["vas","hÃ©t","kedd","sze","csÃ¼","pÃ©","szo"],ZOOM_IN:"NagyÃ­tÃ¡s",ZOOM_OUT:"KicsinyÃ­tÃ©s",MOVE_LEFT:"Balra",MOVE_RIGHT:"Jobbra",NEW:"Ãj",CREATE_NEW_EVENT:"Ãj esemÃ©ny kÃ©szÃ­tÃ©se"},e.locales.hu_HU=e.locales.hu,e}),Mindbreeze.define("components/timeline/js/timeline",["client/template","component!results","client/resourceinfo","i18n/i18n","jquery","text!../mustache/template.mustache","moment","underscore","./lib/timeline","./lib/timeline-locales"],function(e,t,i,n,s,r,a,o,l){var u=function(e,t){return e.get(t)},c=function(e,t){var i=document.getElementById(t);i||(i=document.createElement("link"),i.rel="stylesheet",i.href=e,i.id=t,(document.head||document.getElementsByTagName("script")[0].parentNode).appendChild(i))};c(i.scriptLocation+"../client/component/timeline/js/lib/timeline.css","mbTimelineCss");var h=t.View,d=h.extend({setModel:function(){h.prototype.setModel.apply(this,arguments),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"change",this.update)},removeOne:function(){this.update()},hide:function(){this.timelineEl&&s(this.timelineEl).hide()},show:function(){var e={start:new Date(2008,0,1),end:new Date(2010,11,31)};this.timelineEl=this.timelineEl||document.createElement("div"),this.timelineEl&&(this.timelineEl.parentNode!=this.el&&this.el.appendChild(this.timelineEl),this.timeline||(this.timeline=new l.Timeline(this.timelineEl,{style:"dot",min:e.start,max:e.end,zoomMin:864e5,date:this.options.date,height:this.options.height,locale:n.locale.substring(0,2),showCurrentTime:!1}),l.events.addListener(this.timeline,"select",o.bind(this.onSelect,this))),s(this.timelineEl).show())},renderMarker:function(e){try{var t=this.options.resultTemplate.createView({model:e,application:this.options.application,parent:this,modelType:"Result"}),i=t.render().el;return i}finally{}},getSelectedModels:function(){var e=this.timeline,t=this.timeline.getSelection(),i=o.map(t,function(t){return e.getItem(t.row).model});return i},onSelect:function(){var e=this.timeline,t=this.timeline.getSelection();o.map(t,function(t){return e.getItem(t.row).model})},updateState:function(){},addOne:function(){this.update()},getDisplayedProperties:function(){var e=h.prototype.getDisplayedProperties.apply(this,arguments);return e["mes:date"]=e["mes:date"]||{},e["mes:date"].format="VALUE",this.options.date&&(e[this.options.date]=e[this.options.date]||{},e[this.options.date].format="VALUE"),e},update:function(){var e=this;try{this._render=!0,o.defer(function(){e._render&&(e._render=!1,e.render())})}catch(t){console.error(t)}},takeStartEndFromModels:function(e,t){var i=this;t.forEach(function(t){var n=i.getDateFromModel(t);n&&(!e.start||n<e.start)&&(e.start=n),n&&(!e.end||n>e.end)&&(e.end=n)})},getDateFromModel:function(e){return this.options.date?u(e,this.options.date):u(e,"mes:date")},getEndDateFromModel:function(e){return this.options.endDate?u(e,this.options.endDate):void 0},getStartDateFromModel:function(e){return this.options.startDate?u(e,this.options.startDate):void 0},filterModels:function(e){var t=this;return o.filter(e,function(e){return!!t.getDateFromModel(e)})},render:function(){var e,t,i=this.filterModels(this.collection.models),s={start:null,end:null},r=this;if(!(i.length>0))return this.hide(),void 0;if(this.show(),e=this.timeline,this.options.rangeStart&&this.options.rangeEnd)s={start:this.options.rangeStart,end:this.options.rangeEnd};else{this.takeStartEndFromModels(s,i);var l=-1*(this.options.paddingLeft||2),u=this.options.paddingRight||2;s.start=a(s.start).add(l,"month").startOf("month").toDate(),s.end=a(s.end).add(u,"month").endOf("month").toDate()}return t=o.flatten(o.map(i.reverse(),function(e){var t=r.getDateFromModel(e),i=r.getStartDateFromModel(e),n=r.getEndDateFromModel(e),a=[];return t>=s.start&&t<=s.end&&(null==n?a.push({start:t,content:r.renderMarker(e),model:e}):a.push({start:i,end:n,content:"Aufenthalt",model:e})),a})),e.setOptions({style:"dot",min:s.start,max:s.end,zoomMin:864e5,date:this.options.date,height:this.options.height,locale:n.locale.substring(0,2),showCurrentTime:!1}),e.deleteAllItems(),e.draw(t),e.setVisibleChartRange(s.start,s.end),this},remove:function(){this.hide(),this.timeline&&delete this.timeline,this.timelineEl&&this.timelineEl.parentNode&&this.timelineEl.parentNode.removeChild(this.timelineEl),h.prototype.remove.apply(this,arguments)}}),p=t.extend({createView:function(e){var t=new d(o.extend({},e,{resultTemplate:this.getContent(),application:e.application,template:this,date:this.get("date",e.date),height:this.get("height",e.height),rangeStart:this.get("range_start",e.rangeStart),rangeEnd:this.get("range_end",e.rangeEnd),paddingLeft:this.get("padding-left",e.paddingLeft),paddingRight:this.get("padding-right",e.paddingRight),startDate:this.get("start-date",e.startDate),endDate:this.get("end-date",e.endDate),el:this.el}));return this.instances.push(t),t},schema:new e.Schema({inputAttributes:{view:{type:"reference",reference:"view"},date:{title:"editor_timeline_date",type:"string","default":"mes:date"},height:{title:"editor_timeline_height",type:"string","default":"auto"},range_start:{type:"date",title:"editor_timeline_range_start"},range_end:{type:"date",title:"editor_timeline_range_end"},"padding-left":{type:"int",title:"editor_padding_left"},"padding-right":{type:"int",title:"editor_padding_right"}}}),hasContent:function(){return!0},getContent:function(){return this.children[0].template}});return p.DEFAULT_TEMPLATE=r,p.View=d,p}),Mindbreeze.define("component!listview",["client/views/list","client/template","underscore"],function(e,t,i){var n=t.extend({createView:function(e){return e=i.extend(this.attributeModel.getCamelCase(),e,{elementTemplate:this.node.children[0].template}),delete e.node,t.prototype.createView.apply(this,[e])},getContentSchema:function(){return{type:"template"}},hasContent:function(){return!0}});return n.View=e.extend({createEntryView:function(e){return this.options.createEntryViewAction&&this.options.application[this.options.createEntryViewAction]?this.options.application[this.options.createEntryViewAction].call(this.options.application,this.options.application,this,e):(e=i.clone(e),e.application=this.options.application,this.options.elementTemplate.createView(e))
}}),n}),Mindbreeze.define("components/listview/js/listview",function(){}),Mindbreeze.define("client/settings",["backbone"],function(e){var t=e.Collection.extend({}),i=new t;return Mindbreeze.define("client/settingsapplistsview",["component!applists"],function(e){return e.View.extend({initialize:function(){this.options.model=this.options.application.models.applists,this.model=this.options.model,e.View.prototype.initialize.apply(this,arguments)}})}),Mindbreeze.define("client/settingsprofilesettings",["component!profilesettingsview"],function(e){return e.View.extend({initialize:function(){e.View.prototype.initialize.apply(this,arguments)}})}),i.add({name:"federated_sources",module:"client/settingsapplistsview"}),i}),Mindbreeze.define("components/settings/js/settings",["client/template","component!base","client/views/list","client/settings","client/templatetree","client/extensions","utils/string","i18n/i18n","underscore"],function(e,t,i,n,s,r,a,o,l){var u=e.extend({model:function(){return n}}),c=i.extend({isSelected:function(e){return!this._selected&&this.model.length&&this.select(this.model.at(0)),this._selected===e},select:function(e){this._selected=e},createEntryView:function(e){return e.selectState=this,i.prototype.createEntryView.apply(this,arguments)}}),h=c.extend({tagName:"div",className:"btn-group btn-group-justified mb-role",defaultOptions:l.extend({},c.prototype.defaultOptions,{role:"tablist",entryTagName:"div",entryClassName:"btn-group",entryRole:"presentation"}),setModel:function(){c.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"all",this.updateDisplay),this.updateDisplay()},updateDisplay:function(){this.model&&this.model.length>1?this.$el.show():this.$el.hide()}}),d=c.extend({className:"",initialize:function(){c.prototype.initialize.apply(this,arguments),this.updateChildRole()},setModel:function(){c.prototype.setModel.apply(this,arguments),this.model&&(this.listenTo(this.model,"all",this.updateChildRole),this.updateChildRole())},updateChildRole:function(){this.model.length>1?this.$el.children().attr("role","tabpanel"):this.$el.children().removeAttr("role")}});return h.EntryView=t.extend({events:l.extend({},t.prototype.events,{tabactivate:"selected",tabdeactivate:"deselected"}),deselected:function(){var e=this;l.defer(function(){e.updateActive()})},selected:function(){this.options.selectState.select(this.model),this.updateActive()},updateActive:function(){var e=this.options.selectState.isSelected(this.model);e?this.$el.find("button").addClass("active"):this.$el.find("button").removeClass("active")},render:function(){var e=this.options.selectState.isSelected(this.model),t=a.escape(a.stripHtml(this.model.get("name")));return this.el.innerHTML='<button class="btn'+(e?" active":"")+'" role="tab" aria-selected="'+e+'" aria-controls="settings_tabpanel_'+this.model.cid+'" data-i18n="'+t+'">'+o(a.escape(a.stripHtml(this.model.get("name"))))+"</button>",this}}),d.EntryView=t.extend({render:function(){var e=this,t=this.model,i=t.get("module"),n=t.get("options"),s=this.options.selectState.isSelected(t);return this.el.id="settings_tabpanel_"+this.model.cid,s?(this.el.removeAttribute("aria-hidden"),this.$el.show()):(this.el.setAttribute("aria-hidden","true"),this.$el.hide()),Mindbreeze.require([i],function(i){var s=new i(l.extend({application:e.options.application,model:t},n));e.appendChild(s.render().el,!0)}),this}}),u.View=t.extend({setModel:function(){this.settings&&this.settings.remove(),this.tabs&&this.tabs.remove(),t.prototype.setModel.apply(this,arguments),this.model&&(this.tabs=new h({model:this.model,application:this.options.application}),this.appendChild(this.tabs.render().el,!0),this.settings=new d({model:this.model,application:this.options.application,tagName:"div",className:"",entryTagName:"div"}),this.appendChild(this.settings.render().el,!0))},remove:function(){this.settings&&this.settings.remove&&this.settings.remove(),t.prototype.remove.apply(this,arguments)}}),u}),Mindbreeze.define("components/stepper/js/stepper",["api/v2/search","client/template","component!base","client/templateregistry","i18n/i18n","mustache","client/resourceinfo","jquery"],function(e,t,i,n,s,r,a,o){var l=37,u=39,c=t.extend({hasContent:function(){return!0}});return c.DEFAULT_TEMPLATE='<div class="mb-stepper"><a style="display: none;" href="#" class="mb-stepper-left" data-action-object="{&quot;stepPrevious&quot;: {}}"><img src="'+a.scriptLocation+'../client/component/stepper/img/arrow-left.png"></a>'+'<a style="display: none;" href="#" class="mb-stepper-right" data-action-object="{&quot;stepNext&quot;: {}}"><img src="'+a.scriptLocation+'../client/component/stepper/img/arrow-right.png"></a>'+"</div>",c.View=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments);var e=this;o(document.body).bind("keydown",function(t){switch(t.keyCode){case l:e.left();break;case u:e.right()}}),this.model.on("change",this.render,this)},left:function(){this.state&&!this.state.first&&this.$el.find(".mb-stepper-left").click()},right:function(){this.state&&!this.state.last&&this.$el.find(".mb-stepper-right").click()},update:function(e){this.state=e,e.first?o(".mb-stepper-left",this.el).fadeOut():o(".mb-stepper-left",this.el).fadeIn(),e.last?o(".mb-stepper-right",this.el).fadeOut():o(".mb-stepper-right",this.el).fadeIn()},render:function(){return this}}),c}),Mindbreeze.define("components/include/js/include",["client/template","component!base","utils/mustache","backbone","underscore"],function(e,t,i,n,s){var r=e.extend({model:function(e){return e.application.models.templateinfo},getOptions:function(t){return s.extend({},t,{parentModel:e.prototype.model.call(this,t)})},createSubView:function(){}});return r.View=t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.update),this.locationTemplate=new i(e.location),this.update()},update:function(){var e=this,t=this.locationTemplate.render(this.model).replace(/resource:\/\//i,"");t!==this.location&&this.disable(function(){e.location=t,e.enable()})},enable:function(){var e=this;this.options.application.api.resources.get(this.location,function(t){e.$el.html(t),e.options.template.node.collect(),e.options.template.node.initializeChildren(e.options.application,e.options.parentModel,function(){e.model.trigger("templateupdate")})},this.options.application.models.defaultChannels)},disable:function(e){var t=this;this.options.template.node.destroyChildren(function(){t.$el.html(""),e&&e.apply(this,arguments)})},remove:function(){this.disable(),t.prototype.remove.apply()}}),r}),Mindbreeze.define("components/personalize/js/personalize",["api/v2/common","underscore","component!base","client/template","client/templateregistry","utils/dom","jquery","i18n/i18n"],function(e,t,i,n,s,r,a){var o=n.extend({initialize:function(){n.prototype.initialize.apply(this,t.toArray(arguments)),this.$el=a(this.el)},createView:function(e){var i=this.attributeModel.get("default-active")||"false",n=this.get("boost")||1.5,s=new l(t.extend({},e,{application:e.application,template:this,boost:n,defaultActive:i,el:this.el,disabled:"true"===this.attributeModel.get("disabled")}));return this.instances.push(s),s},schema:new n.Schema({attributes:{"default-active":{type:"boolean",title:"editor_personalize_active",required:!1,defaultValue:!1},boost:{type:"float",title:"editor_personalize_boost",required:!1,defaultValue:1.5}}}),hasContent:function(){return!1},remove:function(e){t.forEach(this.instances,function(e){e.remove()}),this.instances=[],t.forEach(e.node.children,function(e){e.template.remove({node:e})})}}),l=i.extend({tagName:"input",initialize:function(){i.prototype.initialize.apply(this,t.toArray(arguments)),this.el.checked=this.options.defaultActive,this.setPersonalization({silent:!0})},boost:function(){return this.el.checked?this.options.boost:0},setPersonalization:function(){this.options.application.models.collected?this.options.application.personalizeSearch(this.boost()):this.options.application.once("addmodel:collected",function(){this.options.application.personalizeSearch(this.boost())},this)},events:function(){return t.extend({},i.prototype.events,{change:"setPersonalization"})}});return o.View=l,o}),Mindbreeze.define("text!client/../../component/results/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-attr-role="group" data-attr-aria-labelledby="result_{{id}}" data-class-name="media mb-clickable-phone" data-attr-data-action-object="{ &quot;toggleOpen&quot;: { &quot;enabledSelector&quot;: &quot;.visible-phone&quot; }}">\n  <span class="pull-left media-object" aria-hidden="true">\n    {{#actions.data[0].value.href?}}<a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" tabindex="-1" target="_blank">{{/actions.data[0].value.href?}}\n      {{{icon}}}\n    {{#actions.data[0].value.href?}}</a>{{/actions.data[0].value.href?}}\n  </span>\n  <div class="media-body">\n    <h3 class="media-heading" id="result_{{id}}">\n      {{#actions.data[0].value.href?}}<a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" target="_blank">{{/actions.data[0].value.href?}}\n      {{{title}}}\n      {{#actions.data[0].value.href?}}</a>{{/actions.data[0].value.href?}}\n    </h3>\n    <ul class="mb-actions mb-separated hidden-phone mb-visible-open mb-no-print">\n      {{#actions.data}} <li class="nowrap">{{{html}}}</li>{{/actions.data}}\n      <li class="nowrap"><a role="button" class="action collect" tabindex="0" data-action-object="{&quot;collectResult&quot;:{}}">{{{i18n.Collect}}}</a></li>\n    </ul>\n    <dl class="mb-metadata mb-comma-separated-values mb-horizontal mb-separated hidden-phone mb-visible-open mb-small">\n      <dt class="mb-acc">{{i18n.date}}</dt><dd>{{{mes:date}}}</dd>\n      {{#mes:summary}}\n        <dt>{{name}}</dt>{{#data}}<dd>{{#actions?}}<span class="mb-dropdown-toggle"><a data-action-object="{&quot;openMenu&quot;: {&quot;propertyId&quot;: &quot;{{property:id}}&quot;, &quot;position&quot;: {{data:position}} }}" class="nowrap">{{/actions?}}{{{html}}}{{#actions?}} <span class="caret"></span></a></span> {{/actions?}}</span></dd>{{/data}}\n      {{/mes:summary}}\n    </dl>\n    {{#content}}\n      <p class="mb-content">{{{.}}}</p>\n    {{/content}}\n    {{#mes:nested.data?}}\n      <ul class="mb-nested">\n        {{#mes:nested}}\n          <div class="media mb-nested" data-action-object="{ &quot;toggleOpen&quot;: { &quot;enabledSelector&quot;: &quot;.visible-phone&quot; }}">\n            {{#actions.data[0].value.href?}}\n              <a href="{{actions.data[0].value.href}}" data-disabled-selector=".visible-phone" target="_blank">\n            {{/actions.data[0].value.href?}}\n              <b>{{{title}}}</b>\n            {{#actions.data[0].value.href?}}\n              </a>\n            {{/actions.data[0].value.href?}}\n            <ul class="mb-actions mb-separated hidden-phone mb-visible-submenu-open mb-no-print">\n              {{#actions.data}} <li class="nowrap"><small>{{{html}}}</small></li>{{/actions.data}}\n            </ul>\n            <dl class="mb-comma-separated-values mb-separated mb-summarized-description-list mb-small"><dd>{{{mes:date}}}</dd></dl>\n          </div>\n        {{/mes:nested}}\n      </ul>\n    {{/mes:nested.data?}}\n    <span class="clearfix"></span>\n  </div>\n</script>\n'}),Mindbreeze.define("components/channels/js/channels",["i18n/i18n","client/template","client/views/list","service/messageframe_channel","component!base","utils/mustache","component!mustache"],function(e,t,i,n,s,r,a){var o=a.View.extend({initialize:function(){this.options.template={mustacheAdapter:new r(this.constructor.DEFAULT_TEMPLATE)},a.View.prototype.initialize.apply(this,arguments)},change:function(){this.render()}});o.DEFAULT_TEMPLATE='<div class="checkbox"><input type="checkbox" class="action" data-name="enabled" {{checked}} id="{{id}}"{{#description?}} aria-describedby="{{id}}_description"{{/description?}}> <h4><label for="{{id}}">{{#icon?}}<img class="mb-small" src="{{icon}}" alt="">{{/icon?}} {{{name}}}</label></h4> {{#description?}}<p id="{{id}}_description">{{{description}}}</p>{{/description?}}</div>';var l=t.extend({});return l.View=i.extend({initialize:function(){this.options.childViewConstructor=o,i.prototype.initialize.apply(this,arguments)}}),l}),Mindbreeze.define("components/datasources/js/datasources",["i18n/i18n","api/v2/search","component!constraints","client/templateregistry"],function(e,t,i){var n=i.extend({});return n.View=i.View.extend({initialize:function(){this.options.title=this.options.title||e("datasources"),this.options.suggest=!1,i.View.prototype.initialize.apply(this,arguments)}}),n}),Mindbreeze.define("components/feedbackbutton/js/feedbackbutton",["i18n/i18n","client/template","component!base","utils/trace","underscore"],function(e,t,i,n,s){var r=t.extend({schema:new t.Schema({inputAttributes:{checkIfEnabledInProfile:{title:"editor_feedbackbutton_checkProfile",type:"boolean",defaultValue:!1}}}),getOptions:function(){return s.extend({},t.prototype.getOptions.apply(this,arguments),this.attributeModel.getCamelCase())}});return r.View=i.extend({className:"mb-feedbackbutton",events:{click:"feedback",keypress:"feedback"},initialize:function(){i.prototype.initialize.apply(this,arguments),this.$el.addClass(this.className),this.options.checkIfEnabledInProfile&&this.listenTo(this.options.application.models.profile,"change",this.render),this.render()},enabled:function(){return n.enabled&&(!this.options.checkIfEnabledInProfile||this.enabledInUserProfile())},enabledInUserProfile:function(){return this.options.application.models.profile.get("show_feedback_button")},render:function(){return this.rendered?void 0:(this.enabled()&&(this.el.innerHTML+='<button type="button" class="mb-hide-text" title="'+e("client_headsup_feedback_button")+'">'+e("client_headsup_feedback_button")+"</button>",this.rendered=!0),this.el)},feedback:function(e){return e&&"keypress"===e.type&&13!==e.which&&27!==e.which?!0:(e&&e.stopPropagation(),n.feedback(this.options.formid),void 0)}}),r}),Mindbreeze.define("text!components/searchinfo/mustache/template.mustache",[],function(){return'<div>\n  <script type="text/x-mustache-template">\n    {{^computing?}}\n      {{#status_messages.timeout}}\n        <div class="alert">\n          <button type="button" class="close" data-dismiss="alert" title="{{i18n.Close}}">&times;</button>\n          {{error}}\n          {{warning}}\n          {{info}}\n        </div>\n      {{/status_messages.timeout}}\n\n      {{#status_messages.no_results?}}\n        <h2 tabindex="-1">\n          {{status_messages.no_results.error}}\n          {{status_messages.no_results.warning}}\n          {{status_messages.no_results.info}}\n        </h2>\n\n       \n\n      {{/status_messages.no_results?}}\n      {{#show_query_spelling_alternatives?}}\n      {{#alternatives.query_spelling.entries[0]?}}\n        <p>\n          {{{i18n.client_did_you_mean}}}:\n          <a href="#" class="action" data-action-object="{&quot;setDidYouMean&quot;: {&quot;query&quot;: {{alternatives.query_spelling.entries[0].query_expr}} }}">\n            {{{alternatives.query_spelling.entries[0].html}}}\n          </a>\n        </p>\n      {{/alternatives.query_spelling.entries[0]?}}\n      {{/show_query_spelling_alternatives?}}\n    {{/computing?}}\n  </script>\n</div>\n'}),Mindbreeze.define("components/searchinfo/js/searchinfo",["i18n/i18n","client/template","client/templateregistry","component!base","text!../mustache/template.mustache","backbone"],function(e,t,i,n,s,r){i.add({id:"searchinfo",name:"editor_searchinfo_title",weight:6,getAdders:function(){return[{icon:"../img/imgsearchinfo.png",name:"editor_searchinfo_title",description:"editor_searchinfo_description"}]},create:function(){return r.View.prototype.make("div",{"data-template":"searchinfo"})}});var a=t.extend({hasContent:function(){return!0},getDefaultTemplate:function(){return s}});return a.View=n.extend({}),a}),Mindbreeze.define("text!client/../../component/searchinfo/mustache/template.mustache",[],function(){return'<div>\n  <script type="text/x-mustache-template">\n    {{^computing?}}\n      {{#status_messages.timeout}}\n        <div class="alert">\n          <button type="button" class="close" data-dismiss="alert" title="{{i18n.Close}}">&times;</button>\n          {{error}}\n          {{warning}}\n          {{info}}\n        </div>\n      {{/status_messages.timeout}}\n\n      {{#status_messages.no_results?}}\n        <h2 tabindex="-1">\n          {{status_messages.no_results.error}}\n          {{status_messages.no_results.warning}}\n          {{status_messages.no_results.info}}\n        </h2>\n\n       \n\n      {{/status_messages.no_results?}}\n      {{#show_query_spelling_alternatives?}}\n      {{#alternatives.query_spelling.entries[0]?}}\n        <p>\n          {{{i18n.client_did_you_mean}}}:\n          <a href="#" class="action" data-action-object="{&quot;setDidYouMean&quot;: {&quot;query&quot;: {{alternatives.query_spelling.entries[0].query_expr}} }}">\n            {{{alternatives.query_spelling.entries[0].html}}}\n          </a>\n        </p>\n      {{/alternatives.query_spelling.entries[0]?}}\n      {{/show_query_spelling_alternatives?}}\n    {{/computing?}}\n  </script>\n</div>\n'}),Mindbreeze.define("components/resultsprogress/js/resultsprogress",["i18n/i18n","api/v2/search","client/template","component!base","client/templateregistry","utils/trace","jquery","underscore"],function(e,t,i,n,s,r,a,o){e("preview");var l=i.extend({initialize:function(){i.prototype.initialize.apply(this,o.toArray(arguments)),this.$el=a(this.el)},schema:new i.Schema({inputAttributes:{}}),hasContent:function(){return!1},createView:function(e){var t=new u(o.extend({},e,{application:e.application,template:this,el:this.el}));return this.instances.push(t),t}}),u=n.extend({initialize:function(){n.prototype.initialize.apply(this,o.toArray(arguments)),this.render()},setModel:function(){this.resultsetModel=this.model.submodel("resultset"),this.resultsetModel.on("change",this.renderBar,this),n.prototype.setModel.apply(this,arguments)},computing:function(){this.pagingAllowed=!1,n.prototype.computing.apply(this,arguments)},percentage:function(){var e=this.model.get("resultset.results").length,t=this.model.get("estimated_count");if(this.model.get("resultset.next_avail")===!1)return e?100:null;if(e>t)return 100;if(t&&e){var i=100*e/t;return Math.round(i)}return null},computed:function(){n.prototype.computed.apply(this,arguments),this.renderBar()},renderBar:function(){if(this.el){this.progressBarEl&&(this.el.removeChild(this.progressBarEl),this.progressBarEl=null);var e=null;try{e=this.percentage()}catch(t){}if(null!=e){var i="progress";100>e&&(i+=" progress-striped active"),this.progressBarEl=this.make("div",{"class":i}),this.progressBarEl.appendChild(this.make("div",{"class":"bar",role:"progressbar","aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":100,style:"width: "+e+"%;"},e+"%")),this.el.appendChild(this.progressBarEl)}}},render:function(){return this.renderBar(),this.el},remove:function(){return n.prototype.remove.apply(this,arguments),this.dispose(),this},dispose:function(){this.resultsetModel&&this.resultsetModel.dispose()}});return l.View=u,l}),Mindbreeze.define("text!components/breadcrumb/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-tag-name="li">\n  <button data-action-name="removeConstraint" class="btn btn-dark btn-small">\n  {{{description}}} <span class="sr-only" data-i18n="removeRefinement"></span> <i class="icon icon-right icon-remove" aria-hidden="true"></i>\n  </button>\n</script>\n'}),Mindbreeze.define("components/breadcrumb/js/breadcrumb",["component!base","client/template","client/views/list","component!filteredfacet","i18n/i18n","underscore","backbone","text!../mustache/template.mustache"],function(e,t,i,n,s,r,a,o){var l=t.extend({schema:new t.Schema({attributes:{displayFilteredfacets:{type:"boolean",defaultValue:!1}}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},createView:function(e){return e=r.extend({},this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase(),e),e.childTemplates=r.pluck(e.node&&e.node.children,"template"),e.facetsModel=t.prototype.model.call(this,e).output.submodel("facets"),e.node&&delete e.node.children,t.prototype.createView.call(this,e)},model:function(){var e=t.prototype.model.apply(this,arguments);return e.input.submodel("user")}}),u=i.extend({createEntryView:function(e){return this.options.elementTemplate.createView(r.extend({application:this.options.application,tagName:this.options.entryTagName,className:this.options.entryClassName,role:this.options.entryRole,referenceList:this.children},e)).render()}}),c=a.Model.extend({}),h=a.Collection.extend({model:c});return l.Model=c,l.Collection=h,l.View=e.extend({initialize:function(){this.selectedFilters=new h,this.listenTo(this.model,"change",this.inputChanged),this.options.facetsModel&&this.listenTo(this.options.facetsModel,"change",this.outputChanged),this.listenTo(this.selectedFilters,"destroy",this.modelDestroyed),this.listView=new u({className:"inline",application:this.options.application,model:this.selectedFilters,elementTemplate:this.options.childTemplates[0]}),this.appendChild(this.listView.el)},inputChanged:function(){this.getSelectedFilters()},outputChanged:function(){var e=this.options.facetsModel;r.each(this.selectedFilters.models,function(t){var i=t.attributes.filterID.replace(/filter_/,"");r.each(e.attributes,function(e){if(i===e.id){var n=t.attributes.key;r.each(e.entries,function(e){if(e.id===n){var i=r.extend({},t.attributes);i.html=e.html,t.set(i)}})}})})},modelDestroyed:function(e){try{"filter"===e.get("type")?this.removeFilterSelection(e):this.removeQuery(e)}catch(t){"undefined"!=typeof console&&console.error(t)}},removeQuery:function(e){var t=this.model.submodel(e.id);t.unset(),t.dispose()},removeFilterSelection:function(e){var t=this.model.submodel("constraints"),i=this.model.get(e.get("path")),s=e.get("key"),a=r.extend({},i.filter_base),o=a[s];delete a[s];var l=r.extend({},i.filtered);l[s]=o,n.View.prototype._setConstraint.apply({options:{facetName:i.label,intersectValues:"AND"===i.filter_join},originalFacetTitle:i.filtered_name,constraintsModel:t,filterID:e.get("filterID")},[l,a]),t.dispose()},getSelectedFilters:function(){var e=this.options.application,t=r.pluck(this.selectedFilters.models,"id"),i=[],n=this.selectedFilters,a=this.options.displayFilteredfacets;return r.each(this.model.get("constraints"),function(t,o){if(t.filter_base&&t.filtered_name)a&&r.each(t.filter_base,function(e,r){var a="['"+o+"']",l=a+".filter_base['"+r+"']";n.add({description:s(t.filtered_name)+": "+(e.description||e.id),filterName:t.filtered_name,html:e.description||e.id,id:l,path:a,key:r,type:"filter",filterID:o},{merge:!0}),i.push(l)});else if(t.description){var l=e.sanitizePath(o);n.add({description:t.description,id:l,filterID:o},{merge:!0}),i.push(l)}}),n.remove(r.difference(t,i)),n}}),l.DEFAULT_TEMPLATE=o,l}),Mindbreeze.define("components/pagination/js/pagination",["api/v2/search","client/template","component!base","client/templateregistry","i18n/i18n","mustache","jquery","underscore","backbone"],function(e,t,i,n,s,r,a,o,l){var u='<a href="#" style="display:none" class="mb-next mb-center mb-block action" data-action="this.nextPage({ append: true })" data-i18n="mobileclient_load_more_results">'+s("mobileclient_load_more_results")+"</a>";n.add({id:"pagination",name:"editor_pager_title",weight:3,getAdders:function(e){return"view"===e.type?[{name:"editor_pager_description",icon:"../img/imgpagination.png"}]:void 0},create:function(){return l.View.prototype.make("ul",{"data-template":"pagination","class":"pager"},u)}});var c=t.extend({initialize:function(){t.prototype.initialize.apply(this,o.toArray(arguments)),this.$el=a(this.el)},createView:function(e){var t=new h(o.extend({},e,{application:e.application,template:this,el:this.el}));return this.instances.push(t),t},remove:function(e){o.forEach(this.instances,function(e){e.remove()}),this.instances=[],o.forEach(e.node.children,function(e){e.template.remove({node:e})})},name:function(){return null}}),h=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.on("change",this.render,this)},render:function(){return this.el.innerHTML||(this.el.innerHTML=r.to_html(u,{i18n:s.strings})),this.model.get("resultset.prev_avail")?a("> .mb-previous",this.el).show():a("> .mb-previous",this.el).hide(),this.model.get("resultset.next_avail")?a("> .mb-next",this.el).show():a("> .mb-next",this.el).hide(),this}});return c}),Mindbreeze.define("components/tabs/js/tabs",["client/application","api/v2/search","client/template","client/views/list","client/templateregistry","utils/dom","utils/localStorage","component!mustache","i18n/i18n","utils/clone","utils/jsonpath","underscore","jquery","utils/inplace-edit"],function(e,t,i,n,s,r,a,o,l,u,c,h,d){var p=i.extend({schema:new i.Schema({inputAttributes:{name:{title:"name",type:"string"},constraint:{title:"constraint",type:"QueryExpr"},options:{title:"options",type:"SearchRequest"}}}),hasContent:function(){return!1}}),m=i.extend({schema:new i.Schema({inputAttributes:{tabs:{title:"tabs",type:"reference",repeated:!0,reference:"children"},datasourcetabs:{title:"editor_tabs_datasourcetabs",type:"boolean","default":!1},editable:{title:"editor_tabs_editable_label",type:"boolean","default":!1},disabled:{title:"editor_tabs_disabled_label",type:"boolean","default":!1,visible:!1},showMoreAfter:{title:"editor_tabs_show_more_label",type:"int"}}}),initialize:function(){var e=this.application.models.tabs;h.each(this.node.children,function(t){if("true"===t.el.getAttribute("data-tabconfig")){var i=new p(t.el,t).get();delete i.tabConfig,i.id=i.name,i.request=i.options,delete i.options,e.add(i)}}),this.tabconfigs=h.filter(this.node.children,function(e){return"true"===e.el.getAttribute("data-tabconfig")}),this.node.children=h.filter(this.node.children,function(e){return"true"!==e.el.getAttribute("data-tabconfig")}),i.prototype.initialize.apply(this,arguments)},createView:function(e){return e=h.extend(this.attributeModel.getCamelCase(),e,{elementTemplate:this.node.children[0].template,datasourcetabs:this.get("datasourcetabs"),editable:this.get("editable"),showMoreAfter:this.get("showMoreAfter"),disabled:this.get("disabled")}),delete e.node,i.prototype.createView.apply(this,[e])},getContentSchema:function(){return{type:"template"}},hasContent:function(){return!0},remove:function(){this.addButton&&(this.addButton.parentNode&&this.addButton.parentNode.removeChild(this.addButton),delete this.addButton);var e=this.application.models.tabs;h.each(this.tabconfigs,function(t){var i=new p(t.el,t).get();delete i.tabConfig,i.id=i.name,e.remove(i)}),i.prototype.remove.apply(this,arguments)}});return m.View=n.extend({defaultOptions:h.extend({},n.prototype.defaultOptions,{role:"tablist",entryRole:"presentation"}),initialize:function(){if(n.prototype.initialize.apply(this,arguments),this.el.getAttribute("role")&&this.$el.addClass("mb-role"),this.listenTo(this.options.application.models.profile,"change",this.profileUpdated),this.profileUpdated(),this.options.editable){this.addButton=d('<button class="action mb-btn-no-decor" data-action-object="{&quot;addTab&quot;: {}}" title="'+l("create_search_tab")+'" data-enable-if-model-valid="search"><i class="icon-plus"></i></button>')[0],this.$el.after(this.addButton),this.registerActions();var e=this.options.application,t=this.options.application.models.tabs;e.parentApplication||(t.comparator||(t.comparator=function(e){return e.sortIndex},t._namePrefix=l("search_tab",[""]),t.sort=this.options&&this.options.showMoreAfter&&this.options.showMoreAfter>-1?function(){}:function(){h.forEach(this.models,function(e,t){var i=t;e.get("customTab")&&(i+=1e6),e.sortIndex=i}),this.constructor.prototype.sort.apply(this,arguments)},t.sort(),t._changed=function(e){var t=e&&e.changedAttributes();if(t&&t.name){var i=e.previous("name"),n=this.constraintsModel.get("view.name");i===n&&this.constraintsModel.set("view.name",t.name)}},t.listenTo(t,"change",t._changed)),e.loadCustomTabs(),e._registeredTabUpdateHandlers||(e.listenTo(t,"change",e.tabsUpdated),e.listenTo(t,"add",e.tabsUpdated),e.listenTo(t,"remove",e.tabsUpdated),e._registeredTabUpdateHandlers=!0))}},profileUpdated:function(){var e,t,i=this.options.application,n=i.models.profile,s=this.model;if(n){if(e=n.get("default_search_source"),n.get("search_sources")&&n.get("search_sources").length&&(t=n.get("search_sources[0]")),h.each(n&&n.get("search_sources"),function(i,n){s.add({id:i.name,name:i.name,constraint:i.constraint,request:i,_dataSourceTab:!1},{at:n,merge:!0}),i.name===e&&(t=i)}),t&&i.setView(t.name,t,null,{silent:!0}),n.get("show_data_source_tabs")){if(this._listeningForUserSourceInfoChanges)return;this._listeningForUserSourceInfoChanges=!0,this.sourceContextConstraints=i.models.search.input.submodel("source_context.constraints"),this.dataSources=i.models.userSourceInfo.submodel("sources.data_sources"),this.options.datasourcetabs&&(this.listenTo(this.sourceContextConstraints,"change",this.updateTabs),this.listenTo(this.dataSources.treeModel||this.dataSources,"change",this.updateTabs))}else this._listeningForUserSourceInfoChanges&&(this.stopListening(this.sourceContextConstraints),this.stopListening(this.dataSources.treeModel||this.dataSources),delete this._listeningForUserSourceInfoChanges),this.removeDataSourceTabs();this.updateTabs(),s.update()}},removeDataSourceTabs:function(){var e=this.getSelectedDataSourceIds(),t=this.getSelectedDataSources(e),i=this.isEverythingTabNeeded(t),n=this.model.filter(function(e){return e.isDataSourceTab()&&!(i&&"Everything"==e.id)});n&&n.length>0&&this.model.remove(n)},updateTabs:function(){var e=this.getSelectedDataSourceIds(),t=this.getSelectedDataSources(e);this.addEverythingTabIfNeeded(t);var i=h.map(t,function(e){return e.name}),n=h.filter(this.model.models,function(e){return e.get("_dataSourceTab")}),s=h.pluck(n,"id"),r=i.length!=s.length||h.intersection(i,s).length!==i.length;if(r){var a=h.difference(s,i),o=h.difference(i,s);this.model.remove(a),this.model.add(h.map(h.filter(t,function(e){return h.indexOf(o,e.name)>=0}),function(e){return{id:e.name,_dataSourceTab:!0,name:e.name,constraint:e.query_expr}}))}this.el.getAttribute("tabindex")&&(this.model.length?(this.$el.addClass("mb-role"),this.el.setAttribute("tabindex","0")):(this.$el.removeClass("mb-role"),this.el.setAttribute("tabindex","-1")))},isEverythingTabNeeded:function(e){return this.options.editable||e&&e.length?!this.model.find(function(e){return!e.isDataSourceTab()&&!e.isCustomTab()}):!1},addEverythingTabIfNeeded:function(e){e=e||[];var t=this.isEverythingTabNeeded(e);t&&e.splice(0,0,{name:"Everything",_dataSourceTab:!0})},getSelectedDataSources:function(e){return this.dataSources?h.reduce(this.dataSources.get(),function(t,i){return(e.length<1||h.indexOf(e,i.query_expr&&i.query_expr.id)>=0)&&t.push(i),t},[]):[]},getSelectedDataSourceIds:function(){return this._listeningForUserSourceInfoChanges?h.reduce(this.sourceContextConstraints.get(),function(e,t){if(t.filter_base){var i=h.filter(h.keys(t.filter_base),function(e){return/datasource_/.test(e)});i.length&&(e=e.concat(i))}return e},[]):[]},createEntryView:function(e){return e=h.clone(e),e.elementTemplate=this.options.elementTemplate,e.application=this.options.application,n.prototype.createEntryView.apply(this,[e])},registerActions:function(){function t(){var e=Array.prototype.slice.apply(arguments);return e=h.map(h.filter(h.flatten(e),function(e){return e}),function(e){return h.extend({},e)}),e.length<1?null:1===e.length?e[0]:{and:e}}var i=h.bind(this.updateTabs,this);e.prototype.tabsUpdated||(e.prototype.tabsUpdated=function(){var e=h.filter(this.models.tabs.models,function(e){return e.get("customTab")
});try{a.mbSavedTabs=JSON.stringify(h.map(e,function(e){return e.toJSON()}))}catch(t){}},e.prototype.loadCustomTabs=function(){var e,t=this;try{e=a.mbSavedTabs&&JSON.parse(a.mbSavedTabs)}catch(n){e=[]}h.forEach(e,function(e){e.constraint&&(e.constraint.name=e.name),e.request&&e.request.constraint&&(e.request.constraint.name=e.name),t.models.tabs.add(e)}),this.options.enableProfile||i()},e.prototype.addTab=function(){var e=this.models.tabs.getSelectedTab(),i=e&&e.get("name"),n=this.models.search.input.get("user")&&u(this.models.search.input.get("user")),s=null,r={path:[]};if(n&&n.query){var r=this.formqueryadapter.queryField()||{path:[]};s=u(c.get(n.query,r.path)),s.expandable=!0}var a,o=s&&i?", "+i:"",l=this.models.tabs.nameFromQuery(s,o)||this.models.tabs.nextName(null,o),d=this.models.search.input.get("source_context");if(n){var p=null;n.query&&r.path.length&&(p=n.query,c.unset(p,r.path));var m=t(s,d&&d.constraints&&d.constraints.view),a=new this.models.tabs.model({name:l,constraint:m,user_constraints:n.constraints,user_query:p,edit:!0,editable:!0,customTab:!0,disabled:!1}),f=h.bind(function(e,t,i){if(i===a&&t.el.parentNode){var n=t.$el.find("[data-edit]");n.length&&(a.get("edit")?this.inplaceEdit({targetEl:n[0].parentNode,model:a,deletable:!0}):this.stopListening(this.views,"afterRender:Tab",f))}},this);e&&a.setting(null,e.setting()),this.listenTo(this.views,"afterRender:Tab",f),this.models.tabs.add(a),this.changeView({model:a}),this.models.tabs.update()}})}}),m.View.EntryView=n.EntryView.extend({initialize:function(){n.EntryView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.render)},render:function(){return this.childView.render(),this},createChildView:function(e){return e=h.extend({modelType:"Tab",focusNext:!0},e),e.elementTemplate.createView(e)}}),m.DEFAULT_TEMPLATE='<script type="text/x-mustache-template" data-tag-name="a" data-attr-role="tab" data-attr-class="action" data-attr-disable="{{#disabled?}}true{{/disabled?}}{{^disabled?}}false{{/disabled?}}" data-attr-aria-selected="{{#selected?}}true{{/selected?}}{{^selected?}}false{{/selected?}}" data-attr-data-action-object="{&quot;changeView&quot;:{&quot;constraints.view&quot;: {{^constraint?}}null{{/constraint?}}{{{constraint}}} } }">{{#editable?}}<span data-event-mask="dblclick|taphold" data-edit data-action-object="{&quot;inplaceEdit&quot;: { &quot;deletable&quot;: true }}">{{/editable?}}{{{name}}}{{#editable?}}</span>{{/editable?}}</script>',m}),Mindbreeze.define("components/filteredfacets/js/filteredfacets",["api/v2/common","api/v2/search","client/template","component!base","component!filteredfacet","client/views/list","utils/dom","i18n/i18n","jquery","underscore","backbone"],function(e,t,i,n,s,r,a,o,l,u,c){var h=c.Collection.extend({initialize:function(e,i){this.options=i,c.Collection.prototype.initialize.apply(this,arguments),this.options.properties&&null!==this.options.name&&(this.configuredCollection=new t.FacetValueCollection(this.options.name,this.options.properties),this.options.searchModel.addFacet(this.configuredCollection,{silent:!0})),this.facets=i.searchModel.submodel("facets"),this.listenTo(this.facets,"change",this.update)},update:function(){var e=this,i=[],n=u.filter(this.facets.get(),function(t){return e.options.facetFilter(t)});this.options.sortFacets&&this.options.sortFacets(n),u.each(n,function(n,s){var r=n.id;i.push(r);var a=e.get(r);!a&&e.options.properties&&(a=new t.FacetValueCollection(r,e.options.properties),e.options.searchModel.addFacet(a,{silent:!0,addToFacets:!1}),a.id=r,e.add(a,{at:s}))});var s=u.difference(u.pluck(this.models,"id"),i);s=u.select(s,function(t){var i=e.options.formqueryadapter.field(t);return!i||!e.options.searchModel.input.get(["user","query"].concat(i.path))}),this.remove(s)},_prepareModel:function(e){return e.collection||(e.collection=this),e}}),d=i.extend({initialize:function(){i.prototype.initialize.apply(this,u.toArray(arguments))},createView:function(e){var t=e.node.firstChildOfType("filteredfacet");t&&t.remove();var i=new this.constructor.View(u.extend(this.attributeModel.getCamelCase(),e,{application:e.application,el:this.el,suggest:this.get("suggest"),userInput:this.get("user-input"),userInputTemplate:this.get("user-input-template"),collapsible:this.get("collapsible",e.collapsible),defaultOpen:this.get("default-open",e.defaultOpen),displayed:this.get("displayed"),template:this,facetTemplate:t,idOrder:this.get("id-order"),nameOrder:this.get("name-order")}));return this.instances.push(i),i},schema:new i.Schema({attributes:{suggest:{type:"boolean",title:"editor_facet_suggest_label","default":!0,visible:!1},"user-input":{type:"string",title:"editor_facet_user_input_label",model_stored:!1,defaultValue:"auto",values:[{value:"auto",text:o("editor_facet_user_input_value_auto")},{value:"",text:o("editor_facet_user_input_value_enabled")},{value:"disabled",text:o("editor_facet_user_input_value_disabled")}]},"user-input-template":{type:"SearchFormComponent",model_stored:!1,title:"editor_facet_user_input_template_label",values:[{value:null},{value:"suggest",text:o("editor_facet_user_input_template_value_suggest")},{value:"inputdate",text:o("editor_facet_user_input_template_value_inputdate")}],depends:"/^\\s*$/.test(attributes['user-input'])"},displayed:{type:"int",title:"editor_facet_displayed_label","default":Number.MAX_VALUE},collapsible:{type:"boolean",title:"editor_facet_collapsible_label","default":!1},"default-open":{type:"boolean",title:"editor_facet_default_open_label","default":!1},"id-order":{type:"list",title:"editor_facet_id_order_label",visible:!1},"name-order":{type:"list",title:"editor_facet_name_order_label",visible:!1}}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},getContent:function(){return this.children[0].template},setContent:function(e){this.children[0].template=e},remove:function(e){u.forEach(this.instances,function(e){e.remove()}),this.instances=[],u.forEach(e.node.children,function(e){e.template.remove({node:e})})}});return d.DEFAULT_TEMPLATE='<div style="display: none" role="presentation"><div data-template="filteredfacet"></div></div>',d.View=r.extend({filteredFacetOptionRegex:/^(titleTagName|titleClassName|facetEntryTagName|facetEntryClassName|facetEntryRole|facetContainerTagName|facetContainerClassName|suggest|userInput.*|displayed|collapsible|defaultOpen|accordion|andAvailable)$/,defaultOptions:{entryTagName:"div",entryRole:"presentation"},initialize:function(){var e=this;this.attributeModel||(this.attributeModel=new a.AttributeModel(this.el,"data-"));var t=this.attributeModel.get("id-pattern"),i=this.attributeModel.get("name-pattern"),n=function(e){return e.configured||!1},s=this.attributeModel.get("name");t?(t=new RegExp(t),n=function(e){return null!==e&&e.id&&e.id.match(t)}):i&&(i=new RegExp(i),n=function(e){return null!==e&&e.name&&e.name.match(i)}),this.origModel=this.model,this.model=new h([],{formqueryadapter:this.options.application.formqueryadapter,facetFilter:n,sortFacets:this.getSortFacetsFunction(this.options),name:s,searchModel:this.origModel,properties:this.properties||this.options.facetTemplate&&this.options.facetTemplate.firstChildOfType("mustache").template.properties});var o=this.options,l=this.options.filteredFacetOptions||{};u.each(o,function(t,i){e.filteredFacetOptionRegex.test(i)&&(l[e.cleanFacetOptionName(i)]=o[i],delete o[i])}),this.options.filteredFacetOptions=l,r.prototype.initialize.apply(this,arguments)},getSortFacetsFunction:function(t){var i,n,s,r,a;return t.idOrder?(r=t.idOrder,n="id"):t.nameOrder&&(r=t.nameOrder,n="name"),n&&(s=e.getOrderFunctionByList(r,n),a=e.getCompareFunction("ORDER","ASCENDING"),i=function(e){return s(e),e.sort(a)}),i},cleanFacetOptionName:function(e){return e&&e.replace(/^facet(.)/,function(e,t){return t.toLowerCase()})},createEntryView:function(e){return e=u.extend({},e,this.options.filteredFacetOptions,{origModel:this.origModel,facetTemplate:this.options.facetTemplate}),r.prototype.createEntryView.apply(this,arguments)}}),d.View.EntryView=r.EntryView.extend({createChildView:function(e){e=u.clone(e),delete e.childViewConstructor;var t=e.facetTemplate.template.createView(u.extend({},e,{el:l(e.facetTemplate.template.el).clone(),collection:e.model,model:e.origModel,facetName:e.model.id,node:e.facetTemplate.template})).render();return t},setModel:function(){n.prototype.setModel.apply(this,arguments)}}),d}),Mindbreeze.define("model/favorites-adapter",["utils/clone","underscore","backbone"],function(e,t,i){function n(){this.initialize.apply(this,arguments)}return t.extend(n.prototype,i.Events,{initialize:function(e){this.options=e,this.persistedCollection=e.persistedCollection,this.connectedCollection=e.connectedCollection,this.listenTo(this.persistedCollection,"add",this.addPersisted),this.listenTo(this.persistedCollection,"remove",this.removePersisted),this.listenTo(this.persistedCollection,"reset",this.resetPersisted),this.listenTo(this.connectedCollection,"add",this.addConnected),this.listenTo(this.connectedCollection,"remove",this.removeConnected)},findPersisted:function(e){var t=e.get(this.options.keyPath);return this.persistedCollection.find(function(e){return e.get("properties.key")===t})},findConnected:function(e){return this.connectedCollection.get(e.get("properties.key"))},addPersisted:function(e){e.get("properties.type")===this.options.type&&(this.findConnected(e)||this.connectedCollection.add(e.get("data")))},removePersisted:function(e){var t=this.findConnected(e);t&&t.trigger("destroy",t,t.collection)},resetPersisted:function(){var e=this;this.connectedCollection.reset(),this.persistedCollection.each(function(t){e.addPersisted(t)})},addConnected:function(t){this.findPersisted(t)||this.persistedCollection.add({properties:{name:t.get(this.options.namePath),key:t.get(this.options.keyPath),type:this.options.type},data:e(t.attributes)})},removeConnected:function(e){var t=this.findPersisted(e);t&&t.trigger("destroy",t,t.collection)},dispose:function(){this.stopListening()}}),n}),Mindbreeze.define("model/persisted_collection_application_extensions",["client/application","model/persisted_collection","api/v2/persisted","service/stub","underscore","backbone","utils/jsonpath"],function(e,t,i,n,s,r,a){var o=e.prototype.getModel;e.prototype.getModel=function(e){return/^persistedresources:/.test(e)?this.getPersistedResourcesCollectionModel(e.substring(19).split("/")):o.apply(this,arguments)};var l=t.Model.extend({parse:function(e){var t=s.extend({},e),i={};return s.isArray(e&&e.property)&&(i.properties=s.reduce(e.property,function(e,t){return e[t.key]=t.value,e},{}),delete t.property),e&&e.id||!e||!e.path||(i.id=e.path.join("/")),t&&t.data&&(t.data=JSON.parse(decodeURIComponent(e.data))),s.extend({},t,i)},toJSON:function(){var e=s.clone(this.attributes);if(e.properties&&s.isObject(e.properties)){for(var t=[],i=s.keys(e.properties),n=0;n<i.length;++n)t.push({key:i[n],value:e.properties[i[n]]});e.property=t,delete e.properties}return e.data&&(e.data=encodeURIComponent(JSON.stringify(e.data))),e},get:function(e){return a.evalPath(e,this.attributes)}});e.prototype.getPersistedResourcesCollectionModel=function(e){var t="persistedresources:"+e.join("/"),n=this.models[t];if(n)return n;var s=new i({channels:this.models.defaultChannels,model:l}),n=s.resources(e);return n.fetch({path:e}),this.models[t]=n,n}}),Mindbreeze.define("components/collect/js/collect",["i18n/i18n","client/resourceinfo","underscore","backbone","client/template","component!base","client/views/list","api/v2/search","jquery","mustache","utils/browser","utils/dom","extensions","model/favorites-adapter","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p){var m=n.Collection.extend({}),f=r.extend({tagName:"button",className:"btn-link",events:function(){return i.extend({},r.prototype.events,{click:"handleAction",keypress:"handleAction"})},initialize:function(){r.prototype.initialize.apply(this,arguments),this.$el.addClass("action")},render:function(){var e=this.model.get("icon");/^ui-icon-folder-collapsed$/.test(e)&&(e="icon-folder-close"),e=e?'<i class="'+e+'"></i> ':"",this.$el.attr("tabindex","0"),this.el.innerHTML=e+this.model.get("label"),this.options.describedById&&this.el.setAttribute("aria-describedby",this.options.describedById);var t=this.model.get("action_object");return t||(t={extensionAction:{id:this.model.get("action")}}),this.el.setAttribute("data-action-object",JSON.stringify(t)),this},handleActionObjectCall:function(e,t,n){var s=this.options.invokeInContext,a=this.model.get("label");e=i.clone(e),e.invokeInContext=function(){var e=i.toArray(arguments);e.push(a),s.apply(this,e)},r.prototype.handleActionObjectCall.apply(this,[e,t,n])}}),g=r.extend({className:"mb-line-item",initialize:function(){this.options.modelType=this.options.modelType||"CollectedResult",r.prototype.initialize.apply(this,arguments),this.render()},showTooltip:function(){var e;this.options.resultsShortcutTooltipId&&(e=document.getElementById(this.options.resultsShortcutTooltipId),e&&(this.el.setAttribute("aria-describedby",this.options.resultsShortcutTooltipId),e.removeAttribute("aria-hidden")),l("body").on("focusin.tooltip_"+this.cid,i.bind(this.handleBlur,this)))},handleBlur:function(){var e;h.isChild(document.activeElement,this.el)||(l("body").off("focusin.tooltip_"+this.cid),e=document.getElementById(this.options.resultsShortcutTooltipId),e&&(this.el.removeAttribute("aria-describedby"),e.setAttribute("aria-hidden","true")))},render:function(){var t=i.uniqueId("collected_result");return this.el.innerHTML='<span id="'+t+'">'+this.model.get("html")+'</span> <span class="pull-right">      <button class="action mb-btn-no-decor" tabindex="0" data-action-object="{&quot;destroyModel&quot;: {}}"       title="'+e("action_delete")+'" aria-describedby="'+t+'">      <i class="icon-trash"></i><span class="mb-acc" data-i18n="action_delete">'+e("action_delete")+"</span></button></span>",this.options.application&&this.options.application.views&&this.options.modelType&&this.options.application.views.trigger("afterRender:"+this.options.modelType,this.options.application,this,this.model),this}}),v=s.extend({schema:new s.Schema({attributes:{favoritesCollectionPath:{type:"string",title:"editor_collect_favorites_collection_path"}}}),getOptions:function(e){return e=s.prototype.getOptions.apply(this,arguments),i.extend({},e,this.schema?this.schema.parseAttributes(this.attributeModel.getCamelCase()):this.attributeModel.getCamelCase())}}),_=a.extend({createEntryView:function(e){return e.resultsShortcutTooltipId=this.options.resultsShortcutTooltipId,a.prototype.createEntryView.apply(this,arguments)}});return v.View=r.extend({className:"mb-collect-view",defaultOptions:{titleTagName:"h2"},initialize:function(){var t,n=this,s=this.options["results-shortcut"];s&&(this.resultsShortcutTooltipId=this.cid+"_results_shortcut"),this.model=this._createApplicationModelIfNotAvailable(),r.prototype.initialize.apply(this,arguments),t=this.cid+"_title",this.$el.hide(),this.titleEl=this.appendChild(this.make(this.options.titleTagName,{id:t,"class":this.options.titleClassName||""},e("CollectWidgetTitle")),!0),l(this.titleEl).attr("data-i18n","CollectWidgetTitle"),this.el.hasAttribute("role")||this.el.hasAttribute("aria-label")||this.el.hasAttribute("aria-labelledby")||(this.$el.attr("role","region"),this.$el.attr("aria-labelledby",t)),this.collected=new _({model:this.model,childViewConstructor:g,application:this.options.application,resultsShortcutTooltipId:this.resultsShortcutTooltipId}).render(),this.appendChild(this.collected.el),this.statusElement=l("<div/>"),this.appendChild(this.statusElement.get(0),!0);var o=i.bind(this.invokeInContext,this);this.actionCollection=this._getActionCollection(),this.actions=new(a.extend({createEntryView:function(e){return e=i.clone(e),e.collectView=n,e.invokeInContext=o,e.describedById=t,a.prototype.createEntryView.apply(this,[e])}}))({tagName:"ul",className:"mb-role inline",entryTagName:"li",role:"toolbar",model:this.actionCollection,childViewConstructor:f,application:this.options.application}).render(),this.appendChild(this.actions.el),s&&(this.resultsShortcutTooltipContainerEl=this.appendChild(this.make("div",{style:"position: relative"},'<span id="'+this.resultsShortcutTooltipId+'" class="mb-role mb-bottom" role="tooltip" aria-hidden="true">'+e("results_shortcut_tooltip",[s])+"</span>"),!0)),this.listenTo(this.model,"add",this.updateContent),this.listenTo(this.model,"remove",this.updateContent)},copyCollected:function(){try{var t=document.createElement("div");if(t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",t.innerHTML=i.map(this.model.models,function(e){return"<div>"+e.get("html")+"</div>"}).join(""),document.body.appendChild(t),t.contentEditable=!0,document.createRange){var n=document.createRange();n.setStart(t,0),n.setEndAfter(t.lastChild,0);var s=window.getSelection();s.removeAllRanges(),s.addRange(n);try{document.execCommand("copy",!1,null)}catch(r){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),document.execCommand("copy",!1,null)}catch(r){}}}else{var n=document.body.createTextRange();n.moveToElementText(t),n.execCommand("copy")}t.parentNode.removeChild(t)}catch(r){this.showStatusMessage(null,"error",e("Copy"))}},emptyCollected:function(){this.model.remove(this.model.models)},_getActionCollection:function(){var e=[],t=l.browser.msie||c.hasIEVendorPrefix();t&&e.push({label:"<span data-i18n='Copy'></span>",icon:"icon-copy",collected:this.model,action_object:{copyCollected:{}}}),e.push({label:"<span data-i18n='EmptyList'></span>",icon:"icon-trash",collected:this.model,action_object:{emptyModel:{path:"collected"}}});var s=i.filter(d.extensions.getExtensionsForExtensionPoint("mindbreeze.client.ui.Action"),function(e){return"CollectAction"===e.kind});return new n.Collection(e.concat(s))},updateContent:function(){this.showStatusMessage(),this.model.length>0?this.$el.is(":visible")||this.$el.slideDown():this.$el.hide()},invokeInContext:function(e,t,n,s){var r=this,a=this.$el;a.addClass("mb-computing"),this.showStatusMessage(),d.invokeInContextHelper(e,t,n,function(e){a.removeClass("mb-computing"),r.handleCheckoutCollectedResultsResponse(e,s)},{collected_result:i.map(r.options.application.models.collected.models,function(e){return e.toJSON()})})},handleCheckoutCollectedResultsResponse:function(e,t){e&&(e.status&&(this.showStatusMessage(e.status.msg,e.status.code,t),/error/i.test(e.status.code))||e.empty_collected_results&&this.emptyCollectedResults())},emptyCollectedResults:function(){this.options.application.models.collected.remove(this.options.application.models.collected.models)},showStatusMessage:function(t,i,n){i=(i||"success").toLowerCase(),t=t||"error"===i&&e("error_checkout_collected_results",[n]);var s,r,a=!1;this.statusElement.html(""),t&&("success"===i?a=!0:"error"===i&&(r='<i class="icon-warning-sign"></i>'),s=l(u.to_html('<div class="mb-{{type}}">{{{image}}} {{message}}</div>',{message:t,type:i,image:r})),this.statusElement.prepend(s),a&&s.delay(2e3).slideUp())},_createApplicationModelIfNotAvailable:function(){var e=this.options.application,t=e.models.collected=e.models.collected||new m;return this.options.favoritesCollectionPath&&!/^\$\$FAVORITES_COLLECTION_PATH\$\$$/.test(this.options.favoritesCollectionPath)&&new p({persistedCollection:e.getModel("persistedresources:"+this.options.favoritesCollectionPath),connectedCollection:t,namePath:"html",keyPath:"id",type:"collectedResult"}),e.collectResult=e.collectResult||this.collectResult,e.copyCollected=e.copyCollected||function(e){return e.sender.options.collectView.copyCollected()},e.models.search.addResultCollection(new o.ResultCollection({"mes:key":{format:"VALUE"}})),e.trigger("addmodel:collected",t),t},collectResult:function(e){var t,s=e.model.get("actions[0].href"),r=e.model.get("icon",{format:"HTML"}),a=e.model.get("title"),o=this,l=e.model.get("title"),u=/(<([^>]+)>)/gi;i.isObject(l)||(l=l.replace(u,"")),i.isObject(a)||(a=a.replace(u,"")),l.data&&l.data.length>0&&(l=l.data[0].html),r&&(l=r+" "+l),s&&(l='<a href="'+s+'" target="_blank">'+l+"</a>");var c=new n.Model({id:e.model.get("location"),text:a,html:l,link:[{href:{url:e.model.get("actions[0].href")}}],key:e.model.get("mes:key"),model:e.model.get()});t=function(e,n,s){s===c&&i.defer(function(){n.$el[0].parentNode&&(h.focus(n.$el),n.showTooltip(),e.stopListening(e.views,"afterRender:CollectedResult",t))})},o.listenTo(o.views,"afterRender:CollectedResult",t),this.models.collected.add(c)},remove:function(e){e&&e!==this.model||(this.collected.remove(),this.actions.remove(),r.prototype.initialize.apply(this,arguments))}}),v.CollectListView=_,v.CollectedItemView=g,v}),Mindbreeze.define("components/applists/js/applists",["i18n/i18n","utils/string","client/template","client/views/list","component!base","component!channels","underscore","jquery"],function(e,t,i,n,s,r){var a=s.extend({events:{submit:"add"},showError:function(t){this.clearError(),this.insertAt(this.make("div",{"class":"alert alert-error"},'<button type="button" class="close" data-dismiss="alert">&times;<span class="mb-acc">'+e("Close")+"</span></button>"+e(t)),0)},clearError:function(){this.$el.find(".alert").remove()},isUrl:function(e){return/^((?:f|ht)tp(?:s)?\:\/\/[^\/]+)/i.test(e)},add:function(e){e.preventDefault(),this.clearError();var i=e.target,n=t.escape(i.url.value);return n===i.url.value&&this.isUrl(n)?(/\/$/.test(n)||(n+="/"),/\/api\/v2\/$/.test(n)||(n+="api/v2/"),this.model.add(n),i.url.value="",void 0):(this.showError("please_enter_a_valid_url"),void 0)},render:function(){return this.el.innerHTML='<form><input placeholder="'+e("web_client_url")+'" name="url"> <button class="btn"><i class="icon-plus"></i> <span class="mb-acc">'+e("custom_datasources_add")+"</span></button></form>",this}}),o=r.View,l=s.extend({render:function(){var e=this.model.get("title");return e?(this.titleEl||(this.titleEl=this.make("h3"),this.appendChild(this.titleEl,!0)),this.titleEl.innerHTML=e):this.removeOwnedNode(this.titleEl),!this.channels&&this.model.get("channels")&&(this.channels=new o({model:this.model.get("channels"),application:this.options.application}).render(),this.appendChild(this.channels.el)),!this.addView&&this.model.get("isCustomDataSources")&&(this.addView=new a({model:this.model.get("channels")}).render(),this.appendChild(this.addView.el)),this},remove:function(){this.channels&&this.channels.remove(),this.addView&&this.addView.remove(),s.prototype.remove.apply(this,arguments)}}),u=i.extend({model:function(){return this.application.models.applists}});return u.View=n.extend({initialize:function(){this.options.childViewConstructor=l,this.options.entryTagName="div",this.options.entryClassName="",n.prototype.initialize.apply(this,arguments)}}),u}),Mindbreeze.define("text!components/sortswitch/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  {{#orderable?}}\n    <h2>{{{i18n.client_toolbar_sortingalgorithm_label}}}</h2>\n    <div class="mb-line-item">\n      <select data-bind="orderby" data-action-object="{&quot;changeOrderBy&quot;:{}}" data-event-mask="change" aria-label="{{{i18n.client_toolbar_sortingalgorithm_label}}}">\n        {{#orderable}}\n          <option {{#isSelected?}}selected{{/isSelected?}} value="{{name}}">{{localized_name}}</option>\n        {{/orderable}}\n      </select>\n\n      {{#order_direction_available?}}\n        <fieldset class="pull-right" style="margin-left: 0;">\n          <legend class="mb-acc">{{i18n.order_direction}}</legend>\n          <label class="mb-hidden-radio" title="{{i18n.sort_ascending}}">\n            <input type="radio" name="sortswitch" value="ASCENDING" class="action" data-bind="resultset.order_direction" data-name="order_direction" data-value="ASCENDING">\n            <span>\n              <i class="icon-sort-by-alphabet"></i>\n              <span class="mb-acc">{{i18n.sort_ascending}}</span>\n            </span>\n          </label>\n          <label class="mb-hidden-radio" title="{{i18n.sort_descending}}">\n            <input type="radio" name="sortswitch" value="DESCENDING" class="action" data-bind="resultset.order_direction" data-name="order_direction" data-value="DESCENDING">\n            <span>\n              <i class="icon-sort-by-alphabet-alt"></i>\n              <span class="mb-acc">{{i18n.sort_descending}}</span>\n            </span>\n          </label>\n        </fieldset>\n      {{/order_direction_available?}}\n    </div>\n  {{/orderable?}}\n</script>\n'}),Mindbreeze.define("components/sortswitch/js/sortswitch",["utils/string","client/template","component!base","text!../mustache/template.mustache","underscore"],function(e,t,i,n,s){var r="mes:relevance",a=function(e){this.original=e;for(var t=this,i=[],n=this.original.constructor.__super__;n;)i.push(n),n=n.__super__;i.reverse(),i.push(this.original.constructor.prototype),s.forEach(i,function(e){s.forEach(e,function(e,i){a.prototype[i]||(t[i]=function(){e.apply(this.original,arguments)})})})};s.extend(a.prototype,{get:function(e){if("isSelected"===e){var t=this.getInput().get("orderby");return t||(t=r),t===this.get("name")}return e&&e.length>1&&"order_direction"===e[1]?this.original.get.apply(this.original,arguments)||"DESCENDING":this.original.get.apply(this.original,arguments)},submodel:function(){return new a(this.original.submodel.apply(this.original,arguments))},getInput:function(){return this.original.input.treeModel?this.original.input.treeModel:this.original.input}});var o=t.extend({hasContent:function(){return!0},createSubView:function(e,i,n){n=new a(n);var s=t.prototype.createSubView.apply(this,[e,i,n]),r=t.prototype.createSubView.apply(this,[e,i,n]);return r.render,s.el.parentNode.removeChild(s.el),r.render=function(){var e=s.el.innerHTML;return e!==this.el.innerHTML&&(this.el.innerHTML=e),this.$el.find("[data-bind]").each(function(){var e=this.getAttribute("data-bind"),t=n.get(e.split("."));/input/i.test(this.tagName)&&(/checkbox|radio/i.test(this.type)?this.checked=this.value===t:this.value=t)}),this},r}});return o.View=i.extend({}),o.DEFAULT_TEMPLATE=n,o}),Mindbreeze.define("text!components/groupswitch/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  {{#groupable?}}\n  <h2>{{{i18n.client_toolbar_groupby_label}}}</h2>\n  <select data-action-object="{&quot;changeGroupBy&quot;:{}}" data-event-mask="change">\n    <option class="mb-selectable {{^groupby.property?}}mb-selected{{/groupby.property?}}" value="">{{{i18n.client_groupby_none}}}</option>\n    {{#groupable}}\n    <option {{#isSelected?}}selected{{/isSelected?}} class="action" tabindex="0" value="{{name}}">{{localized_name}}</option>\n    {{/groupable}}\n  </ul>\n  {{/groupable?}}\n</script>\n'}),Mindbreeze.define("components/groupswitch/js/groupswitch",["client/template","component!base","text!../mustache/template.mustache","underscore"],function(e,t,i,n){var s=function(e){this.original=e;for(var t=this,i=[],r=this.original.constructor.__super__;r;)i.push(r),r=r.__super__;i.reverse(),i.push(this.original.constructor.prototype),n.forEach(i,function(e){n.forEach(e,function(e,i){s.prototype[i]||(t[i]=function(){e.apply(this.original,arguments)})})})};n.extend(s.prototype,{get:function(e){if("isSelected"===e){var t=this.getInput().get("groupby.property");return t===this.get("name")}return this.original.get.apply(this.original,arguments)},submodel:function(){return new s(this.original.submodel.apply(this.original,arguments))},getInput:function(){return this.original.input.treeModel?this.original.input.treeModel:this.original.input}});var r=e.extend({hasContent:function(){return!0},createSubView:function(t,i,n){return n=new s(n),e.prototype.createSubView.apply(this,[t,i,n])}});return r.View=t.extend({}),r.DEFAULT_TEMPLATE=i,r}),Mindbreeze.define("component!savedsearches",["client/template","i18n/i18n","component!base","client/views/list","api/v2/search","model/persisted_collection","service/stub","utils/browser","utils/clone","utils/dom","utils/jsonpath","utils/localStorage","backbone","underscore","jquery","utils/inplace-edit"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m){var f=d.Model.extend({parse:function(e){return e&&e.request&&e.request.user&&(e.request.user=s.SearchRequest.parseUser(e.request.user)),e},toJSON:function(){var e=p.clone(this.attributes);return e&&e.request&&(e.request=s.SearchRequest.jsonify(e.request)),e},get:function(e){return"id"===e?this.cid:d.Model.prototype.get.apply(this,arguments)},toText:function(){var e=document.createElement("a");return e.href=this.get("url"),this.get("name")+": "+e.href},toHtml:function(){var e=document.createElement("a");return e.href=this.get("url"),'<a href="'+e.href+'">'+this.get("name")+"</a>"},getUser:function(){return this.attributes&&this.attributes.request?this.attributes.request.user:null},getOrderBy:function(){return this.attributes&&this.attributes.request?this.attributes.request.orderby:null}}),g=d.Model.extend({parse:f.prototype.parse,get:function(e){return"id"===e?this.cid:d.Model.prototype.get.apply(this,arguments)},toText:function(){var e=document.createElement("a");return e.href=this.get("url"),this.get("name")+": "+e.href},toHtml:function(){var e=document.createElement("a");return e.href=this.get("url"),'<a href="'+e.href+'">'+this.get("name")+"</a>"},getUser:function(){return this.attributes&&this.attributes.user?this.attributes.user:this.attributes&&this.attributes.request?this.attributes.request.user:null},getOrderBy:function(){return this.attributes&&this.attributes.orderby?this.attributes.orderby:this.attributes&&this.attributes.request?this.attributes.request.orderby:null},save:function(){this.collection&&this.collection.sync("update")}}),v=function(e,t){var i=!0;m(document.body).on("focusin.mb-savedsearches",function(){i=!1}),e.models.search.once("computed",function(){p.defer(function(){m(document.body).off(".mb-savedsearches"),i&&u.focus(m(t))})})},_=r.extend({model:f,_namePrefix:t("saved_search")+" ",initialize:function(){r.prototype.initialize.apply(this,arguments)},parse:function(e){var t=e.persisted_queries;return t},_prepareModel:function(){var e=r.prototype._prepareModel.apply(this,arguments),t=e.get("request.user"),i=t&&t.query&&t.query.unparsed;return i&&e.set("request",{user:{query:{and:{query:{unparsed:i}}}}}),e}}),y=d.Collection.extend({model:g,_namePrefix:t("saved_search")+" ",initialize:function(){this.listenTo(this,"add",this.save),this.listenTo(this,"update",this.save),this.listenTo(this,"remove",this.save)},save:function(){this.sync("update")},_prepareModel:function(){var e=d.Collection.prototype._prepareModel.apply(this,arguments),t=e.get("user"),i=t&&t.query&&t.query.unparsed;return i&&e.set("user",{query:{and:{query:{unparsed:i}}}}),e},sync:function(e){var t=this;if("read"===e)try{var i=h.mbSavedSearches&&JSON.parse(h.mbSavedSearches);p.forEach(i,function(e){t.add(new g(e,{parse:!0}))})}catch(n){}else if("update"===e)try{h.mbSavedSearches=JSON.stringify(this.toJSON())}catch(n){}}}),b=e.extend({hasContent:function(){return!0},createView:function(t){return t=p.extend(this.attributeModel.getCamelCase(),this.get(),t,{elementTemplate:this.node.children[0].template,datasourcetabs:this.get("datasourcetabs")}),delete t.node,e.prototype.createView.apply(this,[t])},schema:new e.Schema({attributes:{serversaved:{type:"boolean",title:"saved_search","default":!1,visible:!1},"save-export-properties":{type:"boolean",title:"save-export-properties","default:":!1}}})});b.DEFAULT_TEMPLATE='<script type="text/x-mustache-template" data-class-name="mb-line-item"><a id="{{id}}" tabindex="0" role="button" class="mb-tooltip btn-link" data-action-object="{&quot;executeSavedSearch&quot;: {}}"><h3 class="mb-text" data-event-mask="dblclick|taphold" data-edit data-action-object="{&quot;inplaceEdit&quot;: {}}">{{name}}</h3></a><div class="pull-right"><button class="action mb-btn-no-decor" data-action-object="{&quot;destroyModel&quot;: {}}" title="{{i18n.action_delete}}" aria-describedby="{{id}}"><i class="icon-trash"></i><span class="mb-acc">'+t("action_delete")+"</span></button></div></"+"script>";
var w=n.extend({setModel:function(){n.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"reset",this.addAll)},addAll:function(e,t){for(var i=0;i<e.models.length;i++)this.addOne(e.models[i],e,t)}});return w.EntryView=n.EntryView.extend({createChildView:function(e){return e=p.extend({modelType:"SavedSearch",focusNext:!0},e),this.options.childViewConstructor.createView(e)}}),b.View=i.extend({defaultOptions:{titleTagName:"h2"},initialize:function(){var e=this;this.model=this._createApplicationModelIfNotAvailable();var n=Boolean(this.options.saveExportProperties);i.prototype.initialize.apply(this,arguments),this.options=p.extend({childViewConstructor:this.options.elementTemplate},this.defaultOptions,this.options),this.titleEl=this.make(this.options.titleTagName,{"class":this.options.titleClassName,id:"savedsearches-title-"+this.cid},t("saved_searches")),this.appendChild(this.titleEl),m(this.titleEl).attr("data-i18n","saved_searches"),this.el.hasAttribute("role")||this.el.hasAttribute("aria-label")||this.el.hasAttribute("aria-labelledby")||(this.$el.attr("role","region"),this.$el.attr("aria-labelledby","savedsearches-title-"+this.cid)),this.$hint=this.make("small",{"class":"mb-hint"});var s=this.make("span",{"data-i18n":"save_search_hint"},t("save_search_hint")),r=this.make("button",{"data-action-object":'{"saveSearch": {}}',"class":"btn btn-link","data-enable-if-model-valid":"search",disabled:"disabled",title:""+t("save_search")});m(r).append('<i class="icon-save"></i><span class="mb-acc">"'+t("save_search")+'"</span>'),this.$hint.appendChild(s),this.$hint.appendChild(r),this.appendChild(this.$hint),this.list=new w(p.extend({childViewConstructor:this.options.elementTemplate},this.defaultOptions,this.options,{el:null,model:this.model})),this.appendChild(this.list.render().el),this.options.application.executeSavedSearch=this.options.application.executeSavedSearch||function(e){var t,i=this.models.search.isActivated();this.models.search.deactivate(),this.changeView({name:e.model.get("selected_tab_name")||e.model.get("selectedTabName")});var n=e.model.get("selected_export_properties")||!1;n&&this.models.exportProperties.set({properties:n}),this.models.search.set("orderby",l(e.model.getOrderBy())),i&&this.models.search.activate({silent:!0}),this.models.search.set("user",l(e.model.getUser()),{forceUIUpdate:!0}),t=e.sender.$el.closest("[aria-controls]").attr("aria-controls"),t&&v(this,"#"+t)},this.options.application.saveSearch=this.options.application.saveSearch||function(){var t,i=this.models.search.input.get("user")&&l(this.models.search.input.get("user")),s=this.models.search.input.get("orderby")&&l(this.models.search.input.get("orderby")),r=null,a={path:[]};if(i&&i.query){var a=this.formqueryadapter.queryField()||{path:[]};r=c.get(i.query,a.path)}var o=this.models.savedSearches.nameFromQuery(r)||this.models.savedSearches.nextName();if(i){var h={name:o,request:{user:i,orderby:s},selected_tab_name:this.models.search.get("source_context.constraints.view.name"),edit:!0};if(n){var d=this.models.exportProperties&&this.models.exportProperties.get("properties");d&&(h.selected_export_properties=d)}var m=new e.model.model(h,{parse:!1});t=p.bind(function(e,i,n){n===m&&p.defer(p.bind(function(){i.$el[0].parentNode&&(u.focus(i.$el),this.stopListening(this.views,"afterRender:SavedSearch",t))},this))},this),this.listenTo(this.views,"afterRender:SavedSearch",t),e.model.add(m)}}},_createApplicationModelIfNotAvailable:function(){var e=this.options.application,t=window.location.pathname;if(this.options.serversaved)var i=e.models.savedSearches=e.models.savedSearches||function(){var i=new _(null,{serviceStub:new a({path:"persistedqueries"}),channels:e.models.defaultChannels,appid:t});return i.fetch(),i}();else var i=e.models.savedSearches=e.models.savedSearches||function(){var e=new y;return e.fetch(),e}();return this.options.application.emptySavedSearches=this.options.application.emptySavedSearches||function(){this.models.savedSearches.remove(this.models.savedSearches.models)},i}}),b}),Mindbreeze.define("components/savedsearches/js/savedsearches",function(){}),Mindbreeze.define("text!client/../../component/sortswitch/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  {{#orderable?}}\n    <h2>{{{i18n.client_toolbar_sortingalgorithm_label}}}</h2>\n    <div class="mb-line-item">\n      <select data-bind="orderby" data-action-object="{&quot;changeOrderBy&quot;:{}}" data-event-mask="change" aria-label="{{{i18n.client_toolbar_sortingalgorithm_label}}}">\n        {{#orderable}}\n          <option {{#isSelected?}}selected{{/isSelected?}} value="{{name}}">{{localized_name}}</option>\n        {{/orderable}}\n      </select>\n\n      {{#order_direction_available?}}\n        <fieldset class="pull-right" style="margin-left: 0;">\n          <legend class="mb-acc">{{i18n.order_direction}}</legend>\n          <label class="mb-hidden-radio" title="{{i18n.sort_ascending}}">\n            <input type="radio" name="sortswitch" value="ASCENDING" class="action" data-bind="resultset.order_direction" data-name="order_direction" data-value="ASCENDING">\n            <span>\n              <i class="icon-sort-by-alphabet"></i>\n              <span class="mb-acc">{{i18n.sort_ascending}}</span>\n            </span>\n          </label>\n          <label class="mb-hidden-radio" title="{{i18n.sort_descending}}">\n            <input type="radio" name="sortswitch" value="DESCENDING" class="action" data-bind="resultset.order_direction" data-name="order_direction" data-value="DESCENDING">\n            <span>\n              <i class="icon-sort-by-alphabet-alt"></i>\n              <span class="mb-acc">{{i18n.sort_descending}}</span>\n            </span>\n          </label>\n        </fieldset>\n      {{/order_direction_available?}}\n    </div>\n  {{/orderable?}}\n</script>\n'}),Mindbreeze.define("text!components/alert/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  <div class="alert alert-{{level}} mb-clipped" data-toggle="fulltext">\n    <button type="button" class="mb-hidden-detail close" data-action-object="{&quot;destroyModel&quot;: {}}" title="{{i18n.Close}}">&times;</button>\n    {{{message}}}\n    {{{error}}}\n    {{{warning}}}\n    {{{info}}}\n    {{#service_ids?}}\n      ({{{service_ids}}})\n    {{/service_ids?}}\n  </div>\n</script>\n'}),Mindbreeze.define("components/alert/js/alert",["underscore","client/template","client/views/list","text!../mustache/template.mustache"],function(e,t,i,n){var s=t.extend({hasContent:function(){return!0},model:function(e){return e.application.models.channels.alerts},createView:function(t){var i=new this.constructor.View(e.extend(this.attributeModel.getCamelCase(),t,{el:this.el,model:this.model(t),elementTemplate:t.node&&t.node.children&&t.node.children[0]&&t.node.children[0].template}));return this.instances.push(i),i}});return s.View=i.extend({defaultOptions:{entryTagName:"div",entryClassName:""},createEntryView:function(t){return t=e.clone(t),t.elementTemplate=this.options.elementTemplate,i.prototype.createEntryView.apply(this,[t])}}),s.View.EntryView=i.EntryView.extend({createChildView:function(e){return e.elementTemplate.createView(e)}}),s.DEFAULT_TEMPLATE=n,s}),Mindbreeze.define("text!client/../../component/alert/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  <div class="alert alert-{{level}} mb-clipped" data-toggle="fulltext">\n    <button type="button" class="mb-hidden-detail close" data-action-object="{&quot;destroyModel&quot;: {}}" title="{{i18n.Close}}">&times;</button>\n    {{{message}}}\n    {{{error}}}\n    {{{warning}}}\n    {{{info}}}\n    {{#service_ids?}}\n      ({{{service_ids}}})\n    {{/service_ids?}}\n  </div>\n</script>\n'}),Mindbreeze.define("text!components/exportview/html/content.html",[],function(){return' <div data-template="view" data-count="10" data-constraint=\'ALL\'>\n   <div class="mb-progress-bar mb-fixed"></div>\n   <div data-template="table" data-edittable="true" data-allowexport="true"></div>\n </div>\n'}),Mindbreeze.define("components/exportview/js/exportview",["client/template","component!base","utils/mustache","backbone","text!../html/content.html","component!view","jquery"],function(e,t,i,n,s,r,a){var o=r.extend({innerHTML:function(){return s},initialize:function(){var t=a(this.node.el);if(!t.html().replace(/\s+/,"")&&this.innerHTML()){a(t).html(this.innerHTML());var i=this.application.options.appendOnTableScroll||!0;a(this.node.el).find('[data-template="table"]').attr("data-appendonscroll",i),this.node.collect()}e.prototype.initialize.apply(this,arguments)}});return o.View=o,o}),Mindbreeze.define("text!client/../../component/exportview/html/content.html",[],function(){return' <div data-template="view" data-count="10" data-constraint=\'ALL\'>\n   <div class="mb-progress-bar mb-fixed"></div>\n   <div data-template="table" data-edittable="true" data-allowexport="true"></div>\n </div>\n'}),Mindbreeze.define("text!components/tasksmonitor/mustache/tasksmonitor.mustache",[],function(){return'<script type="text/x-mustache-template">\n{{^isFinished?}}\n  <div class="mb-export-progress mb-line-item mb-progress">\n  	<div class="mb-computing">\n\n  		<span class="mb-export-finished mb-flexbox-export mb-export-is-running">\n  			<span class="mb-flexbox-label"> {{i18n.currentExport}} <b>{{searchQuery}}</b></span>\n  			<span class="pull-right"> {{currentTime}} </span>\n  \n		  	<div class="pull-right">\n		  		<button data-action-object=\'{ &quot;cancel&quot;:{} }\' \n		  				class="mb-btn-no-decor mb-no-print mb-btn-ie" \n		  				type="button" \n		  				title="Reset">\n		  			<i class="icon-remove-sign"></i>\n		  			<span class="mb-acc mb-dont-serialize">Cancel</span>\n		  		</button>\n		  	</div>\n  		</span>\n  		<div class="mb-progress-bar"></div>\n  	</div>\n  </div>\n{{/isFinished?}}\n{{#isFinished?}}\n  	<span class="mb-export-finished mb-flexbox-export"><i class="icon-remove-circle" data-action-object=\'{ &quot;deleteExportEl&quot;:{} }\'></i>\n  		<span class="mb-flexbox-label" title="{{searchQuery}}"><b>{{searchQuery}}</b></span>\n      {{#exportStatus?}}<span class="mb-export-status"> <i class="icon-info-sign" title="{{exportStatus}}"></i> </span>{{/exportStatus?}}\n  		<span class="pull-right"> {{currentTime}} </span>\n  	</span>\n{{/isFinished?}}\n</script>'}),Mindbreeze.define("components/tasksmonitor/js/tasksmonitor",["client/template","client/views/list","underscore","text!../mustache/tasksmonitor.mustache"],function(e,t,i,n){var s=e.extend({model:function(){return this.application.models.tasks},createView:function(t){return t=i.extend(this.attributeModel.getCamelCase(),t,{elementTemplate:this.node.children[0].template}),delete t.node,e.prototype.createView.apply(this,[t])},getContentSchema:function(){return{type:"template"}},hasContent:function(){return!0}});return s.DEFAULT_TEMPLATE=n,s.View=t.extend({createEntryView:function(e){return e=i.clone(e),e.elementTemplate=this.options.elementTemplate,e.application=this.options.application,t.prototype.createEntryView.apply(this,[e])}}),s.View.EntryView=t.EntryView.extend({initialize:function(){t.EntryView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.render)},render:function(){return this.childView.render(),this},createChildView:function(e){return e=i.extend({modelType:"Task"},e),e.elementTemplate.createView(e)}}),s}),Mindbreeze.define("utils/persistedsourceinfo",["underscore"],function(e){var t={userAvailable:function(t,i){var n=!1;return e.find(i.models.userSourceInfo.get("sources")&&i.models.userSourceInfo.get("sources").sources,e.bind(function(i){e.find(i.services,e.bind(function(i){"persistedcollectionschema"==i.id&&e.find(i.options,e.bind(function(e){e.path==t&&e.authenticated_available&&(n=!0)},this))},this))},this)),n},persistedcollectionschemaAvailable:function(t,i,n){var s=!1;return e.find(i.models.sourceInfo.get("sources")&&i.models.sourceInfo.get("sources").sources,e.bind(function(r){e.find(r.services,e.bind(function(r){"persistedcollectionschema"==r.id&&e.find(r.options,e.bind(function(e){e.path==t&&(s=n?!0:this.userAvailable(t,i,e))},this))},this))},this)),s}};return t}),Mindbreeze.define("component!alertedsearches",["client/template","i18n/i18n","component!base","client/views/list","api/v2/search","utils/browser","utils/clone","utils/dom","utils/url","utils/mustache","utils/jsonpath","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","api/v2/common","utils/localStorage","backbone","underscore","jquery","api/v2/persisted","service/channel","service/channels","api/v2/resources","api/v2/search","client/resourceinfo","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,s,T){function k(e,t,i){function n(e){e.initializationPromise.triggerDone()}function s(e,t){var s=!1,r=!1;_.find(t.get("sources").sources,_.bind(function(t){_.find(t.services,_.bind(function(t){"persistedcollectionschema"==t.id&&(s=!0,_.find(t.options,_.bind(function(t){"emailalert"==t.path&&(r=!0,t.effective_available?e.models.alertedSearches.fetch({success:_.bind(function(){n(this)},i),error:_.bind(function(){n(this)},i)}):n(i))},e)),r||n(i))},e)),s||n(i)},e))}function r(t){var n=t.get("sources")&&t.get("sources").sources;n&&_.each(n,_.bind(function(){s(this,t),i.stopListening(e.models.userSourceInfo,"change",r)},e))}if(e.models.alertedSearches)n(i);else{e.models.alertedSearches=new D(null,{channels:e.models.defaultChannels,appid:e.appid,path:t.path,owner:t.owner});var a=e.models.userSourceInfo.get("sources")&&e.models.userSourceInfo.get("sources").sources;a&&_.each(a,_.bind(function(){setTimeout(_.bind(function(){s(this,this.models.userSourceInfo)},this),100)},e));var o=e.models.userSourceInfo;i.listenTo(o,"change",r)}return e.subscribeSearchForAlert||(e.subscribeSearchForAlert=function(){var e=y(y("#notificationModal").find("input[name='email']")).val(),t=y(y("#notificationModal").find("input[name='description']")).val(),i=y(y("#notificationModal").find("select")).val(),n=y(y("#notificationModal").find("input[name='username']")).val();if(e&&t&&i&&n){var s=y(y("#notificationModal").find("input[name='alertID']")).val();y(y("#notificationModal").find("input[name='alertID']")).val("");var r=new b({channels:this.models.persistedChannel});if(s.length){var a=this.models.alert,o=a.get("path")[1];this.oldQuery=JSON.parse(a.get("data")),o!=i&&(this.frequencyChanged=!0),this.models.alertedSearches.remove(a);var l=r.resources(["user","default"]);l.fetch({success:_.bind(function(s){if(s.models.length){var r=new L({email:e,alertBase:i,description:t,query:this.oldQuery});this.models.alertedSearches.add(r)}else{this.models.users.add({properties:{user:n,email:e,active:"true"}});var r=new L({email:e,alertBase:i,description:t,query:this.oldQuery});this.models.alertedSearches.add(r)}},this),error:function(){}})}else{var l=r.resources(["user","default"]);l.fetch({success:_.bind(function(s){if(s.models.length){var r=new L({email:e,alertBase:i,description:t,query:this.models.search.input.toJSON()});this.models.alertedSearches.add(r)}else{this.models.users.add({properties:{user:n,email:e,active:"true"}});var r=new L({email:e,alertBase:i,description:t,query:this.models.search.input.toJSON()});this.models.alertedSearches.add(r)}},this),error:function(){}})}y("#notificationModal").modal("hide"),y(y("#notificationModal").find("input")[0]).val(""),y(y("#notificationModal").find("input")[1]).val(""),y(y("#notificationModal").find("input")[2]).val("")}}),e.models.alertedSearches}var C=e.extend({initialize:function(){this.initializationPromise=new w.DeferredCallFinished,e.prototype.initialize.apply(this,_.toArray(arguments));var t=document.querySelector('meta[name="mes:userid"]'),i=t&&t.getAttribute("content");if((null==i||""==i||i.length<=0)&&(i=null),null==i){var n=document.querySelector('meta[name="mes:user"]'),i=n&&n.getAttribute("content");(null==i||""==i||i.length<=0)&&(i=null)}k(this.application,{path:["emailalert"],owner:i},this)},hasContent:function(){return!0},model:function(){return this.application.models.alertedSearches},createView:function(t){return t=_.extend(this.attributeModel.getCamelCase(),t,{elementTemplate:this.node.children[0].template,datasourcetabs:this.get("datasourcetabs")}),delete t.node,e.prototype.createView.apply(this,[t])},schema:new e.Schema({attributes:{"alert-base":{type:"string",title:"client_alert_base"},email:{type:"string",title:"client_alert_email"}}})}),L=v.Model.extend({defaults:{alertBase:"weekly"},validate:function(e){return e.alertBase?e.email?e.query?e.description?void 0:"No description":"No query":"No email":"No frequency"},parse:function(e){var t=f.mapByPluck(e&&e.property,"key");if(e&&e.data&&t){try{JSON.parse(e.data)}catch(i){return!1}var n=window.location.origin+window.location.pathname+"?search="+e.path.join("-");return{id:e.path.join("/"),path:e.path,email:t.email.value,query:JSON.parse(e.data),description:t.description.value,link:n}}return!1},toJSON:function(){var e=this.attributes,t=e.path;return t||(t=["emailalert",e.alertBase]),{path:t,data:JSON.stringify(e.query),property:[{key:"email",value:e.email},{key:"description",value:e.description}]}},getUser:function(){return this.attributes&&this.attributes.query&&this.attributes.query.user?this.attributes.query.user:null},getOrderBy:function(){return this.attributes&&this.attributes.query&&this.attributes.query.orderby?this.attributes.query.orderby:null}}),D=d.extend({model:L,usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new p({path:"persistedresources"}),d.prototype.initialize.apply(this,arguments),this.path=t.path,this.property=t.property,this.owner=t.owner},parse:function(e){return e.persisted_resources},get:function(e){return"length"===e?this.models.length?this.models.length:null:d.prototype.get.apply(this,arguments)}});C.DEFAULT_TEMPLATE='<script type="text/x-mustache-template" data-class-name="mb-line-item mb-notification-item"><span id="{{id}}" tabindex="0" role="button" class="mb-tooltip btn-link notificationItem"><h3 class="mb-text"><a href="{{link}}" data-action-name="executeAlertSavedSearch">{{description}}</a></h3><span class="alertItemIcon" data-action-object={"openSubscribeModal":{"mode":"edit","id":"{{id}}"}}><i class="icon-pencil"></i></span></span><div class="pull-right"><button class="action mb-btn-no-decor" data-action-object={"destroyAlertModel":{"id":"{{id}}"}} title="{{i18n.action_delete}}" aria-describedby="{{id}}"><i class="icon-trash"></i><span class="mb-acc">{{i18n.action_delete}}</span></button></div></script>';var E=n.extend({setModel:function(){n.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"reset",this.addAll)},addAll:function(e,t){for(var i=0;i<e.models.length;i++)this.addOne(e.models[i],e,t)}});return E.EntryView=n.EntryView.extend({createChildView:function(e){return e=_.extend({modelType:"AlertedSearchesModel"},e),this.options.childViewConstructor.createView(e)}}),C.View=i.extend({defaultOptions:{titleTagName:"h2"},initialize:function(){var e=this;this.options=_.extend({childViewConstructor:this.options.elementTemplate},this.defaultOptions,this.options),this.titleEl=this.make(this.options.titleTagName,{"class":this.options.titleClassName,id:"alertedSearches-title-"+this.cid},this.options.title||t("client_notifications")),this.appendChild(this.titleEl),y(this.titleEl).attr("data-i18n","client_notifications"),this.$hint=this.make("small",{"class":"mb-hint mb-email-notifications"});var i=this.make("span",{"data-i18n":"alert_activate_hint"},t("alert_activate_hint")),n=this.make("button",{"data-action-object":'{"openSubscribeModal": {}}',"class":"btn btn-link","data-enable-if-model-valid":"search",disabled:"disabled",title:""+t("client_email_alert_on_change")});y(n).append('<i class="icon-bell"></i><span class="mb-acc">"'+t("client_email_alert_on_change")+'"</span>'),this.$hint.appendChild(i),this.$hint.appendChild(n),y(this.el).hide(),this.appendChild(this.$hint);var a=this.innerHTML();y("body").append(a);var o=r.getURLParameter(this.options.application.options.searchURLParameter),u=T.scriptLocation,c=!1,e=this,h=this.options.application.models.userSourceInfo,d=_.keys(h.get("sources").sources)[0];if(d){var p=h.get("sources").sources[d].services,f=!0,g=!1;_.each(p,function(e){"persistedresources"==e.id&&(c=!0),"persistedcollectionschema"==e.id&&_.find(e.options,_.bind(function(e){"emailalert"==e.path&&e.effective_available&&(g=!0)},this))}),c&&g&&_.each(this.options.application.models.channels.models,function(t){if(l.sameOrigin(u,t.id)||f){var i=t;e.options.application.models.persistedChannel=t;var n=new b({channels:i}),r=n.resources(["user","default"]);r.fetch({success:_.bind(function(e){this.options.application.models.users=e},e),error:function(){}});var a=n.collections(["emailalert"]);if(a.fetch({success:_.bind(function(t){this.options.application.models.frequency=t,t.models.length&&y(e.el).show()},e),error:function(){}}),o){var c=o.split("-"),h=n.resources(c);h.fetch({success:_.bind(function(e){var t=e.at(0)&&e.at(0).get("data");if(t){y("body").removeClass("initialmode"),t=JSON.parse(t);var i=s.SearchRequest.parse(t);i.user.query||(i.user.query={and:{query:{unparsed:"ALL",id:"query"}}}),this.options.application.models.search.input.set(i)}},e),error:function(){}})}}}),this.options.application.executeAlertSavedSearch=this.options.application.executeAlertSavedSearch||function(e){e.event.preventDefault();var i=e.sender.model;if(i){var n=this.rootElsClone;if(n.id)var s=n.id;else var s=n;var r=y(s);r.find("[data-template='profilesettings']").remove();var a=i.get("description"),o="<div class='mb-stack-title-group'>                            "+t("client_notifications")+"<span>"+a+"</span>                          </div>                          <div class='mb-stack-title-group'>                            <button class='btn btn-default mb-stack-close' data-action-name='updateSavedSearches'>"+t("save_changes")+"</button>                          </div>";this.pushStack({title:o,"template-ref":s,useCloneElement:!0,action:"runAlertSavedSearch",applicationOptions:{startSearch:!1,alertModel:i}})}},m.prototype.runAlertSavedSearch=m.prototype.runAlertSavedSearch||function(){var e=this.options.alertModel.get("query");this.models.search.input.set(s.SearchRequest.parse(e))},this.options.application.updateSavedSearches=this.options.application.updateSavedSearches||function(e){var t=e.model&&e.model.get("applicationOptions")&&e.model.get("applicationOptions").alertModel;if(t){var i=this.models.search.input.toJSON();t.set("query",i),t.save(null,{success:_.bind(function(){},this),error:function(){}})}},this.options.application.destroyAlertModel=this.options.application.destroyAlertModel||function(e){var t=new b({channels:this.models.persistedChannel}),i=e.id,n=i.split("/"),s=t.resources(n);s.fetch({success:_.bind(function(){var t=e.model;t.trigger("destroy",t,t.collection,e)},this)})},this.options.application.openSubscribeModal=this.options.application.openSubscribeModal||function(e){var i=y("#notificationModal");this.options.mainAlertID=e.id,this.setFrequency=void 0!==this.setFrequency?this.setFrequency:!0;var n=i.find("select[name='frequency']");this.setFrequency&&(_.each(this.models.frequency.models,function(e){this.modal=e,_.each(e.get("property"),function(e){if("displayname"==e.key){var i=document.createElement("option");i.text=t(e.value)||e.value,i.value=this.modal.get("path")[1],n.append(i)}})}),this.setFrequency=!1);var s=this.models.users&&this.models.users.models.length&&this.models.users.models[0].get("properties").email,r=this.models.users&&this.models.users.models.length&&this.models.users.models[0].get("properties").user;s&&r&&(y(y("#notificationModal").find("input[name='email']")).val(s),y(y("#notificationModal").find("input[name='username']")).val(r),y("#notificationModal .modal-email-output").html(s),y("#notificationModal").addClass("modal-email-available"));var a=new b({channels:this.models.persistedChannel});if("edit"==e.mode){var o=e.id;y("#notificationModal").find(".notificationModalHeadline span").text(t("client_edit_notifications"));var l=o.split("/"),u=a.resources(l);u.fetch({success:_.bind(function(e){var t=e.models[0];if(t){var n=t.get("properties").description,s=t.get("id"),r=s.split("/")[1];y(y("#notificationModal").find("input[name='description']")).val(n),y(y("#notificationModal").find("input[name='alertID']")).val(s),y(y("#notificationModal").find("select")).val(r),this.models.alert=t;var o=a.resources(["user","default"]);o.fetch({success:function(e){if(e.models.length){var t=e.models[0].get("properties").email,n=e.models[0].get("properties").user;y(y("#notificationModal").find("input[name='username']")).val(n),y(y("#notificationModal").find("input[name='email']")).val(t),y("#notificationModal .modal-email-output").html(t),i.modal("show"),y(y("#notificationModal").find("input[name='description']")).focus()}else y("#notificationModal").removeClass("modal-email-available"),i.modal("show"),y(y("#notificationModal").find("input[name='username']")).focus()}})}else this.models.alertedSearches.remove(this.options.mainAlertID),i.modal("show")},this),error:function(){}})}else{y("#notificationModal").find(".notificationModalHeadline span").text(t("client_notifications"));var s=a.resources(["user","default"]);s.fetch({success:function(e){if(e.models.length){var t=e.models[0].get("properties").email,n=e.models[0].get("properties").user;y("#notificationModal .modal-email-output").html(t),y("#notificationModal").addClass("modal-email-available"),y(y("#notificationModal").find("input[name='email']")).val(t),y(y("#notificationModal").find("input[name='username']")).val(n),y(y("#notificationModal").find("input[name='description']")).val(""),y(y("#notificationModal").find("input[name='alertID']")).val(""),i.modal("show"),y(y("#notificationModal").find("input[name='description']")).focus()}else y("#notificationModal").removeClass("modal-email-available"),i.modal("show"),y(y("#notificationModal").find("input[name='username']")).focus()},error:function(){}})}};var v=new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);v.test(this.options.email)&&"true"===this.options.showalert&&(window.email=this.options.email,window.alertBase=this.options.alertBase,y(".alertedSearches").attr("style","display:block !important")),this.list=new E(_.extend({childViewConstructor:this.options.elementTemplate},this.defaultOptions,this.options,{el:null,model:this.model})),this.appendChild(this.list.render().el)}},innerHTML:function(){var e='<div id="notificationModal" class="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display:none;"> <div class="modal-header"> <h3 class="notificationModalHeadline"> <i class="icon-bell"></i> <span>'+t("client_email_alert_on_change")+'</span> </h3> </div><div class="modal-body"> <div class="mb-flexbox"> <div class="mb-line-item notificationUserName"> <label class="pull-left"><span>*'+t("Username")+':</span></label> <input class="" type="text" name="username"> </div><div class="mb-line-item notificationEmail"> <label class="pull-left"><span>*'+t("Email")+':</span></label> <input class="" type="email" name="email"> </div><div class="mb-line-item"> <label class="pull-left"><span>*'+t("client_description")+':</span></label> <input class="" type="text" name="description"> </div><div class="mb-line-item"> <label class="pull-left frequency"><span>'+t("client_alert_base")+':</span></label> <select name="frequency"></select> </div><input class="hidden" type="text" name="alertID"> </div></div><div class="modal-footer"> <span class="modal-email-footer modal-email-output"></span> <button class="btn btn-noShadow" data-dismiss="modal">'+t("Close")+'</button> <button class="mb-next mb-pulse action btn btn-default" data-action-name="subscribeSearchForAlert">'+t("Save")+"</button> </div></div>";return e}}),C}),Mindbreeze.define("components/alertedsearches/js/alertedsearches",function(){}),Mindbreeze.define("components/profilesettings/js/profilesettings",["client/template","i18n/i18n","component!base","component!settings","client/views/list","api/v2/search","utils/browser","utils/clone","utils/dom","utils/url","utils/mustache","utils/jsonpath","model/persisted_collection","service/stub","client/application","client/settings","api/v2/common","utils/localStorage","backbone","underscore","jquery","api/v2/persisted","service/channel","service/channels","api/v2/resources","client/resourceinfo","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,n,f,g,v,_,y,b,w){var x=e.extend({getOrCreateProfileSettingsModel:function(e,i,s){function r(e){e.initializationPromise.triggerDone()}function o(e,i){var o=!1,l=!1;_.find(i.get("sources").sources,_.bind(function(i){_.find(i.services,_.bind(function(i){"persistedcollectionschema"==i.id&&(o=!0,_.find(i.options,_.bind(function(i){"userprofile"==i.path&&(l=!0,i.effective_available?e.models.profileSettings.fetch({success:_.bind(function(e){if(!this.application.options.profileFetched)if(this.application.options.profileFetched=!0,n.add({name:"GeneralSettings",module:"client/settingsprofilesettings"},{at:0}),e.models.length){var i=e.at(0),s=i.get("data");_.isString(s)&&(s=JSON.parse(s));var o=s.settings.results_per_page,l=s.settings.frontent_language;if(o&&this.application.models.search.set("count",parseInt(o),{silent:!0}),l){var u=a.getURLParameter("language");u?r(this):this.application.setLocale(l,_.bind(function(){t.patchI18nAttributes(),r(this)},this))}else r(this)}else r(this)},s),error:_.bind(function(){r(this)},s)}):r(s))},e)),l||r(s))},e)),o||r(s)},e))}if(e.models.profileSettings)r(s);else{e.models.profileSettings=new T(null,{channels:e.models.defaultChannels,appid:e.appid,path:i.path,property:i.property});var l=e.models.userSourceInfo.get("sources")&&e.models.userSourceInfo.get("sources").sources;l&&_.each(l,_.bind(function(){setTimeout(_.bind(function(){o(this,this.models.userSourceInfo)},this),100)},e)),e.models.userSourceInfo.on("change",_.bind(function(t){var i=t.get("sources")&&t.get("sources").sources;i&&_.each(i,_.bind(function(){o(this,t)},e))},e))}return e.models.profileSettings},initialize:function(){var t="true"==y(this.el).attr("data-enable-profile");if(t){this.initializationPromise=new w.DeferredCallFinished,e.prototype.initialize.apply(this,_.toArray(arguments));var i=this.application.appid||window.location.origin+window.location.pathname;this.getOrCreateProfileSettingsModel(this.application,{path:["userprofile"],property:[{key:"context",value:i}]},this)}else e.prototype.initialize.apply(this,_.toArray(arguments))}}),M=v.Model.extend({parse:function(e){var t=f.mapByPluck(e&&e.property,"key");if(!e)return this.attributes;var i=e.data;try{i=JSON.parse(e.data)}catch(n){}return e&&t?{id:e.path.join("/"),path:e.path,data:i,context:e.property}:void 0},toJSON:function(){var e=this.attributes;return{path:e.path,data:JSON.stringify(e.data),property:e.context}}}),T=d.extend({model:M,usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new p({path:"persistedresources"}),d.prototype.initialize.apply(this,arguments),this.path=t.path,this.property=t.property},parse:function(e){return e.persisted_resources},get:function(e){return"length"===e?this.models.length?this.models.length:null:d.prototype.get.apply(this,arguments)}});return x.View=i.extend({initialize:function(){this.options.application.saveProfile=this.options.application.saveProfile||function(){var e=y("#preferences"),i=y("#profilesettings"),n=i.find(".frontent_language").val(),s=i.find(".results_per_page").val();
e.modal("hide");var r={frontent_language:n,results_per_page:s};this.reloadAfterSave=!0;var a=null,o=this.appid||window.location.origin+window.location.pathname;if(this.models.profileSettings&&this.models.profileSettings.size()>0){a=this.models.profileSettings.at(0);var l=a.get("data");l.settings=r,a.save(null,{success:_.bind(function(){this.models.search.set("count",parseInt(s),{silent:!0}),this.setLocale(n,_.bind(function(){t.patchI18nAttributes()},this))},this),error:function(){}})}else{var l={};l.settings=r,a=new M({data:l,context:[{key:"context",value:o}],path:["userprofile","default"],appID:o}),this.models.profileSettings.add(a),this.models.search.set("count",parseInt(s),{silent:!0}),this.setLocale(n,_.bind(function(){t.patchI18nAttributes()},this),{silent:!0})}}}}),x}),Mindbreeze.define("components/profilesettingsview/js/profilesettingsview",["client/template","i18n/i18n","component!base","component!settings","client/views/list","api/v2/search","utils/browser","utils/clone","utils/dom","utils/url","utils/mustache","utils/jsonpath","model/persisted_collection","service/stub","client/application","client/settings","api/v2/common","utils/localStorage","backbone","underscore","jquery","api/v2/persisted","service/channel","service/channels","api/v2/resources","client/resourceinfo","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,n,f,g,v,_){var y=e.extend({});return y.View=i.extend({defaultOptions:{titleTagName:"h2"},initialize:function(){this.options=_.extend({},this.defaultOptions,this.options),this.options.application.models.profileSettings.models.length?this.updateHTML(this.options.application.models.profileSettings):this.updateHTML()},updateHTML:function(e){if(e){var t=e.at(0),i=t.get("data");_.isString(i)&&(i=JSON.parse(i));var n=i.settings.results_per_page,s=i.settings.frontent_language;this.renderOptions(n,s)}else this.renderOptions()},renderOptions:function(e,i){var n=["1","3","5","6","7","8","9","10","15","20"],s="";if(!e){var r=this.options.application.models.search.input.get("count");r&&(e=r)}_.each(n,function(t){s+=t==e?'<option selected="selected">'+t+"</option>":"<option>"+t+"</option>"});var a=["bg-BG","cs-CZ","de","en-US","es-ES","fr-FR","hr-HR","hu-HU","it-IT","pt-PT","ro-RO","sk-SK","sl-SI","sr-Latn-CS","ru-RU","tr-TR","zh-Hans-CN","nl-NL","nb-NO","ja-JP","id-ID","pl-PL"],o="";if(!i){var l="undefined"!=typeof document&&document.documentElement.lang;l||(l="en-US"),i=l}_.each(a,function(e){o+=e==i?'<option selected="selected">'+e+"</option>":"<option>"+e+"</option>"});var u=this.innerHTML();u=u.replace("{{results_per_page}}",s),u=u.replace("{{frontent_language}}",o),this.el.innerHTML=u,setTimeout(function(){t.patchI18nAttributes("#profilesettings")},0)},innerHTML:function(){var e='<div id="profilesettings">               <form>                 <fieldset>                   <label for="frontent_language" data-i18n="FrontendLanguage"></label>                   <select class="frontent_language">                     {{frontent_language}}                   </select>                   <br />                   <label for="results" data-i18n="ResultsPerPage"></label>                   <select class="results_per_page">                     {{results_per_page}}                   </select>                 </fieldset>               </form>             <div>               <button type="button" class="btn" data-dismiss="modal" data-i18n="Close"></button>               <button type="button" class="btn btn-save-profile" data-action-object="{&quot;saveProfile&quot;: {}}" data-i18n="Save"></button>             </div>           </div>';return e}}),y}),Mindbreeze.define("client/export",["service/stub","client/application","utils/persistedsourceinfo","utils/clone","i18n/i18n","jquery","underscore","backbone","moment","utils/uuid"],function(e,t,i,n,s,r,a,o,l,u){function c(t,i,n,s,r){var l=new e({path:t}),u={};a.extend(u,o.Events);var c=i.length,h=0;u.on("response",function(){h++,h>=c&&u.off(),s&&s.apply(this,arguments)}),u.on("error",function(){h++,h>=c&&u.off(),r&&r.apply(this,arguments)}),l.cast(i,n,u)}function h(e,t,n,s){t.each(function(t){t=t.clone();var r=t.get("id");_[r];var a=i.persistedcollectionschemaAvailable("queryexports",e,!0);a?n&&n({status:{success:!0}},t):s&&s({status:{success:!1}},t)})}function d(e,t,i,n){c("persistedresources",e,{create:{path:v,data:t}},i,n)}function p(e,t,i,n){c("persistedresources",e,{read:{path:t}},function(s){var o=a.find(s.persisted_resources[0].property,function(e){return"status"==e.key});o?"SUCCESS"==o.value?i.finish():i.stop("",{status:o.value}):setTimeout(function(){p(e,t,i,n)},5e3),r(".mb-export-is-running").length||n.removeExportDownloadBlinker()},function(){})}function m(e,t){var i=r(".loaderLeft");i.show(),r(".mb-no-export-results").length&&i.empty();var n=this,o=this.api.exportsearch.createStub(),l=this.models.search.wiring.channel,u=this.models.tasks.push({id:e.id,name:s("results_exportSearch"),currentTime:e.currentTime,searchQuery:e.searchQuery});u.start(),u.on("change:cancelled",function(t){if(t.isCancelled()){var i=a.clone(e);i.cancel_pending=!0,o.cast(l,i,null),t.destroy(),r(".mb-export-is-running").length||n.removeExportDownloadBlinker()}}),t.call(this,u,o)}function f(t,i){return function(n){var s=this,r=new(e.extend({call:function(e,i,n){return a.isFunction(e.prepareRequest)&&(i=a.clone(i),e.prepareRequest(i)),e.call("export?resource_path="+t.persisted_resources[0].path.join("/"),i,n,{},null,{method:"download"})}})),l=t,u={};a.extend(u,o.Events),u.once("response",function(e,t){var i=l.persisted_resources[0].path;p(t,i,n,s)}),r.cast(i,{},u)}}function g(e,t){return function(i,n){var s=this,a=n.cast(t,e);a.always(function(){i.isRunning()&&(i.finish(),r(".mb-export-is-running").length||s.removeExportDownloadBlinker())})}}var v=["queryexports","default"],_={};t.prototype.exportSearch||a.extend(t.prototype,{exportSearch:function(e){e=e||{};var t=this.models.search.input.toJSON(),n=this.getUserContext(),s=l(),r=s.format("HH:mm");a.uniqueId();var o=t.user&&t.user.query.and[0].unparsed;e.properties&&(t.properties=e.properties);var c=this.options.excludeFromTranslation;a.each(c,a.bind(function(e){a.find(t.properties,function(t){t.name==e&&(t.localized_name=e)})},this));var p={search_request:t,id:o+"_"+r+"_"+u.generate(),currentTime:r,searchQuery:o,user_context:n};"undefined"!==e.exportFormat&&(p.export_format=e.exportFormat),h(this,this.models.channels,a.bind(function(e,t){d(t,JSON.stringify(p),a.bind(function(e,t){t.id;var n=!1,n=i.persistedcollectionschemaAvailable("queryexports",this,!0);n?m.call(this,p,f(e,t)):(p.export_format="text/csv",m.call(this,p,g(p,t)))},this))},this),a.bind(function(e,t){p.export_format="text/csv",m.call(this,p,g(p,t))},this))},cancel:function(e){e.model.cancel(),r(".mb-export-progress").length||this.hideExportDownload()},deleteExportEl:function(e){e.model.destroy(),this.isTaskExporting()},isTaskExporting:function(){r(".mb-export-finished").length||this.hideExportDownload()},hideExportDownload:function(){r(".loaderLeft").hide(),r(".showExportList").css("color","#808080"),this.removeExportDownloadBlinker()},removeExportDownloadBlinker:function(){r(".showExportList").removeClass("exportDownloaderBlink")},showExports:function(){r(".loaderLeft").toggle(),r(".mb-export-finished").length||r(".loaderLeft").html('<span class="mb-no-export-results"><b>'+s("no_exports_available")+"</b></span>")}})}),Mindbreeze.define("components/suggestlist/js/suggestlist",["underscore","backbone","component!base","client/views/list","component!suggest","component!base","utils/dom","jquery","client/template","client/templateregistry","i18n/i18n"],function(e,t,i,n,s,r,a,o,l){var u=s.extend({initialize:function(){l.prototype.initialize.apply(this,e.toArray(arguments)),this.$el=o(this.el);var t=this.get("source-id-pattern")||"",i=this.get("count"),n=this.get("title")||"",s=this.get("property"),r="suggestlist_"+t;this.application.models[r]=this.application.api.suggest.createModel(this.application.models.channels);var a=new c(e.extend({},{application:this.application,template:this,el:this.el,source:t,count:i,property:s,title:n}));return this.instances.push(a),a},createView:function(){},remove:function(t){this.el.innerHTML="",e.forEach(this.instances,function(e){e.remove()}),this.instances=[],e.forEach(t.node.children,function(e){e.template.remove({node:e})})},schema:new l.Schema({attributes:{"source-id-pattern":{type:"string",title:"editor_suggest_source_id_pattern","default":"popularsearches"},property:{type:"string",title:"editor_suggest_property","default":"title"},count:{type:"int",title:"editor_result_title","default":5},title:{type:"string",title:"suggest_title","default":"Popular Searches"}}})}),c=i.extend({initialize:function(){r.prototype.initialize.apply(this,arguments),this.listenTo(this.options.application.models.search,"computing",e.bind(function(){this.createSuggest()},this))},createSuggest:function(){var e=this.options.count,t=this.options.property,i=this.options.source,n=(this.options.title,this.options.application.getUnparsedUserQuery()||""),s="suggestlist_"+i,r=this,a={query:n,property:t,count:e,source_id_pattern:i};this.options.application.models[s].set(a),this.listenTo(this.options.application.models[s],"change",function(){r.render(this.options.application.models[s]),r.stopListening(this.options.application.models[s],"change")})},render:function(t){if(!t.output.get("results"))return o(this.el).find(".suggestListElement").remove(),void 0;var i=document.createElement("div"),n=document.createElement("h3"),s=document.createElement("ul");i.className="suggestListElement",s.className="nav nav-stacked nav-pills",n.className="suggestListTitle",n.innerHTML=this.options.title,e.each(t.output.get("results"),function(t){var i=e.escape(t.value);s.innerHTML+='<p><a href="#" data-action="application.setUnparsedUserQuery(&quot;'+i+'&quot;)">'+i+"</a></p>"}),o(i).append(n),o(i).append(s),o(this.el).find(".suggestListElement").remove(),o(this.el).append(i)},remove:function(){r.prototype.remove.apply(this,arguments)}});return u.View=c,u}),Mindbreeze.define("components/voting/js/voting",["client/templates","api/v2/api","client/resourceinfo","client/application","api/v2/search","client/template","component!base","i18n/i18n","jquery","underscore","highcharts"],function(e,t,i,n,s,r,a,o,l,u){var c=function(e,t){var i=document.getElementById(t);i||(i=document.createElement("link"),i.rel="stylesheet",i.href=e,i.id=t,(document.head||document.getElementsByTagName("script")[0].parentNode).appendChild(i))};c(i.scriptLocation+"../client/component/voting/css/voting.css","voting");var h=a.extend({voteUpHTML:function(){return"<i  class='icon-thumbs-up'></i>"},voteDownHTML:function(){return"<i  class='icon-thumbs-down'></i>"},initialize:function(){a.prototype.initialize.apply(this,arguments);var e=this;this.options.title,t.search.on("compute",function(){}),t.search.on("loadoutput",u.bind(function(e,t){(t&&t.resultset&&t.resultset.results||t&&t.results)&&u.each(t.resultset&&t.resultset.results||t.results,u.bind(function(e){e.properties.actions&&e.properties.actions.data&&e.properties.actions.data.push({html:'<a tabindex="0" role="button" data-action-object=\'{&quot;vote&quot;:{&quot;action&quot;:&quot;thumbs&quot;,&quot;weight&quot;:&quot;up&quot;}}\'>'+this.voteUpHTML()+"</a>",value:{action:{upvote:{}}}},{html:'<a tabindex="0" role="button" data-action-object=\'{&quot;vote&quot;:{&quot;action&quot;:&quot;thumbs&quot;,&quot;weight&quot;:&quot;down&quot;}}\'>'+this.voteDownHTML()+"</a>",value:{action:{upvote:{}}}}),e.properties.actions&&e.properties.actions.properties&&e.properties.actions.properties.push({id:"UpVote",name:"UpVote",data:[{html:'<a tabindex="0" role="button" data-action-object=\'{&quot;vote&quot;:{&quot;action&quot;:&quot;thumbs&quot;,&quot;weight&quot;:&quot;up&quot;}}\'>'+this.voteUpHTML()+"</a>",value:{action:{upvote:{}}}}]},{id:"DownVote",name:"DownVote",data:[{html:'<a tabindex="0" role="button" data-action-object=\'{&quot;vote&quot;:{&quot;action&quot;:&quot;thumbs&quot;,&quot;weight&quot;:&quot;down&quot;}}\'>'+this.voteDownHTML()+"</a>",value:{action:{upvote:{}}}}]})},this))},e));var i=n.prototype.initializeModels;u.extend(n.prototype,{initializeModels:function(){i.apply(this,arguments),this.listenTo(this,"queryprofilerdone",this.votingDone)},closeComment:function(e){var t=e.eventTarget;l(t.parentElement).remove()},vote:function(e){var t=e.eventTarget;if("setComment"==e.action){var i=l(t.parentElement).find("textarea").val();this.options.comment=i,l(t.parentElement).remove()}else{var n=t.offsetLeft-20,s='                <div id="commentarea" style="left:'+n+'px">                  <h4 data-i18n="voting_leave_reply">'+o("voting_leave_reply")+'</h4>                  <textarea rows="2"></textarea>                  <button class="btn" data-action-object="{&quot;closeComment&quot;:{}}" data-i18n="Cancel">'+o("Cancel")+'</button>                  <button class="btn" data-action-object="{&quot;vote&quot;:{&quot;action&quot;:&quot;setComment&quot;}}" data-i18n="voting_send">'+o("voting_send")+"</button>                </div>";l(s).insertAfter(t.parentElement.parentElement)}},votingDone:function(){}})}});return new h,h}),Mindbreeze.define("components/treeview/js/treeview",["component!base","client/views/tree","client/template","underscore"],function(e,t,i,n){var s=i.extend({createView:function(e){return e=n.extend(this.attributeModel.getCamelCase(),e,{childrenPath:"children",elementTemplate:this.node.children[0].template}),delete e.node,i.prototype.createView.apply(this,[e])},getContentSchema:function(){return{type:"template"}},hasContent:function(){return!0}});return s.View=t.extend({createEntryView:function(e){var e=n.extend(this.options,e,{elementTemplate:this.options.elementTemplate,el:void 0});return delete e.tagName,delete e.className,t.prototype.createEntryView.call(this,e)}}),s.View.EntryView=t.EntryView.extend({initialize:function(){var t=n.clone(this.options);delete t.tagName,delete t.className,this.childView=this.createChildView(t),this.childView&&this.childView.render(),e.prototype.initialize.apply(this,arguments),this.childView&&this.childView.el&&this.insertAt(this.childView.el,0);var i=this.options.application.templateTree,s=n.clone(this.options.elementTemplate.parentTemplate.node);s.children=[];var r=this;i.collect(s,this.childView.el,function(){s.initializeChildren(r.options.application,r.options.parentModel,function(){})})},createChildView:function(e){return this.options.createEntryViewAction&&this.options.application[this.options.createEntryViewAction]?this.options.application[this.options.createEntryViewAction].call(this.options.application,this.options.application,this,e):(e=n.clone(e),e.application=this.options.application,this.options.elementTemplate.createView(e))}}),s}),Mindbreeze.define("text!components/pages/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-class-name="pagination">\n  {{#pages?}}\n    <ul>\n      {{#onFirstPage?}}\n        <li class="disabled"><span>&laquo;</span><li>\n      {{/onFirstPage?}}\n      {{^onFirstPage?}}\n        <li><a href="#" data-action-name="previousPage">&laquo;</a><li>\n      {{/onFirstPage?}}\n\n      {{#pages}}\n        <li class="{{#current_page?}}active{{/current_page?}}"><a href="#" data-action-name="setPage" data-page="{{page_number}}">{{page}}</a></li>\n      {{/pages}}\n\n      {{#more_avail?}}\n        <li class="disabled"><span>&hellip;</span></li>\n      {{/more_avail?}}\n\n      {{#onLastPage?}}\n        <li class="disabled"><span>&raquo;</span><li>\n      {{/onLastPage?}}\n      {{^onLastPage?}}\n        <li><a href="#" data-action-name="nextPage">&raquo;</a><li>\n      {{/onLastPage?}}\n    </ul>\n  {{/pages?}}\n</script>\n'}),Mindbreeze.define("components/pages/js/pages",["client/templates","text!../mustache/template.mustache","underscore"],function(e,t,i){var n=e.View.extend({}),s=e.add({name:"pages",view:n,attributes:{maxPageCount:{title:"editor_pages_max_page_count",type:"int",defaultValue:10}},content:{type:"template"},default_template:t,designer_menu:[{name:"editor_pages",icon:"../img/imgpages.png",description:"editor_pages_description",group:{name:"editor_pager_title"}}]}),r=s.prototype.createView;s.prototype.createView=function(){var e=r.apply(this,arguments);return i.each(e.options.node.children,function(t){this.createSubView(t,e.options,e.model)},this),e},s.prototype.model=function(e){var t=this.schema.parseAttributes(this.attributeModel.getCamelCase()),i=e.model.getPagesModel({maxPageCount:t.maxPageCount});return this.models=this.models||[],this.models.push(i),i};var a=s.prototype.remove;return s.prototype.remove=function(){return i.each(this.models,function(e){e.dispose()}),this.models=[],a.apply(this,arguments)},s}),Mindbreeze.define("text!components/annotationPopup/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n	<dl>\n		{{#mes:summary}}\n		  <dt data-i18n="{{name}}"></dt>\n		  <dd>{{value}}</dd>\n	  {{/mes:summary}}\n	</dl>\n</script>'}),Mindbreeze.define("model/persisted_models",["client/template","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","backbone","underscore","jquery","i18n/i18n","api/v2/common","api/v2/persisted","service/channel","service/channels","api/v2/resources","client/resourceinfo"],function(e,t,i,n,s,r,a){var o=r.Model.extend({toJSON:function(){var e=this.attributes,t=e.path;return{path:t,data:JSON.stringify(e.data),property:e.property}}}),l=i.extend({model:o,usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new n({path:"persistedresources"}),i.prototype.initialize.apply(this,arguments),this.path=t.path},parse:function(e){return a.each(e.persisted_resources,function(e){e.id=e.path.join("/")}),e.persisted_resources}}),u={};return u={PreviewFeedbackModel:o,PreviewFeedbackCollection:l}}),Mindbreeze.define("components/annotationPopup/js/annotationPopup",["component!base","client/template","utils/browser","i18n/i18n","underscore","model/readonlytree","jquery","client/queryprofiler","text!../mustache/template.mustache","utils/uuid","model/persisted_models","moment"],function(e,t,i,n,s,r,a,o,l,u,c,h){var d=t.extend({schema:new t.Schema({attributes:{"enable-feedback":{title:"editor_enable_annotation",type:"boolean",defaultValue:!1}}}),hasContent:function(){return!0},getContentSchema:function(){return{type:"template"}},createView:function(e){return e=s.extend({},this.schema.parseAttributes(this.attributeModel.getCamelCase()),e),e.annotationPopupTemplate=e.node.children[0].template,e["enable-feedback"]=this.get("enable-feedback"),e.node&&delete e.node.children,t.prototype.createView.call(this,e)}});return d.View=e.extend({initialize:function(){this.options.application.views.on("preview:annotation:mouseover",s.bind(this.onAnnotationMouseOver,this)),this.options.application.views.on("preview:annotation:mouseleave",s.bind(this.onAnnotationMouseLeave,this)),this.options.application.views.on("preview:text:selected",s.bind(this.onAnnotationTextSelected,this)),this.options.application.views.on("preview:annotation:click",s.bind(this.onAnnotationMouseClick,this)),this.options.application.models.stack.on("closeStack",function(){a(".annotationPopupOverlay").popover("destroy")}),this.insertPopupOverlay()},remove:function(){this.popupOverlay.remove(),e.prototype.remove.apply(this,arguments)},insertPopupOverlay:function(){this.popupOverlay=a('<div class="annotationPopupOverlay"></div>').insertAfter(this.el)},getFeedbackTitle:function(){var e=n("client_headsup_feedback_button");return'<div data-action-name="toggleFeedbackView" class="annotationPopup-title action"><span data-i18n="client_headsup_feedback_button">'+e+'</span> <i class="icon-comment"></i></div><div class="action closeFeedbackView-title" data-action-name="closeFeedbackView"><i class="icon-remove"></i></div>'},getPopupPosition:function(e){var t=e.offset.top+e.target.offset().top+e.popup.height/2+e.dimensions.height,i=e.offset.left+e.target.offset().left+e.dimensions.width;return{top:t,left:i}},onAnnotationMouseClick:function(e){this.popupOverlay.popover("destroy");var t=this;window.setTimeout(function(){t.onAnnotationMouseOver(e)},400)},onAnnotationMouseOver:function(e){if(!(a(".annotation_feedback_popover:visible").length>0)){var t=e.application,o=e.model,l=e.targetInfo,u=decodeURIComponent(l.href),d=l.offset,p=(l.dimensions,a(".mb-stack-element"));p.offset();var m=this,f={},g=this.options.annotationPopupTemplate.properties;g["mes:summary"]?(g=i.getURLParametersByString(u),f["mes:summary"]=[],s.each(g,function(e,t){f["mes:summary"].push({name:t,value:e})}),f=s.extend(f,g)):s.each(g,function(e,t){e&&(f[t]=i.getURLParameterByString(t,u))}),e.application.previewFeedback=s.extend({model:o,target:l,href:u},f);var o=new r;o.load(f);var v,_,y=this.options.annotationPopupTemplate.createView({model:o,application:this.options.application,parent:this});this.options["enable-feedback"]?(v=this.getFeedbackTitle(),_=this.updateFeedbackContentStr(y)):(v="",_='<div class="annotationPopup-container">'+a(y.el)[0].outerHTML+"</div>");var b="",w="",x=null;0/0!=parseInt(l.id)&&(t.models.pdfCollection=new c.PreviewFeedbackCollection(null,{channels:t.models.defaultChannels,appid:t.appid,path:["itemdata","testing",l.id]}),t.models.pdfCollection.fetch({success:function(e){if(e.models&&0!=e.models.length){x=e.models[0];var t=JSON.parse(e.models[0].attributes.data);b=t.pages[0].annotations[0].properties[0].created,w=t.pages[0].annotations[0].properties[0].state}},error:function(e){console.log(e)}})),this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.showPopupTimeout=setTimeout(function(){var e="";b&&w&&(e="<div class='annotationState'>Erstellt: "+h(new Date(parseInt(b))).format("LLL")+" ("+w+") - <a href='#' data-action-name='editAnnotation'><img src='img/edit2.png' style='height:15px;width:15px' alt='bearbeiten'></a> <a href='#' data-action-name='delAnnotation'><img src='img/del.png' style='height:15px;width:15px' alt='lÃ¶schen'></a></div>"),_=_.replace("{{annotationState}}",e),m.popupOverlay.popover("destroy"),m.popupOverlay.popover({content:function(){return _},html:!0,title:v,template:'<div class="popover annotation_feedback_popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),m.popupOverlay.css({top:d.top+a(".mb-stack-element").offset().top+80,left:d.left+a(".mb-stack-element").offset().left+50+l.dimensions.width/2,position:"fixed"}),m.popupOverlay.popover("show"),a(".annotation_feedback_popover").draggable(),n.patchI18nAttributes(".annotationPopup-container")},400),this.options.application.toggleFeedbackView=this.options.application.toggleFeedbackView||function(){a(".annotationPopup-container").toggleClass("feedback-visible"),a(".annotationPopup-title").parent().toggle()},this.options.application.closeFeedbackView=this.options.application.closeFeedbackView||function(){m.popupOverlay.popover("destroy")},this.options.application.toggleVoting=this.options.application.toggleVoting||function(e){a(e.eventTarget).attr("class").indexOf("annotation_feedback_thumbs_bad")>=0?a(".annotation_feedback_properties").css("display","block"):a(".annotation_feedback_properties").css("display","none"),a(e.eventTarget.parentElement).find(".active").removeClass("active"),a(e.eventTarget).toggleClass("active")},this.options.application.sendFeedback=this.options.application.sendFeedback||function(){var e=a(".annotation_feedback_popover"),t="",i="",n="";e.find(".annotation_feedback_thumbs_good.active").length&&(t=1),e.find(".annotation_feedback_thumbs_bad.active").length&&(t=-1),i=e.find("textarea").val(),a("#negation").prop("checked")&&(n="negation"),a("#kategorieFalsch").prop("checked")&&(n="category"),a("#codeFalsch").prop("checked")&&(n="code"),a("#annotationLang").prop("checked")&&(n="annotationLong"),a("#annotationKurz").prop("checked")&&(n="annotationShort"),this.previewFeedback.comment=i,this.previewFeedback.weight=t,this.previewFeedback.property=n,a(".annotationPopupOverlay").popover("destroy")},this.options.application.editAnnotation=function(){a(".editAnnotation").css("display","block");var e=a('.annotationPopup-container a[data-action-name="editAnnotation"]');e.html("<img src='img/save.png' style='height:15px;width:15px' alt='"+n("Save")+"'>"),e.attr("data-action-name","saveAnnotation");var t=i.getURLParametersByString(u),s=t.type,r=t.isnegation;"symptom"===s?a(".editAnnotation #symptom").prop("checked",!0):"diagnosis"===s?a(".editAnnotation #diagnose").prop("checked",!0):"drug"===s&&a(".editAnnotation #medikament").prop("checked",!0),r&&a(".editAnnotation #editNegation").prop("checked",!0);var o=i.getURLParameterByString("term",u);a(".annotationPopup-content div div").eq(0).html('<input id="annotationEditText" style="width:190px" type="text" name="term" value="'+o+'">')},this.options.application.saveAnnotation=function(){var e="";a("#medikament").prop("checked")&&(e="drug"),a("#symptom").prop("checked")&&(e="symptom"),a("#diagnose").prop("checked")&&(e="diagnosis");var n=a("#editNegation").prop("checked"),s=JSON.parse(x.attributes.data),r=s.pages[0].annotations[0].uri;r=r.replace(/\?type=(.+)&/,"?type="+e+"&"),null==r.match(/isnegation/)&&n&&(r+="&isnegation=true"),r=r.replace("term="+encodeURI(i.getURLParameterByString("term",u)),"term="+a("#annotationEditText").val()),s.pages[0].annotations[0].uri=r,x.set("data",s),x.save();var o={0:255,1:0,2:0};"drug"==e?(o["0"]=210,o["1"]=105,o["2"]=30):"symptom"==e?(o["0"]=0,o["1"]=0,o["2"]=255):"diagnosis"==e&&(o["0"]=0,o["1"]=128,o["2"]=0),t.views.trigger("preview:text:annotations:change",{page:s.pages[0].page,createOrUpdate:[{id:l.id,subtype:"Link",rect:s.pages[0].annotations[0].rects[0],color:o,url:r}]}),m.popupOverlay.popover("destroy")},this.options.application.delAnnotation=function(){x.collection.remove(x);var e=JSON.parse(x.attributes.data);t.views.trigger("preview:text:annotations:change",{page:e.pages[0].page,"delete":[{id:l.id}]}),m.popupOverlay.popover("destroy")}}},updateFeedbackContentStr:function(e){var t='        <div class="action closeFeedbackView" data-action-name="closeFeedbackView"><i class="icon-remove"></i></div>        <div class="annotation_feedback_title" data-i18n="feedback_send">'+n("feedback_send")+'</div>        <div class="annotation_feedback_thumb_container">          <span data-i18n="result_rate">'+n("result_rate")+'</span>          <div class="annotation_feedback_thumbs">            <div class="annotation_feedback_thumbs_good" data-action-name="toggleVoting"><i class="icon-smile"></i></div>            <div class="annotation_feedback_thumbs_bad" data-action-name="toggleVoting"><i class="icon-frown"></i></div>          </div>          <div class="annotation_feedback_properties">            <form>              <input type="radio" name="fb_prop" value="negation" id="negation" checked>              <label for="negation">Negation</label><br>              <input type="radio" name="fb_prop" value="kategorieFalsch" id="kategorieFalsch">              <label for="kategorieFalsch">Kategorie falsch</label><br>              <input type="radio" name="fb_prop" value="codeFalsch" id="codeFalsch">              <label for="codeFalsch">Code falsch</label><br>              <input type="radio" name="fb_prop" value="annotationLang" id="annotationLang">              <label for="annotationLang">Annotation zu lang</label><br>              <input type="radio" name="fb_prop" value="annotationKurz" id="annotationKurz">              <label for="annotationKurz">Annotation zu kurz</label>            </form>          </div>        </div>        <div class="annotation_feedback_description_container">          <textarea rows="4" placeholder="'+n("feedback_description")+'"></textarea>        </div>        <div class="annotation_feedback_submit">          <button class="btn" data-action-name="closeFeedbackView" data-i18n="cancel">'+n("Cancel")+'</button>          <button class="btn send" data-action-name="sendFeedback" data-i18n="submit_feedback">'+n("submit_feedback")+"</button>        </div>      ",i='      <div class="annotation_feedback_content_container">        <div style="float:right;margin-right:20px;margin-top:20px;">          Negation:<br>          <label class="switch">            <input id="editNegation" type="checkbox">            <span class="slider round"></span>          </label>          </div>        <div class="annotation_feedback_properties" style="display:block">          <form>            <input type="radio" name="fb_prop" value="symptom" id="symptom" checked>            <label for="symptom">Symptom</label><br>            <input type="radio" name="fb_prop" value="medikament" id="medikament">            <label for="medikament">Medikament</label><br>            <input type="radio" name="fb_prop" value="diagnose" id="diagnose">            <label for="diagnose">Diagnose</label>          </form>        </div>      </div>      ',s=a(e.el)[0].outerHTML,r='<div class="annotationPopup-container"><div class="annotationPopup-content">'+s+'</div>{{annotationState}}<div class="annotationPopup-feedback">'+t+'</div><div class="editAnnotation">'+i+"</div>";return r},updateSelTextFeedbackContentStr:function(e){var t='        <div class="action closeFeedbackView" data-action-name="closeFeedbackView"><i class="icon-remove"></i></div>        <div class="annotation_feedback_title" data-i18n="feedback_send">'+n("feedback_send")+'</div>        <div class="annotation_feedback_thumb_container">          <span data-i18n="result_rate">'+n("result_rate")+'</span>        </div>        <div class="annotation_feedback_content_container">          <div style="float:right;margin-right:20px;margin-top:20px;">            Negation:<br>            <label class="switch">              <input id="negation" type="checkbox">              <span class="slider round"></span>            </label>            </div>          <div class="annotation_feedback_properties" style="display:block">            <form>              <input type="radio" name="fb_prop" value="symptom" id="symptom" checked>              <label for="symptom">Symptom</label><br>              <input type="radio" name="fb_prop" value="medikament" id="medikament">              <label for="medikament">Medikament</label><br>              <input type="radio" name="fb_prop" value="diagnose" id="diagnose">              <label for="diagnose">Diagnose</label>            </form>          </div>        </div>        <div class="annotation_feedback_description_container">          <textarea rows="4" placeholder="'+n("feedback_description")+'"></textarea>        </div>        <div class="annotation_feedback_submit">          <button class="btn" data-action-name="closeFeedbackView" data-i18n="cancel">'+n("Cancel")+'</button>          <button class="btn send" data-action-name="sendFeedbackSelection" data-i18n="submit_feedback">'+n("submit_feedback")+"</button>        </div>      ",i=a(e.el)[0].outerHTML,s='<div class="annotationPopup-container"><div class="annotationPopup-content">'+i+'</div><div class="annotationPopup-feedback">'+t+"</div>";return s},onAnnotationMouseLeave:function(){},onAnnotationTextSelected:function(e){console.log(e.targetInfo);var t=e.application,o=e.model,l=e.model,u=e.targetInfo,h=decodeURIComponent(u.href),d=u.offset,p=(u.dimensions,a(".mb-stack-element"));p.offset();var m=e.targetInfo.value,f=e.targetInfo.textOffset,g=e.targetInfo.pageIndex,v=e.targetInfo.pdfPoints,_=e.targetInfo.url,y=this,b={},w=this.options.annotationPopupTemplate.properties;w["mes:summary"]?(w=i.getURLParametersByString(h),b["mes:summary"]=[],s.each(w,function(e,t){b["mes:summary"].push({name:t,value:e})}),b=s.extend(b,w)):s.each(w,function(e,t){e&&(b[t]=i.getURLParameterByString(t,h))}),e.application.previewFeedback=s.extend({model:o,target:u,href:h},b);var o=new r;o.load(b);var x,M,T=this.options.annotationPopupTemplate.createView({model:o,application:this.options.application,parent:this});
this.options["enable-feedback"]?(x=this.getFeedbackTitle(),M=this.updateSelTextFeedbackContentStr(T)):(x="",M='<div class="annotationPopup-container">'+a(T.el)[0].outerHTML+"</div>"),this.showPopupTimeout&&clearTimeout(this.showPopupTimeout),this.showPopupTimeout=setTimeout(function(){y.popupOverlay.popover("destroy"),y.popupOverlay.popover({content:function(){return M},html:!0,title:x,template:'<div style="top:0px;left:0px;" class="popover annotation_feedback_popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),y.popupOverlay.css({top:d.top+a(".mb-stack-element").offset().top-30,left:d.left+a(".mb-stack-element").offset().left+100,position:"fixed"}),y.popupOverlay.popover("show"),a(".annotation_feedback_popover").draggable(),n.patchI18nAttributes(".annotationPopup-container"),a(".annotationPopup-container").toggleClass("feedback-visible"),a(".annotationPopup-title").parent().toggle()},400),this.options.application.closeFeedbackView=this.options.application.closeFeedbackView||function(){y.popupOverlay.popover("destroy")},this.options.application.sendFeedbackSelection=function(){var e="";a("#medikament").prop("checked")&&(e="drug"),a("#symptom").prop("checked")&&(e="symptom"),a("#diagnose").prop("checked")&&(e="diagnosis"),this.models.pdfCollection=this.models.pdfCollection||new c.PreviewFeedbackCollection(null,{channels:this.models.defaultChannels,appid:this.appid,path:["itemdata"]});var i=[];s.each(v,function(e){i.push({left:e[0],top:e[1],right:e[2],bottom:e[3]})});var n="https://entity.mindbreeze.com/?type="+e+"&term="+encodeURIComponent(m),r=new c.PreviewFeedbackModel({path:["itemdata","testing"],data:{pages:[{page:g,annotations:[{text:m,char_offset:f,rects:i,uri:n,properties:[{viewerUrl:_,created:""+(new Date).getTime(),state:"initial"}]}]}]},property:[{key:"category_instance",value:l.get("categoryinstance")},{key:"category",value:l.get("category")},{key:"key",value:l.get("mes:key")},{key:"group",value:"testValue"},{key:"data_type",value:"mindbreeze.api.v2.TextAnnotations"}]}),o=this;r.on("change:path",function(r){var l=r.attributes.path[2],u=a(".annotationPopup-feedback textarea").val();o.previewFeedback.comment=u,o.previewFeedback.property=e,o.previewFeedback.pageIndex=g,o.previewFeedback.selected=m,o.previewFeedback.textOffset=f,o.previewFeedback.rects=i;var c={0:255,1:0,2:0};"drug"==e?(c["0"]=210,c["1"]=105,c["2"]=30):"symptom"==e?(c["0"]=0,c["1"]=0,c["2"]=255):"diagnosis"==e&&(c["0"]=0,c["1"]=128,c["2"]=0);var h=[];s.each(i,function(e){h.push({id:l,subtype:"Link",rect:e,color:c,url:n})}),t.views.trigger("preview:text:annotations:change",{page:g,createOrUpdate:h})}),this.models.pdfCollection.add(r),a(".annotationPopupOverlay").popover("destroy")}}}),o.prototype.getPersonalizationApplication=function(e){var t=this.application.previewFeedback;return t&&t[e.field]?t[e.field]+"":void 0},d.DEFAULT_TEMPLATE=l,d}),Mindbreeze.define("text!components/summarize/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template">\n  {{#orderable?}}\n    <fieldset id="summarizeby">\n      <legend><h2>{{{i18n.client_toolbar_summarize_by_label}}}</h2></legend>\n      <select data-bind="summarize_by.property" data-action-object="{&quot;changeSummarizeBy&quot;:{&quot;key&quot;:&quot;property&quot;}}" data-event-mask="change" aria-label="{{{i18n.client_toolbar_summarize_by_label}}}">\n          <option></option>\n        {{#orderable}}\n          <option value="{{name}}">{{localized_name}}</option>\n        {{/orderable}}\n      </select>\n      {{#orderable?}}\n        <small>{{{i18n.client_toolbar_sortingalgorithm_label}}}</small>\n        <div class="mb-line-item">\n          <select data-bind="summarize_by.order_property" data-action-object="{&quot;changeSummarizeBy&quot;:{&quot;key&quot;:&quot;order_property&quot;}}" data-event-mask="change"aria-label="{{{i18n.client_toolbar_summarize_by_label}}}">\n            {{#orderable}}\n              <option value="{{name}}">{{localized_name}}</option>\n            {{/orderable}}\n          </select>\n          <fieldset class="pull-right" style="margin-left: 0;">\n            <legend class="mb-acc">{{i18n.order_direction}}</legend>\n            <label class="mb-hidden-radio" title="{{i18n.sort_ascending}}">\n              <input type="radio" name="summarize_sortswitch" value="ASCENDING" data-action-object="{&quot;changeSummarizeBy&quot;:{&quot;key&quot;:&quot;order_direction&quot;,&quot;value&quot;:&quot;ASCENDING&quot;}}">\n              <span>\n                <i class="icon-sort-by-alphabet"></i>\n                <span class="mb-acc">{{i18n.sort_ascending}}</span>\n              </span>\n            </label>\n            <label class="mb-hidden-radio" title="{{i18n.sort_descending}}">\n              <input type="radio" name="summarize_sortswitch" value="DESCENDING"data-action-object="{&quot;changeSummarizeBy&quot;:{&quot;key&quot;:&quot;order_direction&quot;,&quot;value&quot;:&quot;DESCENDING&quot;}}">\n              <span>\n                <i class="icon-sort-by-alphabet-alt"></i>\n                <span class="mb-acc">{{i18n.sort_descending}}</span>\n              </span>\n            </label>\n          </fieldset>\n        </div>\n      {{/orderable?}}\n    </fieldset>\n  {{/orderable?}}\n</script>'}),Mindbreeze.define("components/summarize/js/summarize",["utils/string","client/template","client/resourceinfo","component!base","text!../mustache/template.mustache","service/channel","underscore"],function(e,t,i,n,s,r,a){var o=t.extend({schema:new t.Schema({attributes:{enabled:{title:"editor_summarize_by_enable",type:"boolean",defaultValue:!1}}}),initialize:function(){t.prototype.initialize.apply(this,arguments)},createSubView:function(e,i,n){var i=a.extend(this.schema.parseAttributes(this.attributeModel.getCamelCase()),i);if(i.enabled){var s=t.prototype.createSubView.apply(this,[e,i,n]),r=t.prototype.createSubView.apply(this,[e,i,n]);return r.render,s.el.parentNode.removeChild(s.el),r.render=function(){var e=s.el.innerHTML;return e!==this.el.innerHTML&&(this.el.innerHTML=e),this.$el.find("[data-bind]").each(function(){var e=this.getAttribute("data-bind"),t=n.get(e.split("."));/input|select/i.test(this.tagName)&&(/checkbox|radio/i.test(this.type)?this.checked=this.value===t:this.value=t||this.value)}),this},r}},hasContent:function(){return!0}});return o.View=n.extend({}),o.DEFAULT_TEMPLATE=s,o}),Mindbreeze.define("text!components/menu/mustache/template.mustache",[],function(){return'<script type="text/x-mustache-template" data-tag-name="li">\n  \n  {{#href?}}\n    <a class="{{className}}" href="{{href}}">{{#icon?}}<i class="icon-{{icon}}"></i>{{/icon?}} <span data-i18n="{{title}}">{{translated_title}}</span></a>\n  {{/href?}}\n\n  {{^href?}}\n\n    {{#subTitle?}}\n      <div class="dropright mb-dropdown-menu">\n        <button class="dropdown-toggle action" data-action-name="toggleDropdown">\n          <span>{{title}}</span>\n          <i class="icon-caret-down"></i>\n        </button>\n        <div class="dropdown-menu dropdown-menu-right">\n          <a class="dropdown-item" data-action-object="{{subActionObject}}">{{subTitle}}</a>\n        </div>\n      </div>\n    {{/subTitle?}}\n\n    {{^subTitle?}}\n      <button class="{{className}}" {{#actionObject?}}data-action-object="{{actionObject}}"{{/actionObject?}} {{#actionName?}}data-action-name="{{actionName}}"{{/actionName?}}>\n        {{#icon?}}<i class="icon-{{icon}}"></i>{{/icon?}} <span data-i18n="{{title}}">{{translated_title}}</span> \n      </button>\n    {{/subTitle?}}\n\n  {{/href?}}\n\n</script>\n\n'}),Mindbreeze.define("components/menu/js/menu",["client/templates","client/views/list","text!../mustache/template.mustache","underscore"],function(e,t,i,n){var s=t.extend({setModel:function(){t.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"reset",function(){var e=this;this.model.each(function(t){e.addOne(t,t.collection)})})},createEntryView:function(e){return e=n.clone(e),e.application=this.options.application,this.options.node.children[0].template.createView(e)}});return e.add({name:"menu",view:s,attributes:{model:{name:"model",type:"string",defaultValue:"topMenu"}},content:{name:"template",type:"string"},default_template:i})}),Mindbreeze.define("model/alertcenter",["client/template","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","backbone","underscore","jquery","i18n/i18n","api/v2/common","api/v2/persisted","service/channel","service/channels","api/v2/resources","client/resourceinfo"],function(e,t,i,n,s,r,a,o,l,u,c){var h=r.Model.extend({defaults:{alertBase:"weekly"},parse:function(e){var t=u.mapByPluck(e&&e.property,"key");if(e.data||(e.data="{}"),e&&t){var i=window.location.origin+window.location.pathname+"?emailalert="+e.path.join("-"),n=JSON.parse(e.data),s=n&&n.user&&n.user.query&&n.user.query.and&&n.user.query.and[0]&&n.user.query.and[0].unparsed,r=e.owner,a=t.referenced_notification&&(t.referenced_notification.reference_value||t.referenced_notification.value);t&&t.name&&t.name.value;var o=t&&t.group_tag&&t.group_tag.value,c=e.path[1];return{id:e.path.join("/"),path:e.path,query:JSON.parse(e.data),description:t.description.value,link:i,groupTag:o||l("general"),userquery:s,owner:r,frequency:c,referenced_notification:a}}},toJSON:function(){var e=this.attributes,t=e.path;t||(t=["emailalert",e.alertBase]);var i=e.owner,n={path:t,data:JSON.stringify(e.query),owner:i,property:[{key:"description",value:e.description},{key:"group_tag",value:e.groupTag}]};return e.referenced_notification&&n.property.push({key:"referenced_notification",value:e.referenced_notification}),n},getOrderBy:function(){return this.attributes&&this.attributes.query&&this.attributes.query.orderby?this.attributes.query.orderby:null}}),d=i.extend({model:h,usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new n({path:"persistedresources"}),i.prototype.initialize.apply(this,arguments),this.path=t.path,this.property=t.property,this.owner=t.owner},parse:function(e){return e.persisted_resources},sort_key:"frequency",comparator:function(e){return e.get(this.sort_key)},sortByAttr:function(e){this.sort_key=e,this.sort()}}),p=r.Model.extend({defaults:{alertBase:""},parse:function(e){var t=u.mapByPluck(e&&e.property,"key");if(e&&t&&e.data.length){var i=window.location.origin+window.location.pathname+"?emailalert="+e.path.join("-");return{id:e.path.join("/"),path:e.path,data:JSON.parse(e.data),description:t.description.value,name:t.name&&t.name.value,link:i,enabled:t&&t.enabled&&t.enabled.value}}},toJSON:function(){var e=this.attributes,t=e.path;return{path:t,data:JSON.stringify(e.data),property:[{key:"name",value:e.name},{key:"description",value:e.description},{key:"enabled",value:e.enabled||"true"}]}},getOrderBy:function(){return this.attributes&&this.attributes.query&&this.attributes.query.orderby?this.attributes.query.orderby:null}}),m=i.extend({model:p,usePaths:!0,initialize:function(e,t){t=t||{},t.serviceStub=t.serviceStub||new n({path:"persistedresources"}),i.prototype.initialize.apply(this,arguments),this.path=t.path,this.property=t.property,this.owner=t.owner},parse:function(e){return e.persisted_resources},sort_key:"frequency",comparator:function(e){return e.get(this.sort_key)},sortByAttr:function(e){this.sort_key=e,this.sort()}}),f=r.Model.extend({initialize:function(){var e=this;this.persisted=new c({channels:this.get("channel")});var t=this.get("serviceInfo").persistedCollectionSchemaAvailable(["emailalert"],this.get("channel"));t.done(function(t){e.set("available",t)})},getAlertWithPath:function(e,t,i,n){a.isArray(e)||(e=e.split(n&&n.splitSign||"-"));var s=this,r=this.persisted.resources(e);r.fetch({success:function(e){t(s.parseEmailAlert(e&&e.models&&1===e.models.length&&e.models[0]))},error:i})},getFrequency:function(e,t,i){var n=this;a.isArray(e)||(e=e.split("/"));var s=this.persisted.collections(e);s.fetch({success:function(e){e&&e.models&&e.models.length&&(n.set("frequency",new r.Collection(e.models)),t(e.models))},error:i})},getUser:function(e,t,i){var n=this;a.isArray(e)||(e=e.split("/"));var s=this.get("serviceInfo").userSourceInfo.get("user_name"),r=this.persisted.resources(e);r.owner=s,this.set("user",r),this.get("user").fetch({success:function(e){e&&e.models&&e.models[0]&&(n.set("user",e.models[0]),t(e.models))},error:i})},getACL:function(e,t,i){var n=this;a.isArray(e)||(e=e.split("/"));var s=this.persisted.collections(e);s.fetch({success:function(e){if(e&&e.models&&e.models[0]){var i=e.models[0];n.set("acl",i),t(e.models)}},error:i})},getSchemaAvailabilityByPath:function(e){return this._schemas=this._schemas||{},this._schemas[e]?this._schemas[e]:void 0},getSchemaByPath:function(e,t,i,n){var s=this.getSchemaAvailabilityByPath(e);if(s)i(s);else{var r=this;a.isArray(e)||(e=e.split("/"));var o=this.persisted.schema(e);o.fetch({success:function(t,n){if(n&&n.schemas&&n.schemas[0]){var n=n.schemas[0];r._schemas[e]=n,i(n)}},error:n})}},getAlerts:function(e,t,i){var n=this,s=new d(null,{channels:this.get("channel"),appid:e.application.appid,path:e.path,owner:e.owner});this.set("alerts",s),this.get("alerts").fetch({success:function(e){t(n.parseFetchedAlert(e&&e.models))},error:i})},getAlertPresets:function(e,t,i){var n=this,s=new m(null,{channels:this.get("channel"),appid:e.application.appid,path:e.path,property:[{key:"enabled",value:"true"}]});this.set("alert_presets",s),this.get("alert_presets").fetch({success:function(e){t(n.parseFechedAlertPresets(e&&e.models))},error:i})},select:function(){return this.persisted.resources(["emailalert"])},parseEmailAlert:function(e){return e?(e.set("data",JSON.parse(e.get("data"))),e):null},parseFetchedAlert:function(e){return e},parseFechedAlertPresets:function(e){return e}}),g={};return g={AlertModel:h,AlertCollection:d,GlobalAlertedSearchesModel:p,GlobalAlertCollection:m,EmailAlertsModel:f}}),Mindbreeze.define("text!components/emailalert/mustache/template.mustache",[],function(){return'<div data-template="treeview">\n  <script type="text/x-mustache-template">\n    {{^description?}}\n      <div class="frequency-headline">{{name}}</div>\n    {{/description?}}\n    {{#description?}}\n      <div class="mb-alert mb-flexbox-container" data-action-object="{&quot;editUserAlert&quot;:{ {{#referenced_notification?}} &quot;referenced_path&quot;: true {{/referenced_notification?}} }}"> \n      <div class="alert-text mb-flex-element">\n        <div class="alert-title">{{#referenced_notification?}} <i class="icon-globe"></i> {{/referenced_notification?}} {{description}}</div>\n        <div class="alert-content">\n          <span class="userquery">"{{userquery}}"</span>\n        </div>\n      </div>\n      <div class="group-headline-edit mb-fix-flex-element">\n        <div title="Edit" data-action-object-unused="{&quot;editUserAlert&quot;:{ {{#referenced_notification?}} &quot;referenced_path&quot;: true {{/referenced_notification?}} }}"><i class="icon-edit"></i></div>\n        <div title="Duplicate" data-action-name="duplicateUserAlert"><i class="icon-copy"></i></div>\n        <div title="Share" data-action-name="shareUserAlert"><i class="icon-share"></i></div>\n        <div title="Delete" data-action-name="deleteUserAlert"><i class="icon-trash"></i></div>\n        <div class="mb-alert-action-container">\n          <input type="text" value="{{link}}">\n        </div>\n      </div>\n    </div>\n    {{/description?}}\n  </script>\n</div>\n'}),Mindbreeze.define("text!components/emailalert/mustache/header.mustache",[],function(){return'<div class=\'mb-notifications-create-header\'>\n  <label class="mb-notifications-header-item" data-i18n="client_notification_title"></label>\n  <input type=\'text\' name=\'notification_description\'>\n</div>\n<div class=\'mb-notifications-create-header descriptionGlobal useradmin\'>\n  <label class="mb-notifications-header-item" data-i18n="client_notification_description"></label>\n  <input type=\'text\' name=\'notification_title\'>\n</div>\n<div class=\'mb-notifications-create-header updateSubscription\'>\n  <label class="mb-notifications-header-item" data-i18n="client_alert_base"></label>\n  <select name=\'notification_alert_base\'></select>\n</div>\n<div class=\'mb-notifications-create-header updateSubscription\'>\n  <label class="mb-notifications-header-item" data-i18n="client_group_tag"></label>\n  <input type=\'text\' name=\'notification_group_tag\'>\n</div>\n<div class=\'mb-notifications-create-header\'>\n  <label class="mb-notifications-header-item" data-i18n="client_notification_email"></label>\n  <input type=\'text\' name=\'notification_email\'>\n</div>\n<div class=\'mb-notifications-create-header\'>\n  <label class="mb-notifications-header-item" data-i18n="client_notification_user"></label>\n  <input type=\'text\' name=\'notification_user\'>\n</div>\n<div class="mb-notifications-actions">\n  <button class=\'btn btn-default addalert\' data-action-name=\'createOrUpdateNotification\' tabindex="0" data-i18n="client_create_notification"></button>\n  <button class="btn btn-default updatealert" data-action-name="updateNotification" tabindex="0" data-i18n="client_notification_update_notifications_template"></button>\n  <button class="btn btn-default updateabo" data-action-name="updateSubscription" tabindex="0" data-i18n="client_notification_update_abo_notifications_template"></button>\n  <button class="btn btn-default updateGlobalAbo" data-action-name="updateGlobalSubscription" tabindex="0" data-i18n="client_notification_update_abo_notifications_template"></button>\n  <button class="btn createGlobalTemplate useradmin" data-action-name="createTemplate" tabindex="0" data-i18n="client_notification_create_notifications_template"></button>\n</div>\n'}),Mindbreeze.define("model/grouped_collection",["backbone","utils/events","underscore"],function(e,t,i){var n=[];return n.push,n.slice,n.splice,e.Collection.extend({initialize:function(e,t){this.delegate=t.delegate,this.groupingPath=t.groupingPath,this.compareFunctions=t.compareFunctions,this.listenTo(this.delegate,"add remove change",this.updateCollection),this.delegate.length&&this.updateCollection()},reset:function(){},updateCollection:function(){var t=this.groupingPath,n=this,s=n.delegate;s.each(function(s){var r=i.map(t,function(e){return s.get(e)}),a=i.reduce(r,function(t,n){if(!i.isUndefined(n)&&!i.isUndefined(t)){var s=t.get(n);return s||(t.add({id:n,name:n,children:new e.Collection}),s=t.get(n)),s.get("children")}},n);a&&a.add(s)})}})}),Mindbreeze.define("components/emailalert/js/emailalert",["client/template","i18n/i18n","component!base","component!treeview","client/views/list","api/v2/search","utils/browser","utils/clone","utils/dom","utils/url","utils/mustache","utils/jsonpath","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","api/v2/common","utils/localStorage","backbone","underscore","jquery","model/alertcenter","api/v2/persisted","service/channel","service/channels","api/v2/resources","api/v2/search","client/resourceinfo","text!../mustache/template.mustache","text!../mustache/header.mustache","model/grouped_collection","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,T,k,r,C,L,D,E){var S=e.extend({initialize:function(){this.initializationPromise=new M.DeferredCallFinished,e.prototype.initialize.apply(this,y.toArray(arguments));var t=this.application.models.emailAlerts.get("serviceInfo").userSourceInfo.get("user_name");this.getEmailAlerts(["emailalert"],t)},getEmailAlerts:function(e,t){var i=this;this.application.models.emailAlerts.getAlerts({path:e,owner:t,application:this.application},function(){i.initializationPromise.triggerDone()},function(){i.initializationPromise.triggerDone()})},hasContent:function(){return!0},model:function(){return new E([],{delegate:this.application.models.emailAlerts.get("alerts"),groupingPath:["frequency","groupTag"],compareFunctions:[function(e,t){return e-t}]})},createView:function(t){var t=y.extend(this.schema.parseAttributes(this.attributeModel.getCamelCase()),t);return e.prototype.createView.apply(this,[t])},schema:new e.Schema({attributes:{title:{type:"string",title:"editor_user_alerts_title"},"allow-edit":{title:"editor_allow_edit",type:"boolean",defaultValue:!0,"default":!0},"edit-alert-btn-title":{type:"string",title:"editor_add_new_user_title"}}})});return S.View=i.extend({defaultOptions:{titleTagName:"h2"},initialize:function(){var e=this;this.options.allowEdit=this.options["allow-edit"]||!0,b(this.el).addClass("notification_alerts"),this.titleEl=this.make(this.options.titleTagName||this.defaultOptions.titleTagName,{"class":this.options.titleClassName,id:"userAlerts-title-"+this.cid},this.options.title?t(this.options.title):t("userAlerts")),b(this.el).prepend(this.titleEl),b(this.titleEl).attr("data-i18n",this.options.title||"userAlerts"),this.options.allowEdit&&(this.addButton=this.make("button",{"class":"addAlertBtn","data-action-name":"addAlert"},this.options.editAlertBtnTitle?t(this.options.editAlertBtnTitle):t("add_new_alert")),b(this.addButton).attr("data-i18n",this.options.editAlertBtnTitle||"add_new_alert"),b(this.el).prepend(this.addButton)),this.options.application.models.emailAlerts.getFrequency(["emailalert"],function(){},function(){}),this.options.application.models.emailAlerts.getUser(["user","default"],function(){},function(){}),this.options.application.models.emailAlerts.getSchemaByPath(["emailalert"],this.options.application,function(t){var i=t&&t.property_definitions,n=y.find(i,function(e){return"referenced_notification"==e.key}),s=n&&n.reference_target_collection_path;s&&e.options.application.models.emailAlerts.getACL(s,function(){var t=e.options.application.models.emailAlerts.get("acl"),i=t.get("operations").operations.indexOf("CREATE_ENTRY")>=0?!0:!1;i&&b("body").addClass("useradmin")},function(){})},function(){})},remove:function(){_.View.prototype.remove.apply(this,arguments)}}),f.prototype.addAlert=function(e){e.event.preventDefault(),this.alertsStackManager(e)},f.prototype.alertsStackManager=function(e){var t=this.models.emailAlerts.get("acl"),i=t.get("operations").operations.indexOf("CREATE_ENTRY")>=0?!0:!1,n="",s="client_add_notifications",r=this.models.emailAlerts.get("user")&&this.models.emailAlerts.get("user").get("properties")||this.models.emailAlerts.get("user").at(0)&&this.models.emailAlerts.get("user").at(0).get("properties"),a=this.models.userSourceInfo.get("user_name"),o=r&&r.email,r=r&&r.user,l={startSearch:!1,user_name:a,user:r,email:o,el:"mb-add-notification-stack"};l.properties={},l.properties.model=e.model,e.edit?(n+="edit",l.properties.edit=!0,e.referenced_path?(n+=" subscribe",l.properties.referenced_notification_available=!0,s="client_notification_update_abo_notifications_template"):s="client_notification_update_notifications_template"):e.subscribe?(n+="subscribe",s="client_notification_subscribe_notifications_template",l.properties.subscribe=!0):e.duplicate?(n+="duplicate",l.properties.duplicate=!0):e.editSubscribed?(n+="adminEditSubscription",s="client_notification_update_abo_notifications_template",l.properties.subscribe=!0,l.properties.editSubscription=!0):(l.userQuery=this.parentApplication.getUnparsedUserQuery(),delete l.properties),i&&(n+=" useradmin");var u="<div id='mb-add-notification-stack' class='"+n+"'><div class='mb-stack-title-group-notification' data-i18n="+s+"></div>"+D+"</div>",c=this.parentApplication&&this.parentApplication.rootElsClone||this.rootElsClone;if(c.id)var h=c.id;else var h=c;b("body").addClass("mb-add-alert");var d=b(h);d.find("[data-template='profilesettings']").remove(),d.find("#notifications").remove(),this.pushStack({title:u,"template-ref":h,useRootElement:!0,action:"runSavedAlertSearch",applicationOptions:l})},f.prototype.runSavedAlertSearch=function(e){e.applicationOptions.user_name;var t=e.applicationOptions.user,i=e.applicationOptions.email;this.models.search.input.set("count",5,{silent:!0});var n=b("#"+e.applicationOptions.el);t&&b(n.find("input[name='notification_user']")).attr("user",t).parent().hide(),i&&b(n.find("input[name='notification_email']")).attr("email",i).parent().hide(),y.each(this.models.emailAlerts.get("frequency").models,function(t){t.path;var i=y.find(t.get("property"),function(e){return"displayname"==e.key}).value;b("#"+e.applicationOptions.el+" select").append(b("<option>",{value:t.get("path").join("/"),text:i}))});var s=y.filter(y.map(y.uniq(this.models.emailAlerts.get("alerts").models,function(e){return e.get("groupTag")}),function(e){return e.get("groupTag")}),function(e){return void 0!=e}),a=b("input[name='notification_group_tag']");if(a.autocomplete({source:s,minLength:0,appendTo:a.parent()}),e.applicationOptions.properties&&(e.applicationOptions.properties.edit||e.applicationOptions.properties.duplicate||e.applicationOptions.properties.subscribe)){if(e.applicationOptions.properties.subscribe){var o=e.applicationOptions.properties.model.get("data");this.models.search.input.set(r.SearchRequest.parse(o));var l=e.applicationOptions.properties.model.get("name");if(e.applicationOptions.properties.editSubscription){var u=e.applicationOptions.properties.model.get("description");b(n.find("input[name='notification_title']")).val(u)}}else{if(e.applicationOptions.properties.referenced_notification_available){var c=e.applicationOptions.properties.model.get("referenced_notification"),h=y.find(this.models.emailAlerts.get("alert_presets")&&this.models.emailAlerts.get("alert_presets").models,function(e){return y.isEqual(c,e.get("path"))});if(h){var d=h.get("data");this.models.search.input.set(r.SearchRequest.parse(d))}else{var o=e.applicationOptions.properties.model.get("query");this.models.search.input.set(r.SearchRequest.parse(o))}}else{var p=this.options.retainViewSourceContextConstraints;this.options.retainViewSourceContextConstraints=!0;var o=e.applicationOptions.properties.model.get("query");this.models.search.input.set(r.SearchRequest.parse(o)),this.options.retainViewSourceContextConstraints=p}var m=e.applicationOptions.properties.model.get("groupTag"),f=e.applicationOptions.properties.model.get("path"),g=f[0]+"/"+f[1],l=e.applicationOptions.properties.model.get("description");b(n.find("select[name='notification_alert_base']")).val(g),b(n.find("input[name='notification_group_tag']")).val(m)}b(n.find("input[name='notification_description']")).val(l)}else this.setUnparsedUserQuery(e.applicationOptions.userQuery)},f.prototype.createOrUpdateNotification=function(e){function t(e){e.models.stack.pop()}function i(e,t,i,n,s,r,a,o){var l={email:e,alertBase:t,description:i,groupTag:s,query:r,owner:a};return o&&(l.referenced_notification=o),new w.AlertModel(l)}if(!e.event.handled){e.event.handled=!0;var n=this,s=b("#mb-add-notification-stack");if(b("input[name='notification_description']").val()){var s=document.body;if(e.update){var r=e.model,a=b(b(s).find("input[name='notification_title']")).val(),o=b(b(s).find("input[name='notification_description']")).val(),l=this.models.search.input.toJSON();r.set("name",o),r.set("description",a),r.set("data",l),r.save(null,{success:function(){t(n)},error:function(){}})}else{var o=b(b(s).find("input[name='notification_title']")).val(),a=b(b(s).find("input[name='notification_description']")).val(),u=b(b(s).find("input[name='notification_email']")).val()||b(b(s).find("input[name='notification_email']")).attr("email"),c=b(b(s).find("input[name='notification_group_tag']")).val(),h=b(b(s).find("select[name='notification_alert_base']")).val(),d=b(b(s).find("input[name='notification_user']")).val()||b(b(s).find("input[name='notification_user']")).attr("user"),l=this.models.search.input.toJSON(),p=e.model&&e.model.get("applicationOptions");if(e.userUpdate){var m="",f=e.model.get("referenced_notification");m=y.isArray(f)?e.model.get("referenced_notification").join("/"):e.model.get("referenced_notification");var g=e.model.get("query")}else{var g={};if(p&&p.properties&&p.properties.subscribe){var m=p.properties.model.get("id");g=p.properties.model.get("data")}}var v=!y.isEqual(l.user,g.user),_=this.models.emailAlerts.get("serviceInfo").userSourceInfo.get("user_name");if(v){if(a&&u&&h&&d)if(h=h.split("/")[1],this.models.emailAlerts.get("user")&&this.models.emailAlerts.get("user").get("properties")){var x=i(u,h,a,"",c,l,_);this.models.emailAlerts.get("alerts").add(x),t(this)}else{var M=this.models.emailAlerts.get("user");M.add({properties:{user:d,email:u,active:"true"}});var x=i(u,h,a,"",c,l,_);this.models.emailAlerts.get("alerts").add(x),t(this)}}else{h=h.split("/")[1];var x=i(u,h,a,"",c,l,_,m);this.models.emailAlerts.get("alerts").add(x),t(this)}}}}},f.prototype.editUserAlert=function(e){e.event.preventDefault(),e.edit=!0,this.alertsStackManager(e)},f.prototype.updateNotification=function(e){var t=e.model&&e.model.get("applicationOptions");if(t){var i=t.properties.model;this.models.emailAlerts.get("alerts").remove(i),this.createOrUpdateNotification(e)}},f.prototype.duplicateUserAlert=function(e){e.event.preventDefault(),e.duplicate=!0,this.alertsStackManager(e)},f.prototype.shareUserAlert=function(e){b(e.eventTarget.parentElement).toggleClass("active");var t=b(e.eventTarget.parentElement).find("input");t.focus(),t.select();var i=function(e){var t=b(".mb-alert-action-container").find(e.target).length;t||(b("body").unbind("click",i),b(".group-headline-edit").removeClass("active"))};b("body").on("click",i)},f.prototype.deleteUserAlert=function(e){var t=e.model.id;this.models.emailAlerts.getAlertWithPath(t,function(){var t=e.model;t.trigger("destroy",t,t.collection,e)},function(){},{splitSign:"/"})},f.prototype.updateGlobalSubscription=function(e){var t=e.model&&e.model.get("applicationOptions");if(t){var i=t.properties.model;e.update=!0,e.model=i,this.createOrUpdateNotification(e)}},f.prototype.updateSubscription=function(e){var t=e.model&&e.model.get("applicationOptions");if(t){var i=t.properties.model;this.models.emailAlerts.get("alerts").remove(i),e.userUpdate=!0,e.model=i,this.createOrUpdateNotification(e)}},f.prototype.createTemplate=function(e){if(!e.event.handled){e.event.handled=!0;var t=this;this.models.emailAlerts.getSchemaByPath(["emailalert"],this,function(e){var i=e&&e.property_definitions,n=y.find(i,function(e){return"referenced_notification"==e.key}),s=n&&n.reference_target_collection_path;if(s){var r=b("#mb-add-notification-stack"),a=b(b(r).find("input[name='notification_title']")).val(),o=b(b(r).find("input[name='notification_description']")).val();if(!a||!o)return;if(t.models.emailAlerts.get("alert_presets")){var l=new w.GlobalAlertedSearchesModel({model:"GlobalAlertedSearchesModel",path:s,description:a,name:o,data:t.models.search.input.toJSON()});t.models.emailAlerts.get("alert_presets").add(l),t.models.stack.pop()}}},function(){})}},S.DEFAULT_TEMPLATE=L,S}),Mindbreeze.define("text!components/emailalert_preset/mustache/template.mustache",[],function(){return'  <script type="text/x-mustache-template">\n  {{^hidden?}}\n  <div class="mb-alert mb-flexbox-container" data-action-name="subscribeGlobalAlert" tabindex="-1">\n    <div class="alert-text mb-flex-element">\n      <div class="alert-title">{{name}}</div>\n      <div class="alert-content">\n        <div>{{description}} {{hidden}}</div>\n      </div>\n    </div>\n    <div class="group-headline-edit mb-fix-flex-element">\n      <div title="{{i18n.client_alert_edit}}" data-action-name="editGlobalAlert" class="updateGlobalAlert useradmin"><i class="icon-edit"></i></div>\n      <div title="{{i18n.client_notification_subscribe_notifications_template}}" data-action-name="subscribeGlobalAlert"><i class="icon-plus"></i></div>\n      <div title="{{i18n.client_notification_share_notifications_template}}" data-action-name="shareGlobalAlert"><i class="icon-share"></i></div>\n      <div title="{{i18n.client_delete_notifications}}" data-action-name="removeGlobalAlert" class="removeGlobalAlert useradmin"><i class="icon-trash"></i></div>\n      <div class="mb-alert-action-container">\n        <input type="text" value="{{link}}">\n      </div>\n    </div>\n  </div>\n  {{/hidden?}}\n  </script>'
}),Mindbreeze.define("components/emailalert_preset/js/emailalert_preset",["client/template","i18n/i18n","component!base","client/views/list","api/v2/search","utils/browser","utils/clone","utils/dom","utils/url","utils/mustache","utils/jsonpath","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","api/v2/common","utils/localStorage","backbone","underscore","jquery","model/alertcenter","api/v2/persisted","service/channel","service/channels","api/v2/resources","api/v2/search","client/resourceinfo","text!../mustache/template.mustache","model/persisted_collection_application_extensions"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y,b,w,x,M,T,s,k,C){var L=e.extend({initialize:function(){this.initializationPromise=new x.DeferredCallFinished,e.prototype.initialize.apply(this,_.toArray(arguments)),this.getEmailAlertPresets()},getEmailAlertPresets:function(){var e=this;this.application.models.emailAlerts.getSchemaByPath(["emailalert"],this.application,function(t){var i=t&&t.property_definitions,n=_.find(i,function(e){return"referenced_notification"==e.key}),s=n&&n.reference_target_collection_path;s?e.application.models.emailAlerts.getAlertPresets({path:s,application:e.application},function(){e.initializationPromise.triggerDone()},function(){e.initializationPromise.triggerDone()}):e.initializationPromise.triggerDone()},function(){e.initializationPromise.triggerDone()})},hasContent:function(){return!0},model:function(){return this.application.models.emailAlerts.get("alert_presets")},createView:function(t){return t=_.extend(this.attributeModel.getCamelCase(),t,{elementTemplate:this.node.children[0].template}),delete t.node,e.prototype.createView.apply(this,[t])},schema:new e.Schema({attributes:{}})}),D=n.extend({setModel:function(){n.prototype.setModel.apply(this,arguments),this.model&&this.listenTo(this.model,"change",this.addAll)},addAll:function(e,t){if(e&&e.models)for(var i=0;i<e.models.length;i++)this.addOne(e.models[i],e,t)}});return D.EntryView=n.EntryView.extend({createChildView:function(e){return e=_.extend({modelType:"AlertModel"},e),this.options.childViewConstructor.createView(e)}}),L.View=i.extend({defaultOptions:{titleTagName:"h2"},initialize:function(){y(this.el).addClass("notification_alerts"),this.titleEl=this.make(this.options.titleTagName||this.defaultOptions.titleTagName,{"class":this.options.titleClassName,id:"globalAlerts-title-"+this.cid},t(this.options.title)||t("globalAlerts")),y(this.el).prepend(this.titleEl),this.options.title||y(this.titleEl).attr("data-i18n","globalAlerts"),this.list=new D(_.extend({childViewConstructor:this.options.elementTemplate},this.defaultOptions,this.options,{el:null,model:this.model})),this.appendChild(this.list.render().el),this.options.application.editGlobalAlert=this.options.application.editGlobalAlert||function(e){e.event.preventDefault(),e.editSubscribed=!0,this.alertsStackManager(e)},this.options.application.subscribeGlobalAlert=this.options.application.subscribeGlobalAlert||function(e){e.event.preventDefault(),e.subscribe=!0,this.alertsStackManager(e)},this.options.application.shareGlobalAlert=this.options.application.shareGlobalAlert||function(e){y(e.eventTarget.parentElement).toggleClass("active");var t=y(e.eventTarget.parentElement).find("input");t.focus(),t.select();var i=function(e){var t=y(".mb-alert-action-container").find(e.target).length;t||(y("body").unbind("click",i),y(".group-headline-edit").removeClass("active"))};y("body").on("click",i)},this.options.application.removeGlobalAlert=this.options.application.removeGlobalAlert||function(e){var t=e.model;t.set("enabled","false"),t.set("hidden","true"),t.save(null,{success:function(){},error:function(){}})}},remove:function(){v.View.prototype.remove.apply(this,arguments)}}),L.DEFAULT_TEMPLATE=C,L}),Mindbreeze.define("components/alertcenter/js/alertcenter",["client/template","utils/browser","component!base","utils/mustache","utils/jsonpath","utils/persistedsourceinfo","model/persisted_collection","service/stub","client/application","backbone","underscore","jquery","model/alertcenter","api/v2/persisted","service/channel","service/channels","api/v2/resources","client/resourceinfo","model/grouped_collection","api/v2/search"],function(e,t,i,n,s,r,a,o,l,u,c,h,d,p,m,f,g,v,_,y){t.loadCSS(v.scriptLocation+"../client/component/alertcenter/css/alertcenter.css","mbAlertsCSS");var b=function(){this.initialize.apply(this,arguments)};b.prototype=c.extend({},u.Events,{initialize:function(e){this._persistedCollectionSchemaAvailablePromises={},this.userSourceInfo=e,this.listenTo(e,"change reset",this.handleUserSourceInfoChange),this.resolvePromises()},persistedCollectionSchemaAvailable:function(e,t){var i=e+"_"+t.get("url"),n=this._persistedCollectionSchemaAvailablePromises[i];return n?n:(n=new m.DeferredCallFinished,n.path=e,n.channel=t,this._persistedCollectionSchemaAvailablePromises[i]=n,this.resolvePromise(n),n)},handleUserSourceInfoChange:function(){this._userSourceInfoInitialized=!0,this.resolvePromises()},resolvePromises:function(){var e=this;c.forEach(this._persistedCollectionSchemaAvailablePromises,function(t){e.resolvePromise(t)})},resolvePromise:function(e){var t=this.userSourceInfo.get("sources.sources");if(t){var i=t[e.channel.get("url")];if(i){var n=c.find(i.services,function(e){return"persistedcollectionschema"===e.id}),s=c.find(n&&n.options,function(t){return JSON.stringify(t.path)===JSON.stringify(e.path)}),r=!!s&&!!s.effective_available;e.triggerDone(r)}}}});var w=l.prototype.getModel;l.prototype.getModel=function(e){var t=w.apply(this,arguments);return t?t:(/emailAlerts/.test(e)&&(this.models.emailAlerts=new d.EmailAlertsModel({serviceInfo:this.serviceInfo,channel:this.models.channels.at(0)})),void 0)};var x=e.extend({initialize:function(){e.prototype.initialize.apply(this,c.toArray(arguments)),this.application.serviceInfo=new b(this.application.models.userSourceInfo),this.application.getModel("emailAlerts"),this.listenTo(this.application.models.emailAlerts,"change:available",this.handleEmailAlertsAvailabilityChanged)},handleEmailAlertsAvailabilityChanged:function(){var e=this.application.models.emailAlerts&&this.application.models.emailAlerts.get("available");e?(this.startURLParameterSearch(),this.application.models.topMenu.add({id:"alertcenter",weight:5,name:"alertcenter",icon:"bell",actionName:"showAlertCenter"})):this.application.models.topMenu.remove("alertcenter")},startURLParameterSearch:function(){var e=this.application,i=this,n=t.getURLParameter("emailalert");n&&e.models.emailAlerts.getAlertWithPath(n,function(t){e.execute(function(e){if(!e.getUnparsedUserQuery()&&t){var n=y.SearchRequest.parse(t.get("data")),s=i.application.options.retainViewSourceContextConstraints;i.application.options.retainViewSourceContextConstraints=!0,e.models.tabs.add({id:"emailalert",name:"emailalert",disabled:!0},{at:0}),e.models.search.input.set(n),i.application.options.retainViewSourceContextConstraints=s}})},function(){})},createView:function(t){var t=c.extend(this.schema.parseAttributes(this.attributeModel.getCamelCase()),t);return e.prototype.createView.apply(this,[t])},hasContent:function(){return!1},model:function(){return new _([],{delegate:this.application.models.emailAlerts.select({owner:"TODO"}),groupingPath:["frequency","groupTag"],compareFunctions:[function(e,t){return e-t}]})},schema:new e.Schema({attributes:{}})});return x.View=i.extend({}),x}),Mindbreeze.require=function(e){if(currentScript&&currentScript.src){var t=currentScript.src,i=t.replace(/[^\/]*$/,""),t=i+"../",n=Mindbreeze.require.config({baseUrl:i,paths:{"client/editor":"editor",resource:"../../resource",handsontable:"handsontable/handsontable.full.min"},shim:{handsontable:{deps:["jquery"],exports:"Handsontable"}}});return n.config=e.config,n}return e}(Mindbreeze.require),window.Mindbreeze=Mindbreeze}();
